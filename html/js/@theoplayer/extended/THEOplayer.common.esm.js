/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 9.0.0
 Created: 2025-04-03T12:47:30.689Z
 */
var n,Bt,Jo,y,el,nl,rl,hl,l,ol,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==a?a:"undefined"!=typeof global?global:this,a=s.window,h=s.document,al=s.location,ul=s.navigator,u=s.setTimeout,c=s.clearTimeout,cl=s.setInterval,ll=s.clearInterval,v=s.Error,p=s.TypeError,g=(s.SyntaxError,s.Object),w=s.Math,k=s.parseInt,_=s.parseFloat,j=s.isNaN,x=s.Uint8Array,dl=s.Worker,fl=(s.WorkerGlobalScope,s.XMLHttpRequest),_l=g.create,vl=g.defineProperty,gl=g.getOwnPropertyDescriptor,wl=g.getOwnPropertyNames,ml=g.getPrototypeOf,pl=g.prototype.hasOwnProperty,yl=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),t=(l=()=>{"use strict";if("function"==typeof Symbol&&Symbol.iterator)n=Symbol,Bt=null!=(nl=Symbol.for)?nl:Symbol,Jo=Symbol.iterator,y=null!=(rl=Symbol.dispose)?rl:Bt("Symbol.dispose"),el=null!=(hl=Symbol.asyncDispose)?hl:Bt("Symbol.asyncDispose");else{let t=0;n=function(e){return"ul"+e+"_"+ ++t},Jo=(Bt=function(t){return"ul"+t})("Symbol.iterator"),y=Bt("Symbol.dispose"),el=Bt("Symbol.asyncDispose"),n.for=Bt,n.iterator=Jo,n.dispose=y,n.asyncDispose=el}},()=>(l&&(ol=l(l=0)),ol)),Al=yl(((e,i)=>{t(),function(t,s){"object"==typeof e&&void 0!==i?s(e):"function"==typeof define&&define.amd?define(["exports"],s):s((t=t||self).WebStreamsPolyfill={})}(e,(function(t){"use strict";var e="function"==typeof n&&"symbol"==typeof Jo?n:function(t){return"Symbol("+t+")"};function i(){}var s=Number.isNaN||function(t){return t!=t},r=i;function h(t){return"object"==typeof t&&null!==t||"function"==typeof t}function o(t){return t.slice()}function a(t,e,i,s,n){new x(t).set(new x(i,s,n),e)}function u(t){return!1!==function(t){if("number"!=typeof t)return!1;if(s(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function c(t,e,i){if("function"!=typeof t)throw new p("Argument is not a function");return Function.prototype.apply.call(t,e,i)}function l(t,e,i,s){var n=t[e];if(void 0!==n){if("function"!=typeof n)throw new p(n+" is not a method");switch(i){case 0:return function(){return f(n,t,s)};case 1:return function(e){var i=[e].concat(s);return f(n,t,i)}}}return function(){return k(void 0)}}function d(t,e,i){var s=t[e];if(void 0!==s)return c(s,t,i)}function f(t,e,i){try{return k(c(t,e,i))}catch(t){return E(t)}}function _(t){if(t=Number(t),s(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function m(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new p("size property of a queuing strategy must be a function");return function(e){return t(e)}}var y=Promise,A=Promise.prototype.then,b=Promise.resolve.bind(y),T=Promise.reject.bind(y);function S(t){return new y(t)}function k(t){return b(t)}function E(t){return T(t)}function P(t,e,i){return A.call(t,e,i)}function I(t,e,i){P(P(t,e,i),void 0,r)}function C(t,e){I(t,e)}function R(t,e){I(t,void 0,e)}function D(t,e,i){return P(t,e,i)}function N(t){P(t,void 0,r)}var B=function(){function t(){this.hd=0,this._d=0,this.wd={yd:[],bd:void 0},this.Td=this.wd,this.hd=0,this._d=0}return g.defineProperty(t.prototype,"length",{get:function(){return this._d},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this.Td,i=e;16383===e.yd.length&&(i={yd:[],bd:void 0}),e.yd.push(t),i!==e&&(this.Td=i,e.bd=i),++this._d},t.prototype.shift=function(){var t=this.wd,e=t,i=this.hd,s=i+1,n=t.yd,r=n[i];return 16384===s&&(e=t.bd,s=0),--this._d,this.hd=s,t!==e&&(this.wd=e),n[i]=void 0,r},t.prototype.forEach=function(t){for(var e=this.hd,i=this.wd,s=i.yd;!(e===s.length&&void 0===i.bd||e===s.length&&(e=0,0===(s=(i=i.bd).yd).length));)t(s[e]),++e},t.prototype.peek=function(){var t=this.wd,e=this.hd;return t.yd[e]},t}();function M(t,e,i){var s=null;!0===i&&(s=g.prototype);var n=g.create(s);return n.value=t,n.done=e,n}function L(t,e){t.Sd=!0,t.kd=e,e.Ed=t,"readable"===e.Da?V(t):"closed"===e.Da?function(t){V(t),q(t)}(t):H(t,e.Pd)}function O(t,e){return Qe(t.kd,e)}function F(t){"readable"===t.kd.Da?W(t,new p("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){H(t,e)}(t,new p("Reader was released and can no longer be used to monitor the stream's closedness")),t.kd.Ed=void 0,t.kd=void 0}function U(t){return new p("Cannot "+t+" a stream using a released reader")}function V(t){t.Id=S((function(e,i){t.Cd=e,t.Rd=i}))}function H(t,e){V(t),W(t,e)}function W(t,e){N(t.Id),t.Rd(e),t.Cd=void 0,t.Rd=void 0}function q(t){t.Cd(void 0),t.Cd=void 0,t.Rd=void 0}var z=e("[[CancelSteps]]"),X=e("[[PullSteps]]");function G(t,e){void 0===e&&(e=!1);var i=new $(t);return i.Sd=e,i}function Q(t){return S((function(e,i){var s={xd:e,Dd:i};t.Ed.Nd.push(s)}))}function K(t,e,i){var s=t.Ed;s.Nd.shift().xd(M(e,i,s.Sd))}function j(t){return t.Ed.Nd.length}function Y(t){var e=t.Ed;return void 0!==e&&!!tt(e)}var Z,J,$=function(){function t(t){if(!1===Xe(t))throw new p("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Ge(t))throw new p("This stream has already been locked for exclusive reading by another reader");L(this,t),this.Nd=new B}return g.defineProperty(t.prototype,"closed",{get:function(){return tt(this)?this.Id:E(it("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return tt(this)?void 0===this.kd?E(U("cancel")):O(this,t):E(it("cancel"))},t.prototype.read=function(){return tt(this)?void 0===this.kd?E(U("read from")):et(this):E(it("read"))},t.prototype.releaseLock=function(){if(!tt(this))throw it("releaseLock");if(void 0!==this.kd){if(this.Nd.length>0)throw new p("Tried to release a reader lock when that reader has pending read() calls un-settled");F(this)}},t}();function tt(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"Nd")}function et(t){var e=t.kd;return e.Bd=!0,"closed"===e.Da?k(M(void 0,!0,t.Sd)):"errored"===e.Da?E(e.Pd):e.Md[X]()}function it(t){return new p("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof e.asyncIterator&&((Z={})[e.asyncIterator]=function(){return this},J=Z,g.defineProperty(J,e.asyncIterator,{enumerable:!1}));var st={next:function(){if(!1===nt(this))return E(rt("next"));var t=this.Ld;return void 0===t.kd?E(U("iterate")):D(et(t),(function(e){var i=e.done;return i&&F(t),M(e.value,i,!0)}))},return:function(t){if(!1===nt(this))return E(rt("next"));var e=this.Ld;if(void 0===e.kd)return E(U("finish iterating"));if(e.Nd.length>0)return E(new p("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Od){var i=O(e,t);return F(e),D(i,(function(){return M(t,!0,!0)}))}return F(e),k(M(t,!0,!0))}};function nt(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"Ld")}function rt(t){return new p("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function ht(t){var e=t.Fd.shift();return t.Ud-=e.size,t.Ud<0&&(t.Ud=0),e.value}function ot(t,e,i){if(!u(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Fd.push({value:e,size:i}),t.Ud+=i}function at(t){t.Fd=new B,t.Ud=0}void 0!==J&&g.setPrototypeOf(st,J),g.defineProperty(st,"next",{enumerable:!1}),g.defineProperty(st,"return",{enumerable:!1});var ut=e("[[AbortSteps]]"),ct=e("[[ErrorSteps]]"),lt=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),ft(this);var i=e.size,s=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=m(i);void 0===s&&(s=1),function(t,e,i,s){var n=g.create(xt.prototype);function r(){return d(e,"start",[n])}var h=l(e,"write",1,[n]),o=l(e,"close",0,[]),a=l(e,"abort",1,[]);Dt(t,n,r,h,o,a,i,s)}(this,t,s=_(s),n)}return g.defineProperty(t.prototype,"locked",{get:function(){if(!1===_t(this))throw Ut("locked");return vt(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===_t(this)?E(Ut("abort")):!0===vt(this)?E(new p("Cannot abort a stream that already has a writer")):gt(this,t)},t.prototype.close=function(){return!1===_t(this)?E(Ut("close")):!0===vt(this)?E(new p("Cannot close a stream that already has a writer")):!0===At(this)?E(new p("Cannot close an already-closing stream")):wt(this)},t.prototype.getWriter=function(){if(!1===_t(this))throw Ut("getWriter");return dt(this)},t}();function dt(t){return new St(t)}function ft(t){t.Da="writable",t.Pd=void 0,t.Vd=void 0,t.Hd=void 0,t.Wd=new B,t.qd=void 0,t.zd=void 0,t.Xd=void 0,t.Gd=void 0,t.Qd=!1}function _t(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"Hd")}function vt(t){return void 0!==t.Vd}function gt(t,e){var i=t.Da;if("closed"===i||"errored"===i)return k(void 0);if(void 0!==t.Gd)return t.Gd.Kd;var s=!1;"erroring"===i&&(s=!0,e=void 0);var n=S((function(i,n){t.Gd={Kd:void 0,xd:i,Dd:n,jd:e,Yd:s}}));return t.Gd.Kd=n,!1===s&&pt(t,e),n}function wt(t){var e=t.Da;if("closed"===e||"errored"===e)return E(new p("The stream (in "+e+" state) is not in the writable state and cannot be closed"));var i=S((function(e,i){var s={xd:e,Dd:i};t.zd=s})),s=t.Vd;return void 0!==s&&!0===t.Qd&&"writable"===e&&Yt(s),function(t){ot(t,"close",0),Mt(t)}(t.Hd),i}function mt(t,e){"writable"!==t.Da?yt(t):pt(t,e)}function pt(t,e){var i=t.Hd;t.Da="erroring",t.Pd=e;var s=t.Vd;void 0!==s&&It(s,e),!1===function(t){if(void 0===t.qd&&void 0===t.Xd)return!1;return!0}(t)&&!0===i.Zd&&yt(t)}function yt(t){t.Da="errored",t.Hd[ct]();var e=t.Pd;if(t.Wd.forEach((function(t){t.Dd(e)})),t.Wd=new B,void 0!==t.Gd){var i=t.Gd;if(t.Gd=void 0,!0===i.Yd)return i.Dd(e),void bt(t);I(t.Hd[ut](i.jd),(function(){i.xd(),bt(t)}),(function(e){i.Dd(e),bt(t)}))}else bt(t)}function At(t){return void 0!==t.zd||void 0!==t.Xd}function bt(t){void 0!==t.zd&&(t.zd.Dd(t.Pd),t.zd=void 0);var e=t.Vd;void 0!==e&&zt(e,t.Pd)}function Tt(t,e){var i=t.Vd;void 0!==i&&e!==t.Qd&&(!0===e?function(t){Gt(t)}(i):Yt(i)),t.Qd=e}var St=function(){function t(t){if(!1===_t(t))throw new p("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===vt(t))throw new p("This stream has already been locked for exclusive writing by another writer");this.Jd=t,t.Vd=this;var e=t.Da;if("writable"===e)!1===At(t)&&!0===t.Qd?Gt(this):Kt(this),Wt(this);else if("erroring"===e)Qt(this,t.Pd),Wt(this);else if("closed"===e)Kt(this),function(t){Wt(t),Xt(t)}(this);else{var i=t.Pd;Qt(this,i),qt(this,i)}}return g.defineProperty(t.prototype,"closed",{get:function(){return!1===kt(this)?E(Vt("closed")):this.Id},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===kt(this))throw Vt("desiredSize");if(void 0===this.Jd)throw Ht("desiredSize");return function(t){var e=t.Jd,i=e.Da;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return Bt(e.Hd)}(this)},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"ready",{get:function(){return!1===kt(this)?E(Vt("ready")):this.$d},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===kt(this)?E(Vt("abort")):void 0===this.Jd?E(Ht("abort")):function(t,e){var i=t.Jd;return gt(i,e)}(this,t)},t.prototype.close=function(){if(!1===kt(this))return E(Vt("close"));var t=this.Jd;return void 0===t?E(Ht("close")):!0===At(t)?E(new p("Cannot close an already-closing stream")):Et(this)},t.prototype.releaseLock=function(){if(!1===kt(this))throw Vt("releaseLock");void 0!==this.Jd&&Ct(this)},t.prototype.write=function(t){return!1===kt(this)?E(Vt("write")):void 0===this.Jd?E(Ht("write to")):Rt(this,t)},t}();function kt(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"Jd")}function Et(t){return wt(t.Jd)}function Pt(t,e){"pending"===t.t_?zt(t,e):function(t,e){qt(t,e)}(t,e)}function It(t,e){"pending"===t.e_?jt(t,e):function(t,e){Qt(t,e)}(t,e)}function Ct(t){var e=t.Jd,i=new p("Writer was released and can no longer be used to monitor the stream's closedness");It(t,i),Pt(t,i),e.Vd=void 0,t.Jd=void 0}function Rt(t,e){var i=t.Jd,s=i.Hd,n=function(t,e){try{return t.i_(e)}catch(e){return Lt(t,e),1}}(s,e);if(i!==t.Jd)return E(Ht("write to"));var r=i.Da;if("errored"===r)return E(i.Pd);if(!0===At(i)||"closed"===r)return E(new p("The stream is closing or closed and cannot be written to"));if("erroring"===r)return E(i.Pd);var h=function(t){return S((function(e,i){var s={xd:e,Dd:i};t.Wd.push(s)}))}(i);return function(t,e,i){var s={chunk:e};try{ot(t,s,i)}catch(e){return void Lt(t,e)}var n=t.s_;if(!1===At(n)&&"writable"===n.Da){Tt(n,Ot(t))}Mt(t)}(s,e,n),h}var xt=function(){function t(){throw new p("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!h(t))return!1;if(!g.prototype.hasOwnProperty.call(t,"s_"))return!1;return!0}(this))throw new p("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.s_.Da&&Ft(this,t)},t.prototype[ut]=function(t){var e=this.n_(t);return Nt(this),e},t.prototype[ct]=function(){at(this)},t}();function Dt(t,e,i,s,n,r,h,o){e.s_=t,t.Hd=e,e.Fd=void 0,e.Ud=void 0,at(e),e.Zd=!1,e.i_=o,e.r_=h,e.h_=s,e.o_=n,e.n_=r;var a=Ot(e);Tt(t,a),I(k(i()),(function(){e.Zd=!0,Mt(e)}),(function(i){e.Zd=!0,mt(t,i)}))}function Nt(t){t.h_=void 0,t.o_=void 0,t.n_=void 0,t.i_=void 0}function Bt(t){return t.r_-t.Ud}function Mt(t){var e=t.s_;if(!1!==t.Zd&&void 0===e.qd)if("erroring"!==e.Da){if(0!==t.Fd.length){var i=function(t){return t.Fd.peek().value}(t);"close"===i?function(t){var e=t.s_;(function(t){t.Xd=t.zd,t.zd=void 0})(e),ht(t);var i=t.o_();Nt(t),I(i,(function(){!function(t){t.Xd.xd(void 0),t.Xd=void 0,"erroring"===t.Da&&(t.Pd=void 0,void 0!==t.Gd&&(t.Gd.xd(),t.Gd=void 0)),t.Da="closed";var e=t.Vd;void 0!==e&&Xt(e)}(e)}),(function(t){!function(t,e){t.Xd.Dd(e),t.Xd=void 0,void 0!==t.Gd&&(t.Gd.Dd(e),t.Gd=void 0),mt(t,e)}(e,t)}))}(t):function(t,e){var i=t.s_;!function(t){t.qd=t.Wd.shift()}(i);var s=t.h_(e);I(s,(function(){!function(t){t.qd.xd(void 0),t.qd=void 0}(i);var e=i.Da;if(ht(t),!1===At(i)&&"writable"===e){var s=Ot(t);Tt(i,s)}Mt(t)}),(function(e){"writable"===i.Da&&Nt(t),function(t,e){t.qd.Dd(e),t.qd=void 0,mt(t,e)}(i,e)}))}(t,i.chunk)}}else yt(e)}function Lt(t,e){"writable"===t.s_.Da&&Ft(t,e)}function Ot(t){return Bt(t)<=0}function Ft(t,e){var i=t.s_;Nt(t),pt(i,e)}function Ut(t){return new p("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Vt(t){return new p("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Ht(t){return new p("Cannot "+t+" a stream using a released writer")}function Wt(t){t.Id=S((function(e,i){t.Cd=e,t.Rd=i,t.t_="pending"}))}function qt(t,e){Wt(t),zt(t,e)}function zt(t,e){N(t.Id),t.Rd(e),t.Cd=void 0,t.Rd=void 0,t.t_="rejected"}function Xt(t){t.Cd(void 0),t.Cd=void 0,t.Rd=void 0,t.t_="resolved"}function Gt(t){t.$d=S((function(e,i){t.a_=e,t.u_=i})),t.e_="pending"}function Qt(t,e){Gt(t),jt(t,e)}function Kt(t){Gt(t),Yt(t)}function jt(t,e){N(t.$d),t.u_(e),t.a_=void 0,t.u_=void 0,t.e_="rejected"}function Yt(t){t.a_(void 0),t.a_=void 0,t.u_=void 0,t.e_="fulfilled"}function Zt(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Jt="undefined"!=typeof DOMException?DOMException:void 0;var $t,te=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Jt)?Jt:(($t=function(t,e){this.message=t||"",this.name=e||"Error",v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}).prototype=g.create(v.prototype),g.defineProperty($t.prototype,"constructor",{value:$t,writable:!0,configurable:!0}),$t);function ee(t,e,s,n,r,h){var o=G(t),a=dt(e);t.Bd=!0;var u=!1,c=k(void 0);return S((function(l,d){var f,_,v,g;if(void 0!==h){if(f=function(){var i=new te("Aborted","AbortError"),s=[];!1===n&&s.push((function(){return"writable"===e.Da?gt(e,i):k(void 0)})),!1===r&&s.push((function(){return"readable"===t.Da?Qe(t,i):k(void 0)})),A((function(){return Promise.all(s.map((function(t){return t()})))}),!0,i)},!0===h.aborted)return void f();h.addEventListener("abort",f)}if(y(t,o.Id,(function(t){!1===n?A((function(){return gt(e,t)}),!0,t):b(!0,t)})),y(e,a.Id,(function(e){!1===r?A((function(){return Qe(t,e)}),!0,e):b(!0,e)})),_=t,v=o.Id,g=function(){!1===s?A((function(){return function(t){var e=t.Jd,i=e.Da;return!0===At(e)||"closed"===i?k(void 0):"errored"===i?E(e.Pd):Et(t)}(a)})):b()},"closed"===_.Da?g():C(v,g),!0===At(e)||"closed"===e.Da){var w=new p("the destination writable stream closed before all data could be piped to it");!1===r?A((function(){return Qe(t,w)}),!0,w):b(!0,w)}function m(){var t=c;return P(c,(function(){return t!==c?m():void 0}))}function y(t,e,i){"errored"===t.Da?i(t.Pd):R(e,i)}function A(t,i,s){function n(){I(t(),(function(){return T(i,s)}),(function(t){return T(!0,t)}))}!0!==u&&(u=!0,"writable"===e.Da&&!1===At(e)?C(m(),n):n())}function b(t,i){!0!==u&&(u=!0,"writable"===e.Da&&!1===At(e)?C(m(),(function(){return T(t,i)})):T(t,i))}function T(t,e){Ct(a),F(o),void 0!==h&&h.removeEventListener("abort",f),t?d(e):l(void 0)}N(S((function(t,e){!function s(n){n?t():P(!0===u?k(!0):P(a.$d,(function(){return P(et(o),(function(t){return!0===t.done||(c=P(Rt(a,t.value),void 0,i),!1)}))})),s,e)}(!1)})))}))}var ie=function(){function t(){throw new p}return g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===se(this))throw fe("desiredSize");return ce(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===se(this))throw fe("close");if(!1===le(this))throw new p("The stream is not in a state that permits close");oe(this)},t.prototype.enqueue=function(t){if(!1===se(this))throw fe("enqueue");if(!1===le(this))throw new p("The stream is not in a state that permits enqueue");return ae(this,t)},t.prototype.error=function(t){if(!1===se(this))throw fe("error");ue(this,t)},t.prototype[z]=function(t){at(this);var e=this.c_(t);return he(this),e},t.prototype[X]=function(){var t=this.l_;if(this.Fd.length>0){var e=ht(this);return!0===this.d_&&0===this.Fd.length?(he(this),Ke(t)):ne(this),k(M(e,!1,t.Ed.Sd))}var i=Q(t);return ne(this),i},t}();function se(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"l_")}function ne(t){!1!==re(t)&&(!0!==t.f_?(t.f_=!0,I(t.__(),(function(){t.f_=!1,!0===t.v_&&(t.v_=!1,ne(t))}),(function(e){ue(t,e)}))):t.v_=!0)}function re(t){var e=t.l_;return!1!==le(t)&&(!1!==t.Zd&&(!0===Ge(e)&&j(e)>0||ce(t)>0))}function he(t){t.__=void 0,t.c_=void 0,t.i_=void 0}function oe(t){var e=t.l_;t.d_=!0,0===t.Fd.length&&(he(t),Ke(e))}function ae(t,e){var i=t.l_;if(!0===Ge(i)&&j(i)>0)K(i,e,!1);else{var s=void 0;try{s=t.i_(e)}catch(e){throw ue(t,e),e}try{ot(t,e,s)}catch(e){throw ue(t,e),e}}ne(t)}function ue(t,e){var i=t.l_;"readable"===i.Da&&(at(t),he(t),je(i,e))}function ce(t){var e=t.l_.Da;return"errored"===e?null:"closed"===e?0:t.r_-t.Ud}function le(t){var e=t.l_.Da;return!1===t.d_&&"readable"===e}function de(t,e,i,s,n,r,h){e.l_=t,e.Fd=void 0,e.Ud=void 0,at(e),e.Zd=!1,e.d_=!1,e.v_=!1,e.f_=!1,e.i_=h,e.r_=r,e.__=s,e.c_=n,t.Md=e,I(k(i()),(function(){e.Zd=!0,ne(e)}),(function(t){ue(e,t)}))}function fe(t){return new p("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var _e=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&w.floor(t)===t},ve=function(){function t(){throw new p("ReadableStreamBYOBRequest cannot be used directly")}return g.defineProperty(t.prototype,"view",{get:function(){if(!1===me(this))throw Be("view");return this.Bu},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===me(this))throw Be("respond");if(void 0===this.g_)throw new p("This BYOB request has been invalidated");this.Bu.buffer,function(t,e){if(e=Number(e),!1===u(e))throw new RangeError("bytesWritten must be a finite");Ie(t,e)}(this.g_,t)},t.prototype.respondWithNewView=function(t){if(!1===me(this))throw Be("respond");if(void 0===this.g_)throw new p("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new p("You can only respond with array buffer views");t.buffer,function(t,e){var i=t.w_.peek();if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,Ie(t,e.byteLength)}(this.g_,t)},t}(),ge=function(){function t(){throw new p("ReadableByteStreamController constructor cannot be used directly")}return g.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===we(this))throw Me("byobRequest");if(void 0===this.m_&&this.w_.length>0){var t=this.w_.peek(),e=new x(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=g.create(ve.prototype);!function(t,e,i){t.g_=e,t.Bu=i}(i,this,e),this.m_=i}return this.m_},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===we(this))throw Me("desiredSize");return De(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===we(this))throw Me("close");if(!0===this.d_)throw new p("The stream has already been closed; do not close it again!");var t=this.p_.Da;if("readable"!==t)throw new p("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t.p_;if(t.Ud>0)return void(t.d_=!0);if(t.w_.length>0){if(t.w_.peek().bytesFilled>0){var i=new p("Insufficient bytes to fill elements in the given buffer");throw xe(t,i),i}}Re(t),Ke(e)}(this)},t.prototype.enqueue=function(t){if(!1===we(this))throw Me("enqueue");if(!0===this.d_)throw new p("stream is closed or draining");var e=this.p_.Da;if("readable"!==e)throw new p("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new p("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,e){var i=t.p_,s=e.buffer,n=e.byteOffset,r=e.byteLength,h=s;if(!0===Y(i)){if(0===j(i))be(t,h,n,r);else K(i,new x(h,n,r),!1)}else!0===Fe(i)?(be(t,h,n,r),Pe(t)):be(t,h,n,r);pe(t)}(this,t)},t.prototype.error=function(t){if(!1===we(this))throw Me("error");xe(this,t)},t.prototype[z]=function(t){this.w_.length>0&&(this.w_.peek().bytesFilled=0);at(this);var e=this.c_(t);return Re(this),e},t.prototype[X]=function(){var t=this.p_;if(this.Ud>0){var e=this.Fd.shift();this.Ud-=e.byteLength,ke(this);var i=void 0;try{i=new x(e.buffer,e.byteOffset,e.byteLength)}catch(t){return E(t)}return k(M(i,!1,t.Ed.Sd))}var s=this.y_;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return E(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:x,readerType:"default"};this.w_.push(r)}var h=Q(t);return pe(this),h},t}();function we(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"p_")}function me(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"g_")}function pe(t){var e=function(t){var e=t.p_;if("readable"!==e.Da)return!1;if(!0===t.d_)return!1;if(!1===t.Zd)return!1;if(!0===Y(e)&&j(e)>0)return!0;if(!0===Fe(e)&&Oe(e)>0)return!0;var i=De(t);if(i>0)return!0;return!1}(t);!1!==e&&(!0!==t.f_?(t.f_=!0,I(t.__(),(function(){t.f_=!1,!0===t.v_&&(t.v_=!1,pe(t))}),(function(e){xe(t,e)}))):t.v_=!0)}function ye(t,e){var i=!1;"closed"===t.Da&&(i=!0);var s=Ae(e);"default"===e.readerType?K(t,s,i):function(t,e,i){var s=t.Ed,n=s.A_.shift();n.xd(M(e,i,s.Sd))}(t,s,i)}function Ae(t){var e=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/i)}function be(t,e,i,s){t.Fd.push({buffer:e,byteOffset:i,byteLength:s}),t.Ud+=s}function Te(t,e){var i=e.elementSize,s=e.bytesFilled-e.bytesFilled%i,n=w.min(t.Ud,e.byteLength-e.bytesFilled),r=e.bytesFilled+n,h=r-r%i,o=n,u=!1;h>s&&(o=h-e.bytesFilled,u=!0);for(var c=t.Fd;o>0;){var l=c.peek(),d=w.min(o,l.byteLength),f=e.byteOffset+e.bytesFilled;a(e.buffer,f,l.buffer,l.byteOffset,d),l.byteLength===d?c.shift():(l.byteOffset+=d,l.byteLength-=d),t.Ud-=d,Se(t,d,e),o-=d}return u}function Se(t,e,i){Ee(t),i.bytesFilled+=e}function ke(t){0===t.Ud&&!0===t.d_?(Re(t),Ke(t.p_)):pe(t)}function Ee(t){void 0!==t.m_&&(t.m_.g_=void 0,t.m_.Bu=void 0,t.m_=void 0)}function Pe(t){for(;t.w_.length>0;){if(0===t.Ud)return;var e=t.w_.peek();!0===Te(t,e)&&(Ce(t),ye(t.p_,e))}}function Ie(t,e){var i=t.w_.peek();if("closed"===t.p_.Da){if(0!==e)throw new p("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=e.buffer;var i=t.p_;if(!0===Fe(i))for(;Oe(i)>0;)ye(i,Ce(t))}(t,i)}else!function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(Se(t,e,i),!(i.bytesFilled<i.elementSize)){Ce(t);var s=i.bytesFilled%i.elementSize;if(s>0){var n=i.byteOffset+i.bytesFilled,r=i.buffer.slice(n-s,n);be(t,r,0,r.byteLength)}i.buffer=i.buffer,i.bytesFilled-=s,ye(t.p_,i),Pe(t)}}(t,e,i);pe(t)}function Ce(t){var e=t.w_.shift();return Ee(t),e}function Re(t){t.__=void 0,t.c_=void 0}function xe(t,e){var i=t.p_;"readable"===i.Da&&(!function(t){Ee(t),t.w_=new B}(t),at(t),Re(t),je(i,e))}function De(t){var e=t.p_.Da;return"errored"===e?null:"closed"===e?0:t.r_-t.Ud}function Ne(t,e,i){var s=g.create(ge.prototype);var n=l(e,"pull",0,[s]),r=l(e,"cancel",1,[]),h=e.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===_e(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,e,i,s,n,r,h){e.p_=t,e.v_=!1,e.f_=!1,e.m_=void 0,e.Fd=e.Ud=void 0,at(e),e.d_=!1,e.Zd=!1,e.r_=_(r),e.__=s,e.c_=n,e.y_=h,e.w_=new B,t.Md=e,I(k(i()),(function(){e.Zd=!0,pe(e)}),(function(t){xe(e,t)}))}(t,s,(function(){return d(e,"start",[s])}),n,r,i,h)}function Be(t){return new p("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Me(t){return new p("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function Le(t){return S((function(e,i){var s={xd:e,Dd:i};t.Ed.A_.push(s)}))}function Oe(t){return t.Ed.A_.length}function Fe(t){var e=t.Ed;return void 0!==e&&!!Ve(e)}var Ue=function(){function t(t){if(!Xe(t))throw new p("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===we(t.Md))throw new p("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Ge(t))throw new p("This stream has already been locked for exclusive reading by another reader");L(this,t),this.A_=new B}return g.defineProperty(t.prototype,"closed",{get:function(){return Ve(this)?this.Id:E(He("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Ve(this)?void 0===this.kd?E(U("cancel")):O(this,t):E(He("cancel"))},t.prototype.read=function(t){return Ve(this)?void 0===this.kd?E(U("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?E(new p("view must have non-zero byteLength")):function(t,e){var i=t.kd;if(i.Bd=!0,"errored"===i.Da)return E(i.Pd);return function(t,e){var i=t.p_,s=1;e.constructor!==DataView&&(s=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,r={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.w_.length>0)return t.w_.push(r),Le(i);if("closed"===i.Da)return k(M(new n(r.buffer,r.byteOffset,0),!0,i.Ed.Sd));if(t.Ud>0){if(!0===Te(t,r)){var h=Ae(r);return ke(t),k(M(h,!1,i.Ed.Sd))}if(!0===t.d_){var o=new p("Insufficient bytes to fill elements in the given buffer");return xe(t,o),E(o)}}t.w_.push(r);var a=Le(i);return pe(t),a}(i.Md,e)}(this,t)):E(new p("view must be an array buffer view")):E(He("read"))},t.prototype.releaseLock=function(){if(!Ve(this))throw He("releaseLock");if(void 0!==this.kd){if(this.A_.length>0)throw new p("Tried to release a reader lock when that reader has pending read() calls un-settled");F(this)}},t}();function Ve(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"A_")}function He(t){return new p("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var We=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),ze(this);var i=e.size,s=e.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Ne(this,t,s=_(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=m(i);void 0===s&&(s=1),function(t,e,i,s){var n=g.create(ie.prototype),r=l(e,"pull",0,[n]),h=l(e,"cancel",1,[]);de(t,n,(function(){return d(e,"start",[n])}),r,h,i,s)}(this,t,s=_(s),r)}}return g.defineProperty(t.prototype,"locked",{get:function(){if(!1===Xe(this))throw Ye("locked");return Ge(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Xe(this)?E(Ye("cancel")):!0===Ge(this)?E(new p("Cannot cancel a stream that already has a reader")):Qe(this,t)},t.prototype.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===Xe(this))throw Ye("getReader");if(void 0===e)return G(this,!0);if("byob"===(e=String(e)))return function(t,e){void 0===e&&(e=!1);var i=new Ue(t);return i.Sd=e,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,e){var i=t.writable,s=t.readable,n=void 0===e?{}:e,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===Xe(this))throw Ye("pipeThrough");if(!1===_t(i))throw new p("writable argument to pipeThrough must be a WritableStream");if(!1===Xe(s))throw new p("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!Zt(a))throw new p("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Ge(this))throw new p("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===vt(i))throw new p("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return N(ee(this,i,r,h,o,a)),s},t.prototype.pipeTo=function(t,e){var i=void 0===e?{}:e,s=i.preventClose,n=i.preventAbort,r=i.preventCancel,h=i.signal;return!1===Xe(this)?E(Ye("pipeTo")):!1===_t(t)?E(new p("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||Zt(h)?!0===Ge(this)?E(new p("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===vt(t)?E(new p("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ee(this,t,s,n,r,h):E(new p("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Xe(this))throw Ye("tee");var t=function(t,e){var i,s,n,r,h,a=G(t),u=!1,c=!1,l=!1,d=S((function(t){h=t}));function f(){return!0===u||(u=!0,N(D(et(a),(function(t){if(u=!1,!0===t.done)return!1===c&&oe(n.Md),void(!1===l&&oe(r.Md));var e=t.value,i=e,s=e;!1===c&&ae(n.Md,i),!1===l&&ae(r.Md,s)})))),k(void 0)}function _(){}return n=qe(_,f,(function(e){if(c=!0,i=e,!0===l){var n=o([i,s]),r=Qe(t,n);h(r)}return d})),r=qe(_,f,(function(e){if(l=!0,s=e,!0===c){var n=o([i,s]),r=Qe(t,n);h(r)}return d})),R(a.Id,(function(t){ue(n.Md,t),ue(r.Md,t)})),[n,r]}(this);return o(t)},t.prototype.getIterator=function(t){var e=(void 0===t?{}:t).preventCancel,i=void 0!==e&&e;if(!1===Xe(this))throw Ye("getIterator");return function(t,e){void 0===e&&(e=!1);var i=G(t),s=g.create(st);return s.Ld=i,s.Od=Boolean(e),s}(this,i)},t}();function qe(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=g.create(We.prototype);return ze(r),de(r,g.create(ie.prototype),t,e,i,s,n),r}function ze(t){t.Da="readable",t.Ed=void 0,t.Pd=void 0,t.Bd=!1}function Xe(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"Md")}function Ge(t){return void 0!==t.Ed}function Qe(t,e){return t.Bd=!0,"closed"===t.Da?k(void 0):"errored"===t.Da?E(t.Pd):(Ke(t),D(t.Md[z](e),i))}function Ke(t){t.Da="closed";var e=t.Ed;void 0!==e&&(tt(e)&&(e.Nd.forEach((function(t){t.xd(M(void 0,!0,e.Sd))})),e.Nd=new B),q(e))}function je(t,e){t.Da="errored",t.Pd=e;var i=t.Ed;void 0!==i&&(tt(i)?(i.Nd.forEach((function(t){t.Dd(e)})),i.Nd=new B):(i.A_.forEach((function(t){t.Dd(e)})),i.A_=new B),W(i,e))}function Ye(t){return new p("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof e.asyncIterator&&g.defineProperty(We.prototype,e.asyncIterator,{value:We.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});var Ze=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(t){return t.byteLength},t}(),Je=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(){return 1},t}(),$e=function(){function t(t,e,i){void 0===t&&(t={}),void 0===e&&(e={}),void 0===i&&(i={});var s=e.size,n=e.highWaterMark,r=i.size,h=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=m(s);if(void 0===n&&(n=1),n=_(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=m(r);void 0===h&&(h=0),h=_(h),function(t,e,i,s,n,r){function h(){return e}function o(e){return function(t,e){var i=t.b_;if(!0===t.Qd){return D(t.T_,(function(){var s=t.S_;if("erroring"===s.Da)throw s.Pd;return ai(i,e)}))}return ai(i,e)}(t,e)}function a(e){return function(t,e){return ei(t,e),k(void 0)}(t,e)}function u(){return function(t){var e=t.k_,i=t.b_,s=i.E_();return hi(i),D(s,(function(){if("errored"===e.Da)throw e.Pd;var t=e.Md;!0===le(t)&&oe(t)}),(function(i){throw ei(t,i),e.Pd}))}(t)}function c(){return function(t){return si(t,!1),t.T_}(t)}function l(e){return ii(t,e),k(void 0)}t.S_=function(t,e,i,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=g.create(lt.prototype);return ft(h),Dt(h,g.create(xt.prototype),t,e,i,s,n,r),h}(h,o,u,a,i,s),t.k_=qe(h,c,l,n,r),t.Qd=void 0,t.T_=void 0,t.P_=void 0,si(t,!0),t.b_=void 0}(this,S((function(t){a=t})),n,o,h,u),function(t,e){var i=g.create(ni.prototype),s=function(t){try{return oi(i,t),k(void 0)}catch(t){return E(t)}},n=e.transform;if(void 0!==n){if("function"!=typeof n)throw new p("transform is not a method");s=function(t){return f(n,e,[t,i])}}var r=l(e,"flush",0,[i]);!function(t,e,i,s){e.I_=t,t.b_=e,e.C_=i,e.E_=s}(t,i,s,r)}(this,t);var c=d(t,"start",[this.b_]);a(c)}return g.defineProperty(t.prototype,"readable",{get:function(){if(!1===ti(this))throw ci("readable");return this.k_},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"writable",{get:function(){if(!1===ti(this))throw ci("writable");return this.S_},enumerable:!0,configurable:!0}),t}();function ti(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"b_")}function ei(t,e){ue(t.k_.Md,e),ii(t,e)}function ii(t,e){hi(t.b_),Lt(t.S_.Hd,e),!0===t.Qd&&si(t,!1)}function si(t,e){void 0!==t.T_&&t.P_(),t.T_=S((function(e){t.P_=e})),t.Qd=e}var ni=function(){function t(){throw new p("TransformStreamDefaultController instances cannot be created directly")}return g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===ri(this))throw ui("desiredSize");return ce(this.I_.k_.Md)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===ri(this))throw ui("enqueue");oi(this,t)},t.prototype.error=function(t){if(!1===ri(this))throw ui("error");!function(t,e){ei(t.I_,e)}(this,t)},t.prototype.terminate=function(){if(!1===ri(this))throw ui("terminate");!function(t){var e=t.I_,i=e.k_.Md;!0===le(i)&&oe(i);var s=new p("TransformStream terminated");ii(e,s)}(this)},t}();function ri(t){return!!h(t)&&!!g.prototype.hasOwnProperty.call(t,"I_")}function hi(t){t.C_=void 0,t.E_=void 0}function oi(t,e){var i=t.I_,s=i.k_.Md;if(!1===le(s))throw new p("Readable side is not in a state that permits enqueue");try{ae(s,e)}catch(t){throw ii(i,t),i.k_.Pd}var n=function(t){return!0!==re(t)}(s);n!==i.Qd&&si(i,!0)}function ai(t,e){return D(t.C_(e),void 0,(function(e){throw ei(t.I_,e),e}))}function ui(t){return new p("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function ci(t){return new p("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=Ze,t.CountQueuingStrategy=Je,t.ReadableStream=We,t.TransformStream=$e,t.WritableStream=lt,g.defineProperty(t,"__esModule",{value:!0})}))})),bl=yl((e=>{"use strict";function i(){const t=Al();return i=function(){return t},t}t(),g.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var i in e)g.defineProperty(t,i,{enumerable:!0,get:e[i]})}(e,{ByteLengthQueuingStrategy:function(){return i().ByteLengthQueuingStrategy},CountQueuingStrategy:function(){return i().CountQueuingStrategy},ReadableStream:function(){return i().ReadableStream},TransformStream:function(){return i().TransformStream},WritableStream:function(){return i().WritableStream}})}));t();var X=function(t){return t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.PICTURE_IN_PICTURE_ERROR=11001]="PICTURE_IN_PICTURE_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",t[t.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",t[t.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",t[t.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",t[t.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",t}({}),qa=function(t){return t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE",t}({});!function(t){t.fromCode=function(e){const i=w.floor(e/1e3);if(i in t)return i;throw new p("Invalid error code: "+e)}}(qa||(qa={})),t(),t(),t(),t(),t(),t(),t(),t();var ua=function(t){return t.R_="web",t.x_="android",t.D_="android-tv",t.N_="ios",t.B_="tvos",t.M_="chromecast",t.L_="theoliveweb",t}({});var ws=ul?ul.userAgent:"",Tl=ws.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Sl=ws.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),kl=ws.match(/Android ([0-9\.]+)/i),El=ws.match(/Windows NT ([0-9\.]+)/i),Pl=ws.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Il=ws.match(/Firefox\/([0-9\.]+)/i),Cl=ws.match(/OPR\/(\d+\.\d+)/i),Rl=ws.match(/Tizen ([0-9\.]+)/i),xl=ws.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Dl=ws.match(/HbbTV\/([0-9.]+)/i),Bi=class{get Ye(){return this.O_}get F_(){return this.U_}get V_(){return this.H_}get W_(){return this.q_}get z_(){return this.X_}get G_(){return this.Q_}get K_(){return this.j_}get Y_(){return this.Z_}get J_(){return this.tv}get ev(){return this.rv}get hv(){return this.ov}get uv(){return this.fv}get _v(){return this.vv}get wv(){return this.mv||this.pv}get yv(){return this.Av}get Ks(){return this.bv}get Tv(){return this.Sv}get Ev(){return this.Pv}get Iv(){var t;return null!=(t=this.Cv)?t:this.Rv}get xv(){return this.Dv}get Nv(){var t;return(null==(t=a.chrome)?void 0:t.webview)&&this.Bv>0}get Mv(){return this.Bv}get Lv(){return this.Ov}get Fv(){return this.Uv}get Vv(){return this.Hv}get Wv(){return this.qv}get zv(){return this.Xv}get Gv(){return this.Qv}get Kv(){return this.Yv}get Zv(){return this.Jv}get $v(){return this.eg}get rg(){return this.hg}get og(){return this.ag}get cg(){return this.dg}get fg(){return this._g}get vg(){return this.gg}get wg(){return this.pg}get yg(){return this.Ag}get Tg(){return this.Sg}get Eg(){return this.Pg}get Ig(){return!(!this.Vv&&!this.Lv)&&this.Iv<=56}get Cg(){return this.Rg}get xg(){return this.Dg}get Ng(){return this.Bg}get Mg(){return this.Lg}get Og(){return this.Fg}get Ug(){return this.Vg}get Hg(){return this.Wg}get qg(){return this.zg}get IS_IOS_CHROME(){return this.Xg}constructor(){this.O_=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||ul&&ul.msMaxTouchPoints),this.U_=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(ws)||/(macintosh|mac(?=_powerpc)\s)/i.test(ws),this.H_=/Windows NT/i.test(ws),this.q_=El?_(El[1]):0,this.X_=/Android/i.test(ws),this.Q_=kl?_(kl[1]):0,this.j_=/windows phone (8|8\.1)/i.test(ws),this.Z_=/iPhone/i.test(ws),this.tv=/iPad/i.test(ws),this.rv=this.U_&&this.O_&&!this.tv,this.ov=/iPod/i.test(ws),this.Av=/Mobile Safari/i.test(ws),this.mv=/EOS\d*STB/i.test(ws),this.pv=/APP\d*STB/i.test(ws),this.fv=(this.Z_||this.tv||this.rv||this.ov)&&!this.j_,this.vv=xl?_(xl[2]):0,this.bv=this.j_||this.fv||this.X_||this.Av,this.Sv=/CriOS/i.test(ws),this.Pv=Boolean(self.chrome&&/google/i.test(ul.vendor))||this.Sv,this.Dv=this.Pv&&/Edg\//i.test(ul.userAgent),this.Bv=Sl?k(Sl[1],10):0,this.Xg=Boolean(/CriOS/i.test(ws)),this.zg=Boolean(self.chrome||/Chrome/i.test(ws)||this.Xg),this.Rv=Tl?k(Tl[1],10):0,this.Ov=/SMART-TV.*Tizen/i.test(ws),this.Uv=Rl?_(Rl[1]):0,this.Cv=this.Uv>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.Uv):void 0,this.Hv=/webos|web0s/i.test(ws),this.qv=/HbbTV/i.test(ws),this.Xv=!!Dl&&function(t){if(!t)return!1;let e=t.split(".").map(Number);return 3===e.length&&1===e[0]&&2===e[1]}(Dl[1]),this.Qv=/VIZIO/i.test(ws),this.Yv=/Edge\/\d+/i.test(ws),this.Jv=/Trident/i.test(ws),this.eg=this.Jv&&!self.ActiveXObject&&"ActiveXObject"in self,this.hg=/Vivaldi/i.test(ws),this.ag=/Firefox/i.test(ws)&&!/Seamonkey/i.test(ws),this.dg=Il?_(Il[1]):0,this._g=/Safari/i.test(ws)&&!/Chrome/i.test(ws)&&!this.j_&&!this.Ov,this.gg=Pl?_(Pl[2]):0,this.pg=Boolean(Cl),this.Ag=Cl?_(Cl[1]):0,this.Sg=/CrKey/.test(ws),this.Pg=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(ws),this.Rg=/PlayStation 4/i.test(ws),this.Dg="web"===ua.D_,this.Bg="web"===ua.x_,this.Lg=this.Bg||this.Dg,this.Fg="web"===ua.N_,this.Vg="web"===ua.B_,this.Wg="web"===ua.M_}};Bi.Gg=new Bi;var ds=Bi.Gg;t();var Nl={}.hasOwnProperty,Jr={}.toString;function Ee(t){return null!=t}function Bl(t){return void 0===t}var Gn,di=Array.isArray||function(t){return"[object Array]"===Jr.call(t)};function Mt(t){return nh(t)&&Nl.call(t,"length")&&rh(t.length)}function nh(t){return"object"==typeof t&&null!==t}function Ml(t){return nh(t)&&t.constructor&&t.constructor===g}function Sc(t){return"string"==typeof t}function Me(t){return"boolean"==typeof t}function Xr(t){return Ee(t)&&"function"==typeof t.then}function tt(t){return"[object Date]"===Jr.call(t)}function rh(t){return"number"==typeof t}function sh(t){return"function"==typeof t}function Ll(t){return sh(t)||nh(t)}function Es(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Xi(t){let e;for(;Ee(e=t.firstChild);)t.removeChild(e)}function Ol(t,e){t.insertBefore(e,t.firstChild)}function Fl(t){const e=t.className;return"string"==typeof e?e:e&&"string"==typeof e.baseVal?e.baseVal:""}function Ul(t,e){const i=t.className;"string"==typeof i?t.className=e:i&&"string"==typeof i.baseVal&&(i.baseVal=e)}function Vl(t,e){return void 0!==t.classList?t.classList.contains(e):void 0!==t.className&&-1!==(" "+Fl(t)+" ").indexOf(" "+e+" ")}function mh(t,e){if(void 0!==t.classList)t.classList.add(e);else if(void 0!==t.className){const i=Fl(t);-1===(" "+i+" ").indexOf(" "+e+" ")&&Ul(t,(i+" "+e).trim())}}function Hl(t,e){if(void 0!==t.classList)t.classList.remove(e);else if(void 0!==t.className){let i=" "+Fl(t)+" ";const s=" "+e+" ";for(;-1!==i.indexOf(s);)i=i.replace(s," ");Ul(t,i.trim())}}function Wl(t,e,i){void 0===i&&(i=!Vl(t,e)),i?mh(t,e):Hl(t,e)}function ql(t){t.stopPropagation()}function zl(t,e){ds.Lv&&ds.Fv<3?function(t,e){let i=e;switch(e){case"flex":i="-webkit-flex";break;case"inline-flex":i="-webkit-inline-flex"}t.display=i}(t,e):function(t,e){if(t.display=e,t.display!==e){let i=e;switch(e){case"flex":i="-ms-flexbox";break;case"inline-flex":i="-ms-inline-flexbox"}t.display=i}}(t,e)}function Xl(t,e){const i=e.style;if(i)for(const e of g.keys(t)){const s=t[e];void 0!==s&&(i[e]=s)}}function Gl(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.top="0",e.bottom="0",e.width="100%",e.height="100%"}function Qr(t){t.removeAttribute("title")}function Ql(t){t.addEventListener("mouseover",(t=>{Qr(t.target)}))}t(),t();var De=()=>{},Kl=t=>t;function Zi(t,e){let i=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=Gn.Qg();h-i>=e&&(t.apply(this,n),i=h)}}function Mh(t,e){let i=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=this;0!==i&&Gn.Kg(i),i=Gn.jg((()=>{i=0,t.apply(h,n)}),e)}}function Ut(t){let e;return()=>(void 0!==t&&(e=t(),t=void 0),e)}function me(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function jl(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function Yl(){return void 0!==h?h.createElement("video"):void 0}var Zl=Ut(Yl),Jl=Ut((()=>"undefined"!=typeof HTMLVideoElement&&Zl()instanceof HTMLVideoElement));t(),t(),t();var ei=null;try{ei=new WebAssembly.Instance(new WebAssembly.Module(new x([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(l){}function Et(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function fh(t){return!0===(t&&t.Yg)}function $l(t){var e=w.clz32(t&-t);return t?31-e:e}Et.prototype.Yg,g.defineProperty(Et.prototype,"Yg",{value:!0}),Et.isLong=fh;var td={},ed={};function qh(t,e){var i,s,n;return e?(n=0<=(t>>>=0)&&t<256)&&(s=ed[t])?s:(i=ze(t,0,!0),n&&(ed[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(s=td[t])?s:(i=ze(t,t<0?-1:0,!1),n&&(td[t]=i),i)}function il(t,e){if(j(t))return e?be:N;if(e){if(t<0)return be;if(t>=rd)return ld}else{if(t<=-hd)return mo;if(t+1>=hd)return cd}return t<0?il(-t,e).neg():ze(t%nd|0,t/nd|0,e)}function ze(t,e,i){return new Et(t,e,i)}Et.fromInt=qh,Et.fromNumber=il,Et.fromBits=ze;var id=w.pow;function sd(t,e,i){if(0===t.length)throw v("empty string");if("number"==typeof e?(i=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?be:N;if((i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw v("interior hyphen");if(0===s)return sd(t.substring(1),e,i).neg();for(var n=il(id(i,8)),r=N,h=0;h<t.length;h+=8){var o=w.min(8,t.length-h),a=k(t.substring(h,h+o),i);if(o<8){var u=il(id(i,o));r=r.mul(u).add(il(a))}else r=(r=r.mul(n)).add(il(a))}return r.unsigned=e,r}function $(t,e){return"number"==typeof t?il(t,e):"string"==typeof t?sd(t,e):ze(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}Et.fromString=sd,Et.fromValue=$;var nd=4294967296,rd=nd*nd,hd=rd/2,od=qh(1<<24),N=qh(0);Et.ZERO=N;var be=qh(0,!0);Et.UZERO=be;var Yr=qh(1);Et.ONE=Yr;var ad=qh(1,!0);Et.UONE=ad;var ud=qh(-1);Et.NEG_ONE=ud;var cd=ze(-1,2147483647,!1);Et.MAX_VALUE=cd;var ld=ze(-1,-1,!0);Et.MAX_UNSIGNED_VALUE=ld;var mo=ze(0,-2147483648,!1);Et.MIN_VALUE=mo;var mu=Et.prototype;mu.toInt=function(){return this.unsigned?this.low>>>0:this.low},mu.toNumber=function(){return this.unsigned?(this.high>>>0)*nd+(this.low>>>0):this.high*nd+(this.low>>>0)},mu.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(mo)){var e=il(t),i=this.div(e),s=i.mul(e).sub(this);return i.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=il(id(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},mu.getHighBits=function(){return this.high},mu.getHighBitsUnsigned=function(){return this.high>>>0},mu.getLowBits=function(){return this.low},mu.getLowBitsUnsigned=function(){return this.low>>>0},mu.getNumBitsAbs=function(){if(this.isNegative())return this.eq(mo)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},mu.isZero=function(){return 0===this.high&&0===this.low},mu.eqz=mu.isZero,mu.isNegative=function(){return!this.unsigned&&this.high<0},mu.isPositive=function(){return this.unsigned||this.high>=0},mu.isOdd=function(){return 1==(1&this.low)},mu.isEven=function(){return 0==(1&this.low)},mu.equals=function(t){return fh(t)||(t=$(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},mu.eq=mu.equals,mu.notEquals=function(t){return!this.eq(t)},mu.neq=mu.notEquals,mu.ne=mu.notEquals,mu.lessThan=function(t){return this.comp(t)<0},mu.lt=mu.lessThan,mu.lessThanOrEqual=function(t){return this.comp(t)<=0},mu.lte=mu.lessThanOrEqual,mu.le=mu.lessThanOrEqual,mu.greaterThan=function(t){return this.comp(t)>0},mu.gt=mu.greaterThan,mu.greaterThanOrEqual=function(t){return this.comp(t)>=0},mu.gte=mu.greaterThanOrEqual,mu.ge=mu.greaterThanOrEqual,mu.compare=function(t){if(fh(t)||(t=$(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},mu.comp=mu.compare,mu.negate=function(){return!this.unsigned&&this.eq(mo)?mo:this.not().add(Yr)},mu.neg=mu.negate,mu.add=function(t){fh(t)||(t=$(t));var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=i+h)>>>16,a+=e+r,ze((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},mu.subtract=function(t){return fh(t)||(t=$(t)),this.add(t.neg())},mu.sub=mu.subtract,mu.multiply=function(t){if(this.isZero())return this;if(fh(t)||(t=$(t)),ei)return ze(ei.mul(this.low,this.high,t.low,t.high),ei.get_high(),this.unsigned);if(t.isZero())return this.unsigned?be:N;if(this.eq(mo))return t.isOdd()?mo:N;if(t.eq(mo))return this.isOdd()?mo:N;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(od)&&t.lt(od))return il(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*o)>>>16,u+=(c+=i*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=e*a+i*o+s*h+n*r,ze((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},mu.mul=mu.multiply,mu.divide=function(t){if(fh(t)||(t=$(t)),t.isZero())throw v("division by zero");var e,i,s;if(ei)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?ze((this.unsigned?ei.div_u:ei.div_s)(this.low,this.high,t.low,t.high),ei.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?be:N;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return be;if(t.gt(this.shru(1)))return ad;s=be}else{if(this.eq(mo))return t.eq(Yr)||t.eq(ud)?mo:t.eq(mo)?Yr:(e=this.shr(1).div(t).shl(1)).eq(N)?t.isNegative()?Yr:ud:(i=this.sub(t.mul(e)),s=e.add(i.div(t)));if(t.eq(mo))return this.unsigned?be:N;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=N}for(i=this;i.gte(t);){e=w.max(1,w.floor(i.toNumber()/t.toNumber()));for(var n=w.ceil(w.log(e)/w.LN2),r=n<=48?1:id(2,n-48),h=il(e),o=h.mul(t);o.isNegative()||o.gt(i);)o=(h=il(e-=r,this.unsigned)).mul(t);h.isZero()&&(h=Yr),s=s.add(h),i=i.sub(o)}return s},mu.div=mu.divide,mu.modulo=function(t){return fh(t)||(t=$(t)),ei?ze((this.unsigned?ei.rem_u:ei.rem_s)(this.low,this.high,t.low,t.high),ei.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},mu.mod=mu.modulo,mu.rem=mu.modulo,mu.not=function(){return ze(~this.low,~this.high,this.unsigned)},mu.countLeadingZeros=function(){return this.high?w.clz32(this.high):w.clz32(this.low)+32},mu.clz=mu.countLeadingZeros,mu.countTrailingZeros=function(){return this.low?$l(this.low):$l(this.high)+32},mu.ctz=mu.countTrailingZeros,mu.and=function(t){return fh(t)||(t=$(t)),ze(this.low&t.low,this.high&t.high,this.unsigned)},mu.or=function(t){return fh(t)||(t=$(t)),ze(this.low|t.low,this.high|t.high,this.unsigned)},mu.xor=function(t){return fh(t)||(t=$(t)),ze(this.low^t.low,this.high^t.high,this.unsigned)},mu.shiftLeft=function(t){return fh(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ze(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ze(0,this.low<<t-32,this.unsigned)},mu.shl=mu.shiftLeft,mu.shiftRight=function(t){return fh(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ze(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ze(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},mu.shr=mu.shiftRight,mu.shiftRightUnsigned=function(t){return fh(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ze(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):ze(32===t?this.high:this.high>>>t-32,0,this.unsigned)},mu.shru=mu.shiftRightUnsigned,mu.shr_u=mu.shiftRightUnsigned,mu.rotateLeft=function(t){var e;return fh(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ze(this.high,this.low,this.unsigned):t<32?(e=32-t,ze(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),ze(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},mu.rotl=mu.rotateLeft,mu.rotateRight=function(t){var e;return fh(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ze(this.high,this.low,this.unsigned):t<32?(e=32-t,ze(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),ze(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},mu.rotr=mu.rotateRight,mu.toSigned=function(){return this.unsigned?ze(this.low,this.high,!1):this},mu.toUnsigned=function(){return this.unsigned?this:ze(this.low,this.high,!0)},mu.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},mu.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},mu.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},Et.fromBytes=function(t,e,i){return i?Et.fromBytesLE(t,e):Et.fromBytesBE(t,e)},Et.fromBytesLE=function(t,e){return new Et(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Et.fromBytesBE=function(t,e){return new Et(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var Yc=Et;function dd(t,e){return t.lessThan(e)?t:e}t();var fo=9007199254740991,fd=2**-52;function ht(t,e,i){return w.min(w.max(t,e),i)}function Uu(t,e,i){return t===e||w.abs(t-e)<=i}function _d(t){return t!=t}function vd(t,e){return t===e||_d(t)&&_d(e)}function gd(t,e){let i=t,s=e;for(;0!==s;){const t=i%s;i=s,s=t}return i<0?-i:i}function Ai(t,e){return t.reduce(((t,i)=>t+e(i)),0)}function Di(t){return!j(t.getTime())}function Oc(){return Date.now()||(new Date).getTime()}function wd(t){return t/1e3}function le(t){return 1e3*t}var dt=1/6,md=Yc.fromNumber(fo);function Ro(t,e){if(0===e)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(md))return t.toNumber()/e;const i=t.divide(e),s=t.subtract(i.multiply(e));return i.toNumber()+s.toNumber()/e}var pd=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!ul||!ul.msMaxTouchPoints),yd=Zl(),Ad=!(!yd||!yd.webkitShowPlaybackTargetPicker),Zr=class{get Zg(){return void 0===this.Jg&&(this.Jg=this.$g()),this.Jg}$g(){return 0}get ew(){return!ds.Eg}get iw(){if(a.screen)return{width:a.screen.width,height:a.screen.height}}get nw(){return a.devicePixelRatio||1}get hw(){return Ad}get ow(){return!1}get aw(){return!0}get uw(){return!(!ds.fg&&!ds.uv)||!!ds.Gv}get cw(){return ds.Gv}get lw(){return!ds.uv}get dw(){return!0}get fw(){return!0}get _w(){return!1}get gw(){}get ww(){return!0}get mw(){return!1}get pw(){return ds.Gv}get yw(){return!1}Aw(t,e){return!0}bw(t){return t>=2*dt}constructor(){this.Jg=void 0,this.Tw=!1,this.Ye=pd,this.Ks=!1,this.Sw=!0}},Ni=class extends Zr{constructor(){super()}};t();var bd=class extends Ni{get gw(){if(ds.F_)return 4096}Aw(t,e){if(t&&t.Ew&&e&&e.Ew){let i=Hi(t.Ew,"mp4a.40.2")&&Hi(e.Ew,"mp4a.40.5"),s=Hi(t.Ew,"mp4a.40.5")&&Hi(e.Ew,"mp4a.40.2"),n=Hi(t.Ew,"mp4a.40.2")&&Hi(e.Ew,"mp4a.40.34"),r=Hi(t.Ew,"mp4a.40.34")&&Hi(e.Ew,"mp4a.40.2"),h=Hi(t.Ew,"mp4a.40.5")&&Hi(e.Ew,"mp4a.40.34"),o=Hi(t.Ew,"mp4a.40.34")&&Hi(e.Ew,"mp4a.40.5");return!(i||s||n||r||h||o)}return!0}};function Hi(t,e){return t.indexOf(e)>-1}t();var Td=class extends Ni{bw(t){return t>=2}};t();var Sd=class extends Ni{get yw(){return ds.vg<17}constructor(){super(),this.Tw=ds.vg>=11,this.Sw=ds.fg&&!(ds.uv&&ds.vg<10)}};t();var Ci,kd=class extends Ni{get ww(){return!ds.V_||(ds.xv?92!==ds.Mv:ds.Iv>=100)}};t(),t(),t(),t(),t();var Ed=function(){const t=Yl();if(!t)return!1;const e=t.muted;return t.muted=!e,t.muted!==e}(),Pd=function(){if(ds.ev)return!1;const t=Yl();if(!t)return!1;const e=t.volume;return t.volume=e/2+.1,e!==t.volume}();var $i=class extends Zr{$g(){return this.Pw.Zg}get gw(){return this.Pw.gw}get ww(){return this.Pw.ww}Aw(t,e){return this.Pw.Aw(t,e)}bw(t){return this.Pw.bw(t)}get yw(){return this.Pw.yw}constructor(t){super(),this.Pw=t,this.Tw=this.Pw.Tw,this.Ye=this.Pw.Ye,this.Sw=Ed&&this.Pw.Sw}},th=class extends $i{get _w(){return ds.uv}constructor(t){super(t),this.Tw=!0,this.Ks=!0}};t();var Qh=class{Iw(){return new this.Cw}Rw(t){return this.Cw.isTypeSupported(t)}constructor(t){this.Cw=pn(t)}};function pn(t){return t&&Ll(a.ManagedMediaSource)?a.ManagedMediaSource:Ll(a.MediaSource)?a.MediaSource:void 0}var Id=class extends th{get _w(){return!0}$g(){return pn(!0)?super.$g():1}};t();var Cd=class extends $i{get ow(){return ds.Fv<3}get aw(){return ds.Fv>=3}get iw(){return a.tizen&&!this.xw&&a.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const e=t.resolutionWidth,i=t.resolutionHeight;1===e&&1===i||(this.xw={width:e,height:i})})),this.xw}get mw(){return ds.Fv<3}Aw(t,e){return super.Aw(t,e)}};t();var Rd=class extends $i{get iw(){return a.webOS&&!this.xw&&a.webOS.deviceInfo((t=>{this.xw={width:t.screenWidth,height:t.screenHeight}})),this.xw}get dw(){return!1}};t();var xd=class extends $i{get _w(){return!0}};!function(t){Ci=t}(function(){const t=function(){if(ds.og)return new bd;if(ds.Kv||ds.Zv)return new Td;if(ds.fg)return new Sd;if(ds.Ev)return new kd;return new Ni}();return ds.uv?new Id(t):ds.Ks?new th(t):ds.Lv?new Cd(t):ds.Vv?new Rd(t):ds.F_?new xd(t):new $i(t)}()),t(),t(),t();var Dd=!(ds.Zv&&!ds.$v),Nd=self.console;function Bd(t){if(nh(t))try{return JSON.stringify(t)}catch(t){}return t}function Md(t){return t.map(Bd).join(" ")}function Ld(t){const e=Nd&&Nd[t];return e?e.bind&&Dd?e.bind(Nd):function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];Nd[t](Md(i))}:void 0}var Od=Ld("log")||De,un=Ld("warn")||Od.bind(void 0,"WARNING:"),Jh=Ld("error")||Od.bind(void 0,"ERROR:"),Fd=(()=>{const t=Nd&&Nd.assert;return t?t.bind&&Dd?t.bind(Nd):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];Nd.assert(t,Md(i))}:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t||Jh("Assertion failed:",...i)}})();function Ud(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),g.defineProperty(t,s.key,s)}}function Vd(t,e){var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),n=1;n<i;n*=2){Hd(t,e,n,s);var r=t;t=s,s=r}return t}(t,e);return i!==t&&Hd(i,null,t.length,t),t}function Hd(t,e,i,s){var n,r,h,o,a,u=t.length,c=0,l=2*i;for(n=0;n<u;n+=l)for(h=(r=n+i)+i,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)e(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}t();var Wd=/[a-zA-Z]/,qd=/[0-9]/,zd=/[0-9a-fA-F]/,Xd=/^0x/i,Gd=/^[0-9]+$/,Qd=/^[0-9a-fA-F]+$/,Kd=/^[0-7]+$/,jd=g.prototype.toString,Yd=Array.isArray||function(t){return"[object Array]"===jd.call(t)},Zd=void 0!==n&&"symbol"==typeof Jo;function Jd(t){return Yd(t)?t:Array.from(t)}function $d(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function tf(t){return t>=65&&t<=90}function ef(t){return tf(t)||function(t){return t>=97&&t<=122}(t)}function sf(t){return t>=48&&t<=57}function nf(t){return sf(t)||ef(t)}function rf(t){return sf(t)||t>=65&&t<=70||t>=97&&t<=102}function hf(t){return tf(t)?t+32:t}function of(t){return sf(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function af(t,e){return void 0===e&&(e=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(e?87:55):-1}var uf=w.min,cf=String.fromCharCode,lf=16384;function df(t){for(var e=t.length,i=[],s=0;s<e;s+=lf){var n=uf(s+lf,e);i.push(cf.apply(null,t.slice(s,n)))}return i.join("")}var ff=2147483647,_f=/[^\0-\x7E]/,vf=/[\x2E\u3002\uFF0E\uFF61]/g,gf={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ih=w.floor,wf=String.fromCharCode;function mf(t){throw new RangeError(gf[t])}function pf(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}var yf,Af,bf,Tf=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},Sf=function(t,e,i){var s=0;for(t=i?ih(t/700):t>>1,t+=ih(t/e);t>455;s+=36)t=ih(t/35);return ih(s+36*t/(t+38))},kf=function(t){return function(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],s=t.length;s--;)i[s]=e(t[s]);return i}((t=t.replace(vf,".")).split("."),e).join(".");return s+n}(t,(function(t){return _f.test(t)?"xn--"+function(t){for(var e=[],i=(t=pf(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&e.push(wf(a))}var u=e.length,c=u;for(u&&e.push("-");c<i;){for(var l=ff,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var v=c+1;l-s>ih((ff-n)/v)&&mf("overflow"),n+=(l-s)*v,s=l;for(var g=0,w=t;g<w.length;g++){var m=w[g];if(m<s&&++n>ff&&mf("overflow"),m==s){for(var p=n,y=36;;y+=36){var A=y<=r?1:y>=r+26?26:y-r;if(p<A)break;var b=p-A,T=36-A;e.push(wf(Tf(A+b%T,0))),p=ih(b/T)}e.push(wf(Tf(p,0))),r=Sf(n,v,c==u),n=0,++c}}++n,++s}return e.join("")}(t):t}))};function Du(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s)}return df(e)}function Ef(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Pf(t,e){return t>>e&63|128}function If(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(Ef(t),e.push(t>>12&15|224),e.push(Pf(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(Pf(t,12)),e.push(Pf(t,6))),e.push(63&t|128)):e.push(t)}function Cf(t){for(var e=[],i=0;i<t.length;i++){If(t[i],e)}return e}function Rf(){if(bf>=Af)throw new v("Invalid byte index");var t=255&yf[bf];if(bf++,128==(192&t))return 63&t;throw new v("Invalid continuation byte")}function xf(){var t,e;if(bf>Af)throw new v("Invalid byte index");if(bf===Af)return!1;if(t=255&yf[bf],bf++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|Rf())>=128)return e;throw new v("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|Rf()<<6|Rf())>=2048)return Ef(e),e;throw new v("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|Rf()<<12|Rf()<<6|Rf())>=65536&&e<=1114111)return e;throw new v("Invalid UTF-8 detected")}function Df(t){return[37,af(t>>4),af(15&t)]}function Nf(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Bf(t){return Nf(t)||32===t||34===t||60===t||62===t||96===t}function Mf(t){return Bf(t)||35===t||63===t||123===t||125===t}function Lf(t){return Mf(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function Of(t){return t<33||t>126||34===t||35===t||60===t||62===t}function Ff(t){return Of(t)||39===t}function Uf(t,e){if(!e(t))return[t];for(var i=Cf([t]),s=[],n=0;n<i.length;n++){var r=i[n];s.push.apply(s,Df(r))}return s}function Vf(t,e){for(var i=[],s=0,n=pf(t);s<n.length;s++){var r=n[s];i.push.apply(i,Uf(r,e))}return Du(i)}function Hf(t){return function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t[s];if(37===n&&s+2<i&&rf(t[s+1])&&rf(t[s+2])){var r=of(t[s+1])<<4|of(t[s+2]);e.push(r),s+=2}else e.push(n)}return e}(Cf(t))}function Wf(t){return Du(function(t){yf=t.slice(),Af=yf.length,bf=0;for(var e,i=[];!1!==(e=xf());)i.push(e);return i}(Hf(pf(t))))}function qf(t){var e=t.length,i=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<e&&":"===t[r]){if(!(r+1<e&&":"===t[r+1]))throw new p;r+=2,n=s+=1}for(;r<e;){if(8===s)throw new p("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<e&&zd.test(t[r]);)h=h<<4|k(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new p;if(r-=o,s>6)throw new p;for(var a=0;r<e;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new p;r+=1}if(!qd.test(t[r]))throw new p;for(;r<e&&qd.test(t[r]);){var c=k(t[r],10);if(null===u)u=c;else{if(0===u)throw new p;if((u=10*u+c)>255)throw new p}r+=1}i[s]=i[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new p;break}if(":"===t[r]){if((r+=1)===e)throw new p}else if(r<e)throw new p;i[s]=h,s+=1}else{if(null!==n)throw new p("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)$d(i,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new p;return i}function zf(t){var e=10,i=Gd;return Xd.test(t)?(t=t.slice(2),e=16,i=Qd):t.length>=2&&"0"===t[0]&&(t=t.slice(1),e=8,i=Kd),""===t?0:i.test(t)?k(t,e):void 0}var Xf={Dw:4},Gf=/[\0\t\n\r #%/:?@\[\\\]]/,Qf=/[\0\t\n\r #/:?@\[\\\]]/;function Kf(t,e){if("["===t[0]){if("]"!==t[t.length-1])throw new p("Invalid IPv6 address");return{Dw:2,Nw:qf(t.slice(1,-1))}}if(!e)return function(t){if(Qf.test(t))throw new p("Invalid code point in opaque host");var e=Vf(t,Nf);return""===e?Xf:{Dw:3,Bw:e}}(t);var i=function(t){var e=function(t){return kf(t.toLowerCase())}(t);return e}(Wf(t));if(Gf.test(i))throw new p("Invalid code point in host");var s=function(t){var e=t.split(".");if(""===e[e.length-1]&&e.pop(),!(e.length>4)){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(""===n)return;var r=zf(n);if(void 0===r)return;i.push(r)}for(var h=0;h<i.length-1;h++)if(i[h]>255)throw new p;if(i[i.length-1]>=w.pow(256,5-i.length))throw new p;for(var o=i.pop(),a=0;a<i.length;a++)o+=i[a]*w.pow(256,3-a);return o}}(i);return void 0!==s?{Dw:1,Nw:s}:""===i?Xf:{Dw:0,Mw:i}}function jf(t){switch(t.Dw){case 0:return t.Mw;case 1:return function(t){for(var e=[],i=t,s=1;s<=4;s++)e.push(""+(255&i)),4!==s&&e.push("."),i>>>=8;return e.reverse().join("")}(t.Nw);case 2:return"["+function(t){for(var e="",i=function(t){for(var e=0,i=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>i&&(e=s,i=n),n=0);return n>i&&(e=s,i=n),i>1?e:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}i!==n?(e+=t[n].toString(16),7!==n&&(e+=":")):(e+=0===n?"::":":",s=!0)}return e}(t.Nw)+"]";case 3:return t.Bw;case 4:return""}}var Yf=/\+/g;function Zf(t){return 42===t||45===t||46===t||95===t||nf(t)}function Jf(t){for(var e=t.split("&"),i=[],s=0;s<e.length;s++){var n=e[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(Yf," "),o=o.replace(Yf," ");var a=Wf(h),u=Wf(o);i.push([a,u])}}return i}function $f(t){for(var e="",i=0;i<t.length;i++){var s=t[i];i>0&&(e+="&"),e+=t_(Cf(pf(s[0])))+"="+t_(Cf(pf(s[1])))}return e}function t_(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];32===s?e.push(43):Zf(s)?e.push(s):e.push.apply(e,Df(s))}return df(e)}var e_=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function La(t){var e=""+t,i=e_.exec(e);return i?function(t,e){for(var i=t.length,s=[],n=e;n<i;n++){var r=t.charCodeAt(n);if(s_(r))if(n_(r)||n===i-1)s.push(i_);else{var h=t.charCodeAt(n+1);n_(h)?(s.push(r,h),n++):s.push(i_)}else s.push(r)}return t.slice(0,e)+df(s)}(e,i.index):e}var i_=65533,s_=function(t){return 55296==(63488&t)},n_=function(t){return 0!=(1024&t)};function r_(t,e){var i=t[0],s=e[0];return i===s?0:i<s?-1:1}function h_(t){t.Lw.length=0}function o_(t,e){!function(t,e){for(var i=0;i<e.length;i++)t[i]=e[i];t.length=e.length}(t.Lw,Jf(e))}function a_(t){if(t.Ow){var e=$f(t.Lw);""===e&&(e=null),t.Ow.Ow.Fw=e}}var u_=function(){function t(t){if(void 0===t&&(t=void 0),this.Ow=null,null==t)this.Lw=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof u_&&!!Yd(t.Lw)&&(!Zd||t[Jo]===c_)}(t))this.Lw=t.Lw.slice();else if(function(t){return null!=t&&(!!Yd(t)||!!Zd&&"function"==typeof t[Jo])}(t)){this.Lw=[];for(var e=0,i=Jd(t);e<i.length;e++){var s=Jd(i[e]);if(2!==s.length)throw new p("Invalid name-value pair");this.Lw.push([La(s[0]),La(s[1])])}}else for(var n in this.Lw=[],t)g.prototype.hasOwnProperty.call(t,n)&&this.Lw.push([La(n),La(t[n])]);else(t=La(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Lw=Jf(t)}var e=t.prototype;return e.append=function(t,e){t=La(t),e=La(e),this.Lw.push([t,e]),a_(this)},e.delete=function(t){t=La(t);for(var e=this.Lw,i=0;i<e.length;){e[i][0]===t?e.splice(i,1):i++}a_(this)},e.get=function(t){t=La(t);for(var e=this.Lw,i=0;i<e.length;i++){var s=e[i];if(s[0]===t)return s[1]}return null},e.getAll=function(t){t=La(t);for(var e=this.Lw,i=[],s=0;s<e.length;s++){var n=e[s];n[0]===t&&i.push(n[1])}return i},e.has=function(t){t=La(t);for(var e=this.Lw,i=0;i<e.length;i++){if(e[i][0]===t)return!0}return!1},e.set=function(t,e){t=La(t),e=La(e);for(var i=this.Lw,s=!1,n=0;n<i.length;){var r=i[n];r[0]===t?s?i.splice(n,1):(r[1]=e,s=!0,n++):n++}s||i.push([t,e]),a_(this)},e.sort=function(){Vd(this.Lw,r_),a_(this)},e.toString=function(){return $f(this.Lw)},e.entries=function(){return new __(this.Lw,l_)},e.keys=function(){return new __(this.Lw,d_)},e.values=function(){return new __(this.Lw,f_)},e.forEach=function(t){var e=this;this.Lw.forEach((function(i){return t(i[1],i[0],e)}))},t}(),c_=u_.prototype.entries;Zd&&(u_.prototype[Jo]=c_);var l_=function(t){return[t[0],t[1]]},d_=function(t){return t[0]},f_=function(t){return t[1]},__=function(){function t(t,e){this.Uw=0,this.Lw=t,this.Vw=e}return t.prototype.next=function(){return this.Uw<this.Lw.length?{done:!1,value:this.Vw(this.Lw[this.Uw++])}:{done:!0,value:void 0}},t}(),v_="null";var Je=g.create(null);Je.ftp=21,Je.file=0,Je.gopher=70,Je.http=80,Je.https=443,Je.ws=80,Je.wss=443;var g_=/^(?:\.|%2e)$/i,w_=/^(?:\.|%2e){2}$/i;function m_(t){return g_.test(t)}function p_(t){return w_.test(t)}function F(t){return void 0!==Je[t]}function Y(t){return F(t.Hw)}function y_(t){return""!==t.Ww||""!==t.qw}function A_(t){var e=t.length;if(!(e>=2))return!1;if(!T_(t.slice(0,2)))return!1;if(2!==e){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function b_(t){return 2===t.length&&Wd.test(t[0])&&(":"===t[1]||"|"===t[1])}function T_(t){return 2===t.length&&b_(df(t))}function S_(t){return b_(t)&&":"===t[1]}function k_(t){var e=t.zw;0!==e.length&&("file"===t.Hw&&1===e.length&&S_(e[0])||e.pop())}function E_(t){return null===t.Xw||Xf===t.Xw||t.Gw||"file"===t.Hw}var P_=-1,I_=/\t|\n|\r/g,C_=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function Oi(t,e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),i||(i=new R_,t=t.replace(C_,""));var n=null!==s?s:0;e=e||null;for(var r=[],h=!1,o=!1,a=!1,u=pf(t=t.replace(I_,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:P_;switch(n){case 0:if(!ef(d)){if(null===s){r.length=0,n=2;continue}throw new p("Invalid scheme")}r.push(hf(d)),n=1;break;case 1:if(nf(d)||43===d||45===d||46===d)r.push(hf(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new p("Invalid scheme")}var f=Du(r);if(null!==s){if(F(i.Hw)&&!F(f))return;if(!F(i.Hw)&&F(f))return;if((y_(i)||null!==i.Qw)&&"file"===f)return;if("file"===i.Hw&&(i.Xw===Xf||null===i.Xw))return}if(i.Hw=f,null!==s)return void(Y(i)&&i.Qw===Je[i.Hw]&&(i.Qw=null));r.length=0,"file"===i.Hw?n=13:Y(i)&&e&&e.Hw===i.Hw?n=3:Y(i)?n=7:47===u[l+1]?(n=4,l+=1):(i.Gw=!0,i.zw.push(""),n=18)}break;case 2:if(!e||e.Gw&&35!==d)throw new p("Invalid scheme");e.Gw&&35===d?(i.Hw=e.Hw,i.zw=e.zw.slice(),i.Fw=e.Fw,i.Kw="",i.Gw=!0,n=20):"file"!==e.Hw?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:i.Hw=e.Hw,P_===d?(i.Ww=e.Ww,i.qw=e.qw,i.Xw=e.Xw,i.Qw=e.Qw,i.zw=e.zw.slice(),i.Fw=e.Fw):47===d?n=6:63===d?(i.Ww=e.Ww,i.qw=e.qw,i.Xw=e.Xw,i.Qw=e.Qw,i.zw=e.zw.slice(),i.Fw="",n=19):35===d?(i.Ww=e.Ww,i.qw=e.qw,i.Xw=e.Xw,i.Qw=e.Qw,i.zw=e.zw.slice(),i.Fw=e.Fw,i.Kw="",n=20):92===d&&Y(i)?n=6:(i.Ww=e.Ww,i.qw=e.qw,i.Xw=e.Xw,i.Qw=e.Qw,i.zw=e.zw.slice(),i.zw.pop(),n=17,l-=1);break;case 6:!Y(i)||47!==d&&92!==d?47===d?n=9:(i.Ww=e.Ww,i.qw=e.qw,i.Xw=e.Xw,i.Qw=e.Qw,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){h&&r.unshift(37,52,48),h=!0;for(var _=0;_<r.length;_++){var v=r[_];if(58!==v||a){var g=Du(Uf(v,Lf));a?i.qw+=g:i.Ww+=g}else a=!0}r.length=0}else if(P_===d||47===d||63===d||35===d||Y(i)&&92===d){if(h&&0===r.length)throw new p("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===i.Hw)l-=1,n=15;else if(58!==d||o)if(P_===d||47===d||63===d||35===d||Y(i)&&92===d){if(l-=1,Y(i)&&0===r.length)throw new p("Invalid host");if(null!==s&&0===r.length&&(y_(i)||null!==i.Qw))return;var w=Kf(Du(r),Y(i));if(i.Xw=w,r.length=0,n=16,null!==s)return}else 91===d?o=!0:93===d&&(o=!1),r.push(d);else{if(0===r.length)throw new p("Invalid host");var m=Kf(Du(r),Y(i));if(i.Xw=m,r.length=0,n=12,11===s)return}break;case 12:if(sf(d))r.push(d);else{if(!(P_===d||47===d||63===d||35===d||Y(i)&&92===d||null!==s))throw new p("Invalid port");if(0!==r.length){var y=k(Du(r),10);if(y>65535)throw new p("Invalid port");i.Qw=y===Je[i.Hw]?null:y,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:i.Hw="file",47===d||92===d?n=14:e&&"file"===e.Hw?P_===d?(i.Xw=e.Xw,i.zw=e.zw.slice(),i.Fw=e.Fw):63===d?(i.Xw=e.Xw,i.zw=e.zw.slice(),i.Fw="",n=19):35===d?(i.Xw=e.Xw,i.zw=e.zw.slice(),i.Fw=e.Fw,i.Kw="",n=20):(A_(u.slice(l))||(i.Xw=e.Xw,i.zw=e.zw.slice(),k_(i)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(e&&"file"===e.Hw&&!A_(u.slice(l))&&(S_(e.zw[0])?i.zw.push(e.zw[0]):i.Xw=e.Xw),n=17,l-=1);break;case 15:if(P_===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&T_(r))n=17;else if(0===r.length){if(i.Xw=Xf,null!==s)return;n=16}else{var A=Kf(Du(r),Y(i));if(0===A.Dw&&"localhost"===A.Mw&&(A=Xf),i.Xw=A,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:Y(i)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(i.Fw="",n=19):null===s&&35===d?(i.Kw="",n=20):P_!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(P_===d||47===d||Y(i)&&92===d||null===s&&(63===d||35===d)){var b=Du(r);if(p_(b)?(k_(i),47===d||Y(i)&&92===d||i.zw.push("")):!m_(b)||47===d||Y(i)&&92===d?m_(b)||("file"===i.Hw&&0===i.zw.length&&T_(r)&&(Xf!==i.Xw&&null!==i.Xw&&(i.Xw=Xf),r[1]=58,b=Du(r)),i.zw.push(b)):i.zw.push(""),r.length=0,"file"===i.Hw&&(P_===d||63===d||35===d))for(;i.zw.length>1&&""===i.zw[0];)i.zw.shift();63===d?(i.Fw="",n=19):35===d&&(i.Kw="",n=20)}else r.push.apply(r,Uf(d,Mf));break;case 18:63===d?(i.Fw="",n=19):35===d?(i.Kw="",n=20):P_!==d&&(i.zw[0]+=Du(Uf(d,Nf)));break;case 19:null===s&&35===d?(i.Kw="",n=20):P_!==d&&(i.Fw+=Du(Uf(d,Y(i)?Ff:Of)));break;case 20:P_===d||0===d||(i.Kw+=Du(Uf(d,Bf)))}l++}return i}function Wh(t,e,i,s){try{Oi(t,e,i,s)}catch(t){}}var R_=function(){this.Hw="",this.Ww="",this.qw="",this.Xw=null,this.Qw=null,this.zw=[],this.Fw=null,this.Kw=null,this.Gw=!1};function x_(t){switch(t.Hw){case"blob":var e;try{e=Oi(t.zw[0],null)}catch(t){return v_}return x_(e);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,e,i){return t+"://"+jf(e)+(null===i?"":":"+i)}(t.Hw,t.Xw,t.Qw);default:return v_}}var D_=function(){function t(t,e){var i,s=null;if(null!=e)if(function(t){return null!=t&&t instanceof D_&&"object"==typeof t.Ow}(e))s=e.Ow;else try{s=Oi(String(e),null)}catch(t){throw new p("Invalid base URL: "+t.message)}try{i=Oi(String(t),s)}catch(t){throw new p("Invalid URL: "+t.message)}var n=i.Fw;this.Ow=i,this.Fw=function(t){var e=new u_;return null!==t&&o_(e,t),e}(n),this.Fw.Ow=this}var e=t.prototype;return e.toString=function(){return this.href},e.toJSON=function(){return this.href},function(t,e,i){e&&Ud(t.prototype,e),i&&Ud(t,i)}(t,[{key:"href",get:function(){return function(t,e){void 0===e&&(e=!1);var i=t.Hw+":";if(null!==t.Xw?(i+="//",y_(t)&&(i+=t.Ww,""!==t.qw&&(i+=":"+t.qw),i+="@"),i+=jf(t.Xw),null!==t.Qw&&(i+=":"+t.Qw)):null===t.Xw&&"file"===t.Hw&&(i+="//"),t.Gw)i+=t.zw[0];else for(var s=0,n=t.zw;s<n.length;s++)i+="/"+n[s];return null!==t.Fw&&(i+="?"+t.Fw),e||null===t.Kw||(i+="#"+t.Kw),i}(this.Ow)},set:function(t){var e;try{e=Oi(String(t),null)}catch(t){throw new p("Invalid URL: "+t.message)}this.Ow=e,h_(this.Fw);var i=this.Ow.Fw;null!==i&&o_(this.Fw,i)}},{key:"origin",get:function(){return x_(this.Ow)}},{key:"protocol",get:function(){return this.Ow.Hw+":"},set:function(t){Wh(t+":",null,this.Ow,0)}},{key:"username",get:function(){return this.Ow.Ww},set:function(t){E_(this.Ow)||(this.Ow.Ww=Vf(t,Lf))}},{key:"password",get:function(){return this.Ow.qw},set:function(t){E_(this.Ow)||(this.Ow.qw=Vf(t,Lf))}},{key:"host",get:function(){var t=this.Ow,e=t.Xw;if(null===e)return"";var i=t.Qw,s=jf(e);return null!==i&&(s+=":"+i),s},set:function(t){this.Ow.Gw||Wh(t,null,this.Ow,10)}},{key:"hostname",get:function(){var t=this.Ow.Xw;return null===t?"":jf(t)},set:function(t){this.Ow.Gw||Wh(t,null,this.Ow,11)}},{key:"port",get:function(){var t=this.Ow.Qw;return null===t?"":""+t},set:function(t){E_(this.Ow)||(""===t?this.Ow.Qw=null:Wh(t,null,this.Ow,12))}},{key:"pathname",get:function(){var t=this.Ow.zw;return this.Ow.Gw?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Ow.Gw||(this.Ow.zw.length=0,Wh(t,null,this.Ow,16))}},{key:"search",get:function(){var t=this.Ow.Fw;return null===t||""===t?"":"?"+t},set:function(t){t=La(t);var e=this.Ow;if(""===t)return e.Fw=null,void h_(this.Fw);"?"===t[0]&&(t=t.slice(1)),e.Fw="",Wh(t,null,e,19),o_(this.Fw,t)}},{key:"searchParams",get:function(){return this.Fw}},{key:"hash",get:function(){var t=this.Ow.Kw;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Ow.Kw="",Wh(t,null,this.Ow,20)):this.Ow.Kw=null}}]),t}();function N_(t){return t.document&&t.document.baseURI||t.location.href||""}t();var B_=class{jw(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Od(...e)}Yw(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];un(...e)}Zw(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Jh(...e)}Jw(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];Fd(t,...i)}jg(t,e){return u(t,e)}$w(t,e){return cl(t,e)}Kg(t){c(t)}tm(t){ll(t)}im(){return this.nm.im()}hm(){return this.nm.hm()}um(){return this.nm.um()}lm(){return this.nm.lm()}dm(){return this.nm.dm()}fm(t,e){return this.nm.fm(t,e)}_m(t){return this.nm._m(t)}get vm(){return this.gm}Ih(t,e){let i;return void 0===e&&(e=N_(a)),i="object"!=typeof e||e instanceof D_?e:e.href,new D_(t,i)}wm(t,e){if(void 0===e&&(e=N_(a)),this.pm){const i=Sc(e)?e:e.toString();return new self.URL(t,i).href}return this.Ih(t,e).href}get Zs(){return this.ym}get Am(){return{Tm:ul&&ul.userAgent.match(/Android /i)?"Android":"other",Sm:Boolean(ul&&ul.userAgent.match(/Android 8.0.0/i))}}get Em(){return self&&self.location&&"https:"===self.location.protocol}get Pm(){return"languages"in ul?ul.languages.slice():[ul.language]}constructor(){this.gm=new M_,this.ym=Ci,this.pm=L_(),self.performance&&self.performance.now?this.Qg=()=>self.performance.now():this.Qg=Oc}},M_=class{get Im(){return ul.oscpu}get Zs(){return ul.platform}get Cm(){return ul.vendor}get Rm(){return ul.vendorSub}};function L_(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}function yh(){return yh=g.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)g.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},yh.apply(this,arguments)}function O_(){const t=g.create(null);return t.xm=void 0,delete t.xm,t}function sa(){return new H_}function C(){return new W_}function F_(t){const e=sa();for(const i in t)Nl.call(t,i)&&e.set(i,t[i]);return e}function U_(t){const e=[];return t.forEach((t=>e.push(t))),e}t(),t(),t();var V_="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,H_=V_||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,e){this.index=0,this.data=t,this.selector=e,this.keys=g.keys(t)}}return class{get(t){return this.data[t]}set(t,e){return this.has(t)||this.size++,this.data[t]=e,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=O_(),this.size=0}keys(){return new t(this.data,((t,e)=>e))}values(){return new t(this.data,((t,e)=>t[e]))}entries(){return new t(this.data,((t,e)=>[e,t[e]]))}forEach(t){for(const e in this.data)t(this.data[e],e)}constructor(){this.data=O_(),this.size=0}}}();var W_=V_||function(){class t{next(){const t=this.Dm.next();return t.done?t:{value:this.Nm(t.value),done:!1}}constructor(t,e){this.Dm=t,this.Nm=e}}return class{get size(){return this.Bm.size}get(t){return this.Bm.get(""+t)}set(t,e){return this.Bm.set(""+t,e),this}has(t){return this.Bm.has(""+t)}delete(t){return this.Bm.delete(""+t)}clear(){this.Bm.clear()}keys(){return new t(this.Bm.keys(),(t=>Number(t)))}values(){return this.Bm.values()}entries(){return new t(this.Bm.entries(),(t=>{let[e,i]=t;return[Number(e),i]}))}forEach(t){this.Bm.forEach(((e,i)=>{t(e,Number(i))}))}constructor(){this.Bm=sa()}}}();t(),t();var q_="urn:mpeg:dash:mp4protection:2011",Ae="cenc",z_="sinf",Ih="skd",X_="9a04f079-9840-4286-ab92-e65be0885f95",ms="urn:uuid:"+X_,O="com.microsoft.playready",G_="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Pi="urn:uuid:"+G_,Q_="com.widevine.alpha",K_="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",j_="urn:uuid:"+K_,Y_="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Hh="urn:uuid:"+Y_,Z_="com.apple.fps.1_0",J_="com.apple.streamingkeydelivery",$_="identity";t();var as=function(t){return t.Mm="playready",t.Lm="widevine",t.Om="fairplay",t.Fm="clearkey",t.Um="aes128",t}({}),U={Vm:as.Mm,Hm:O,Wm:"cenc",qm:X_,zm:ms,Xm:"PlayReady"},tv={Vm:as.Lm,Hm:Q_,Wm:"cenc",qm:G_,zm:Pi,Xm:"Widevine"},ev={Vm:as.Om,Hm:Z_,Wm:"skd",qm:Y_,zm:Hh,Xm:"FairPlay"},iv={Vm:as.Om,Hm:"com.apple.fps",Wm:"sinf",qm:Y_,zm:Hh,Xm:"FairPlay"},yo={Vm:as.Fm,Hm:"org.w3.clearkey",Wm:"cenc",qm:K_,zm:j_,Xm:"ClearKey"},sv=[U,tv,ev,yo];function nv(t){return sv.filter((e=>e.zm===t.toLowerCase()))}t();var rv="function"==typeof String.prototype.replaceAll?(t,e,i)=>t.replaceAll(e,i):(t,e,i)=>t.split(e).join(i);function H(t,e){return Ee(t)&&-1!==t.indexOf(e)}var Kc="function"==typeof String.prototype.startsWith?(t,e)=>Ee(t)&&t.startsWith(e):(t,e)=>Ee(t)&&t.substr(0,e.length)===e,wr="function"==typeof String.prototype.endsWith?(t,e)=>Ee(t)&&t.endsWith(e):(t,e)=>Ee(t)&&t.substr(t.length-e.length,e.length)===e;function ys(t,e){return t.length===e.length&&t.toUpperCase()===e.toUpperCase()}var hv="function"==typeof String.prototype.repeat?(t,e)=>t.repeat(e):(t,e)=>{let i=0|e;if(0===t.length||0===i)return"";let s=t,n="";for(;1==(1&i)&&(n+=s),i>>>=1,0!==i;)s+=s;return n},ec="function"==typeof String.prototype.padStart?(t,e,i)=>(void 0===i&&(i=" "),t.padStart(e,i)):(t,e,i)=>{void 0===i&&(i=" ");let s=i;const n=(0|e)-t.length;return n<=0?t:(n>s.length&&(s+=hv(s,n/s.length)),s.slice(0,n)+t)},ov=(String.prototype.padEnd,16384),av="function"==typeof String.fromCodePoint?t=>t.length<=ov?String.fromCodePoint(...t):cv(t,String.fromCodePoint):t=>{const e=[];for(let i of t)i>65535&&(i-=65536,e.push(i>>>10&1023|55296),i=56320|1023&i),e.push(i);return uv(e)};function uv(t){return t.length<=ov?String.fromCharCode(...t):cv(t,String.fromCharCode)}function cv(t,e){const i=[];for(let s=0;s<t.length;s+=ov)i.push(e(...t.slice(s,s+ov)));return i.join("")}function lv(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}var dv=ds.Ev&&ds.Iv>=42||ds.og&&ds.cg>=38||ds.Kv||ds.$v||ds.wg&&ds.yg>=29;function fv(t,e){return H(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[yh({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[yh({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function _v(){return void 0!==ul&&"function"==typeof ul.requestMediaKeySystemAccess}function lo(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var vv=class{dm(){return this._m(tv)}hm(){return this._m(yo)}lm(){return this._m(U)}um(){return this._m(ev)}_m(t){const e=t.zm,i=this.Gm.get(e);if(i)return i;const s=this.fm(t,'video/mp4; codecs="avc1.42000a"');return this.Gm.set(e,s),s}async fm(t,e){try{return await this.Km.Qm(t.Hm,[fv(e,!0)]),!0}catch(i){try{return await this.Km.Qm(t.Hm,[fv(e,!1)]),!0}catch(t){return!1}}}im(){return this.jm||(this.jm=this.Ym()),this.jm}async Ym(){return"https:"!==a.location.protocol&&(!!dv&&!await this.hm())}constructor(t){this.Gm=sa(),this.jm=void 0,this.Km=t}};function ln(t,e){return wv(t.slice(),e)}function gv(t,e){const i=wv(t,e);return i!==t&&mv(i,void 0,t.length,t),t}function wv(t,e){let i=t;const s=i.length;if(s<=1)return i;let n=new Array(s);for(let t=1;t<s;t*=2){mv(i,e,t,n);const s=i;i=n,n=s}return i}function mv(t,e,i,s){const n=t.length;let r=0;const h=2*i;let o,a,u,c,l;for(a=0;a<n;a+=h)for(u=a+i,o=u+i,u>n&&(u=n),o>n&&(o=n),c=a,l=u;;)if(c<u&&l<o)e&&e(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<o))break;s[r++]=t[l++]}}t(),t(),t(),t(),t(),t(),t(),t(),t();var L=function(t){return t[t.ih=0]="ih",t[t.Zm=1]="Zm",t[t.Jm=-1]="Jm",t}({}),pv=(t,e)=>(0|t)-(0|e),G=(t,e)=>t===e?0:t<e?-1:t>e?1:j(t)?j(e)?0:1:-1;function ch(t,e,i){return Uu(t,e,i)?0:G(t,e)}var yv=(t,e)=>function(t,e){if(t===e)return!0;const i=w.abs(t-e);return i<fd||i<w.max(w.abs(t),w.abs(e))*fd}(t,e)?0:G(t,e);var Av="function"==typeof Array.prototype.find?(t,e)=>t.find(e):(t,e)=>{const i=su(t,e);return-1===i?void 0:t[i]},bv=Av,Tv="function"==typeof Array.prototype.findLast?(t,e)=>t.findLast(e):(t,e)=>{const i=Sv(t,e);return-1===i?void 0:t[i]},En=Tv,su="function"==typeof Array.prototype.findIndex?(t,e)=>t.findIndex(e):(t,e)=>{for(let i=0;i<t.length;i+=1){if(e(t[i],i,t))return i}return-1},Sv="function"==typeof Array.prototype.findLastIndex?(t,e)=>t.findLastIndex(e):(t,e)=>{for(let i=t.length-1;i>=0;i-=1){if(e(t[i],i,t))return i}return-1};function Ko(t,e){const i=t.indexOf(e);return-1!==i&&(Xt(t,i),!0)}function Xt(t,e){0===e?t.shift():t.splice(e,1)}function kv(t,e){const i=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===e){n++,i.length-=1;break}i[s++]=t[n++]}for(;n<t.length;)i[s++]=t[n++];return i}function Qe(t,e){return-1!==t.indexOf(e)}function Ev(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1)if(!i(t[s],e[s]))return!1;return!0}function us(t){t.length=0}function Pv(t,e){if(t.length!==e.length)return!1;for(const i of t)if(!Qe(e,i))return!1;return!0}Array.prototype.flat;var fn="function"==typeof Array.prototype.flatMap?(t,e)=>t.flatMap(e):(t,e)=>{const i=[];for(let s=0;s<t.length;s++)i.push(...e(t[s],s));return i};function kh(t,e){return Cv(t,((t,i)=>G(e(t),e(i))))}function Iv(t,e){return Rv(t,((t,i)=>G(e(t),e(i))))}function Cv(t,e){if(0!==t.length)return t.reduce(((t,i)=>e(t,i)<=0?t:i))}function Rv(t,e){return Cv(t,((t,i)=>e(i,t)))}function Th(t){return t.filter(((e,i)=>t.indexOf(e)===i))}function xv(t,e){return Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}function Dv(t,e,i){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1;return!0}function oe(t,e,i){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new p("Object expected.");var s,n;if(i){if(!el)throw new p("Symbol.asyncDispose is not defined.");s=e[el]}if(void 0===s){if(!y)throw new p("Symbol.dispose is not defined.");s=e[y],i&&(n=s)}if("function"!=typeof s)throw new p("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}t(),t(),t();var Nv="function"==typeof SuppressedError?SuppressedError:function(t,e,i){var s=new v(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function se(t){function e(e){t.error=t.hasError?new Nv(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}var i,s=0;return function n(){for(;i=t.stack.pop();)try{if(!i.async&&1===s)return s=0,t.stack.push(i),Promise.resolve().then(n);if(i.dispose){var r=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(r).then(n,(function(t){return e(t),n()}))}else s|=1}catch(t){e(t)}if(1===s)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}t(),t();var jh=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];v.apply(this,e)};(jh.prototype=g.create(v.prototype)).constructor=jh;var Pa=class extends jh{get name(){return"BaseError"}constructor(t,e){super(),this.message=t||"Unknown error",this.cause=e,v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}},ti=class extends Pa{get name(){return"AbortError"}constructor(t,e){super(t||"Aborted",e)}};function Eh(t){return t instanceof v&&"AbortError"===t.name}function Bv(t){if(t&&t.$m)throw new ti}function ta(t){if(Eh(t))throw t}function wi(t){if(!Eh(t))throw t}function Dc(t,e){return e?new Promise(((i,s)=>{if(e.$m)return t.catch(De),s(new ti);const n=()=>{e.tp(n),s(new ti)};e.ep(n),t.then((t=>{e.tp(n),i(t)}),(t=>{e.tp(n),s(t)}))})):t}async function qe(t,e){const i={stack:[],error:void 0,hasError:!1};try{oe(i,e,!1);return await t}catch(t){i.error=t,i.hasError=!0}finally{se(i)}}t(),t();var Mv=class{ip(){if(!this.$m&&!this.sp){this.$m=!0;for(const t of this.np.slice())t();this.Wu()}}Wu(){if(!this.sp){this.sp=!0;for(const t of this.rp.slice())t();us(this.np),us(this.rp)}}ep(t){this.sp||this.np.push(t)}tp(t){this.sp||Ko(this.np,t)}hp(t){this.sp||this.rp.push(t)}op(t){this.sp||Ko(this.rp,t)}constructor(){this.$m=!1,this.sp=!1,this.np=[],this.rp=[]}},Mr=class t{get ap(){return this.cp}tf(){this.cp.ip()}Wu(){this.cp.Wu()}lp(t){const e=this.cp;if(e.$m)return;if(t.$m)return void e.ip();if(e.sp||t.sp)return;const i=()=>{s(),e.ip()},s=()=>{t.tp(i),t.op(s),e.tp(i),e.op(s)};t.ep(i),t.hp(s),e.ep(i),e.hp(s)}dp(){const e=new t,i=new t,s=e.ap,n=i.ap,r=this.cp,h=()=>{s.$m&&n.sp||n.$m&&s.sp?r.ip():s.sp&&n.sp&&r.Wu()};s.ep(h),n.ep(h),s.hp(h),n.hp(h),e.lp(r),i.lp(r);return r.hp((()=>{s.tp(h),n.tp(h),s.op(h),n.op(h)})),[e,i]}static fp(e){const i=new t;for(const t of e)void 0!==t&&i.lp(t);return i}[y](){this.tf()}constructor(){this.cp=new Mv}},Lv=Promise.resolve(),Zn="function"==typeof queueMicrotask?queueMicrotask:t=>{Lv.then(t)};function Ov(t){t.then(De,De)}async function Xu(t){try{return await Promise.all(t)}catch(e){throw await Promise.all(t.map((t=>t.catch(De)))),e}}function Rt(t,e){return new Promise(((i,s)=>{if(void 0!==e&&e.$m)return void s(new ti);const n=Gn.jg((()=>{void 0!==e&&e.tp(r),i()}),t),r=()=>{Gn.Kg(n),s(new ti)};void 0!==e&&e.ep(r)}))}function Fv(t,e,i){if("function"==typeof i)i.call(t,e);else for(const s of i)s.call(t,e)}var Re=class{wn(t,e){if("function"==typeof e)if("string"==typeof t)this._p(t,e);else for(const i of t)this._p(i,e)}_p(t,e){const i=this.vp[t];void 0===i?this.vp[t]=e:"function"==typeof i?this.vp[t]=[i,e]:0===this.gp?i.push(e):this.vp[t]=i.concat(e)}wp(t){if("function"!=typeof t)return;const e=this.mp;void 0===e?this.mp=t:"function"==typeof e?this.mp=[e,t]:0===this.gp?e.push(t):this.mp=e.concat(t)}Bo(){this.vp=O_(),this.mp=void 0}wo(t){this.gp++;const e=this.vp[t.type],i=this.mp;void 0!==e&&Fv(this.pp,t,e),void 0!==i&&Fv(this.pp,t,i),this.gp--}pn(t,e){if("function"==typeof e)if("string"==typeof t)this.yp(t,e);else for(const i of t)this.yp(i,e)}yp(t,e){const i=this.vp[t];void 0!==i&&("function"==typeof i?i===e&&(this.vp[t]=void 0):0===this.gp?Ko(i,e):this.vp[t]=kv(i,e))}Ap(t){if("string"==typeof t)this.vp[t]=void 0;else for(const e of t)this.vp[e]=void 0}bp(t){const e=this.mp;void 0!==e&&("function"==typeof e?e===t&&(this.mp=void 0):0===this.gp?Ko(e,t):this.mp=kv(e,t))}Tp(t,e){return new Promise(((i,s)=>{if(e&&e.$m)return s(new ti);const n=t=>{h(),i(t)},r=()=>{h(),s(new ti)},h=()=>{this.pn(t,n),e&&e.tp(r)};this.wn(t,n),e&&e.ep(r)}))}constructor(t){this.vp=O_(),this.mp=void 0,this.gp=0,this.Os=t=>{this.wo(t)},this.pp=null!=t?t:this}},bi=class extends Re{wo(t){Zn((()=>{super.wo(t)}))}},S=class extends Re{wp(t){super.wp(t)}bp(t){super.bp(t)}};t(),t();var o=class{constructor(t,e=new Date){this.type=t,this.date=e}};t();var Uv=function(t){return t.Sp="kp",t.Ep="Pp",t.Ip="contentprotectionerror",t.Cp="contentprotectionsuccess",t.Rp="currentsourcechange",t.xp="destroy",t.Vf="durationchange",t.Dp="emptied",t.Np="encrypted",t.Df="ended",t.Bp="Mp",t.Lp="Op",t.Fp="Up",t.Vp="Hp",t.Rf="loadstart",t.Wp="manifestupdate",t.qp="nosupportedrepresentationfound",t.zp="offline",t.Xp="online",t.Ff="pause",t.no="play",t.zf="progress",t.qu="ratechange",t.Gp="representationchange",t.Qp="resize",t.If="seeked",t.$f="seeking",t.Kp="segmentnotfound",t.jp="Yp",t.Zp="Jp",t.oo="sourcechange",t.Xu="timeupdate",t.Bl="volumechange",t.$p="ey",t.iy="sy",t.oy="metricschange",t}({}),Vv=["cenc"],Hv=["cbcs","cbcs-1-9"],Wv=class extends o{constructor(t){super(Uv.iy),this.uy=t}},vs=class extends o{constructor(t,e,i,s){super("ly"),this._y=t,this.vy=e,this.ly=i,this.gy=s}},qv=class extends o{constructor(){super("lt")}},ir=function(t){return t.Np="wy",t.py="yy",t}({}),ct=class extends o{constructor(t,e){super("wy"),this.Wm=t,this.Ay=e}},zv=class extends o{constructor(){super("yy")}};t(),t(),t();var Xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Xv=16383,Gv=/[\t\n\f\r ]/g;function Le(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Qv()}function Qv(){throw new v("Invalid base64 input")}function yi(t){let e=t;Gv.test(e)&&(e=e.replace(Gv,""));let i=e.length;i%4==0&&i>=1&&"="===e[i-1]&&(i>=2&&"="===e[i-2]?i-=2:i-=1,e=e.substr(0,i));const s=i%4;if(1===s)return Qv();const n=0===s?0:4-s,r=new x(function(t,e){return 3*(t+e)/4-e}(i,n)),h=n>0?i-4:i;let o,a=0,u=0;for(;a<h;a+=4)o=Le(e.charCodeAt(a))<<18|Le(e.charCodeAt(a+1))<<12|Le(e.charCodeAt(a+2))<<6|Le(e.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=Le(e.charCodeAt(a))<<2|Le(e.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=Le(e.charCodeAt(a))<<10|Le(e.charCodeAt(a+1))<<4|Le(e.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function Kv(t,e,i){return Xn[t>>2]+Xn[(3&t)<<4|e>>4]+Xn[(15&e)<<2|i>>6]+Xn[63&i]}function jv(t,e,i){const s=[];for(let n=e;n<i;n+=3)s.push(Kv(t[n],t[n+1],t[n+2]));return s.join("")}function Ps(t){const e=t.length,i=e%3,s=[],n=e-i;for(let e=0;e<n;e+=Xv)s.push(jv(t,e,w.min(n,e+Xv)));if(1===i){const i=t[e-1];s.push(Xn[i>>2]+Xn[(3&i)<<4]+"==")}else if(2===i){const i=t[e-2],n=t[e-1];s.push(Xn[i>>2]+Xn[(3&i)<<4|n>>4]+Xn[(15&n)<<2]+"=")}return s.join("")}function Yv(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}function J(t,e){const i=e.Fu,s=t.getUint8(i>>3),n=1<<7-(7&i);return e.by(1),(s&n)===n?1:0}function wt(t,e,i){let s=0;for(let n=0;n<i;n++)s=2*s+J(t,e);return s}t(),t();var bh=class t{get Fu(){return this._c}by(t){this._c+=t}jc(t){this._c=t}Ty(){return new t(this.Fu)}constructor(t=0){this._c=t}};var Zv=w.clz32||function(t){let e=32,i=t>>16;return i&&(e-=16,t=i),i=t>>8,i&&(e-=8,t=i),i=t>>4,i&&(e-=4,t=i),i=t>>2,i&&(e-=2,t=i),i=t>>1,i?e-2:e-t};function Jv(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function $v(t,e){return t>>e&63|128}function tg(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(Jv(t),e.push(t>>12&15|224),e.push($v(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push($v(t,12)),e.push($v(t,6))),e.push(63&t|128)):e.push(t)}function eg(t,e){if(e.Fu>=t.length)throw new v("Invalid byte index");const i=255&t[e.Fu];if(e.by(1),128==(192&i))return 63&i;throw new v("Invalid continuation byte")}function ig(t,e){const i=e.Fu;if(i>t.length)throw new v("Invalid byte index");if(i===t.length)return!1;const s=255&t[i];if(e.by(1),0==(128&s))return s;if(192==(224&s)){const i=(31&s)<<6|eg(t,e);if(i>=128)return i;throw new v("Invalid continuation byte")}if(224==(240&s)){const i=(15&s)<<12|eg(t,e)<<6|eg(t,e);if(i>=2048)return Jv(i),i;throw new v("Invalid continuation byte")}if(240==(248&s)){const i=(7&s)<<18|eg(t,e)<<12|eg(t,e)<<6|eg(t,e);if(i>=65536&&i<=1114111)return i}throw new v("Invalid UTF-8 detected")}t(),t();var sg=65279;var ng=[128,64,32,16,8,4,2,1],rg=class{Sy(t){return hg(this.Ey,t)}constructor(t){this.Ey=t}};function hg(t,e){return(t&e)===e}function mi(t,e){return hg(t,ng[e])}function _e(t,e){const i=t.getUint8(e.Fu);return e.by(1),i}function og(t,e,i){t.setUint8(e.Fu,i),e.by(1)}function bn(t,e,i){const s=uc(Ht(t),e.Fu,e.Fu+i);return e.by(s.byteLength),s}function vo(t,e,i){Ht(t).set(Ht(i),e.Fu),e.by(i.byteLength)}function ag(t,e,i){return e.Fu+i<=t.byteLength}function Nh(t,e,i,s){return void 0===s&&(s=!1),s?function(t,e,i){let s=0,n=1;for(let r=0;r<i;r++)s+=_e(t,e)*n,n*=256;return s}(t,e,i):function(t,e,i){let s=0;for(let n=0;n<i;n++)s=256*s+_e(t,e);return s}(t,e,i)}function Qu(t,e,i){void 0===i&&(i=!1);const s=t.getUint16(e.Fu,i);return e.by(2),s}function ug(t,e,i,s){void 0===s&&(s=!1),t.setUint16(e.Fu,i,s),e.by(2)}function No(t,e,i){void 0===i&&(i=!1);const s=t.getUint32(e.Fu,i);return e.by(4),s}function Vc(t,e,i,s){void 0===s&&(s=!1),t.setUint32(e.Fu,i,s),e.by(4)}function Z(t,e,i){void 0===i&&(i=!1);const s=No(t,e,i),n=No(t,e,i),r=i?n:s,h=i?s:n;return Yc.fromBits(h,r,!0)}function cg(t,e,i,s){void 0===s&&(s=!1);const n=i.getHighBitsUnsigned(),r=i.getLowBitsUnsigned(),h=s?n:r;Vc(t,e,s?r:n,s),Vc(t,e,h,s)}function lg(t,e){return fg(t,e)}function dc(t,e,i){return uv(Pg(bn(t,e,i)))}function dg(t,e){const i=_e(t,e);let s;return 0==(128&i)?s=i:192==(224&i)?s=64*(31&i)+(63&_e(t,e)):224==(240&i)?s=4096*(15&i)+64*(63&_e(t,e))+(63&_e(t,e)):240==(248&i)&&(s=262144*(7&i)+4096*(63&_e(t,e))+64*(63&_e(t,e))+(63&_e(t,e))),s}function fg(t,e){return _g(t,e,!0)}function _g(t,e,i){const s=[];for(;e.Fu<t.byteLength;){const n=_e(t,e);if(i&&!n)break;s.push(n)}return uv(s)}function vg(t,e,i){const s=i.length;for(let n=0;n<s;n+=1){og(t,e,i.charCodeAt(n))}}function gg(t,e){if(!(e.Fu+2<=t.byteLength))return;const i=t.getUint8(e.Fu),s=t.getUint8(e.Fu+1);return(254!==i||255!==s)&&(255===i&&254===s||void 0)}function wg(t,e){const i=gg(t,e);return void 0!==i&&e.by(2),mg(t,e,!0===i)}function mg(t,e,i){return void 0===i&&(i=!1),pg(t,e,i,!0)}function pg(t,e,i,s){const n=[];for(;e.Fu+2<=t.byteLength;){const r=Qu(t,e,i);if(s&&!r)break;n.push(r)}return uv(n)}function yg(t,e,i,s){void 0===s&&(s=!1);const n=i.length;for(let r=0;r<n;r+=1){ug(t,e,i.charCodeAt(r),s)}}function an(t){return _g(Nt(t),new lh,!1)}function Ag(t){const e=new x(t.length);return vg(Nt(e),new lh,t),e}function bg(t,e){return void 0===e&&(e=!1),pg(Nt(t),new lh,e,!1)}function Tg(t,e){void 0===e&&(e=!1);const i=new x(2*t.length);return yg(Nt(i),new lh,t,e),i}function Sg(t,e){return e.Fu+3<=t.byteLength&&(239===t.getUint8(e.Fu)&&187===t.getUint8(e.Fu+1)&&191===t.getUint8(e.Fu+2))}function Vh(t,e){return function(t,e,i){const s=[],n=Sg(t,e);n&&e.by(3);for(;e.Fu<t.byteLength;){const n=dg(t,e);if(void 0===n)break;if(i&&0===n)break;s.push(n)}return av(s)}(t,e,!0)}function kg(t){return function(t){return av(t)}(function(t,e){const i=[],s=new lh;let n;if(!e){if(n=ig(t,s),!1===n)return i;n===sg||i.push(n)}for(;!1!==(n=ig(t,s));)i.push(n);return i}(Ht(t)))}function ro(t){return new x(function(t){const e=[];for(const i of t)tg(i,e);return e}(function(t){const e=[];let i=0;const s=t.length;for(;i<s;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){const s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&n)<<10)+(1023&s)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)))}function Fh(t,e){if(Sg(t,e))return Vh(t,e);if(void 0!==gg(t,e))return wg(t,e);if(e.Fu+4<=t.byteLength){if(0===t.getUint8(e.Fu)&&0===t.getUint8(e.Fu+2))return mg(t,e,!1);if(0===t.getUint8(e.Fu+1)&&0===t.getUint8(e.Fu+3))return mg(t,e,!0)}return Vh(t,e)}function uc(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new x(t.buffer,t.byteOffset+e,i-e)}function it(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function Nt(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ht(t){return new x(t.buffer,t.byteOffset,t.byteLength)}function Eg(t){return t instanceof ArrayBuffer||Cg(t)}function fu(t){return t instanceof ArrayBuffer?new x(t):Ht(t)}function Nc(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),t.slice?t.slice(e,i):ki(uc(t,e,i))}function ki(t){if(t.slice)return t.slice(0);{const e=new x(t.byteLength);return e.set(t,0),e}}function Pg(t){return[].slice.call(t)}var lh=class t{get Fu(){return this._c}by(t){this._c+=t}jc(t){this._c=t}Ty(){return new t(this.Fu)}Py(){return new bh(this.Fu<<3)}constructor(t=0){this._c=t}};function Yh(t){let e=t.toLowerCase(),i=0,s=0;Kc(e,"0x")&&(e=e.substring(2));const n=new x(w.ceil(e.length/2));for(1==(1&e.length)&&(i=1,n[s++]=k(e[0],16));i<e.length;i+=2)n[s++]=k(e.substr(i,2),16);return n}var Ig=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],Cg=ArrayBuffer.isView||(t=>t&&Qe(Ig,Jr.call(t)));function In(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;return Rg(new x(t),new x(e))}function Rg(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;for(let i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0}function xg(t,e){return t===e||Rg(fu(t),fu(e))}function po(t){const e=t.reduce(((t,e)=>t+e.byteLength),0);return Dg(t,e)}function Dg(t,e){const i=new x(e);let s=0;for(const e of t)i.set(e,s),s+=e.byteLength;return i}function Ng(t,e,i){const s=new x(t.byteLength+e.byteLength),n=uc(t,0,i),r=uc(t,i);return s.set(n),s.set(e,i),s.set(r,i+e.byteLength),s}function Bg(t){return yi(t).buffer}function Mg(t){return Ps(new x(t))}function Lg(t){return Ps(Ag(t))}var Ah=new x([0]).buffer,K=class{get Iy(){return this.Cy.length}Ry(t){for(const e of this.Cy)if(xg(e[0],t))return!0;return!1}xy(t){for(const e of this.Cy)if(xg(e[0],t))return e[1]}Dy(t,e){for(const i of this.Cy)if(xg(i[0],t))return void(i[1]=e);this.Cy.push([t,e])}Ny(t,e){this.Cy.forEach((e=>t(e[1],e[0])),e)}By(){us(this.Cy)}constructor(){this.Cy=[]}};t();var ue=class{Xf(t){this.xd&&(this.xd(t),this.Wu())}My(t){this.Dd&&(this.Dd(t),this.Wu())}tf(){this.Pf.catch(De),this.My(new ti)}lp(t){t.then((t=>this.Xf(t)),(t=>this.My(t)))}Wu(){this.xd=void 0,this.Dd=void 0}constructor(){this.Pf=new Promise(((t,e)=>{this.xd=t,this.Dd=e}))}};function Og(){return new x([8,4]).buffer}function Fg(t,e){return t===O?function(t){if(t.byteLength<2*Ug.length)return t;const e=new DataView(t,0,2*Ug.length),i=bg(e,!0);if(i===Ug)return t;return function(t){const e='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+e+Mg(t)+i;return Tg(s,!0).buffer}(t)}(e):e}t();var Ug="<PlayReady";t(),t();var Vg=class extends Pa{constructor(t,e,i,s){super(t,s),this.Ly=e,this.Oy=i}};t(),t(),t(),t(),t();var Hg=function(t,e){return(Hg=g.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)g.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function Ie(t,e){if("function"!=typeof e&&null!==e)throw new p("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Hg(t,e),t.prototype=null===e?g.create(e):(i.prototype=e.prototype,new i)}function Wg(t,e,i){return t.indexOf?t.indexOf(e,i):Array.prototype.indexOf.call(t,e,i)}t(),t(),t(),t(),t(),t(),t();!function(){function t(t,e){this.Fy=t,this.Uy=e}t.prototype.get=function(t){var e=this.Fy.get(t);if(0===this.Uy||void 0===e)return e;var i=this.Fy.get(t+1)||0,s=e&(1<<8-this.Uy)-1,n=i>>8-this.Uy;return(s<<this.Uy)+n},t.prototype.getBit=function(t){if(!(t<0)){var e=this.Fy.get(w.floor((t+this.Uy)/8));if(void 0!==e)return(e&1<<7-this.Uy-t%8)>0?1:0}},g.defineProperty(t.prototype,"bitLength",{get:function(){return this.Fy.bitLength-this.Uy},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"length",{get:function(){return this.Fy.length},enumerable:!1,configurable:!0})}();t(),t();w.pow(2,-52);function qg(t,e,i){return w.min(w.max(t,e),i)}function Ch(t,e){return t>>8-e}function Bh(t,e){return t&(1<<e)-1}var ra=function(){function t(t){this.Vy=t,this.Hy=0,this.Wy=0}return g.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.Hy+this.Wy},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"done",{get:function(){return this.Hy===this.Vy.length&&0===this.Wy},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"location",{get:function(){return{byte:this.Hy,bit:this.Wy}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var e=new t(this.Vy);return e.seek(this.Hy,this.Wy),e},t.prototype.canReadBits=function(t){return 8*this.Hy+t+this.Wy<=8*this.Vy.length},t.prototype.canReadBytes=function(t){return 0===this.Wy?this.Hy+t<=this.Vy.length:this.Hy+t<this.Vy.length},t.prototype.incBit=function(){this.Wy++,this.Wy>7&&(this.Hy++,this.Wy=0)},t.prototype.seek=function(t,e){this.Hy=t,this.Wy=e},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new v("Cannot read past end of buffer.");return this.Vy.get(this.Hy)>>7-this.Wy&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new v("Cannot read past end of buffer.");if(0===this.Wy)return this.Vy.get(this.Hy++);var t=Bh(this.Vy.get(this.Hy),8-this.Wy),e=Ch(this.Vy.get(this.Hy+1),this.Wy);return this.Hy++,t<<this.Wy|e},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readBit());return e},t.prototype.readUInt=function(t){if(t>32)throw new v("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");var e=0;if(0===this.Wy&&t%8==0)for(var i=t-8;i>=0;i-=8)e|=this.readByte()<<i;else for(i=t-1;i>=0;i--)e|=this.readBit()<<i;return e},t.prototype.readInt=function(t){if(t>32)throw new v("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");var e=this.readUInt(t);return 0===(e&1<<t-1)?e:e-w.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var e=1<<t;return e+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new v("Skipping over the buffer edge is not allowed.");var e=this.Wy+t;this.Hy+=e>>3,this.Wy=7&e},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new v("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readByte());return String.fromCharCode.apply(String,e)},t}();t(),t(),t();var zg=function(t,e){return t===e?0:t<e?-1:t>e?1:j(t)?j(e)?0:1:-1},rs=function(){function t(){this.qy=[],this.zy=[],this.Xy=0}return t.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s=new t,n=0,r=e;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length),i<0)throw new v("The buffer length must be positive.");if(0!==i){if(0===this.zy.length)this.zy.push(0);else{var s=this.zy[this.zy.length-1]+this.qy[this.qy.length-1].length;this.zy.push(s)}this.qy.push(t.subarray(e,e+i)),this.Xy+=i}},t.prototype.concat=function(e){var i=new t;return i.pushRange(this.join()),i.pushRange(e.join()),i},t.prototype.copy=function(t,e,i,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||i<0||s<0)throw new RangeError;return this.slice(i,s).copyInternal(t,e)},t.prototype.copyInternal=function(t,e){for(var i=0,s=e,n=0,r=this.qy;n<r.length;n++){var h=r[n];t.set(h,s),i+=h.length,s+=h.length}return i},t.prototype.clear=function(){this.qy=[],this.zy=[],this.Xy=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var e=this.findContainingBufferIndex(t),i=t-this.zy[e];return this.qy[e][i]}},g.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.qy.length<1)return-1;if(this.qy.length>1){var e=this.join();this.clear(),this.pushRange(e)}var i=this.qy[0];return"number"==typeof t?Wg(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,e){if(0===e.length)return 0;for(var i=e[0],s=e.length,n=t.length-s,r=0;r<=n&&!((r=Wg(t,i,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===e[a];h++,a++);if(h===o)return r}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,e,i){if(0!==t.length){var s=0,n=t.length-1;if(1!==i(t[s],e)){if(1===i(e,t[n]))return n;for(;s!==n;){var r=w.ceil((s+n)/2);i(t[r],e)<=0?s=r:n=r-1}return s}}}(this.zy,t,zg)},t.prototype.join=function(){if(1===this.qy.length)return this.qy[0];var t=new x(this.length);return this.copyInternal(t,0),t},g.defineProperty(t.prototype,"length",{get:function(){return this.Xy},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,e){if(e<=0||e>4)throw new v("Expected byteLength to be between 0 and 4 but was "+e);if(t<0||t>this.length-e)throw new v("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-e)+")");if(1===e)return this.get(t);for(var i=0,s=0;s<e;s++)i+=this.get(t+s)*w.pow(2,8*(e-s-1));return i},t.prototype.slice=function(e,i){void 0===i&&(i=this.length);var s=qg(e,0,this.length),n=qg(i,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.qy[h],a=s,u=a-this.zy[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.zy[h],o=this.qy[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var e=this.length-1,i=this.qy.length-1,s=this.qy[i],n=s.length-1;e>=0&&i>=0;){if(0!==s[n])break;if(0===n){if(0===i)return new t;i-=1,n=(s=this.qy[i]).length-1}else n-=1;e-=1}return this.slice(0,e+1)},t}(),Xg=function(){function t(e){this.Gy=e||t.BUFFER_CHUNK_SIZE,this.Qy=!1,this.Ky=new rs,this.Vy=new x(this.Gy),this.jy=0,this.Yy=0,this.Wy=7}return t.prototype.closeByte=function(){this.Vy[this.jy++]=this.Yy,this.jy>=this.Gy&&this.closeBuffer(),this.Yy=0,this.Wy=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.jy&&(this.Ky.pushRange(this.Vy,0,this.jy),t&&(this.Vy=new x(this.Gy)),this.jy=0)},g.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.Wy},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.Qy)throw new v("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.Qy=!0,this.Ky},t.prototype.writeBit=function(t){if(this.Qy)throw new v("Cannot write to a closed BitWriter.");this.Yy|=t<<this.Wy,0===this.Wy?this.closeByte():this.Wy--},t.prototype.writeByte=function(t){if(this.Qy)throw new v("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.Yy=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var e=this.Wy;this.Yy|=Ch(t,e+1),this.closeByte(),this.Yy=Bh(t,8-e)<<e+1,this.Wy=e},t.prototype.writeBits=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.Qy)throw new v("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.jy+t.length<=this.Gy?(this.Vy.set(t,this.jy),this.jy+=t.length,this.jy===this.Gy&&this.closeBuffer()):(this.closeBuffer(),this.Ky.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var e=this.Wy;this.Yy|=Ch(t[0],e+1),this.closeByte();for(var i=1;i<t.length;i++){var s=Bh(t[i-1],8-e),n=Ch(t[i],e+1);this.Yy=s<<e+1|n,this.closeByte()}this.Yy=Bh(t[t.length-1],8-e)<<e+1,this.Wy=e}},t.prototype.writeUInt=function(t,e){if(t<0)throw new v("Received a negative number.");if(e>32)throw new v("The max bitlength that can be provided is 32.");if(t>=w.pow(2,e))throw new v("Uint "+t+" cannot be represented in "+e+" bit(s).");if(this.isWritingStartBit&&e%8==0)for(var i=e-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=e-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,e){if(e>32)throw new v("The max bitlength that can be provided is 32.");if(w.abs(t)>=w.pow(2,e-1))throw new v("Signed integer "+t+" cannot be represented in "+e+" bit(s).");t<0?this.writeUInt(t+w.pow(2,e),e):this.writeUInt(t,e)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new v("Received a negative number.");for(var e=w.floor(w.log2(t+1))+1,i=0;i<e-1;i++)this.writeBit(0);this.writeUInt(t+1,e)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var e=function(t){for(var e=new x(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(t),i=0;i<e.length;i++)this.writeByte(e[i])},t.BUFFER_CHUNK_SIZE=1024,t}();t();var Gg=function(){function t(t){this.rb=new rs,this.Vd=t}return t.prototype.closeWriter=function(){void 0!==this.Vd&&(this.rb=this.rb.concat(this.Vd.close()),this.Vd=void 0)},g.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Vd&&(this.Vd=new Xg),this.Vd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Ca=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new v("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(e){var i=this.getSize(),s=i>=t.LARGE_SIZE/8,n=16===this.boxType.length;e.writeUInt(s?1:i,32),e.writeString(n?"uuid":this.boxType),s&&(e.writeUInt(w.floor(i/t.LARGE_SIZE),32),e.writeUInt(i%t.LARGE_SIZE,32)),n&&e.writeString(this.boxType)},t.prototype.getSize=function(){var e=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+e;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new Gg;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=w.pow(2,32),t}();function na(t,e){return t instanceof Yc?64===e:t<w.pow(2,e)}function xt(t,e){return w.round(t*w.pow(2,e))}function qn(t,e){for(var i=0;i<e.length;i++)t.writeByte(e[i])}function Ve(t,e){return t/w.pow(2,e)}t();var Bs=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!na(i,8))throw new v("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Ie(e,t),g.defineProperty(e.prototype,"flags",{get:function(){return this.Zy},set:function(t){this.Zy=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new v("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(Ca);t(),t();var Qg=function(t){function e(e,i){var s=t.call(this,e)||this;return s.data=i,s}return Ie(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(rs.from(this.data))},e}(Ca);t(),t();var Kg=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();t();var jg=16384;function Yg(t){var e=t.length;if(e<=jg)return String.fromCharCode.apply(String,t);for(var i=[],s=0;s<e;s+=jg)i.push(String.fromCharCode.apply(String,t.slice(s,s+jg)));return i.join("")}var Zg=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,e){return(t&e)===e}(this.raw,t)},t}();function ve(t,e){var i=t.getUint8(e.offset);return e.shift(1),i}function Jg(t,e,i){var s=nw(ow(t),e.offset,e.offset+i);return e.shift(s.byteLength),s}function $g(t,e,i){return e.offset+i<=t.byteLength}function tr(t,e,i){void 0===i&&(i=!1);var s=t.getUint32(e.offset,i);return e.shift(4),s}function tw(t,e,i){void 0===i&&(i=!1);var s=tr(t,e,i),n=tr(t,e,i),r=i?n:s,h=i?s:n;return Yc.fromBits(h,r,!0)}function ew(t,e,i){return Yg(function(t){return[].slice.call(t)}(Jg(t,e,i)))}function iw(t,e){var i,s=ve(t,e);return 0==(128&s)?i=s:192==(224&s)?i=64*(31&s)+(63&ve(t,e)):224==(240&s)?i=4096*(15&s)+64*(63&ve(t,e))+(63&ve(t,e)):240==(248&s)&&(i=262144*(7&s)+4096*(63&ve(t,e))+64*(63&ve(t,e))+(63&ve(t,e))),i}function sw(t,e){return function(t,e,i){var s=[],n=function(t,e){return e.offset+3<=t.byteLength&&239===t.getUint8(e.offset)&&187===t.getUint8(e.offset+1)&&191===t.getUint8(e.offset+2)}(t,e);n&&e.shift(3);for(;e.offset<t.byteLength;){var r=iw(t,e);if(void 0===r)break;if(i&&0===r)break;s.push(r)}return function(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return Yg(e)}(s)}(t,e,!0)}function nw(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new x(t.buffer,t.byteOffset+e,i-e)}function rw(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function hw(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ow(t){return new x(t.buffer,t.byteOffset,t.byteLength)}var aw=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new Kg(this.offset<<3)},t}();t();var uw=function(){function t(t,e){this.data=t,this.cursor=e}return t.prototype.nextUint8=function(){return ve(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getUint16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return tr(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt32(e.offset,i);return e.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,e,i){void 0===i&&(i=!1);var s=tr(t,e,i),n=tr(t,e,i),r=i?n:s,h=i?s:n;return Yc.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return tw(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Jg(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,e,i){for(var s=[],n=0;n<i;n++)s.push(tr(t,e));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return ew(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return sw(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function zo(t,e){return t.type===e}var cw=8;function Eo(t){var e=function(t,e){var i=[];for(;e.offset<t.byteLength;){var s=lw(t,e);if(!s.complete)return{complete:!1,boxes:i};i.push(s.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!e.complete)throw new v("Data incomplete");return e.boxes}function lw(t,e){var i=e.offset,s=function(t,e){var i=e.offset;if(!$g(t,e,cw)){return{complete:!1,neededOffset:r=e.offset+cw}}var s=tr(t,e),n=ew(t,e,4);if(1===s){if(!$g(t,e,8)){var r=e.offset+8;return e.seek(i),{complete:!1,neededOffset:r}}s=tw(t,e).toNumber()}if("uuid"===n){if(!$g(t,e,16)){r=e.offset+16;return e.seek(i),{complete:!1,neededOffset:r}}n=ew(t,e,16)}var h=e.offset,o={type:n,size:s,headerSize:h-i};return{complete:!0,header:o}}(t,e);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-i);var h=i+r;if(h>t.byteLength){var o=h;return e.seek(i),{complete:!1,neededOffset:o}}var a={type:n.type,offset:i,data:new uw(rw(t,i,h),new aw(n.headerSize))};return e.seek(h),{complete:!0,box:a}}function Zc(t){return{version:t>>24,flags:new Zg(16777215&t)}}function dw(t,e){var i,s,n,r;return 1===e?(i=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(i=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:i,modification:s,scale:n,duration:r}}function fw(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function _w(t){var e=t.nextUint32Array(9);return{a:Ve(e[0],16),b:Ve(e[1],16),u:Ve(e[2],30),c:Ve(e[3],16),d:Ve(e[4],16),v:Ve(e[5],30),x:Ve(e[6],16),y:Ve(e[7],16),w:Ve(e[8],30)}}function ls(t){return new Qg(t.type,nw(ow(t.data.data),t.data.cursor.offset))}var vw=function(t){function e(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=i,r.handlerType=e,r}return Ie(e,t),g.defineProperty(e.prototype,"handlerType",{get:function(){return this.Jy},set:function(t){this.Jy=t},enumerable:!1,configurable:!0}),e.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(e=this.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)+1},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeString(this.handlerType),this.serializeReserved(e),this.name&&e.writer.writeString(this.name),e.writer.writeByte(0)},e}(Bs);function gw(t){var e=t.data,i=Zc(e.nextUint32()),s=i.version,n=i.flags;e.skip(4);var r=e.nextChars(4);e.skip(12);var h=e.nextUTF8String();return new vw(r,h,s,n.raw)}!function(t){function e(){return t.call(this,"mdir")||this}Ie(e,t),e.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(vw);t(),t(),t();var ww=function(){function t(t,e){void 0===e&&(e=!1),this.fixed28BitMode=e,this.tag=t}return t.prototype.encodeSize=function(t){for(var e=[];t>0;)e.length>0&&(e[e.length-1]+=128),e.push(t%128),t>>=7;if(this.fixed28BitMode)for(;e.length<4;)e.push(128);return e.reverse()},g.defineProperty(t.prototype,"tag",{get:function(){return this.$y},set:function(t){if(!na(t,8))throw new v("Provided tag does not fit in 8 bits.");this.$y=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var e=0,i=this.encodeSize(this.getDescriptorSize());e<i.length;e++){var s=i[e];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();t();!function(t){function e(e,i,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=e,a.streamType=i,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Ie(e,t),g.defineProperty(e.prototype,"objectTypeIndication",{get:function(){return this.tA},set:function(t){if(!na(t,8))throw new v("Provided objectTypeIndication does not fit in 8 bits.");this.tA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"streamType",{get:function(){return this.eA},set:function(t){if(!na(t,6))throw new v("Provided streamType does not fit in 6 bits.");this.eA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.iA},set:function(t){if(!na(t,24))throw new v("Provided bufferSizeDb does not fit in 24 bits.");this.iA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"maxBitrate",{get:function(){return this.sA},set:function(t){if(!na(t,32))throw new v("Provided maxBitrate does not fit in 32 bits.");this.sA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"avgBitrate",{get:function(){return this.nA},set:function(t){if(!na(t,32))throw new v("Provided avgBitrate does not fit in 32 bits.");this.nA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var e=0,i=this.decoderSpecificInfo;e<i.length;e++){i[e].serialize(t)}}}(ww);t();!function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this,5,i.fixed28BitMode)||this;return s.data=e,s}Ie(e,t),e.prototype.getDescriptorSize=function(){return this.data.length},e.prototype.serializeDescriptorContent=function(t){t.concat(rs.from(this.data))}}(ww);t(),t();var mw=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,6,e)||this;return i.predefined=2,i}return Ie(e,t),e.prototype.getDescriptorSize=function(){return 1},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},e}(ww);!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=e,r.streamPriority=i,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new mw(n.fixed28BitMode),r}Ie(e,t),g.defineProperty(e.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"esId",{get:function(){return this.rA},set:function(t){if(!na(t,16))throw new v("Provided esId does not fit in 16 bits.");this.rA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"streamPriority",{get:function(){return this.hA},set:function(t){if(!na(t,5))throw new v("Provided streamPriority does not fit in 5 bits.");this.hA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"dependsOnEsId",{get:function(){return this.oA},set:function(t){if(t&&!na(t,16))throw new v("Provided dependsOnEsId does not fit in 16 bits.");this.oA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"ocrEsId",{get:function(){return this.aA},set:function(t){if(t&&!na(t,16))throw new v("Provided ocrEsId does not fit in 16 bits.");this.aA=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},e.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(ww);t(),t(),t(),t(),t();var pw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxes=[],e}return Ie(e,t),e.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serialize=function(){for(var e=t.prototype.serialize.call(this),i=0,s=this.boxes;i<s.length;i++){var n=s[i];e=e.concat(n.serialize())}return e},e}(Ca),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ie(e,t),e.prototype.serializeBoxContent=function(t){},e.prototype.getBoxContentSize=function(){return 0},e}(pw),bo=function(t){function e(e,i){var s=t.call(this,e)||this;return s.dataReferenceIndex=i,s}return Ie(e,t),g.defineProperty(e.prototype,"dataReferenceIndex",{get:function(){return this.uA},set:function(t){if(!na(t,16))throw new v("Provided dataReferenceIndex does not fit in 16 bits.");this.uA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){for(var e=0;e<6;e++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},e}(ft),yw=function(t){function e(e,i,s,n){var r,h,o=this;return(o=t.call(this,e,i)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return Ie(e,t),g.defineProperty(e.prototype,"channelCount",{get:function(){return this.cA},set:function(t){if(!na(t,16))throw new v("Provided channelCount does not fit in 16 bits.");this.cA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleSize",{get:function(){return this.lA},set:function(t){if(!na(t,16))throw new v("Provided sampleSize does not fit in 16 bits.");this.lA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleRate",{get:function(){return this.dA},set:function(t){if(!na(xt(t,16),32))throw new v("Provided rate does not fit in 32 bits (fixed 16.16).");this.dA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(e=this.extra)||void 0===e?void 0:e.length)&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.channelCount,16),e.writer.writeUInt(this.sampleSize,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(xt(this.sampleRate,16),32),this.extra&&qn(e.writer,this.extra)},e}(bo);t();!function(t){function e(e){var i=t.call(this,"stco",0,0)||this;return i.entries=e,i}Ie(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!na(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!na(t,32)})))throw new v("Not all entries can be represented in 32 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(Bs);t();!function(t){function e(e){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=e.cleanApertureWidthN,i.cleanApertureWidthD=e.cleanApertureWidthD,i.cleanApertureHeightN=e.cleanApertureHeightN,i.cleanApertureHeightD=e.cleanApertureHeightD,i.horizOffN=e.horizOffN,i.horizOffD=e.horizOffD,i.vertOffN=e.vertOffN,i.vertOffD=e.vertOffD,i}Ie(e,t),g.defineProperty(e.prototype,"cleanApertureWidthN",{get:function(){return this._A},set:function(t){if(!na(t,32))throw new v("Provided cleanApertureWidthN does not fit in 32 bits.");this._A=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureWidthD",{get:function(){return this.vA},set:function(t){if(!na(t,32))throw new v("Provided cleanApertureWidthD does not fit in 32 bits.");this.vA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureHeightN",{get:function(){return this.gA},set:function(t){if(!na(t,32))throw new v("Provided cleanApertureHeightN does not fit in 32 bits.");this.gA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureHeightD",{get:function(){return this.wA},set:function(t){if(!na(t,32))throw new v("Provided cleanApertureHeightD does not fit in 32 bits.");this.wA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizOffN",{get:function(){return this.mA},set:function(t){if(!na(t,32))throw new v("Provided horizOffN does not fit in 32 bits.");this.mA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizOffD",{get:function(){return this.pA},set:function(t){if(!na(t,32))throw new v("Provided horizOffD does not fit in 32 bits.");this.pA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vertOffN",{get:function(){return this.yA},set:function(t){if(!na(t,32))throw new v("Provided vertOffN does not fit in 32 bits.");this.yA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vertOffD",{get:function(){return this.AA},set:function(t){if(!na(t,32))throw new v("Provided vertOffD does not fit in 32 bits.");this.AA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 32},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Ca);t();!function(t){function e(e,i){var s=t.call(this,"ctts",e,0)||this;return s.entries=i,s}Ie(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!na(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!na(t.sampleCount,32)||!na(t.sampleOffset,32)})))throw new v("Not all entries can be represented in 64 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),0===this.version?e.writer.writeUInt(n.sampleOffset,32):1===this.version&&e.writer.writeInt(n.sampleOffset,32)}}}(Bs);t();!function(t){function e(e){var i=t.call(this,"url ",0,void 0===e?1:0)||this;return i.location=e,i}Ie(e,t),g.defineProperty(e.prototype,"location",{get:function(){return this.bA},set:function(t){this.flags=void 0===t?1:0,this.bA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this);return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(Bs);t();!function(t){function e(e,i,s){var n=t.call(this,"urn ",0,s)||this;return n.name=e,n.location=i,n}Ie(e,t),g.defineProperty(e.prototype,"location",{get:function(){return this.bA},set:function(t){if(1&this.flags)throw new v("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.bA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.name),e.writer.writeByte(0),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(Bs);t();!function(t){function e(){return t.call(this,"dinf")||this}Ie(e,t)}(ft);t(),t();var Aw=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!na(i,8))throw new v("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Ie(e,t),g.defineProperty(e.prototype,"flags",{get:function(){return this.Zy},set:function(t){this.Zy=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new v("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(pw);!function(t){function e(){return t.call(this,"dref",0,0)||this}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(Aw);t(),t();var bw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"elst",i,s)||this;return n.entries=e,n}return Ie(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!na(s.segmentDuration,this.bitSize))throw new v("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!na(s.mediaTime,this.bitSize))throw new v("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!na(s.mediaRateInteger,16))throw new v("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!na(s.mediaRateFraction,16))throw new v("Provided mediaRateFraction does not fit in 16 bits.")}this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(e)},e}(Bs),Tw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Ie(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(bw),Sw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Ie(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(bw);function kw(t){for(var e=t.data,i=Zc(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=e.nextUint32(),u=e.nextInt32()):(a=e.nextUint64(),u=e.nextInt64());var c=e.nextInt16(),l=e.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new Tw(h,n.raw):new Sw(h,n.raw)}var Ew=function(t){function e(){return t.call(this,"edts")||this}return Ie(e,t),e}(ft);function Pw(t){for(var e=new Ew,i=0,s=Eo(t.data);i<s.length;i++){var n=s[i];zo(n,"elst")?e.boxes.push(kw(n)):e.boxes.push(ls(n))}return e}t(),t();var Iw=function(t){function e(e,i,s,n){var r=t.call(this,e)||this;return r.majorBrand=i,r.minorVersion=s,r.compatibleBrands=n,r}return Ie(e,t),g.defineProperty(e.prototype,"majorBrand",{get:function(){return this.TA},set:function(t){if(4!==t.length)throw new v("the provided major brand does not conform to the 4 character requirement");this.TA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"minorVersion",{get:function(){return this.SA},set:function(t){if(!na(t,32))throw new v("the provided minor version does not fit in 32 bits.");this.SA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"compatibleBrands",{get:function(){return this.kA},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new v("Some of the compatible brands do not conform to the 4 character requirement");this.kA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var e=0,i=this.compatibleBrands;e<i.length;e++){var s=i[e];t.writer.writeString(s)}},e}(Ca),Cw=function(t){function e(e,i,s){return t.call(this,"ftyp",e,i,s)||this}return Ie(e,t),e}(Iw);function Rw(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new Cw(i,s,n)}t();var xw=function(t){function e(e,i){void 0===i&&(i="free");var s=t.call(this,i)||this;return s.data=e,s}return Ie(e,t),e.prototype.getBoxContentSize=function(){var t,e;return null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0},e.prototype.serializeBoxContent=function(t){this.data&&t.concat(rs.from(this.data))},e}(Ca);t(),t();var Dw=function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=e.creation,r.modificationTime=e.modification,r.timescale=e.scale,r.duration=e.duration,r.language=i,r}return Ie(e,t),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.EA},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.EA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.PA},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.PA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.IA},set:function(t){if(!na(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.nf},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.nf=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"language",{get:function(){return this.CA},set:function(t){if(!Lw(t))throw new v("Expected an ISO-639-2/T language code");this.CA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMdiaContent(e),e.writer.writeBit(0);for(var i=0,s=this.language;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.charCodeAt(0)-96,5)}e.writer.writeUInt(0,16)},e}(Bs),Nw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,0,s)||this}return Ie(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(Dw),Bw=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,1,s)||this}return Ie(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Dw);function Mw(t){var e=t.data,i=Zc(e.nextUint32()),s=i.version,n=i.flags,r=dw(e,s),h=new ra(rs.from(e.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return Lw(u)||(u="und"),e.skip(2),0===s?new Nw(r,u,n.raw):new Bw(r,u,n.raw)}function Lw(t){return/^[a-z]{3}$/.test(t)}var Uh=function(t){function e(){return t.call(this,"mdia")||this}return Ie(e,t),e}(ft);function Ow(t){for(var e=new Uh,i=0,s=Eo(t.data);i<s.length;i++){var n=s[i];zo(n,"mdhd")?e.boxes.push(Mw(n)):zo(n,"hdlr")?e.boxes.push(gw(n)):e.boxes.push(ls(n))}return e}t();var Fw=function(t){function e(){var e=t.call(this,"mdat")||this;return e.data=new rs,e}return Ie(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(this.data)},e}(Ca);function Uw(t){var e=t.data,i=e.nextUint8Array(e.data.byteLength-e.cursor.offset),s=new Fw;return s.data.pushRange(i),s}t();!function(t){function e(){return t.call(this,"minf")||this}Ie(e,t)}(ft);t();var Vw;!function(t){function e(e){var i=t.call(this,"meta",0,0)||this;return i.handler=e,i}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.handler.serialize())}}(Aw);t(),t(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Vw||(Vw={})),t();var Hw,Ww,qw={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function zw(t,e){e.writer.writeUInt(xt(t.a,16),32),e.writer.writeUInt(xt(t.b,16),32),e.writer.writeUInt(xt(0,30),32),e.writer.writeUInt(xt(t.c,16),32),e.writer.writeUInt(xt(t.d,16),32),e.writer.writeUInt(xt(0,30),32),e.writer.writeUInt(xt(t.x,16),32),e.writer.writeUInt(xt(t.y,16),32),e.writer.writeUInt(xt(1,30),32)}function Xw(t,e){var i,s,n,r;e.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:Hw.UNKNOWN,2),e.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:Ww.UNKNOWN,2),e.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:Ww.UNKNOWN,2),e.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:Ww.UNKNOWN,2)}function wo(t,e){var i,s,n;e.writer.writeUInt(0,4),Xw(t,e),e.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),e.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),e.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}t(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(Hw||(Hw={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(Ww||(Ww={})),t(),t();var Gw=function(){};t(),t(),t();var Qw=function(t){function e(e,i,s){var n=t.call(this,"pssh",e,0)||this;return n.systemId=i,n.data=s,n}return Ie(e,t),g.defineProperty(e.prototype,"systemId",{get:function(){return this.RA},set:function(t){if(16!==t.length)throw new v("Provided systemId length is not 16.");this.RA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"data",{get:function(){return this.Bw},set:function(t){if(!na(t.length,32))throw new v("Provided data length does not fit in 32 bits.");this.Bw=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},e.prototype.serializeVersionBoxContent=function(t){},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(rs.from(this.systemId)),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.data.length,32),e.concat(rs.from(this.data))},e}(Bs),Kw=function(t){function e(e,i){return t.call(this,0,e,i)||this}return Ie(e,t),e}(Qw),jw=function(t){function e(e,i,s){var n=t.call(this,1,e,i)||this;return n.kIds=s,n}return Ie(e,t),g.defineProperty(e.prototype,"kIds",{get:function(){return this.xA},set:function(t){if(!na(t.length,32))throw new v("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new v("Not all provided key ids are 16 bytes long.");this.xA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var e=0,i=this.kIds;e<i.length;e++){var s=i[e];t.concat(rs.from(s))}},e}(Qw);function Dh(t){var e=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),s=[];if(1===e)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===e?new jw(i,o,s):new Kw(i,o)}t(),t();var Yw=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"mehd",i,s)||this;return n.fragmentDuration=e,n}return Ie(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"fragmentDuration",{get:function(){return this.DA},set:function(t){if(!na(t,this.bitSize))throw new v("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.DA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(Bs),Zw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Ie(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration,32)},e}(Yw),Jw=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Ie(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),e.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},e}(Yw);function $w(t){var e=t.data,i=Zc(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new Zw(e.nextUint32(),n.raw):new Jw(e.nextUint64(),n.raw)}t();var tm=function(t){function e(e,i,s,n){void 0===i&&(i={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=e,a.defaultSampleDescriptionIndex=null!==(r=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=i.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=i.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=i.sampleFlags,a}return Ie(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this.NA},set:function(t){if(!na(t,32))throw new v("Provided track id does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.BA},set:function(t){if(!na(t,32))throw new v("Provided default sample description index does not fit in 32 bits.");this.BA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.MA},set:function(t){if(!na(t,32))throw new v("Provided default sample duration does not fit in 32 bits.");this.MA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.LA},set:function(t){if(!na(t,32))throw new v("Provided default sample size does not fit in 32 bits.");this.LA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.OA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!na(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!na(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.OA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},e.prototype.serializeBoxContent=function(e){var i;t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),e.writer.writeUInt(this.defaultSampleDescriptionIndex,32),e.writer.writeUInt(this.defaultSampleDuration,32),e.writer.writeUInt(this.defaultSampleSize,32),wo(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},e)},e}(Bs);function em(t){var e=t.data,i=Zc(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),h=e.nextUint32(),o=e.nextUint32(),a=e.nextUint32(),u=fw(new ra(rs.from(e.nextUint8Array(4))));return new tm(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var im=function(t){function e(){return t.call(this,"mvex")||this}return Ie(e,t),e}(ft);function sm(t){for(var e=new im,i=0,s=Eo(t.data);i<s.length;i++){var n=s[i];zo(n,"mehd")?e.boxes.push($w(n)):zo(n,"trex")?e.boxes.push(em(n)):e.boxes.push(ls(n))}return e}t();var nm=function(t){function e(i,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:e.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:e.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:qw,c.FA=s,c}return Ie(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.EA},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.EA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.PA},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.PA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.IA},set:function(t){if(!na(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.nf},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.nf=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"rate",{get:function(){return this.UA},set:function(t){if(!na(xt(t,16),32))throw new v("Provided rate does not fit in 32 bits (fixed 16.16).");this.UA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"volume",{get:function(){return this.VA},set:function(t){if(!na(xt(t,8),16))throw new v("Provided volume does not fit in 16 bits (fixed 8.8).");this.VA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"matrix",{get:function(){return this.HA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new v("(u, v, w) does not match the required (0, 0, 1)");this.HA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"nextTrackId",{get:function(){return this.FA},set:function(t){if(0===t)throw new v("NextTrackId cannot be 0.");if(!na(t,32))throw new v("NextTrackId cannot exceed 32 bits.");this.FA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMvhdContent(e),e.writer.writeUInt(xt(this.rate,16),32),e.writer.writeUInt(xt(this.volume,8),16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),zw(this.matrix,e);for(var i=0;i<6;i++)e.writer.writeUInt(0,32);e.writer.writeUInt(this.nextTrackId,32)},e.DEFAULT_RATE=1,e.DEFAULT_VOLUME=1,e}(Bs),rm=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,0,n)||this}return Ie(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(nm),hm=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,1,n)||this}return Ie(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(nm);function om(t){var e=t.data,i=Zc(e.nextUint32()),s=i.version,n=i.flags,r=dw(e,s),h=Ve(e.nextUint32(),16),o=Ve(e.nextUint16(),8);e.skip(2),e.skip(8);var a=_w(e);e.skip(24);var u=e.nextUint32();return 0===s?new rm(r,u,{rate:h,volume:o,matrix:a},n.raw):new hm(r,u,{rate:h,volume:o,matrix:a},n.raw)}t(),t();var am=function(t){function e(e,i,s,n,r,h,o){void 0===o&&(o={});var a,u,c,l=this;return l=t.call(this,"tkhd",e,function(t){var e,i,s,n;return{trackEnabled:null===(e=null==t?void 0:t.trackEnabled)||void 0===e||e,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,l.creationTime=i.creation,l.modificationTime=i.modification,l.trackId=s,l.duration=i.duration,l.volume=n,l.width=r,l.height=h,l.layer=null!==(a=o.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=o.matrix)&&void 0!==c?c:qw,l}return Ie(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.EA},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.EA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.PA},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.PA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"trackId",{get:function(){return this.NA},set:function(t){if(0===t)throw new v("trackId cannot be 0.");if(!na(t,32))throw new v("trackId cannot exceed 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.nf},set:function(t){if(!na(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.nf=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"volume",{get:function(){return this.VA},set:function(t){if(!na(xt(t,8),16))throw new v("Provided volume does not fit in 16 bits (fixed 8.8).");this.VA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"width",{get:function(){return this.dc},set:function(t){if(!na(xt(t,16),32))throw new v("Provided width does not fit in 32 bits (fixed 16.16).");this.dc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"height",{get:function(){return this.mc},set:function(t){if(!na(xt(t,16),32))throw new v("Provided height does not fit in 32 bits (fixed 16.16).");this.mc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"layer",{get:function(){return this.WA},set:function(t){if(!na(t,16))throw new v("Provided layer does not fit in 16 bits.");this.WA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"alternateGroup",{get:function(){return this.qA},set:function(t){if(!na(t,16))throw new v("Provided alternateGroup does not fit in 16 bits.");this.qA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"matrix",{get:function(){return this.HA},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new v("(u, v, w) does not match the required (0, 0, 1)");this.HA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeTkhdContent(e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.layer,16),e.writer.writeUInt(this.alternateGroup,16),e.writer.writeUInt(xt(this.volume,8),16),e.writer.writeUInt(0,16),zw(this.matrix,e),e.writer.writeUInt(xt(this.width,16),32),e.writer.writeUInt(xt(this.height,16),32)},e}(Bs),$h=function(t){function e(e,i,s,n,r,h){return t.call(this,0,e,i,s,n,r,h)||this}return Ie(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},e}(am),oo=function(t){function e(e,i,s,n,r,h){return t.call(this,1,e,i,s,n,r,h)||this}return Ie(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(am);function um(t){var e,i,s,n,r=t.data,h=Zc(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===o?(e=r.nextUint32(),i=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(e=r.nextUint64(),i=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),v=Ve(r.nextInt16(),8);r.skip(2);var g=_w(r),w=Ve(r.nextUint32(),16),m=Ve(r.nextUint32(),16);return 0===o?new $h({creation:e,modification:i,duration:n},s,v,w,m,{layer:f,matrix:g,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new oo({creation:e,modification:i,duration:n},s,v,w,m,{layer:f,matrix:g,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var cm=function(t){function e(){return t.call(this,"trak")||this}return Ie(e,t),e}(ft);function lm(t){for(var e=new cm,i=0,s=Eo(t.data);i<s.length;i++){var n=s[i];zo(n,"tkhd")?e.boxes.push(um(n)):zo(n,"mdia")?e.boxes.push(Ow(n)):zo(n,"edts")?e.boxes.push(Pw(n)):e.boxes.push(ls(n))}return e}var $o=function(t){function e(){return t.call(this,"moov")||this}return Ie(e,t),e}(ft);function dm(t){for(var e=new $o,i=0,s=Eo(t.data);i<s.length;i++){var n=s[i];zo(n,"mvhd")?e.boxes.push(om(n)):zo(n,"trak")?e.boxes.push(lm(n)):zo(n,"mvex")?e.boxes.push(sm(n)):zo(n,"pssh")?e.boxes.push(Dh(n)):e.boxes.push(ls(n))}return e}t(),t(),t();var fm=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",i,s)||this;return n.baseMediaDecodeTime=e,n}return Ie(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"baseMediaDecodeTime",{get:function(){return this.zA},set:function(t){if(!na(t,this.bitSize))throw new v("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.zA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(Bs),go=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return Ie(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime,32)},e}(fm),_m=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return Ie(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},e}(fm);function vm(t){var e=t.data,i=Zc(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new go(e.nextUint32(),n.raw):new _m(e.nextUint64(),n.raw)}t();var zh=function(t){function e(e,i){void 0===i&&(i=0);var s=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(e))||this;return s.trackId=e.trackId,s.baseDataOffset=e.baseDataOffset,s.sampleDescriptionIndex=e.sampleDescriptionIndex,s.defaultSampleDuration=e.defaultSampleDuration,s.defaultSampleSize=e.defaultSampleSize,s.defaultSampleFlags=e.defaultSampleFlags,s}return Ie(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this.NA},set:function(t){if(!na(t,32))throw new v("Provided track id does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"baseDataOffset",{get:function(){return this.XA},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new v("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new v("The base data offset present flag is not set.");if(t&&!na(t,64))throw new v("Provided baseDataOffset does not fit in 32 bits.");this.XA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleDescriptionIndex",{get:function(){return this.GA},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new v("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new v("The sample description index flag is not set.");if(t&&!na(t,32))throw new v("Provided sampleDescriptionIndex does not fit in 32 bits.");this.GA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.MA},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new v("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new v("The default sample duration present flag is not set.");if(t&&!na(t,32))throw new v("Provided defaultSampleDuration does not fit in 32 bits.");this.MA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.LA},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new v("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new v("The default sample size present flag is not set.");if(t&&!na(t,32))throw new v("Provided defaultSampleSize does not fit in 32 bits.");this.LA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.OA},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new v("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new v("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!na(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!na(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.OA=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(e+=8),this.flags.sampleDescriptionIndexPresent&&(e+=4),this.flags.defaultSampleDurationPresent&&(e+=4),this.flags.defaultSampleSizePresent&&(e+=4),this.flags.defaultSampleFlagsPresent&&(e+=4),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(e.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&e.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&e.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&e.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&wo(this.defaultSampleFlags,e)},e}(Bs);function gm(t){var e=t.data,i=e.nextUint8(),s=new ra(rs.from(e.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=e.nextUint32(),d=c?e.nextUint64():void 0,f=u?e.nextUint32():void 0,_=a?e.nextUint32():void 0,v=o?e.nextUint32():void 0,g=h?fw(new ra(rs.from(e.nextUint8Array(4)))):void 0;return new zh({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:v,defaultSampleFlags:g},i)}t();var wm=function(t){function e(e,i,s){var n=t.call(this,"trun",e,function(t){var e,i,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(e=t.sampleDurationPresent)&&void 0!==e&&e,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(i))||this;return n.dataOffset=i.dataOffset,n.samples=s,n.firstSampleFlags=i.firstSampleFlags,n}return Ie(e,t),g.defineProperty(e.prototype,"dataOffset",{get:function(){return this.QA},set:function(t){if(t&&!na(t,32))throw new v("Provided data offset does not fit in 32 bits.");this.QA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"firstSampleFlags",{get:function(){return this.KA},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!na(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!na(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.KA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"samples",{get:function(){return this.jA},set:function(t){var e,i;if(!na(t.length,32))throw new v("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new v("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new v("The sample duration present flag is not set.");if(r.duration&&!na(r.duration,32))throw new v("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new v("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new v("The sample size present flag is not set.");if(r.size&&!na(r.size,32))throw new v("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new v("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new v("The sample flags present flag is not set.");if((null===(e=r.flags)||void 0===e?void 0:e.samplePaddingValue)&&!na(r.flags.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null===(i=r.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!na(r.flags.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new v("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new v("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!na(r.compositionTimeOffset,32))throw new v("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.jA=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(e+=4),this.flags.firstSampleFlagsPresent&&(e+=4),this.flags.sampleDurationPresent&&(e+=4*this.samples.length),this.flags.sampleSizePresent&&(e+=4*this.samples.length),this.flags.sampleFlagsPresent&&(e+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(e+=4*this.samples.length),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&e.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&wo(this.firstSampleFlags,e);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];this.flags.sampleDurationPresent&&e.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&e.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&wo(n.flags,e),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?e.writer.writeUInt(n.compositionTimeOffset,32):e.writer.writeInt(n.compositionTimeOffset,32))}},e}(Bs);function mm(t){var e=t.data,i=e.nextUint8(),s=new ra(rs.from(e.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=e.nextUint32(),l={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=e.nextInt32()),a&&(l.firstSampleFlags=fw(new ra(rs.from(e.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};o&&(_.duration=e.nextUint32()),h&&(_.size=e.nextUint32()),r&&(_.flags=fw(new ra(rs.from(e.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===i?e.nextUint32():e.nextInt32()),d.push(_)}return new wm(i,l,d)}var nn=function(t){function e(){return t.call(this,"traf")||this}return Ie(e,t),e}(ft);function pm(t){for(var e=new nn,i=0,s=Eo(t.data);i<s.length;i++){var n=s[i];zo(n,"tfhd")?e.boxes.push(gm(n)):zo(n,"tfdt")?e.boxes.push(vm(n)):zo(n,"trun")?e.boxes.push(mm(n)):e.boxes.push(ls(n))}return e}var Gh=function(t){function e(){return t.call(this,"moof")||this}return Ie(e,t),e}(ft);function ym(t){for(var e=new Gh,i=0,s=Eo(t.data);i<s.length;i++){var n=s[i];zo(n,"traf")?e.boxes.push(pm(n)):zo(n,"pssh")?e.boxes.push(Dh(n)):e.boxes.push(ls(n))}return e}t();!function(t){function e(e){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=e,i}Ie(e,t),g.defineProperty(e.prototype,"sequenceNumber",{get:function(){return this.YA},set:function(t){if(!na(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.YA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.sequenceNumber,32)}}(Bs);t();var Am=function(t){function e(e){var i=t.call(this,"frma")||this;return i.codingName=e,i}return Ie(e,t),g.defineProperty(e.prototype,"codingName",{get:function(){return this.ZA},set:function(t){if(4!==t.length)throw new v("Provided coding name was not 4 characters long.");this.ZA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},e}(Ca);t();!function(t){function e(e,i){var s=t.call(this,"pasp")||this;return s.hSpacing=e,s.vSpacing=i,s}Ie(e,t),g.defineProperty(e.prototype,"hSpacing",{get:function(){return this.JA},set:function(t){if(!na(t,32))throw new v("Provided hSpacing does not fit in 32 bits.");this.JA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vSpacing",{get:function(){return this.$A},set:function(t){if(!na(t,32))throw new v("Provided vSpacing does not fit in 32 bits.");this.$A=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Ca);t();!function(t){function e(e,i,s){var n=t.call(this,e)||this;return n.sample=i,n.sinf=s,n}Ie(e,t),e.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},e.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(ft);t();!function(t){function e(e,i,s){var n=t.call(this,"sinf")||this;return n.schm=i,n.schi=s,n.frma=new Am(e),n}Ie(e,t),e.prototype.getBoxContentSize=function(){var t,e,i,s;return this.frma.getSize()+(null!==(e=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==e?e:0)+(null!==(s=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},e.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Ca);t();var bm=function(t){function e(e,i,s){var n=t.call(this,"saio",e,void 0===s?0:1)||this;return n.entries=i,n.explicitAuxInfoType=s,n}return Ie(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){var e=this;if(!na(t.length,32))throw new v("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!na(t,e.bitSize)})))throw new v("Not all provided entries fit in ".concat(this.bitSize," bits."));this.fA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.eb},set:function(t){if(void 0===t)this.flags=0;else{if(!na(t.auxInfoType,32))throw new v("Provided auxInfoType does not fit in 32 bits.");if(!na(t.auxInfoTypeParameter,32))throw new v("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.eb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(e)},e}(Bs);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Ie(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s,32)}}})(bm),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Ie(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(bm);t();!function(t){function e(e,i,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=e,n.sampleInfoSizes=i,n.explicitAuxInfoType=s,n}Ie(e,t),g.defineProperty(e.prototype,"defaultSampleInfoSize",{get:function(){return this.ib},set:function(t){if(!na(t,8))throw new v("Provided defaultSampleInfoSize does not fit in a single byte.");this.ib=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleInfoSizes",{get:function(){return this.sb},set:function(t){if(!na(t.length,32))throw new v("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!na(t,8)})))throw new v("Not all provided sampleInfoSizes fit in a byte.");this.sb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.eb},set:function(t){if(void 0===t)this.flags=0;else{if(!na(t.auxInfoType,32))throw new v("Provided auxInfoType does not fit in 32 bits.");if(!na(t.auxInfoTypeParameter,32))throw new v("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.eb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},e.prototype.serializeBoxContent=function(e){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new v("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeByte(this.defaultSampleInfoSize),e.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,s=this.sampleInfoSizes;i<s.length;i++){var n=s[i];e.writer.writeByte(n)}}}(Bs);t();!function(t){function e(e){var i=t.call(this,"sdtp",0,0)||this;return i.samples=e,i}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e);for(var i=0,s=this.samples;i<s.length;i++){Xw(s[i],e)}}}(Bs);t();!function(t){function e(e){return t.call(this,"stsd",e,0)||this}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(Aw);t();var Tm=function(t){function e(e,i,s){var n=t.call(this,"sgpd",e,0)||this;return n.entries=s,n.groupingType=i,n}return Ie(e,t),g.defineProperty(e.prototype,"groupingType",{get:function(){return this.hb},set:function(t){if(4!==t.length)throw new v("The provided groupingType does not equal 4 characters.");this.hb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.groupingType),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];this.serializeEntryBoxContent(e,n)}},e.prototype.serializeEntryBoxContent=function(t,e){e.serializeBoxContent(t)},e}(Bs);(function(t){function e(e,i){return t.call(this,0,e,i)||this}Ie(e,t),e.prototype.serializeVersionBoxContent=function(t){}})(Tm),function(t){function e(e,i,s){var n=t.call(this,1,e,s)||this;return n.defaultLength=i,n}Ie(e,t),g.defineProperty(e.prototype,"defaultLength",{get:function(){return this.ob},set:function(t){if(!na(t,32))throw new v("The provided defaultLength does not fit in 32 bits.");this.ob=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},e.prototype.serializeEntryBoxContent=function(t,e){0===this.defaultLength&&t.writer.writeUInt(e.getBoxContentSize(),32),e.serializeBoxContent(t)}}(Tm),function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=this;if(e<2)throw new v("This constructor is only meant for versions 2 and up.");return(r=t.call(this,e,i,s)||this).defaultSampleDescriptionIndex=n,r}Ie(e,t),g.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.BA},set:function(t){if(!na(t,32))throw new v("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.BA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(Tm);t();(function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=e,i}Ie(e,t),g.defineProperty(e.prototype,"sampleSizes",{get:function(){return this.ub},set:function(t){if(!na(t.length,32))throw new v("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!na(t,32)})))throw new v("Not all sampleSizes can be represented in 32 bits.");this.ub=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,s=this.sampleSizes;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}})(Bs),function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=e,s.samples=i,s}Ie(e,t),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.LA},set:function(t){if(!na(t,32))throw new v("Provided defaultSampleSize does not fit in 32 bits.");this.LA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"samples",{get:function(){return this.jA},set:function(t){if(!na(t,32))throw new v("Number of allowed samples cannot fit in 32 bits.");this.jA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.defaultSampleSize,32),e.writer.writeUInt(this.samples,32)}}(Bs);t();!function(t){function e(){return t.call(this,"stbl")||this}Ie(e,t)}(ft);t();!function(t){function e(e){var i=t.call(this,"stsc",0,0)||this;return i.entries=e,i}Ie(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!na(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!na(t.firstChunk,32)||!na(t.sampleDescriptionIndex,32)||!na(t.samplesPerChunk,32)})))throw new v("Not all entries can be represented in 96 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.firstChunk,32),e.writer.writeUInt(n.samplesPerChunk,32),e.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Bs);t();!function(t){function e(){return t.call(this,"schi")||this}Ie(e,t)}(ft);t();!function(t){function e(e,i,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=e,n.schemeVersion=i,n.schemeUri=s,n}Ie(e,t),g.defineProperty(e.prototype,"schemeType",{get:function(){return this.cb},set:function(t){if(4!==t.length)throw new v("The provided schemeType does not have a length of 4.");this.cb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"schemeVersion",{get:function(){return this.fb},set:function(t){if(!na(t,32))throw new v("The provided schemeVersion does not fit in 23 bits.");this.fb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"schemeUri",{get:function(){return this._b},set:function(t){if(t&&4!==t.length)throw new v("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this._b=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeType),e.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(e.writer.writeString(this.schemeUri),e.writer.writeByte(0))}}(Bs);t();var Sm=function(t){function e(e,i,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",e,o)||this;return a.referenceId=i,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Ie(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"referenceId",{get:function(){return this.vb},set:function(t){if(!na(t,32))throw new v("Provided referenceId does not fit in 32 bits.");this.vb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.IA},set:function(t){if(!na(t,32))throw new v("Provided timescale does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"earliestPresentationTime",{get:function(){return this.gb},set:function(t){if(!na(t,this.bitSize))throw new v("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.gb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"firstOffset",{get:function(){return this.wb},set:function(t){if(!na(t,this.bitSize))throw new v("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.wb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"references",{get:function(){return this.mb},set:function(t){if(!na(t.length,16))throw new v("The number of provided reference items does not fit in 16 bits.");for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!na(s.referencedSize,31))throw new v("Provided referenced size does not fit in 31 bits.");if(!na(s.subsegmentDuration,32))throw new v("Provided subsegment duration does not fit in 31 bits.");if(!na(s.sapType,3))throw new v("Provided SAP type does not fit in 3 bits.");if(!na(s.sapDeltaTime,28))throw new v("Provided SAP delta time does not fit in 28 bits.")}this.mb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.referenceId,32),e.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(e),e.writer.writeUInt(0,16),e.writer.writeUInt(this.references.length,16);for(var i=0,s=this.references;i<s.length;i++){var n=s[i];e.writer.writeBit(n.referenceType),e.writer.writeUInt(n.referencedSize,31),e.writer.writeUInt(n.subsegmentDuration,32),e.writer.writeBool(n.startsWithSap),e.writer.writeUInt(n.sapType,3),e.writer.writeUInt(n.sapDeltaTime,28)}},e}(Bs),km=function(t){function e(e,i,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,e,i,s,n,r,h)||this}return Ie(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},e}(Sm),Em=function(t){function e(e,i,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,e,i,s,n,r,h)||this}return Ie(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},e}(Sm);t();var Pm=function(t){function e(e,i,s){return t.call(this,"styp",e,i,s)||this}return Ie(e,t),e}(Iw);function Im(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new Pm(i,s,n)}t();!function(t){function e(e){void 0===e&&(e=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=e,i}Ie(e,t),g.defineProperty(e.prototype,"balance",{get:function(){return this.pb},set:function(t){if(t<-1||t>1)throw new v("Provided balance does not fit in the allowed range [-1, 1].");if(!na(xt(t,8),16))throw new v("Provided balance does not fit in 16 bits (fixed 8.8).");this.pb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(xt(this.balance,8),16),e.writer.writeUInt(0,16)}}(Bs);t();!function(t){function e(e){var i=t.call(this,"stss",0,0)||this;return i.entries=e,i}Ie(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!na(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!na(t,32)})))throw new v("Not all entries can be represented in 32 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(Bs);t();!function(t){function e(e){var i=t.call(this,"stts",0,0)||this;return i.entries=e,i}Ie(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.fA},set:function(t){if(!na(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!na(t.sampleCount,32)||!na(t.sampleDelta,32)})))throw new v("Not all entries can be represented in 64 bits.");this.fA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),e.writer.writeUInt(n.sampleDelta,32)}}}(Bs);t();!function(t){function e(e){var i=t.call(this,"trep",0,0)||this;return i.trackId=e,i}Ie(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this.NA},set:function(t){if(!na(t,32))throw new v("The provided trackId does not fit in 32 bits.");this.NA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32)}}(Aw);t();!function(t){function e(){return t.call(this,"udta")||this}Ie(e,t)}(ft);t();var Cm={red:0,green:0,blue:0};!function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=Cm);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=e,s.opColor=i,s}Ie(e,t),g.defineProperty(e.prototype,"opColor",{get:function(){return this.yb},set:function(t){if(!na(t.red,16)||!na(t.green,16)||!na(t.blue,16))throw new v("Not all colors could be represented in 16 bits.");this.yb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.graphicsMode,16),e.writer.writeUInt(this.opColor.red,16),e.writer.writeUInt(this.opColor.green,16),e.writer.writeUInt(this.opColor.blue,16)}}(Bs);t();var Rm=function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,l=this;return(l=t.call(this,e,i)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,l.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Ie(e,t),g.defineProperty(e.prototype,"width",{get:function(){return this.dc},set:function(t){if(!na(t,16))throw new v("Provided width does not fit in 16 bits.");this.dc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"height",{get:function(){return this.mc},set:function(t){if(!na(t,16))throw new v("Provided height does not fit in 16 bits.");this.mc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizontalResolution",{get:function(){return this.Ab},set:function(t){if(!na(xt(t,16),32))throw new v("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.Ab=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"verticalResolution",{get:function(){return this.bb},set:function(t){if(!na(xt(t,16),32))throw new v("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.bb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"compressorName",{get:function(){return this.Tb},set:function(t){if(t.length>31)throw new v("The provided compressorName should at most be 31 characters long.");this.Tb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"frameCount",{get:function(){return this.Sb},set:function(t){if(!na(t,16))throw new v("Provided frameCount does not fit in 16 bits.");this.Sb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"depth",{get:function(){return this.kb},set:function(t){if(!na(t,16))throw new v("Provided depth does not fit in 16 bits.");this.kb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(e=this.clap)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.width,16),e.writer.writeUInt(this.height,16),e.writer.writeUInt(xt(this.horizontalResolution,16),32),e.writer.writeUInt(xt(this.verticalResolution,16),32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.frameCount,16),e.writer.writeByte(this.compressorName.length),e.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)e.writer.writeByte(0);e.writer.writeUInt(this.depth,16),e.writer.writeInt(-1,16),this.clap&&e.concat(this.clap.serialize()),this.pasp&&e.concat(this.pasp.serialize()),this.extra&&qn(e.writer,this.extra)},e}(bo);t(),t();!function(t){function e(e){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=e,i}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof x?this.esDescriptor.length:this.esDescriptor.getSize())},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor instanceof x?e.concat(rs.from(this.esDescriptor)):this.esDescriptor.serialize(e)}}(Bs);t();!function(t){function e(e,i,s){var n=t.call(this,"mp4a",e,s)||this;return n.esd=i,n}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.esd.serialize())}}(yw);t();!function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",e,i,n)||this;return r.esDescriptor=s,r}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(Rm);t();!function(t){function e(e,i){var s=t.call(this,"mp4s",e)||this;return s.esDescriptor=i,s}Ie(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(bo);t(),t();!function(t){function e(e){var i=t.call(this,"avcC")||this;return i.decoderConfig=e,i}Ie(e,t),e.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},e.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Ca);t();!function(){function t(t,e,i,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=i,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=e,this.spsSets=s,this.ppsSets=n}g.defineProperty(t.prototype,"version",{get:function(){return this.Eb},set:function(t){if(!na(t,8))throw new v("Provided version does not fit in 8 bits.");this.Eb=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"profileIndication",{get:function(){return this.Pb},set:function(t){if(!na(t,8))throw new v("Provided profileIndication does not fit in 8 bits.");this.Pb=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.Ib},set:function(t){if(!na(t,8))throw new v("Provided profileCompatibility does not fit in 8 bits.");this.Ib=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"levelIndication",{get:function(){return this.Cb},set:function(t){if(!na(t,8))throw new v("Provided levelIndication does not fit in 8 bits.");this.Cb=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"spsSets",{get:function(){return this.Rb},set:function(t){if(!na(t.length,5))throw new v("Provided number of spsSets exceeds the max (32)");this.Rb=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"ppsSets",{get:function(){return this.xb},set:function(t){if(!na(t.length,8))throw new v("Provided number of ppsSets exceeds the max (256)");this.xb=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,e){return t+e.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,e){return t+e.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var e=0,i=this.spsSets;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.length,16),t.concat(rs.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(rs.from(h))}}}();t();!function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",e,i,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}Ie(e,t),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(e=this.bitrateBox)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.configurationBox.serialize()),this.bitrateBox&&e.concat(this.bitrateBox.serialize())}}(Rm);t();!function(t){function e(e,i,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=e,n.max=i,n.avg=s,n}Ie(e,t),g.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.iA},set:function(t){if(!na(t,32))throw new v("Provided bufferSizeDb does not fit in 32 bits.");this.iA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"max",{get:function(){return this.Db},set:function(t){if(!na(t,32))throw new v("Provided max does not fit in 32 bits.");this.Db=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"avg",{get:function(){return this.Nb},set:function(t){if(!na(t,32))throw new v("Provided avg does not fit in 32 bits.");this.Nb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 12},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Ca);t(),t(),t();var xm=function(t){function e(e,i){var s,n,r,h,o=this;if(o=t.call(this,"tenc",e,0)||this,i.perSampleIvSize>0&&(null!==(n=null===(s=i.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new v("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=i.kId,o.isProtected=null!==(r=i.isProtected)&&void 0!==r?r:1,i.perSampleIvSize>0?o.perSampleIvSize=i.perSampleIvSize:o.constantIv=null!==(h=i.constantIv)&&void 0!==h?h:new x(0),o}return Ie(e,t),g.defineProperty(e.prototype,"isProtected",{get:function(){return this.Bb},set:function(t){if(!na(t,8))throw new v("Provided isProtected does not fit in 1 byte.");this.Bb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"perSampleIvSize",{get:function(){return this.Mb},set:function(t){if(![8,16].includes(t))throw new v("Provided perSampleIvSize does not match any allowed value [8, 16].");this.Mb=t,this.Lb=new x(0)},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"kId",{get:function(){return this.Ob},set:function(t){if(16!==t.length)throw new v("Provided kId length is not 16.");this.Ob=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"constantIv",{get:function(){return this.Lb},set:function(t){if(![8,16].includes(t.length))throw new v("Provided constant IV length does not match any allowed value [8, 16].");this.Lb=t,this.Mb=0},enumerable:!1,configurable:!0}),e.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeOwnContent(e)},e.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),qn(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),qn(t.writer,this.constantIv))},e}(Bs),Dm=(function(t){function e(e){return t.call(this,0,e)||this}Ie(e,t)}(xm),function(t){function e(e){var i=t.call(this,1,e)||this;return i.cryptByteBlocks=e.cryptByteBlock,i.skipByteBlocks=e.skipByteBlock,i}return Ie(e,t),g.defineProperty(e.prototype,"cryptByteBlocks",{get:function(){return this.Fb},set:function(t){if(!na(t,4))throw new v("Provided cryptByteBlocks does not fit in 4 bits.");this.Fb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"skipByteBlocks",{get:function(){return this.Ub},set:function(t){if(!na(t,4))throw new v("Provided skipByteBlocks does not fit in 4 bits.");this.Ub=t},enumerable:!1,configurable:!0}),e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},e}(xm));!function(t){function e(e){var i=t.call(this)||this;return i.tencBox=new Dm(e),i}Ie(e,t),e.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},e.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Gw);function Nm(t){return void 0!==t.iv}function Lh(t){return void 0!==t.subsamples}t();!function(t){function e(e){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=e,i}Ie(e,t),g.defineProperty(e.prototype,"samples",{get:function(){return this.jA},set:function(t){var e;if(!na(t.length,32))throw new v("The number of samples provided does not fit in 32 bits.");for(var i=0,s=t;i<s.length;i++){var n=s[i];if(Nm(n)&&![8,16].includes(n.iv.length))throw new v("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===e&&(e=Lh(n)),!0===e&&!Lh(n)||!1===e&&Lh(n))throw new v("Mix of samples with and without subsamples detected.");if(Lh(n)){if(!na(n.subsamples.length,16))throw new v("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!na(o.clearData,16))throw new v("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!na(o.protectedData,23))throw new v("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=e&&e,this.jA=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){for(var e=0,i=0,s=this.samples;i<s.length;i++){var n=s[i];Nm(n)&&(e+=n.iv.length),Lh(n)&&(e+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];if(Nm(n)&&qn(e.writer,n.iv),Lh(n)){e.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];e.writer.writeUInt(o.clearData,16),e.writer.writeUInt(o.protectedData,32)}}}},e.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(Bs);t(),t();!function(t){function e(e,i,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=e,h.value=i,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Ie(e,t),g.defineProperty(e.prototype,"timescale",{get:function(){return this.IA},set:function(t){if(!na(t,32))throw new v("The provided timescale does not fit in 32 bits.");this.IA=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"presentationTimeDelta",{get:function(){return this.Vb},set:function(t){if(!na(t,32))throw new v("The provided presentationTimeDelta does not fit in 32 bits.");this.Vb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"eventDuration",{get:function(){return this.Hb},set:function(t){if(!na(t,32))throw new v("The provided eventDuration does not fit in 32 bits.");this.Hb=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"id",{get:function(){return this.Wb},set:function(t){if(!na(t,32))throw new v("The provided id does not fit in 32 bits.");this.Wb=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeIdUri),e.writer.writeByte(0),e.writer.writeString(this.value),e.writer.writeByte(0),e.writer.writeUInt(this.timescale,32),e.writer.writeUInt(this.presentationTimeDelta,32),e.writer.writeUInt(this.eventDuration,32),e.writer.writeUInt(this.id,32),e.concat(rs.from(this.data))}}(Bs);t(),t(),t();var Bm=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new Gg,e=0,i=this.boxes;e<i.length;e++){var s=i[e];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function Mm(t,e){return function(i){var s=function(t,e){for(var i=t.data,s=t.cursor;s.offset<i.byteLength;){var n=lw(i,s);if(!n.complete)return;if(zo(n.box,e))return n.box}}(new uw(hw(i),new aw),t);if(!s)throw new v("".concat(t," box not found"));return e(s)}}var Lm=Mm("moov",dm),Om=Mm("sidx",(function(t){var e,i,s=t.data,n=Zc(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(e=s.nextUint32(),i=s.nextUint32()):(e=s.nextUint64(),i=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new ra(rs.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),v=d.readUInt(32),g=Boolean(d.readBit()),w=d.readUInt(3),m=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:v,startsWithSap:g,sapType:w,sapDeltaTime:m})}return 0===r?new km(o,a,e,i,c,h.raw):new Em(o,a,e,i,c,h.raw)})),Fm=Mm("moof",ym),Um=Mm("pssh",Dh);function Vm(t){return function(t){for(var e=new Bm,i=0,s=Eo(t);i<s.length;i++){var n=s[i];zo(n,"ftyp")?e.boxes.push(Rw(n)):zo(n,"styp")?e.boxes.push(Im(n)):zo(n,"moov")?e.boxes.push(dm(n)):zo(n,"moof")?e.boxes.push(ym(n)):zo(n,"mdat")?e.boxes.push(Uw(n)):e.boxes.push(ls(n))}return e}(new uw(hw(t),new aw))}var Hm=class extends Re{get qb(){return this.Id}get zb(){return this.Xb.expiration}get uy(){return this.Gb}get Qb(){return this.Xb.sessionId}Xs(){if(this.Kb)return this.Id;const t=[];return t.push(Promise.resolve(this.Xb.close())),t.push(Rt(1e3)),this.jb.lp(Promise.race(t).catch(Wm)),this.Kb=!0,this.Id}Yb(t,e,i){if(ds.wv){const t=Um(fu(e));if(1===t.version){e=new Kw(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.Xb.generateRequest(t,e)).catch(Wm)}On(t){return Promise.resolve(this.Xb.load(t)).catch(Wm)}sc(){return Promise.resolve(this.Xb.remove()).catch(Wm)}Zn(t){return Promise.resolve(this.Xb.update(t)).catch(Wm)}Zb(){this.Gb.By(),this.Xb.keyStatuses.forEach(((t,e)=>{this.Jb(e,t)})),this.wo(new Wv(this.Gb))}Jb(t,e){if("string"==typeof t){const i=t;t=e,e=i}const i=fu(t);if(this.$b===O&&16===i.byteLength&&(ds.xv||ds.Cg)){let t=Nt(i),e=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,e,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.$b===O&&"status-pending"===e&&(e="usable"),this.Gb.Dy(i,e)}constructor(t,e){super(),this.Xb=t,this.$b=e,this.Kb=!1,this.tT=()=>{this.Zb()},this.eT=t=>{this.wo(new vs(this,t.messageType,Fg(this.$b,t.message)))},this.iT=()=>{this.Kb=!0,this.Gb.Iy>0&&(this.Gb.By(),this.wo(new Wv(this.Gb))),this.Xb.removeEventListener("keystatuseschange",this.tT),this.Xb.removeEventListener("message",this.eT)},this.Xb.addEventListener("keystatuseschange",this.tT),this.Xb.addEventListener("message",this.eT),this.Gb=new K;const i=[];this.Xb.closed&&i.push(Promise.resolve(this.Xb.closed)),this.jb=new ue,i.push(this.jb.Pf),this.Id=Promise.race(i).then(this.iT,this.iT),this.Zb()}};function Wm(t){let e;if(t.message){const i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(e=0|k(i[1],16))}throw new Vg(t.message,void 0,e,t)}var qm=class{async sT(t){return new Hm(this.nT.createSession(t),this.rT)}hT(t){return Promise.resolve(this.nT.setServerCertificate(t))}kn(t){return Promise.resolve(t.setMediaKeys(this.nT))}oT(t){return Promise.resolve(t.setMediaKeys(null))}sr(){return Promise.resolve()}constructor(t,e,i){this.nT=t,this.rT=e,this.aT=i}},zm=class{get rT(){return this.uT.keySystem}async cT(){const t=await this.uT.createMediaKeys();return new qm(t,this.$b,this.lT)}dT(){return this.lT}constructor(t,e,i){this.uT=t,this.$b=e,this.lT=i}};t(),t();var Pt={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function Oe(t){return H(t,Pt.APPLICATION_MP4)||H(t,Pt.VIDEO_MP4)||H(t,Pt.AUDIO_MP4)}function Xm(t){return H(t,Pt.VIDEO_WEBM)||H(t,Pt.AUDIO_WEBM)}var Gm=class{fT(t){for(const[e,i]of this._T)if(e.toLowerCase()===t.toLowerCase())return i}constructor(t,e){this.Vm=t,this._T=e}};function Qm(t){const e=t.trim(),i=e.indexOf(";");if(i<0)return new Gm(e,[]);const s=e.substr(0,i).trim(),n=e.substr(i+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const e=n[t];if(o||";"!==e)'"'===e&&(o=!o);else{const e=Km(n.substr(h,t));e&&r.push(e),h=t+1}}if(h!==n.length){const t=Km(n.substr(h));t&&r.push(t)}return new Gm(s,r)}function Km(t){const e=t.indexOf("=");if(e<0)return;const i=t.substr(0,e).trim();let s=t.substr(e+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[i,s]}function jm(t){const e=t.trim(),i=e.indexOf(";");return i<0?e:e.substr(0,i).trim()}function Ym(t){let e=t;const i=e.match(/^avc1\.(\d+)\.(\d+)$/);if(i){const t=Number(i[1]),s=Number(i[2]);e="avc1."+ec((t<<16|s).toString(16),6,"0")}return e}function Go(t,e,i,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,vT:s.vT};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>Zm(t,e,i,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>Zm(t,e,i,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(i,"video/mp4")),n?r:void 0}function Zm(t,e,i,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!Qe(e,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(i,jm(s.contentType))}function Jm(t){if(t.videoCapabilities)for(const e of t.videoCapabilities)if(e.contentType)return e.contentType;if(t.audioCapabilities)for(const e of t.audioCapabilities)if(e.contentType)return e.contentType}function $m(t){const e=[];for(const i of t)i.encryptionScheme&&e.push({contentType:i.contentType,robustness:i.robustness});return t.concat(e)}function tp(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(ep))||!(!t.videoCapabilities||!t.videoCapabilities.some(ep))}function ep(t){return!t.robustness}function ip(t,e){const i=[];for(const s of t)s.robustness?i.push(s):i.push(yh({},s,{robustness:e}));return i}var sp=class{async Qm(t,e){e=e.filter((t=>!t.vT));for(const t of e)t.audioCapabilities&&(t.audioCapabilities=$m(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=$m(t.videoCapabilities));if(t===Q_&&e.some(tp)){const i=e.map((t=>function(t,e){return yh({},t,{videoCapabilities:t.videoCapabilities?ip(t.videoCapabilities,e):void 0,audioCapabilities:t.audioCapabilities?ip(t.audioCapabilities,e):void 0})}(t,"SW_SECURE_CRYPTO")));try{const e=await ul.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new zm(e,t,s)}catch(t){}}const i=await ul.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new zm(i,t,s)}static gT(){return _v()}};t(),t(),t(),t();var np=class extends Re{get Qb(){return this.wT&&this.wT.sessionId||""}get zb(){return NaN}get qb(){return this.mT.Pf}get uy(){return this.pT}async Yb(t,e,i){this.yT(),this.AT=new ue,this.sT(fu(e),i),await this.AT.Pf}sT(t,e){if(!t)throw new p("Expected initData to be defined but was "+t+".");const i=e&&e.playready&&e.playready.bT;let s;return s=e?this.TT.createSession(this.ST,t,i):this.TT.createSession(this.ST,t),s.addEventListener("mskeyclose",this.iT),s.addEventListener("mskeymessage",this.kT),s.addEventListener("mskeyerror",this.Ps),s.addEventListener("mskeyadded",this.ET),this.wT=s,this.PT("status-pending"),s}async On(t){return this.yT(),!0}async Zn(t){if(this.IT=new ue,this.yT(),!this.wT)return Promise.resolve();const e=fu(t);if(0===e.byteLength)throw new p("Cannot call update with an empty response.");this.wT.update(e),await this.IT.Pf}Xs(){return!this.Kb&&this.wT&&(this.Kb=!0,this.wT.close()),this.mT.Pf}async sc(){this.yT()}yT(){if(this.Kb)throw new p("Already closing or closed.")}PT(t){this.pT.By(),this.pT.Dy(Ah,t),this.wo(new Wv(this.pT))}constructor(t,e){super(),this.TT=t,this.ST=e,this.Kb=!1,this.IT=void 0,this.AT=void 0,this.wT=void 0,this.iT=()=>{this.Kb=!0,this.mT.Xf(void 0),this.wT&&(this.wT.removeEventListener("mskeyclose",this.iT),this.wT.removeEventListener("mskeymessage",this.kT),this.wT.removeEventListener("mskeyerror",this.Ps),this.wT.removeEventListener("mskeyadded",this.ET))},this.kT=t=>{this.AT&&(this.AT.Xf(void 0),this.AT=void 0),this.wo(new vs(this,"license-request",ki(t.message).buffer,t.destinationURL||void 0))},this.Ps=()=>{const t=this.wT&&this.wT.error;if(!t)return;const e=new Vg("Unknown CDM error",t.code,t.systemCode);if(this.AT)this.AT.My(e),this.AT=void 0;else if(this.IT)this.IT.My(e),this.IT=void 0;else switch(e.Ly){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.PT("output-not-allowed");break;default:this.PT("internal-error")}},this.ET=()=>{this.AT&&(this.PT("usable"),this.AT.Xf(void 0),this.AT=void 0),this.IT&&(this.PT("usable"),this.IT.Xf(void 0),this.IT=void 0)},this.mT=new ue,this.pT=new K}},rp=class{async sT(t){return new np(this.TT,this.ST)}hT(t){return Promise.resolve(!1)}kn(t){const e=()=>{t.msSetMediaKeys(this.TT),t.removeEventListener("loadedmetadata",e)};return t.readyState>=1?t.msSetMediaKeys(this.TT):t.addEventListener("loadedmetadata",e),Promise.resolve()}oT(t){return Promise.resolve()}sr(){return Promise.resolve()}constructor(t,e,i){this.TT=t,this.rT=e,this.aT=i;const s=Jm(i)||"video/mp4";this.ST=jm(s)}},hp=class{get rT(){return this.$b}dT(){return this.pl}cT(){const t=new a.MSMediaKeys(this.$b);return Promise.resolve(new rp(t,this.$b,this.pl))}constructor(t,e){this.$b=t,this.pl=e}},op=class{Qm(t,e){try{return Promise.resolve(function(t,e){if(!ap())throw new p("Unsupported key system "+t);for(let i of e){let e=Go(up,Vv,t,i);if(e)return new hp(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static gT(){return ap()}};function ap(){return void 0!==a.MSMediaKeys&&"function"==typeof a.MSMediaKeys.isTypeSupported}function up(t,e){return a.MSMediaKeys.isTypeSupported(t,e)}t(),t(),t(),t();var cp=class extends Re{get Qb(){return this.CT?this.CT.sessionId:""}get zb(){return NaN}get qb(){return this.mT.Pf}get uy(){return this.pT}Yb(t,e,i){const s=i&&i.fairplay&&i.fairplay.RT;if(!s)throw new p("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,e,i){const s=kg(t),n=2*s.length,r=2*e.length;let h=new ArrayBuffer(4+n+4+r+4+i.byteLength),o=new DataView(h),a=new lh;return Vc(o,a,n,!0),yg(o,a,s,!0),Vc(o,a,r,!0),yg(o,a,e,!0),Vc(o,a,i.byteLength,!0),vo(o,a,i),new x(h)}(fu(e),s,this.xT);return this.CT=this.DT.createSession(this.ST,n),this.CT.addEventListener("webkitkeymessage",this.kT,!1),this.CT.addEventListener("webkitkeyadded",this.ET,!1),this.CT.addEventListener("webkitkeyerror",this.Ps,!1),this.PT("status-pending"),this.NT.Xf(this.CT),this.NT=new ue,Promise.resolve()}On(t){return Promise.resolve(!0)}async Zn(t){const e=fu(t);if(0===e.byteLength)throw new p("Cannot call update with an empty response.");this.BT=new ue;(this.CT||await this.NT.Pf).update(e),await this.BT.Pf}Xs(){var t;const e=this.CT;return e&&(e.removeEventListener("webkitkeymessage",this.kT,!1),e.removeEventListener("webkitkeyadded",this.ET,!1),e.removeEventListener("webkitkeyerror",this.Ps,!1),e.close()),this.NT.tf(),null==(t=this.BT)||t.tf(),this.mT.Xf(void 0),this.mT.Pf}sc(){return Promise.resolve(void 0)}PT(t){this.pT.By(),this.pT.Dy(Ah,t),this.wo(new Wv(this.pT))}constructor(t,e,i){super(),this.DT=t,this.ST=e,this.xT=i,this.mT=new ue,this.BT=void 0,this.pT=new K,this.CT=void 0,this.NT=new ue,this.Ps=()=>{const t=this.CT&&this.CT.error;if(!t)return;const e=new Vg("Unknown CDM error",t.code,t.systemCode);this.BT?(this.BT.My(e),this.BT=void 0):e.Ly===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.PT("output-not-allowed"):this.PT("internal-error"),this.wo(new qv)},this.kT=t=>{this.wo(new vs(this,"license-request",ki(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.ET=()=>{this.BT&&(this.BT.Xf(void 0),this.BT=void 0),this.PT("usable")}}};t();var ke=class extends Pa{get name(){return"THEOplayerError"}get category(){return qa.fromCode(this.code)}constructor(t,e,i){super(e,i),this.code=t}};function lp(t,e){return t instanceof ke?t:t instanceof v?new ke(e,t.message,t):new ke(e,String(t))}var dp=class{getInternalMediaKeys(){return this.DT}async sT(t){if(!this.xT)throw new ke(X.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new cp(this.DT,this.ST,this.xT)}hT(t){return this.xT=fu(t),Promise.resolve(!0)}kn(t){return t.webkitSetMediaKeys(this.DT),Promise.resolve()}oT(t){return t.webkitSetMediaKeys(null),Promise.resolve()}sr(){return Promise.resolve()}constructor(t,e,i){this.DT=t,this.rT=e,this.aT=i,this.xT=void 0;const s=Jm(i)||"video/mp4";this.ST=jm(s)}},fp=class{get rT(){return this.$b}dT(){return this.pl}cT(){const t=new a.WebKitMediaKeys(this.$b);return Promise.resolve(new dp(t,this.$b,this.pl))}constructor(t,e){this.$b=t,this.pl=e}},_p=class{Qm(t,e){try{return Promise.resolve(function(t,e){if(t!==Z_)throw new p(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!vp())throw new p("Unsupported key system "+t);for(let i of e){let e=Go(gp,Hv,t,i);if(e)return new fp(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static gT(){return vp()}};function vp(){return void 0!==a.WebKitMediaKeys&&"function"==typeof a.WebKitMediaKeys.isTypeSupported}function gp(t,e){return a.WebKitMediaKeys.isTypeSupported(t,e)}t();var wp=class{async Qm(t,e){for(let i of this.MT)try{return await i.Qm(t,e)}catch(t){}throw new p("Unsupported key system configuration for "+t)}constructor(t){this.MT=t}};t(),t(),t(),t(),t();var jn=class{Xo(t,e){return new Promise((i=>{const s=Mr.fp([this.LT.ap,e]),n=()=>{s.Wu()};this.OT.push((()=>{const e=mp(t,s.ap);return i(e),e.then(n,n)})),this.FT||(this.FT=this.UT())}))}tf(){return this.VT(!0)}bn(){return this.HT=void 0,this.VT(!1)}VT(t){const e=this.FT;return this.LT.tf(),t&&(this.LT=new Mr),Promise.resolve(e)}constructor(t){this.OT=[],this.FT=void 0,this.LT=new Mr,this.UT=()=>{if(0===this.OT.length)return this.HT?mp(this.HT,this.LT.ap).then(this.WT,this.WT):this.WT();return this.OT.shift()().then(this.UT)},this.WT=()=>{if(0!==this.OT.length)return this.UT();this.FT=void 0},this.HT=t}};function mp(t,e){return new Promise((i=>i(t(e))))}var pp=new jn,yp=class extends Re{qT(){this.BT&&(this.PT("usable"),this.BT.Xf(void 0),this.BT=void 0)}zT(t){const e=new Vg("Unknown CDM error",t.errorCode,t.systemCode);this.BT?(this.BT.My(e),this.BT=void 0):this.AT?(this.AT.My(e),this.AT=void 0):e.Ly===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.PT("output-restricted"):1===e.Oy?this.PT("expired"):this.PT("internal-error")}XT(t){0!==t.message.byteLength?(this.AT&&(this.AT.Xf(void 0),this.AT=void 0),this.wo(new vs(this,"license-request",Fg(this.$b,ki(t.message).buffer),t.defaultURL||void 0))):this.AT&&(this.AT.My("Empty key message"),this.AT=void 0)}GT(t){this.QT||(this.QT=t,this.KT.Xf(t))}get uy(){return this.jT}get Qb(){return this.YT}set Qb(t){this.YT=t}get qb(){return this.mT.Pf}get zb(){return NaN}async Xs(){this.throwIfClosed(),this.BT&&(this.BT.My(void 0),this.BT=void 0),this.Qy=!0,this.mT.Xf(void 0)}async Yb(t,e){this.throwIfClosed(),this.AT=new ue,this.ZT=fu(e);(this.QT||await this.KT.Pf).webkitGenerateKeyRequest(this.$b,this.ZT),await this.AT.Pf}async On(t){return this.throwIfClosed(),!1}async sc(){this.throwIfClosed()}async Zn(t){if(this.throwIfClosed(),this.BT=new ue,ds.Vv||ds.Lv)return pp.Xo((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.BT)return;(this.QT||await this.KT.Pf).webkitAddKey(this.$b,fu(t),this.ZT,this.Qb),await this.BT.Pf,ds.Lv&&await Rt(500)}throwIfClosed(){if(this.Qy)throw new p("Already closing or closed.")}PT(t){this.jT.By(),this.jT.Dy(Ah,t),this.wo(new Wv(this.jT))}async JT(){const t=this.QT||await this.KT.Pf;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.$b,this.YT)}catch(t){}finally{await Rt(500)}}constructor(t){super(),this.$b=t,this.AT=void 0,this.BT=void 0,this.Qy=!1,this.ZT=void 0,this.QT=void 0,this.mT=new ue,this.YT="",this.KT=new ue,this.jT=new K}},Ap=class{kn(t){return this.QT=t,this.QT.addEventListener("webkitkeyadded",this.ET),this.QT.addEventListener("webkitkeyerror",this.$T),this.QT.addEventListener("webkitkeymessage",this.tS),this.eS.forEach(((e,i)=>e.GT(t))),this.iS.forEach((e=>e.GT(t))),Promise.resolve()}oT(t){return t.removeEventListener("webkitkeyadded",this.ET),t.removeEventListener("webkitkeyerror",this.$T),t.removeEventListener("webkitkeymessage",this.tS),this.QT=void 0,Promise.resolve()}async sr(){let t=this.eS.entries(),e=t.next();for(;!e.done;)await e.value[1].JT(),e=t.next();this.eS.clear()}async sT(t,e,i){const s=new yp(this.rT);return this.QT&&s.GT(this.QT),this.iS.push(s),s}hT(t){return Promise.resolve(!1)}sS(t){if(!t)return;let e=this.eS.get(t);return e||(e=this.iS.shift(),e?(e.Qb=t,this.eS.set(t,e),e):void 0)}constructor(t,e){this.rT=t,this.aT=e,this.QT=void 0,this.eS=sa(),this.iS=[],this.ET=t=>{const e=this.sS(t.sessionId);e&&e.qT()},this.$T=t=>{const e=this.sS(t.sessionId);e&&e.zT(t)},this.tS=t=>{const e=this.sS(t.sessionId);e&&e.XT(t)}}},bp=class{cT(){return Promise.resolve(new Ap(this.rT,this.nS))}dT(){return this.nS}constructor(t,e){this.rT=t,this.nS=e}},Uo=class{Qm(t,e){try{return Promise.resolve(function(t,e){if(!Uo.gT())throw new p("Unsupported key system "+t);for(let i of e){let e=Go(Tp,Vv,t,i);if(e)return new bp(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static gT(){return lo()}};function Tp(t,e){const i=Zl();return!(!i||!i.canPlayType||""===i.canPlayType(e,t))}t();var Sp,kp=class{Qm(t,e){return t===Q_||t===O?Promise.resolve(void 0):Promise.reject(new v("DRM configuration not supported"))}};function Ep(){return Sp||(Sp=function(){const t=[];_p.gT()&&t.push(new _p);sp.gT()&&t.push(new sp);op.gT()&&t.push(new op);Uo.gT()&&t.push(new Uo);ds.Wv&&t.push(new kp);return new wp(t)}()),Sp}t(),t();var oa=class{By(t){this.rS.delete(t)}hS(){this.rS.clear()}xy(t){return this.rS.get(t)}Dy(t,e){this.rS.set(t,e)}constructor(){this.rS=sa()}},Sn=class t{static oS(){return t.Gg||(t.Gg=Pp.gT()?new Pp:new oa),t.Gg}static By(e){t.oS().By(e)}static hS(){t.oS().hS()}static xy(e){return t.oS().xy(e)}static Dy(e,i){t.oS().Dy(e,i)}};Sn.Gg=void 0;var Pp=class extends Sn{static gT(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}By(t){self.sessionStorage.removeItem(t)}hS(){self.sessionStorage.clear()}xy(t){var e;return null!=(e=self.sessionStorage.getItem(t))?e:void 0}Dy(t,e){self.sessionStorage.setItem(t,e)}};t(),t();var Ip=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(e,i)=>new t(e,i)}(t)}catch(t){}const e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(e)return function(t){return(e,i)=>{const s=new t;if(e)for(const t of e)s.append(t);return s.getBlob(i&&i.type||"")}}(e)})();function Cp(t,e,i){const s=Ip([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,e){let i=t;const s=i.indexOf("?");if(s>=0&&(i=i.substr(0,s)),i=i.substr(i.lastIndexOf("/")+1),e){let t=i.indexOf(".");t<0&&(t=i.length),i=i.substr(0,t)+e+i.substr(t)}return i}(t,i),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}t();var Rp="default";t(),t(),t(),t();var Gs=function(t){return t.aS="arraybuffer",t.uS="json",t.cS="stream",t.lS="text",t}({});t();var la=class t{append(t,e){let i=t,s=e;i=xp(i),s=Dp(s);const n=i.toLowerCase();if(this.Bm.hasOwnProperty(n)){const t=this.Bm[n],e=t[1];t[1]=e?e+", "+s:s}else this.Bm[n]=[i,s]}delete(t){const e=xp(t).toLowerCase();delete this.Bm[e]}get(t){const e=xp(t).toLowerCase();return this.Bm.hasOwnProperty(e)?this.Bm[e][1]:null}has(t){const e=xp(t).toLowerCase();return this.Bm.hasOwnProperty(e)}set(t,e){let i=t;i=xp(i);const s=i.toLowerCase();this.Bm[s]=[i,Dp(e)]}forEach(t,e){for(const i in this.Bm)this.Bm.hasOwnProperty(i)&&t.call(e,this.Bm[i][1],i,this)}asList(){const t=[];for(const e in this.Bm)if(this.Bm.hasOwnProperty(e)){const[i,s]=this.Bm[e];t.push([i,s])}return t}dS(){const t={};return this.forEach(((e,i)=>{t[i]=e})),t}fS(t){t.forEach(((t,e)=>{this.append(e,t)}))}_S(t){t.forEach(((t,e)=>{this.set(e,t)}))}constructor(e){this.Bm={},e instanceof t?e.asList().forEach((t=>{let[e,i]=t;this.append(e,i)})):Array.isArray(e)?e.forEach((t=>{let[e,i]=t;this.append(e,i)})):e&&g.getOwnPropertyNames(e).forEach((t=>{this.append(t,e[t])}))}};function xp(t){let e=t;if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new p("Invalid character in header field name");return e}function Dp(t){let e=t;return"string"!=typeof e&&(e=String(e)),e}t(),t(),t();var yn=((t,e,i)=>(i=null!=t?_l(ml(t)):{},((t,e,i,s)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let n of wl(e))pl.call(t,n)||n===i||vl(t,n,{get:()=>e[n],enumerable:!(s=gl(e,n))||s.enumerable});return t})(!e&&t&&t.__esModule?i:vl(i,"default",{value:t,enumerable:!0}),t)))(bl());t();var Qo=class extends Pa{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}},Ct=s,Np=Ll(Ct.ReadableStream)&&Ll(Ct.WritableStream)&&Ll(Ct.TransformStream)&&sh(Ct.ReadableStream.prototype.pipeThrough)&&!Ci.yw,zn=Np?Ct.ReadableStream:yn.ReadableStream,Uc=(Np?Ct.WritableStream:yn.WritableStream,Np?Ct.TransformStream:yn.TransformStream),Bp=(Np&&Ct.ByteLengthQueuingStrategy?Ct.ByteLengthQueuingStrategy:yn.ByteLengthQueuingStrategy,Np&&Ct.CountQueuingStrategy?Ct.CountQueuingStrategy:yn.CountQueuingStrategy);function Mp(t){return function(t){return new zn({start(e){for(const i of t)e.enqueue(i);e.close()}})}([t])}function ya(t){return Mp(function(t){return new x(t)}(t))}function jt(t,e){return function(t,e){let i=e;const s=t.getReader(),n=new ue,r=()=>{h();const t=new ti;s.cancel(t).catch(De),n.My(t)},h=()=>{i&&(i.tp(r),i=void 0)};i&&(i.$m?r():i.ep(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{h(),n.Xf(t)}),(t=>{h(),n.My(t)})),n.Pf}(t,e).then((t=>po(t).buffer))}function Lp(t,e){let i=e;const{readable:s,writable:n}=new Uc,r=n.getWriter(),h=()=>{i&&i.tf()};return r.closed.then(h,h),t.then((t=>(i=void 0,r.releaseLock(),t.pipeTo(n).catch(De))),(t=>(i=void 0,r.releaseLock(),n.abort(t).catch(De)))),s}function Op(t){const{readable:e,writable:i}=new Uc;return t.pipeTo(i,{preventCancel:!0}).catch((e=>{let i;i=di(e)?e[0]===e[1]||Eh(e[0])&&Eh(e[1])?e[0]:new Qo(e):e,t.cancel(i).catch(De)})),e.tee()}function Fp(t){return kg(new x(t))}function Up(t){return ro(t).buffer}t();var Vp="content-type",Hp="text/plain;charset=UTF-8",Wp=class{vS(t){return this.gS(t).then(JSON.parse)}wS(t,e){switch(t){case Gs.aS:return this.mS(e);case Gs.uS:return this.vS(e);case Gs.cS:return this.pS();case Gs.lS:return this.gS(e);default:throw new p}}};function qp(t,e,i){if(t instanceof Wp)return t;if(t instanceof zn)return function(t,e){return new Xp({Vm:0,pS:t,yS:zp(e)})}(t,i);const s=zp(i),n=Promise.resolve(t).then((t=>function(t,e){if(t){if("string"==typeof t)return{Vm:Gs.lS,AS:t,yS:e||Hp};if(t instanceof ArrayBuffer||Cg(t))return{Vm:Gs.aS,AS:Jp(t),yS:e};if(Ml(t)||di(t))return{Vm:Gs.uS,AS:t,yS:e};throw new p("Unsupported BodyInit type")}return{Vm:Gs.lS,AS:null,yS:e}}(t,s)));return new Xp({Vm:1,Pf:n,bS:e})}function zp(t){return(t.get(Vp)||"").toLowerCase()}var Xp=class t extends Wp{get TS(){return this.SS}get kS(){return 0===this.ES.Vm}PS(){return this.IS.Pf}gS(t){return this.CS(Gp,t)}vS(t){return this.CS(Kp,t)}mS(t){return this.CS(Yp,t)}pS(){return this.RS(function(t){return 0===t.Vm?t.pS:Lp(t.Pf.then(Zp).then(ya),t.bS)}(this.ES))}CS(t,e){if(this.SS)return Promise.reject(new p("Already used"));this.SS=!0;const i=t(this.ES,e);return this.IS.lp(i.then(De)),i}RS(t){if(this.SS)throw new p("Already used");if(t.locked)throw new p("Body stream is locked");this.SS=!0;const e=new Uc,i=Promise.resolve(t.pipeTo(e.writable));return this.IS.lp(i),e.readable}xS(t){this.ES=t,1===t.Vm&&t.Pf.catch(De)}DS(){if(this.SS)throw new p("Already used");const e=function(t){if(0===t.Vm){const[e,i]=t.pS.tee();return[{Vm:t.Vm,pS:e,yS:t.yS},{Vm:t.Vm,pS:i,yS:t.yS}]}{const[e,i]=t.bS.dp();return[{Vm:t.Vm,Pf:t.Pf,bS:e},{Vm:t.Vm,Pf:t.Pf,bS:i}]}}(this.ES),i=e[0],s=e[1];return this.xS(i),new t(s)}constructor(t){super(),this.SS=!1,this.IS=new ue,this.IS.Pf.catch(De),this.xS(t)}};function Gp(t,e){return 0===t.Vm?jt(t.pS,e).then(Fp):(e&&t.bS.lp(e),qe(t.Pf.then(Qp),t.bS))}function Qp(t){switch(t.Vm){case Gs.lS:return Promise.resolve(t.AS||"");case Gs.aS:return Promise.resolve(t.AS).then(Fp);case Gs.uS:return Promise.resolve(t.AS).then(JSON.stringify)}}function Kp(t,e){return 0===t.Vm?Gp(t,e).then(JSON.parse):(e&&t.bS.lp(e),qe(t.Pf.then(jp),t.bS))}function jp(t){return t.Vm===Gs.uS?Promise.resolve(t.AS):Qp(t).then(JSON.parse)}function Yp(t,e){return 0===t.Vm?jt(t.pS,e):(e&&t.bS.lp(e),qe(t.Pf.then(Zp),t.bS))}function Zp(t){switch(t.Vm){case Gs.aS:return Promise.resolve(t.AS);case Gs.lS:case Gs.uS:return Qp(t).then(Up)}}function Jp(t){return t instanceof ArrayBuffer?t:ki(Ht(t)).buffer}var $p=class extends Wp{get TS(){return this.NS.TS}get kS(){return this.NS.kS}PS(){return this.NS.PS()}gS(t){return this.NS.gS(t)}vS(t){return this.NS.vS(t)}mS(t){return this.NS.mS(t)}pS(t){return this.NS.pS(t)}DS(){return this.NS.DS()}constructor(t){super(),this.NS=t}};function Fo(t){return t.MS>=200&&t.MS<=299||304===t.MS}var Gu=class t extends $p{LS(t){return this.wS(this.OS,t)}Ty(){return new t({LS:this.DS(),FS:this.FS},this)}constructor(t,e){let i,s,n,r,h;e?(i=e.US,s=e.OS,n=e.MS,r=e.VS,h=e.HS):(i=[],s=Gs.lS,n=200,r="OK",h=!1);const o=t.FS,a=new la(t.US||i),u=t.OS||s,c=t.WS||(e&&e.FS===o?e.WS:o.qS),l=e?e.NS:null;super(qp(void 0!==t.LS?t.LS:l,t.bS||new Mr,a)),this.US=a,this.FS=o,this.WS=c,this.OS=u,this.MS=void 0!==t.MS?t.MS:n,this.VS=void 0!==t.VS?String(t.VS):r,this.HS=t.HS||h}};t();var Na=function(t){return t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT",t}({}),Sa=function(t){return t.zS="",t.XS="manifest",t.GS="segment",t.QS="preload-hint",t.KS="content-protection",t}({}),Qn=function(t){return t.zS="",t.jS="initialization-segment",t.YS="fairplay-license",t.ZS="fairplay-certificate",t.JS="widevine-license",t.$S="widevine-certificate",t.ek="playready-license",t.nk="clearkey-license",t.rk="aes128-key",t}({}),Ec=function(t){return t.zS="",t.hk="audio",t.wl="video",t.lS="text",t.ck="image",t}({}),ty=function(t){return t.lk="same-origin",t.dk="no-cors",t.fk="cors",t._k="navigate",t}({}),Qi=class{constructor(t,e){const i=t.qS;let s,n,r,h,o,a,u,c,l,d,f,_,v,g,w;var m,p,y;e?(s=e.AS,n=e.US,r=e.vk,h=e.OS,o=e.gk,a=e.wk,u=e.ap,c=e.Vm,l=e.pk,d=e.yk,f=e.Ak,_=e.bk,v=e.Tk,g=e.Sk,w=e.Ek):(s=null,n={},r="GET",h=Gs.lS,o=0,a=0,c="",l="",d="",f=!1,v=void 0,g=!1,w=void 0),this.qS=i,this.AS=t.AS||s,this.US=new la(t.US||n),this.vk=t.vk||r,this.OS=t.OS||h,this.gk=void 0!==t.gk?Number(t.gk)||0:o,this.wk=void 0!==t.wk?Number(t.wk)||0:a,this.ap=t.ap||u||(new Mr).ap,this.Vm=t.Vm||c,this.pk=t.pk||l,this.yk=t.yk||d,this.Ak=void 0!==t.Ak?Boolean(t.Ak):f,this.bk=t.bk||_,this.Tk=null!=(m=t.Tk)?m:v,this.Sk=null!=(p=t.Sk)?p:g,this.Ek=null!=(y=t.Ek)?y:w}},ey=class{FS(t){const e=function(t){return new Gu({LS:null,US:{},FS:t,WS:t.qS,OS:t.OS,MS:0,VS:Uv.zp})}(new Qi(t));return Promise.resolve(e)}Pk(t){}bn(){}};var er=class t{static get Ik(){return t.Ck||(t.Ck=new t(new ey)),t.Ck}FS(t){const e=this.Rk(t);return this.xk.FS(e)}Pk(t){return this.xk.Pk(this.Dk(t))}Rk(e){let i=new Qi(e);if(!this.Nk){const e=t.Bk(i.qS);i=new Qi({qS:e},i)}return i}Dk(e){let i=e.qS;return this.Nk||(i=t.Bk(i)),{qS:i,AS:e.AS}}static Bk(t){return Gn.Em&&Kc(t,"http://")?t.replace(":","s:"):t}bn(){this.xk.bn()}constructor(t,e=!0){this.xk=t,this.Nk=e}};function iy(t,e){for(const i of g.keys(e))t.searchParams.set(i,e[i])}function Hn(t,e){let i=Gn.wm(t);return e&&!wr(i,"/")&&(i+="/"),i}er.Ck=void 0,t(),t(),t();var sy=/cache:(.+)?(?=&|$)/,ny="http://webcache.googleusercontent.com/search?q=cache:";function ry(t){if(!Kc(t,ny))return"";const e=Gn.Ih(t).search.match(sy);return e&&e.length>1?e[1]:""}function hy(t){return Gn.Ih(".",t)}t(),t();var oy=function(t){return t.Mk="HttpOpenError",t.Lk="HttpResponseError",t.Ok="HttpTimeoutError",t}({}),st=class extends Pa{get FS(){return this.Fk}constructor(t,e,i){super(e,i),this.Fk=t}};var Lo=class extends st{get name(){return oy.Mk}constructor(t,e){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.qS),e)}};t();var pc=class extends st{get name(){return oy.Lk}get Uk(){return this.Vk}constructor(t,e,i){super(t.FS,null!=i?i:function(t){return"Error while loading "+t.FS.qS+", status code "+t.MS}(t),e),this.Vk=t}};t();var ay=class extends st{get name(){return oy.Ok}constructor(t,e){super(t,function(t){return"Request for "+t.qS+" timed out after "+t.gk+" seconds."}(t),e)}};t();var uy=self.fetch,cy=self.Request,ly=self.Response,dy=self.Headers,fy=self.ReadableStream,_y=self.AbortSignal,vy=self.AbortController,gy=Ut((()=>{try{return sh(uy)&&Ll(cy)&&Ll(ly)&&Ll(dy)&&"forEach"in dy.prototype&&L_()}catch(t){return!1}})),wy=["http:","https:"];var my=Ut((()=>{try{return gy()&&Ll(_y)&&Ll(vy)&&"signal"in cy.prototype}catch(t){return!1}})),py=Ut((()=>{try{return gy()&&Ll(fy)&&"body"in ly.prototype&&!ds.wv}catch(t){return!1}}));function za(t){return t instanceof st}function yy(t){return t instanceof pc}function Ay(t,e){const i=t.US.has("content-length")?Number(t.US.get("content-length")):void 0;let s;return s=t.kS?function(t,e,i){return t.pipeThrough(new Uc(new by(e,i)))}(t.pS(),e,i):async function(t,e,i){await Promise.resolve(),e(0,i);const s=await t,n=s.byteLength;return e(n,null!=i?i:n),s}(t.mS(),e,i),new Gu({LS:s,FS:t.FS},t)}t(),t();var by=class{transform(t,e){this.Hk+=t.byteLength,this.Wk(this.Hk,this.qk),e.enqueue(t)}flush(t){var e;this.Wk(this.Hk,null!=(e=this.qk)?e:this.Hk)}constructor(t,e){this.Wk=t,this.qk=e,this.Hk=0}};var Ty=class{async zk(){const t=this.Fk;let e,i;t.gk&&(this.Xk=u((()=>{this.Gk=!0,this.LT.tf()}),t.gk),this.LT.ap.hp((()=>{c(this.Xk)})));try{e=uy(t.qS,{method:t.vk,headers:t.US.dS(),body:t.AS,credentials:t.Ak?"include":"same-origin",signal:Ey(this.LT.ap),mode:t.Tk,keepalive:t.Ek})}catch(e){throw new Lo(t,e)}try{i=await e}catch(t){const e=this.Qk(t);throw Eh(e)&&this.LT.tf(),e}const s=i.url||t.qS,n=0===i.status&&"file:"===function(t){return Gn.Ih(t).protocol}(s)?200:i.status,r=new Sy(this,i,this.LT);let h=new Gu({LS:r,FS:t,OS:t.OS,US:Py(i.headers),MS:n,VS:i.statusText,WS:s});if(!Fo(h))throw new pc(h);return t.bk&&(h=Ay(h,t.bk)),h}Qk(t){return za(t)?t:Eh(t)?this.Gk?new ay(this.Fk):new ti(t.message,t):this.Vk?new pc(this.Vk,t):new Lo(this.Fk,t)}constructor(t){this.LT=new Mr,this.Vk=void 0,this.Xk=0,this.Gk=!1,this.Fk=t,this.LT.lp(t.ap),this.Uk=this.zk()}},Sy=class t extends Wp{get TS(){return this.Kk.bodyUsed}get kS(){return Ee(this.Kk.body)}PS(){return this.IS.Pf}gS(t){return this.CS(this.Kk.text(),t)}mS(t){return this.CS(this.Kk.arrayBuffer(),t)}pS(){const t=this.Kk.body;return t?this.RS(t):Lp(this.mS().then(ya),this.LT)}DS(){const e=this.Kk.clone(),[i,s]=this.LT.dp();return this.LT=i,new t(this.jk,e,s)}CS(t,e){e&&this.LT.lp(e);let i=Dc(Promise.resolve(t),this.LT.ap).catch((t=>{throw this.jk.Qk(t)}));return i=qe(i,this.LT),this.IS.lp(i.then(De)),i}RS(t){return new zn(new Iy(t,(t=>this.jk.Qk(t)),this.LT,this.IS),{highWaterMark:0})}constructor(t,e,i){super(),this.IS=new ue,this.jk=t,this.Kk=e,this.LT=i,this.IS.Pf.catch(De)}},ky="abort";function Ey(t){if(!my())return;const e=new vy;if(t.$m)e.abort();else if(!t.sp){const i=()=>{s(),e.abort()},s=()=>{e.signal.removeEventListener(ky,i),t.tp(i),t.op(s)};e.signal.addEventListener(ky,i),t.ep(i),t.hp(s)}return e.signal}function Py(t){if(function(t){return nh(t)&&"function"==typeof t.forEach}(t)){const e=new la;return t.forEach(((t,i)=>{Array.isArray(t)&&2===t.length?e.append(t[0],t[1]):e.append(i,t)})),e}return new la(t)}var Iy=class{start(t){this.Ed=this.Yk.getReader()}async pull(t){let e;try{e=await Dc(this.Ed.read(),this.LT.ap)}catch(e){const i=this.Zk(e);return this.IS.My(i),this.LT.tf(),this.Ed.cancel(i).catch(De),void t.error(i)}e.done?(this.IS.Xf(),this.LT.tf(),t.close()):t.enqueue(e.value)}cancel(t){return this.LT.tf(),this.IS.My(t),this.Ed.cancel(t)}constructor(t,e,i,s){this.Yk=t,this.Zk=e,this.LT=i,this.IS=s}};t();var Cy=class{get Uk(){return this.Jk.Pf}zk(){const t=this.$k,e=this.Fk;if(e.ap.$m)return this.tE();t.onreadystatechange=()=>this.eE(),t.onprogress=t=>this.Wk(t),t.onload=()=>this.iE(),t.onloadend=()=>this.sE(),t.onerror=()=>this.nE(),t.ontimeout=()=>this.rE(),t.onabort=()=>this.tE(),t.open(e.vk,e.qS,!0),t.withCredentials=Boolean(e.Ak),"responseType"in t&&e.OS&&(e.OS===Gs.lS?t.responseType="text":t.responseType="arraybuffer"),e.US.forEach(((e,i)=>{t.setRequestHeader(i,e)})),e.gk&&(t.timeout=e.gk),this.LT.ap.ep(this.hE);const i=e.AS;i?t.send(i):t.send()}eE(){const t=this.$k;void 0!==t&&t.readyState>=2&&!this.oE&&(this.oE=!0,this.aE())}aE(){var t;const e=this.$k,i=function(t){const e=new la,i=t.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach((t=>{const i=t.split(":"),s=i.shift().trim();if(s){const t=i.join(":").trim();e.append(s,t)}})),e}(e.getAllResponseHeaders()||""),s=this.Fk;var n;this.uE=new ue,this.Vk=new Gu({FS:s,OS:s.OS,LS:this.uE.Pf,MS:e.status,VS:e.statusText,US:i,WS:null!=(n=e.responseURL)?n:i.get("X-Request-URL")}),null==(t=this.Jk)||t.Xf(this.Vk)}iE(){var t;const e=this.$k;if(void 0===e)return;let i=e.response;if(!Ee(i)){const t=this.Fk.OS;i=t===Gs.lS?e.responseText:t===Gs.aS?new ArrayBuffer(0):{}}null==(t=this.uE)||t.Xf(i)}sE(){this.bn()}Wk(t){void 0!==this.$k&&(null==this.Fk.bk||this.Fk.bk.call(this.Fk,t.loaded,t.lengthComputable?t.total:void 0))}nE(){const t=new v("Network request failed");this.Vk?this.Ps(new pc(this.Vk,t)):this.Ps(new Lo(this.Fk,t))}rE(){this.Ps(new ay(this.Fk))}tE(){this.Ps(new ti),this.bn()}Ps(t){var e,i;null==(e=null!=(i=this.uE)?i:this.Jk)||e.My(t)}bn(){this.$k=void 0,this.Vk=void 0,this.Jk=void 0,this.uE=void 0,this.LT.Wu()}constructor(t){this.LT=new Mr,this.Vk=void 0,this.Jk=new ue,this.oE=!1,this.hE=()=>{var t;this.tE(),null==(t=this.$k)||t.abort()},this.Fk=t,this.LT.lp(t.ap),this.$k=new fl,this.zk()}};function V(t,e,i){return new Promise(((s,n)=>{if(i&&i.$m)return n(new ti);const r=t=>{o(),s(t)},h=()=>{o(),n(new ti)},o=()=>{t.removeEventListener(e,r),i&&i.tp(h)};t.addEventListener(e,r),i&&i.ep(h)}))}t();var Ry=class{FS(t){return function(t){if(!gy()||!function(t){try{return wy.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.qS))return!1;if(!py()&&t.bk)return!1;if(!t.Sk&&t.vk!==Na.POST){if(ds.Vv&&ds.Iv<=68)return!1;if(ds.Lv)return!1}return!0}(t)?new Ty(t).Uk:new Cy(t).Uk}Pk(t){const e=a.navigator;if(e&&e.sendBeacon)e.sendBeacon(t.qS,Ip([t.AS],{type:t.yS}));else{const e=t.yS?{"Content-type":t.yS}:void 0;this.FS(new Qi({vk:Na.POST,qS:t.qS,AS:t.AS,US:e,Tk:ty.dk})).then((t=>{Ov(t.mS())}),De)}}bn(){}};t(),t();var et=function(t){return t[t.cE=1]="cE",t[t.lE=2]="lE",t[t.lS=3]="lS",t[t.dE=4]="dE",t[t.fE=9]="fE",t}({});function xn(t){return 1===t._E}function xy(t){return 3===t._E}t();var Dy=class extends Pa{constructor(t){super("Invalid XML",t)}},Ny=class{vE(t){const e=new DOMParser;let i;try{i=e.parseFromString(t,"text/xml")}catch(t){throw new Dy(t)}if(!i||i.getElementsByTagName("parsererror").length>0)throw new Dy;return new Vy(i)}},By=class t{get _E(){return et.lE}get gE(){var t;return null!=(t=this.wE.localName)?t:qy(this.wE.nodeName)}get l(){return this.wE.nodeName}get mE(){var t;return null!=(t=this.wE.namespaceURI)?t:void 0}get pE(){var t;return null!=(t=this.wE.prefix)?t:void 0}get yE(){return this.wE.nodeValue}AE(t){return this.wE.isEqualNode(t.wE)}bE(e){return new t(this.wE.cloneNode(e))}constructor(t){this.wE=t}},My=class{get TE(){return void 0===this.SE&&(this.SE=function(t){const e=[];for(let i=0;i<t.length;i++){const s=Wy(t.item(i));s&&e.push(s)}return e}(this.kE.childNodes)),this.SE}get m(){return this.TE.filter(Hy)}EE(t){return this.TE.filter((e=>Hy(e)&&e.PE===t))}IE(t,e){return this.TE.filter((i=>Hy(i)&&i.gE===e&&i.mE===t))}get CE(){return this.kE}RE(t){this.kE.appendChild(t.CE),this.SE&&this.SE.push(t)}AE(t){return this.kE.isEqualNode(t.CE)}constructor(t){this.SE=void 0,this.kE=t}},Ly=class t extends My{get _E(){return et.cE}get gE(){var t;return null!=(t=this.kE.localName)?t:qy(this.kE.nodeName)}get mE(){var t;return null!=(t=this.kE.namespaceURI)?t:void 0}get pE(){var t;return null!=(t=this.kE.prefix)?t:void 0}get PE(){return this.kE.nodeName}get xE(){return function(t){const e=[];for(let i=0;i<t.length;i++)e.push(new By(t.item(i)));return e}(this.kE.attributes)}get DE(){return this.kE.textContent}NE(t){if(this.kE.hasAttribute(t))return this.kE.getAttribute(t)}BE(t,e){if(this.kE.hasAttributeNS(t,e))return this.kE.getAttributeNS(t,e)}ME(t){this.kE.removeAttribute(t)}LE(t,e){this.kE.removeAttributeNS(t,e)}OE(t,e){this.kE.setAttribute(t,e)}FE(t,e,i){this.kE.setAttributeNS(t,e,i)}bE(e){return new t(this.kE.cloneNode(e))}constructor(t){super(t)}},Oy=class{get LS(){return this.kE.nodeValue}get CE(){return this.kE}AE(t){return this.LS===t.LS}constructor(t){this.kE=t}},Fy=class t extends Oy{get _E(){return et.lS}bE(e){return new t(this.kE.cloneNode(e))}constructor(t){super(t)}},Uy=class t extends Oy{get _E(){return et.dE}bE(e){return new t(this.kE.cloneNode(e))}constructor(t){super(t)}},Vy=class t extends My{get _E(){return et.fE}get UE(){return new Ly(this.kE.documentElement)}bE(e){return new t(this.kE.cloneNode(e))}constructor(t){super(t)}};function Hy(t){return xn(t)}function Wy(t){switch(t.nodeType){case et.cE:return new Ly(t);case et.lS:return new Fy(t);case et.dE:return new Uy(t)}}function qy(t){const e=t.indexOf(":");return e<0?t:t.substr(e+1)}!function(t){Gn=t}(new class extends B_{get nm(){return this.VE||(this.VE=new vv(Ep())),this.VE}get HE(){return this.WE}get qE(){return this.zE}get XE(){return this.GE}get QE(){return!1}get KE(){return Sn.oS()}get jE(){return{YE:Cp}}get ZE(){return ul.connection&&ul.connection.effectiveType||Rp}get JE(){return ul.connection&&ul.connection.type||"unknown"}get td(){return this.$E||(this.$E=new er(new Ry)),this.$E}vE(t){return this.tP.vE(t)}constructor(...t){super(...t),this.VE=void 0,this.WE=py(),this.zE=ds.Ig||ds.wv,this.GE=(ds.Ig||ds.Vv&&ds.Iv<=68||ds.wv)&&!(ds.Lv&&ds.Fv<3),this.$E=void 0,this.tP=new Ny}}),t(),t(),t(),t(),t(),t();var zy=class extends S{get ht(){return this.eP()}eP(){return this.iP.ht}sP(){return this.iP.sP()}get Sl(){return this.nP()}nP(){return this.iP.Sl}get Ku(){return this.rP()}set Ku(t){this.hP(t)}rP(){return this.iP.Ku}hP(t){this.iP.Ku=t}get bt(){return this.oP()}oP(){return this.iP.bt}get Yu(){return this.aP()}set Yu(t){this.uP(t)}aP(){return this.iP.Yu}uP(t,e){this.iP.uP(t,e)}get ct(){return this.cP()}cP(){return this.iP.ct}get je(){return this.lP()}lP(){return this.iP.je}get $c(){return this.dP()}dP(){return this.iP.$c}get lt(){return this.fP()}get Rc(){return this._P()}fP(){return this.iP.lt}_P(){return this.iP.Rc}get vP(){return this.gP()}gP(){return this.iP.vP}get wP(){return this.mP()}mP(){return this.iP.wP}get pP(){return this.yP()}yP(){return this.iP.pP}get tc(){return this.AP()}set tc(t){this.bP(t)}AP(){return this.iP.tc}bP(t){this.iP.tc=t}get TP(){return this.SP()}SP(){return this.iP.TP}get Oc(){return this.kP()}kP(){return this.iP.Oc}get Hu(){return this.EP()}set Hu(t){this.$u(t)}EP(){return this.iP.Hu}$u(t){this.iP.Hu=t}get Tl(){return this.PP()}PP(){return this.iP.Tl}get IP(){return this.CP()}set IP(t){this.RP(t)}CP(){return this.iP.IP}RP(t){this.iP.IP=t}get Vc(){return this.xP()}xP(){return this.iP.Vc}get Cl(){return this.DP()}DP(){return this.iP.Cl}get Uc(){return this.NP()}NP(){return this.iP.Uc}BP(){return this.iP.BP()}_a(t,e){return this.iP._a(t,e)}get nt(){return this.MP()}MP(){return this.iP.nt}get LP(){return this.OP()}OP(){return this.iP.LP}get rt(){return this.FP()}FP(){return this.iP.rt}get UP(){return this.VP()}VP(){return this.iP.UP}get Pl(){return this.HP()}set Pl(t){this.WP(t)}get qP(){return this.zP()}zP(){return this.iP.qP}HP(){return this.iP.Pl}WP(t){this.iP.Pl=t}get XP(){return this.iP.XP}set XP(t){this.iP.XP=t}GP(){return this.iP.GP()}xa(){return this.iP.xa()}QP(){return this.iP.QP()}lr(t){this.iP.lr(t)}cr(){this.iP.cr()}ke(){this.iP.ke()}KP(){this.iP.KP()}Ml(){this.iP.Ml()}bl(){this.iP.bl()}be(){this.iP.be()}Al(){return this.iP.Al()}jP(){return this.iP.jP()}YP(){this.iP.YP()}ZP(){this.iP.ZP()}sr(){return this.iP.sr()}JP(){this.iP.JP()}$P(){this.iP.$P()}tI(t){return this.iP.tI(t)}eI(t){return!1}async bn(){this.Bo(),await this.iP.bn()}iI(t){return this.iP.iI(t)}constructor(t){super(),this.sI=t=>{this.eI(t)||this.wo(t)},this.iP=t,t.wp(this.sI)}};t(),t(),t();var ie=function(t){return t.nI="rI",t.hI="oI",t}({});t(),t(),t(),t();var Cs=class extends o{get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}constructor(t,e){super(t,e),this.Zu=void 0}};function Xy(t){return Boolean(t&&t.ba)}var xe=class extends Cs{constructor(t){super(t)}},eo=class extends o{constructor(t){super(t)}},Gy=class extends xe{ya(){return new Qy(this.Ht.ba)}constructor(t){super(ie.nI),this.Ht=t}},Qy=class extends eo{constructor(t){super("addtrack"),this.track=t}};t();var Ky=class extends xe{ya(){return new jy(this.Ht.ba)}constructor(t){super(ie.hI),this.Ht=t}},jy=class extends eo{constructor(t){super("removetrack"),this.track=t}};t();var Fe=function(t){return t.aI="uI",t.cI="lI",t.dI="fI",t._I="vI",t.gI="wI",t.mI="pI",t.ca="yI",t.Lf="AI",t.bI="TI",t.SI="Zn",t.kI="EI",t.II="CI",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality",t}({}),Tr=class extends Re{get RI(){return this.xI}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}get U(){return this.xI.length}DI(t){return this.xI[t]}tt(t){return!(!t||Qe(this.xI,t))&&(this.xI.push(t),this.Zu&&this.Zu.push(t.ba),t.wn(Fe.ca,this.Os),this.wo(new Gy(t)),!0)}it(t){if(!t)return!1;const e=this.xI.indexOf(t);return!(e<0)&&(Xt(this.xI,e),this.Zu&&Xt(this.Zu,e),t.pn(Fe.ca,this.Os),this.wo(new Ky(t)),!0)}NI(t){return Qe(this.xI,t)}sr(){const t=this.xI;for(let e=t.length-1;e>=0;e-=1)this.it(t[e])}bn(){this.sr(),this.Bo()}constructor(){super(),this.xI=[],this.Zu=void 0}};t();var no=class extends xe{ya(){return new Yy(this.Ht.ba)}constructor(t){super(Fe.ca),this.Ht=t}},Yy=class extends eo{constructor(t){super("change"),this.track=t}},ca=class extends Tr{get BI(){return this.MI}set BI(t){const e=this.MI;if(t!==e){if(e){this.LI(e);for(const i of e.RI)t&&t.NI(i)||this.it(i)}if(this.MI=t,t){const e=[];for(const i of t.RI)this.tt(i),this.OI(i)&&e.push(i);this.FI(t);for(const t of e)t.wo(new no(t))}}}FI(t){t.wn(ie.nI,this.UI),t.wn(ie.hI,this.VI)}LI(t){t.pn(ie.nI,this.UI),t.pn(ie.hI,this.VI)}bn(t){!t&&this.MI&&this.MI.bn(),super.bn()}constructor(){super(),this.MI=void 0,this.UI=t=>{const e=t.Ht;this.tt(e)},this.VI=t=>{const e=t.Ht;this.it(e)}}};t(),t(),t();var Zy=g.freeze||Kl;function Vo(t,e,i){g.defineProperty(t,e,{writable:!1,enumerable:!0,value:i})}function Jy(t){return Zy(t)}function Xe(t,e){for(const i of g.getOwnPropertyNames(e))g.defineProperty(t,i,g.getOwnPropertyDescriptor(e,i));return t}function pr(t){if(Ml(t)){const e={};for(const i in t)Nl.call(t,i)&&(e[i]=pr(t[i]));return e}if(di(t)){const e=new Array(t.length);for(let i=0;i<e.length;i++)i in t&&(e[i]=pr(t[i]));return e}return t}function sn(t,e){return t===e||!(!t||!e)&&(!(!nh(t)||!nh(e))&&(Mt(t)?!!Mt(e)&&function(t,e){const i=t.length,s=e.length;if(i!==s)return!1;for(let s=0;s<i;s+=1)if(!sn(t[s],e[s]))return!1;return!0}(t,e):!Mt(e)&&function(t,e){const i=g.keys(t),s=g.keys(e);if(!i||!s||i.length!==s.length)return!1;for(const s of i)if(!Nl.call(e,s)||!sn(t[s],e[s]))return!1;return!0}(t,e)))}function $y(t,e){return t.constructor===e.constructor}function tA(t){const e={};for(const i of g.keys(t)){const s=t[i];null!=s&&(e[i]=s)}return e}function ko(t){const e={};for(const i of g.keys(t)){const s=t[i];if(Mt(s)){const t=[];for(let e=0;e<s.length;e+=1){const i=s[e];if(null!=i){const e=nh(i)?ko(i):i;t.push(e)}}e[i]=t}else null!=s&&(e[i]=nh(s)?ko(s):s)}return e}function ba(t){let e=t;if("string"==typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}return Boolean(e)}function Io(t){return Ee(t)?ba(t):void 0}function nu(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function eA(t){const e=nu(t);if(j(e))throw new v("Expected a valid number.");return e}function ci(t){return"string"==typeof t?t:""}function iA(t,e){if(!Mt(t))return[];const i=0|t.length,s=new Array(i);for(let n=0;n<i;n++)s[n]=e(t[n]);return s}function tc(t,e){let i;return i=Mt(t)?iA(t,e):e(t),i}t();var sA=[ie.nI,ie.hI,Fe.ca];function nA(t){let e;const i=t.RI.map((t=>t.ba));return i.item=e=>{const i=0|e,s=t.DI(i);return s&&s.ba||void 0},i.addEventListener=(t,i)=>{e.wn(t,i)},i.removeEventListener=(t,i)=>{e.pn(t,i)},e=new bi(i),t.wn(sA,(t=>e.wo(t.ba))),i}t();var An=function(t){return t[t.HI=0]="HI",t[t.WI=1]="WI",t[t.qI=2]="qI",t[t.zI=3]="zI",t[t.XI=4]="XI",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.GI=7]="GI",t}({});function rA(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function hA(){}function Ji(t){const e=[Fe.SI,Fe.ca,Fe.kI,Fe.II,Fe.QUALITY_UNAVAILABLE];let i;const s={get activeQuality(){return t.QI&&t.QI.ba},get enabled(){return t.Rt},set enabled(e){t.Rt=ba(e)},get id(){return t.o},get uid(){return t.KI},get kind(){return t.Lt},get label(){return t._h},set label(e){t._h=ci(e)},get accessibility(){var e,i;return null!=(i=null==(e=t.jI)?void 0:e.map(rA))?i:[]},get language(){return t.gs},get qualities(){return t.YI.ba},set targetQuality(e){let i;i=e?function(t,e){const i=[];for(const s of t.YI.RI)for(const t of e)s.ba===t&&i.push(s);return i}(t,di(e)?e:[e]):[],i.length>0?t.ZI=i:t.ZI=void 0},get targetQuality(){if(t.ZI)return 1===t.ZI.length?t.ZI[0].ba:t.ZI.map((t=>t.ba))},addEventListener(t,e){const s=tc(t,ci);i.wn(s,e)},removeEventListener(t,e){const s=tc(t,ci);i.pn(s,e)}};return i=new bi(s),t.wn(e,(t=>i.wo(t.ba))),g.defineProperty(s,"constructor",{value:hA}),s}function oA(){}function aA(t){const e=nA(t);return g.defineProperty(e,"constructor",{value:oA}),e}var Ic=class extends ca{ya(){return aA(this)}OI(t){return t.Rt}};t(),t(),t();var Aa=function(t){return t.Th="disabled",t.JI="hidden",t.Yn="showing",t}({});function pt(t){if("string"==typeof t){const e=t.toLowerCase();switch(e){case"disabled":case"hidden":case"showing":return e}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}t();var Yo=function(t){return t.la="error",t}({});function uA(){}function wn(t){const e=[Fe.ca,Fe.SI,Fe.aI,Fe.cI,Fe._I,Fe.gI,Fe.dI,Fe.mI,Fe.Lf,Fe.bI],i=[Yo.la];let s;const n={get kind(){return t.Lt},get label(){return t._h},set label(e){t._h=ci(e)},get language(){return t.gs},get id(){return t.o},get uid(){return t.KI},get inBandMetadataTrackDispatchType(){return t.$I},get mode(){return t.Tk},set mode(e){e!==Aa.Yn&&e!==Aa.JI&&e!==Aa.Th||t.tC(e)},get forced(){return Boolean(t.eC)},get accessibility(){var e,i;return null!=(i=null==(e=t.jI)?void 0:e.map(rA))?i:[]},get type(){return t.Vm},get readyState(){return t.Vc},get cues(){return t.Tk===Aa.Th?null:t.L.ba},get activeCues(){return t.Tk===Aa.Th?null:t.W.ba},get src(){return t.iC||""},addEventListener(t,e){const i=tc(t,ci);s.wn(i,e)},removeEventListener(t,e){const i=tc(t,ci);s.pn(i,e)}};return s=new bi(t),t.wn(e,(t=>s.wo(t.ba))),t.wn(i,(t=>s.wo(t))),g.defineProperty(n,"constructor",{value:uA}),n}function cA(){}function va(t){const e=nA(t);return g.defineProperty(e,"constructor",{value:cA}),e}var Qt=class extends ca{ya(){return va(this)}OI(t){return t.Tk===Aa.Yn}};t(),t();var aa=class extends Re{get sC(){}get nC(){return!1}get rC(){}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=lA(this)}hC(){}};function lA(t){return{goLive:()=>t.hC(),get isLive(){return t.nC},get latencies(){return t.sC},get manifest(){return t.rC},addEventListener(e,i){t.wn(fA(e),i)},removeEventListener(e,i){t.pn(fA(e),i)}}}var dA=["golive","latencyrecoveryseek"];function fA(t){const e=tc(t,ci);return(Sc(e)?[e]:e).filter((t=>Qe(dA,t)))}var _A=class extends Re{set BI(t){const e=this.MI;t!==e&&(e&&this.LI(e),t&&this.FI(t),this.MI=t)}get BI(){return this.MI}get ba(){return this.Zu||(this.Zu=lA(this)),this.Zu}FI(t){t.wn(dA,this.Os)}LI(t){t.pn(dA,this.Os)}hC(){var t;null==(t=this.MI)||t.hC()}get sC(){var t;return null==(t=this.MI)?void 0:t.sC}get nC(){return!!this.MI&&this.MI.nC}get rC(){var t;return null==(t=this.MI)?void 0:t.rC}bn(){this.Bo(),this.MI&&this.LI(this.MI),this.MI=void 0}constructor(){super(),this.MI=void 0,this.Zu=void 0,this.MI=void 0}};t(),t();var vA="8E80B9CE",gA=function(t){return t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled",t}({});function wA(t){return{appID:t&&t.appID?ci(t.appID):vA}}t(),t();var ja=function(t){return t.dk="",t.oC="anonymous",t.aC="use-credentials",t}({}),Ot=function(t){return t.uC="application/dash+xml",t.cC="application/vnd.apple.mpegurl",t.lC="application/x-mpegurl",t.dC="video/mp4",t.fC="application/vnd.theoplayer.hesp+json",t._C="application/vnd.theo.hesp+json",t.vC="millicast",t.gC="theolive",t}({});function _a(t){if(null!==t)return t}function mA(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:_a(t.streamActivityMonitorID),adTagParameters:nh(t.adTagParameters)?t.adTagParameters:{},authToken:_a(t.authToken),omidAccessModeRules:_a(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.videoID&&e.contentSourceID)}(t)){const i=t.videoID,s=t.contentSourceID;return i?s?yh({},e,{availabilityType:"vod",videoID:i,contentSourceID:s}):void Gn.Yw("A VOD DAI configuration was provided without valid contentSourceID which is required."):void Gn.Yw("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.assetKey)}(t)){const i=t.assetKey;return i?yh({},e,{availabilityType:"live",assetKey:i}):void Gn.Yw("A Live DAI configuration was provided without valid assetKey which is required.")}Gn.Yw("A DAI configuration was provided without a valid availabilityType which is required.")}function pA(t){return"google-dai"===t.integration?mA(t):yh({},t,{integration:String(t.integration)})}t(),t(),t(),t(),t(),t();var Ku,sr="titanium",wa="conax",yA="ezdrm",AA="irdeto",bA="vudrm",TA="verimatrix",cn="keyos",fa="drmtoday",SA="expressplay",kA="azure",ha="xstream",EA="vimond",bu="axinom",PA="uplynk",IA="comcast",CA="custom";function RA(t){return Ee(t.token&&t.deviceId)}function xA(t){var e;const i=null==(e=t.fairplay)?void 0:e.headers;return void 0!==i&&Ee(i.PreAuthorization)}function DA(t){const e=t;return RA(e)&&""!==e.token&&""!==e.deviceId&&!xA(e)}t(),t(),t(),t(),t(),function(t){t.wC=!1,t.mC=!1,t.pC=!1,t.yC=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.AC=!1,t.bC=!1,t.LOG_LCEVC_DETAILS=!1}(Ku||(Ku={})),t();var ga=class extends ke{get name(){return"ContentProtectionError"}constructor(t,e,i,s,n,r,h,o){super(t,e,i),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};t();var NA=class{get TC(){return this.SC}get rT(){return this.$b}kC(t){return function(t){const e=t.onCertificateRequest;if(void 0!==e&&"function"!=typeof e)throw new p("ContentProtectionIntegration.onCertificateRequest is not a function.");const i=t.onCertificateResponse;if(void 0!==i&&"function"!=typeof i)throw new p("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new p("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new p("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new p("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.EC.build(t))}constructor(t,e,i){this.SC=t,this.$b=e,this.EC=i}};t();var da=function(t){return t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED",t}({}),Hc=class{registerContentProtectionIntegration(t,e,i){switch(this.IC(t,e,i)){case da.FAILED:throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case da.OVERRIDDEN:{const i=rc(e);Gn.Yw("Warning: Overwriting an earlier registered integration for "+t+" and "+i+".");break}case da.SUCCEEDED:rc(e);0;break}}IC(t,e,i){const s=rc(e);if(!s)return da.FAILED;let n=da.SUCCEEDED;for(const e of this.RC.slice())e.TC===t&&e.rT===s&&(n=da.OVERRIDDEN,Ko(this.RC,e));return this.RC.push(new NA(t,s,i)),n}xC(t,e){return void 0!==this.DC(t,e)}NC(t,e,i){const s=this.DC(t,e);if(!s)throw v("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+e);return s.kC(i)}DC(t,e){for(const i of this.RC)if(i.TC===t&&(!e||i.rT===e))return i}constructor(){this.RC=[]}};Hc.BC=new Hc,t(),t();var BA=function(t){return t.MC="moov",t.LC="mvhd",t.OC="trak",t.FC="tkhd",t.UC="mdia",t.VC="mdhd",t.HC="hdlr",t.WC="minf",t.qC="stbl",t.zC="stsd",t.XC="stsc",t.GC="mvex",t.QC="trex",t.KC="avc1",t.jC="avcC",t.YC="hev1",t.ZC="hvc1",t.JC="hvcC",t.$C="vp09",t.tR="vpcC",t.eR="av01",t.iR="av1C",t.sR="dvcC",t.nR="dvvC",t.rR="dvwC",t.hR="dec3",t.oR="dvav",t.aR="dva1",t.uR="dvhe",t.cR="dvh1",t.lR="ec-3",t.dR="colr",t.fR="pasp",t._R="mp4a",t.vR="esds",t.gR="fLaC",t.wR="dfLa",t.mR="wvtt",t.pR="vttC",t.yR="vlab",t.AR="enca",t.bR="encv",t.SR="moof",t.kR="mfhd",t.ER="traf",t.PR="tfhd",t.IR="trun",t.RR="tfdt",t.xR="senc",t.DR="mdat",t.NR="pssh",t.MR="emsg",t.LR="sidx",t.OR="styp",t.FR="ftyp",t.UR="sinf",t.HR="frma",t}({}),hc=function(t){return t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof",t}({}),Rn=function(t){return t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF",t}({}),MA=function(t){return t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT",t}({});t();var xh=class t{WR(){return _e(this.LS,this.qR)}zR(){return Qu(this.LS,this.qR)}XR(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt16(e.Fu,i);return e.by(2),s}(this.LS,this.qR)}GR(){return No(this.LS,this.qR)}QR(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt32(e.Fu,i);return e.by(4),s}(this.LS,this.qR)}KR(){return Z(this.LS,this.qR)}jR(t){return bn(this.LS,this.qR,t)}YR(t){return function(t,e,i){const s=[];for(let n=0;n<i;n++)s.push(No(t,e));return s}(this.LS,this.qR,t)}ZR(t){return dc(this.LS,this.qR,t)}JR(){return Vh(this.LS,this.qR)}$R(t){this.qR.by(t)}Ty(){return new t(this.LS,this.qR.Ty())}constructor(t,e){this.LS=t,this.qR=e}};t(),t();function LA(t,e){return t.Vm===e}function yc(t,e){for(const i of t)if(LA(i,e))return i}var mc=class extends Pa{get name(){return"DataIncompleteError"}constructor(t,e){super(),this.tx=t,this.ix=e}},z=class t{static sx(e){const i=e.LS,s=e.qR,n=t.nx(i,s,!1);if(!n.hx)throw new mc(s.Fu,n.m);return n.m}static nx(e,i,s){const n=[];for(;i.Fu<e.byteLength;){const r=t.ox(e,i,s);if(!r.hx)return{hx:!1,m:n};n.push(r.ux)}return{hx:!0,m:n}}static lx(e,i){const s=t.ox(e,i,!1);if(!s.hx)throw new mc(i.Fu);return s.ux}static _x(e,i){const s=e.LS,n=e.qR;for(;n.Fu<s.byteLength;){const e=t.ox(s,n,!1);if(!e.hx)return;if(e.ux.Vm===i)return e.ux}}static ox(e,i,s){const n=i.Fu,r=t.vx(e,i);if(!r.hx)return r;const h=r.gx;let o=h.Iy;if(0===o){if(s)return i.jc(n),{hx:!1,wx:1/0};o=e.byteLength-n}const a=n+o;if(a>e.byteLength){const t=a;return i.jc(n),{hx:!1,wx:t}}const u={Vm:h.Vm,Fu:n,LS:new xh(it(e,n,a),new lh(h.mx))};return i.jc(a),{hx:!0,ux:u}}static vx(t,e){const i=e.Fu;if(!ag(t,e,8)){return{hx:!1,wx:e.Fu+8}}let s=No(t,e),n=dc(t,e,4);if(1===s){if(!ag(t,e,8)){const t=e.Fu+8;return e.jc(i),{hx:!1,wx:t}}s=Z(t,e).toNumber()}if("uuid"===n){if(!ag(t,e,16)){const t=e.Fu+16;return e.jc(i),{hx:!1,wx:t}}n=dc(t,e,16)}return{hx:!0,gx:{Vm:n,Iy:s,mx:e.Fu-i}}}static yx(t,e,i){const s=t.LS,n=t.qR;let r=uc(Ht(s),n.Fu,s.byteLength);return i&&(r=ki(r)),n.by(r.byteLength),{Vm:e,LS:r}}static Ax(e,i,s){const n=e.GR(),{version:r,flags:h}=zc(n);return{Vm:i,bx:r,Tx:h,LS:t.yx(e,i,s).LS}}};function Ta(t,e){const i=Te(t,e);if(!i)throw new v("Missing "+e+" atom");return i}function Te(t,e){for(const i of t)if(i.Vm===e)return i.LS}function pu(t,e){const i=[];for(const s of t)s.Vm===e&&i.push(s.LS);return i}function zc(t){return{version:t>>24,flags:new rg(16777215&t)}}var Kh=class t{static Sx(e){const i=[],s=z.sx(new xh(e,new lh));for(const e of s){const s=t.kx(e);s&&i.push(s)}return i}static Ex(t){return z.nx(t,new lh,!1).m.some(this.Px)}static Ix(e){return pu(z.sx(new xh(e,new lh)),BA.NR).map(t.Cx)}static Rx(e){return pu(z.sx(e.LS),BA.NR).map(t.Cx)}static Px(t){return t.Vm===BA.FR||t.Vm===BA.OR||t.Vm===BA.MC||t.Vm===BA.SR||t.Vm===BA.DR||t.Vm===BA.LR||t.Vm===BA.MR}static kx(e){switch(e.Vm){case BA.MC:return t.xx(e.LS);case BA.SR:return t.Dx(e.LS,e.Fu);case BA.DR:return t.Nx(e.LS);case BA.LR:return t.Bx(e.LS);case BA.MR:return t.Mx(e.LS)}}static xx(e){const i=z.sx(e),s=Ta(i,BA.LC),n=pu(i,BA.OC),r=Te(i,BA.GC),h=t.Lx(s),o=n.map(t.Ox),a=r?t.Fx(r):void 0;return{Vm:BA.MC,gx:h,Z:o,Ux:a}}static Lx(t){const e=t.GR(),{version:i,flags:s}=zc(e),n=1===i?t.KR():t.GR(),r=1===i?t.KR():t.GR(),h=t.GR(),o=1===i?t.KR():t.GR(),a=t.GR(),u=t.zR()>>8;t.$R(2),t.$R(8);const c=t.YR(9);t.$R(24);const l=t.GR();return{Vm:BA.LC,bx:i,Tx:s,Vx:n,Hx:r,Wx:h,ct:o,qx:a,Pl:u,zx:c,Xx:l}}static Ox(e){const i=z.sx(e),s=Ta(i,BA.FC),n=Ta(i,BA.UC),r=t.Gx(s),h=t.Qx(n);return{Vm:BA.OC,gx:r,Kx:h}}static Gx(t){const e=t.GR(),{version:i,flags:s}=zc(e),n=1===i?t.KR():t.GR(),r=1===i?t.KR():t.GR(),h=t.GR();t.$R(4);const o=1===i?t.KR():t.GR();t.$R(8);const a=t.XR(),u=t.XR(),c=t.XR()/256;t.$R(2);const l=t.YR(9),d=t.GR()/65536,f=t.GR()/65536;return{Vm:BA.FC,jx:s.Sy(1),Yx:s.Sy(2),Zx:s.Sy(4),Vx:n,Hx:r,Jx:h,ct:o,$x:a,tD:u,Pl:c,zx:l,Ti:d,Ci:f}}static Qx(e){const i=z.sx(e),s=Ta(i,BA.VC),n=Ta(i,BA.HC),r=Ta(i,BA.WC),h=t.eD(s),o=t.iD(n),a=t.sD(r);return{Vm:BA.UC,gx:h,nD:o,rD:a}}static eD(t){const e=t.GR(),{version:i,flags:s}=zc(e),n=1===i?t.KR():t.GR(),r=1===i?t.KR():t.GR(),h=t.GR(),o=1===i?t.KR():t.GR();t.zR();return t.$R(2),{Vm:BA.VC,bx:i,Tx:s,Vx:n,Hx:r,Wx:h,ct:o}}static iD(t){const e=t.GR(),{version:i,flags:s}=zc(e);t.$R(4);const n=t.ZR(4);t.$R(12);const r=t.JR();return{Vm:BA.HC,bx:i,Tx:s,hD:n,l:r}}static sD(e){const i=Ta(z.sx(e),BA.qC),s=t.oD(i);return{Vm:BA.WC,aD:s}}static oD(e){const i=Ta(z.sx(e),BA.zC),s=t.uD(i);return{Vm:BA.qC,cD:s}}static uD(e){const i=e.GR(),{version:s,flags:n}=zc(i),r=(e.GR(),[]),h=z.sx(e);for(const e of h){const i=t.lD(e.LS,e.Vm);i&&r.push(i)}return{Vm:BA.zC,bx:s,Tx:n,dD:r}}static lD(e,i){let s=t.fD(e,i);return s||(s=t._D(e,i),s||(i===BA.mR?t.vD(e):void 0))}static fD(e,i){return i===BA._R?t.gD(e):i===BA.gR||i===BA.gR.toLowerCase()||i===BA.gR.toUpperCase()?t.wD(e):i===BA.AR?t.mD(e):i===BA.lR?t.pD(e):void 0}static _D(e,i){return i===BA.KC?t.yD(e):i===BA.YC||i===BA.ZC?t.bD(e,i):i===BA.$C?t.TD(e,i):i===BA.eR?t.SD(e,i):i===BA.bR?t.kD(e):i===BA.oR||i===BA.aR||i===BA.uR||i===BA.cR?t.ED(e,i):void 0}static PD(t,e){t.$R(6);return{Vm:e,CD:t.zR()}}static RD(e,i){const s=t.PD(e,i);e.$R(8);const n=e.zR(),r=e.zR();e.$R(2),e.$R(2);return yh({},s,{xD:n,DD:r,ND:e.GR()>>>16})}static BD(e,i){const s=t.PD(e,i);e.$R(2),e.$R(2),e.$R(12);const n=e.zR(),r=e.zR(),h=e.GR(),o=e.GR();e.$R(4);const a=e.zR();e.$R(32);const u=e.zR();return e.$R(2),yh({},s,{Ti:n,Ci:r,MD:h,LD:o,OD:a,FD:u})}static gD(e){const i=t.RD(e,BA._R),s=Ta(z.sx(e),BA.vR);return yh({},i,{UD:t.VD(s)})}static wD(e){const i=t.RD(e,BA.gR),s=Ta(z.sx(e),BA.wR);return yh({},i,{HD:t.WD(s)})}static vD(e){const i=t.PD(e,BA.mR),s=z.sx(e),n=Ta(s,BA.pR),r=t.qD(n),h=Te(s,BA.yR);return yh({},i,{zD:r,XD:h?t.GD(h):void 0})}static qD(t){return{Vm:BA.pR,aT:t.JR()}}static GD(t){return{Vm:BA.yR,_h:t.JR()}}static VD(t){return z.Ax(t,BA.vR,!0)}static WD(t){return z.Ax(t,BA.wR,!0)}static yD(e){const i=t.BD(e,BA.KC),s=z.sx(e),n=Ta(s,BA.jC),r=Te(s,BA.fR);return yh({},i,{QD:t.KD(n),jD:r?t.YD(r):void 0})}static bD(e,i){const s=t.BD(e,i),n=Ta(z.sx(e),BA.JC);return yh({},s,{ZD:t.JD(n)})}static TD(e,i){const s=t.BD(e,i),n=Ta(z.sx(e),BA.tR);return yh({},s,{$D:t.tN(n)})}static SD(e,i){const s=t.BD(e,i),n=z.sx(e),r=Ta(n,BA.iR),h=t.eN(r),o=Te(n,BA.dR);return yh({},s,{iN:h,sN:o?t.nN(o):void 0})}static kD(e){const i=e.Ty(),s=t.BD(e,BA.bR),n=Ta(z.sx(e),BA.UR),r=t.rN(n);return yh({},s,{hN:t._D(i,r.aN.oN),uN:r})}static ED(e,i){const s=t.BD(e,i),n=z.sx(e);return yh({},s,{cN:t.lN(n)})}static pD(e){const i=t.RD(e,BA.lR),s=Ta(z.sx(e),BA.hR);return yh({},i,{dN:t.fN(s)})}static mD(e){const i=e.Ty(),s=t.RD(e,BA.AR),n=Ta(z.sx(e),BA.UR),r=t.rN(n);return yh({},s,{hN:t.fD(i,r.aN.oN),uN:r})}static rN(e){const i=Ta(z.sx(e),BA.HR),s=t._N(i);return{Vm:BA.UR,aN:s}}static _N(t){const e=t.ZR(4);return{Vm:BA.HR,oN:e}}static KD(t){return z.yx(t,BA.jC,!0)}static JD(t){return z.yx(t,BA.JC,!0)}static lN(t){const e=Te(t,BA.sR);if(void 0!==e)return z.yx(e,BA.sR,!0);const i=Te(t,BA.nR);if(void 0!==i)return z.yx(i,BA.nR,!0);const s=Te(t,BA.rR);if(void 0!==s)return z.yx(s,BA.rR,!0);throw v("Error parsing Dolby Vision configuration box.")}static fN(t){return z.yx(t,BA.hR,!0)}static tN(t){return z.yx(t,BA.tR,!0)}static eN(t){return z.yx(t,BA.iR,!0)}static nN(t){const e=t.ZR(4);switch(e){case"nclx":return{vN:hc.ON_SCREEN_COLOURS,gN:t.zR(),wN:t.zR(),mN:t.zR(),pN:0!=(128&t.WR())};case"rICC":return{vN:hc.RESTRICTED_ICC_PROFILE};case"prof":return{vN:hc.UNRESTRICED_ICC_PROFILE};default:throw v("Could not parse ColourInformationBox: unknown type '"+e+"'.")}}static YD(t){const e=t.GR(),i=t.GR();return{Vm:BA.fR,yN:e,AN:i}}static Fx(e){const i=pu(z.sx(e),BA.QC).map(t.bN);return{Vm:BA.GC,Z:i}}static bN(t){const e=t.GR(),{version:i,flags:s}=zc(e),n=t.GR(),r=t.GR(),h=t.GR(),o=t.GR(),a=t.GR();return{Vm:BA.QC,bx:i,Tx:s,Jx:n,TN:r,SN:h,kN:o,EN:a}}static Dx(e,i){const s=z.sx(e),n=Ta(s,BA.kR),r=pu(s,BA.ER),h=t.PN(n),o=r.map(t.IN);return{Vm:BA.SR,CN:i,gx:h,Z:o}}static PN(t){const e=t.GR(),{version:i,flags:s}=zc(e),n=t.GR();return{Vm:BA.kR,bx:i,Tx:s,RN:n}}static IN(e){const i=z.sx(e),s=Ta(i,BA.PR),n=pu(i,BA.IR),r=Te(i,BA.RR),h=t.xN(s),o=n.map((e=>t.DN(e,h))),a=r?t.NN(r):void 0;return{Vm:BA.ER,gx:h,BN:o,MN:a}}static xN(t){const e=t.GR(),{version:i,flags:s}=zc(e),n=t.GR(),r=s.Sy(Rn.BASE_DATA_OFFSET_PRESENT)?t.KR():void 0,h=s.Sy(Rn.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.GR():void 0,o=s.Sy(Rn.DEFAULT_SAMPLE_DURATION_PRESENT)?t.GR():void 0,a=s.Sy(Rn.DEFAULT_SAMPLE_SIZE_PRESENT)?t.GR():void 0,u=s.Sy(Rn.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.GR():void 0;return{Vm:BA.PR,bx:i,Tx:s,Jx:n,LN:r,ON:h,SN:o,kN:a,EN:u}}static DN(e,i){const s=e.GR(),{version:n,flags:r}=zc(s),h=e.GR(),o=r.Sy(MA.DATA_OFFSET_PRESENT)?e.QR():void 0,a=r.Sy(MA.FIRST_SAMPLE_FLAGS_PRESENT)?e.GR():void 0,u=[];for(let s=0;s<h;s++){const h=t.FN(e,r,n,i);0===s&&void 0!==a&&(h.Tx=a),u.push(h)}return{Vm:BA.IR,bx:n,Tx:r,UN:h,CN:o,VN:a,HN:u}}static FN(t,e,i,s){return{ct:e.Sy(MA.SAMPLE_DURATION_PRESENT)?t.GR():s.SN,Iy:e.Sy(MA.SAMPLE_SIZE_PRESENT)?t.GR():s.kN,Tx:e.Sy(MA.SAMPLE_FLAGS_PRESENT)?t.GR():s.EN,WN:e.Sy(MA.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===i?t.GR():t.QR():void 0}}static Mx(t){const e=t.LS,i=t.qR,s=No(e,i),{version:n,flags:r}=zc(s);if(1===n){const t=No(e,i),s=Z(e,i),h=No(e,i),o=No(e,i),a=lg(e,i),u=lg(e,i),c=Nc(Ht(e),i.Fu,e.byteLength);return i.by(c.byteLength),{Vm:BA.MR,bx:n,Tx:r,qN:a,yE:u,Wx:t,zN:s,XN:h,o:o,GN:c}}{const t=lg(e,i),s=lg(e,i),h=No(e,i),o=No(e,i),a=No(e,i),u=No(e,i),c=Nc(Ht(e),i.Fu,e.byteLength);return i.by(c.byteLength),{Vm:BA.MR,Tx:r,bx:n,qN:t,yE:s,Wx:h,QN:o,XN:a,o:u,GN:c}}}static Nx(t){return z.yx(t,BA.DR,!1)}static Cx(e){const i=e.LS,s=e.qR,n=ki(Ht(i)).buffer,r=No(i,s),{version:h,flags:o}=zc(r),a=t.KN(i,s),u=[];if(h>0){const t=No(i,s);for(let e=0;e<t;e++){const t=bn(i,s,16);u.push(t)}}const c=No(i,s),l=new x(n,s.Fu,c);return s.by(i.byteLength),{Vm:BA.NR,bx:h,Tx:o,jN:a,YN:u,ZN:c,LS:l,JN:n}}static KN(t,e){let i="";for(let s=0;s<4;s++){const s=_e(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=_e(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=_e(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=_e(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<6;s++){const s=_e(t,e).toString(16);i+=1===s.length?"0"+s:s}return i.toLowerCase()}static Bx(t){const e=t.LS,i=t.qR,s=No(e,i),{version:n,flags:r}=zc(s),h=No(e,i),o=No(e,i);let a,u;0===n?(a=Yc.fromBits(No(e,i),0,!0),u=Yc.fromBits(No(e,i),0,!0)):(a=Z(e,i),u=Z(e,i)),i.by(2);const c=Qu(e,i),l=[];for(let t=0;t<c;t+=1){const t=No(e,i),s=t>>31&1,n=2147483647&t,r=No(e,i),h=No(e,i),o=h>>31&1,a=h>>28&7,u=268435455&h;l.push({$N:s,tB:n,ct:r,eB:o,iB:a,sB:u})}return{Vm:BA.LR,bx:n,Tx:r,nB:h,Wx:o,rB:a,hB:u,oB:c,aB:l}}static NN(t){const e=t.LS,i=t.qR,s=No(e,i),{version:n,flags:r}=zc(s);let h;return h=0===n?Yc.fromBits(No(e,i),0,!0):Z(e,i),{Vm:BA.RR,bx:n,Tx:r,MN:h}}},OA={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function FA(t){if(!t)return!0;const e=t.licenseAcquisitionURL,i=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(e||i||s||n||r||h)}function UA(t){return t&&void 0!==t.licenseAcquisitionURL}var VA=UA,HA=UA;function WA(t){if(!t)return!0;if(GA(t))return!1;const e=t.fairplay,i=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return FA(e)&&FA(i)&&FA(s)&&void 0===n&&FA(r)}function qA(t){const e=DA(t),i=function(t){var e;const i=t;return xA(i)&&""!==(null==(e=i.fairplay)?void 0:e.headers.PreAuthorization)&&!RA(i)}(t);return(!e||!i)&&(e||i)}function zA(t){return t.integration===AA}function XA(t){const e=t;if(!e)return!1;if(WA(e))return!1;const i=e.fairplay,s=e.playready,n=e.widevine,r=e.clearkey;if(GA(t))return!0;if(i&&!function(t){const e=t;return e&&(void 0!==e.certificateURL||void 0!==e.certificate)}(i))return!1;if(s&&!VA(s))return!1;if(n&&!HA(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(e.integration){if(Hc.BC.xC(e.integration))return!0;switch(e.integration){case sr:if(!function(t){const e=t,i=e.integration===sr;return i&&(QA(t)||KA(t))}(t))return!1;break;case bA:if(!jA(t))return!1;break;case TA:if(!function(t){const e=t;return e.integration===TA}(t))return!1;break;case AA:if(!zA(t))return!1;break;case wa:if(!qA(t))return!1;break;case yA:if(!function(t){const e=t;return e.integration===yA}(t))return!1;break;case cn:if(!GA(t))return!1;break;case fa:if(!function(t){const e=t;return e.integration===fa&&(void 0!==e.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(e))}(t))return!1;break;case SA:if(!function(t){const e=t;return e.integration===SA}(t))return!1;break;case ha:if(!YA(t))return!1;break;case EA:if(!function(t){return t.integration===EA}(t))return!1;break;case bu:if(!pa(t))return!1;break;case kA:if(!function(t){const e=t;return e.integration===kA&&void 0!==e.token}(t))return!1;break;case PA:if(!function(t){const e=t;return e.integration===PA}(t))return!1;break;case IA:if(!function(t){const e=t;return e&&Ee(e.releasePid)&&Ee(e.accountId)&&Ee(e.token)}(t))return!1;break;case CA:return!0;default:return!1}}return!0}function GA(t){return t.integration===cn}function QA(t){return void 0!==t.authToken}function KA(t){const e=t;return void 0!==e.accountName&&void 0!==e.customerName&&void 0!==e.portalId}function jA(t){const e=t;return e.integration===bA&&void 0!==e.token}function YA(t){const e=t;return e&&e.integration===ha&&Sc(e.ticketAcquisitionURL)&&Sc(e.streamId)}function pa(t){const e=t;return e.integration===bu&&void 0!==e.token}function ZA(t,e){const i=e[t];var s;const n=null!=(s=null==i?void 0:i.licenseAcquisitionURL)?s:OA[t];var r;const h=null!=(r=null==i?void 0:i.customdata)?r:e.customdata,o=h?{customData:h}:{};var a;const u=yh({},null!=(a=null==i?void 0:i.headers)?a:{},o),c=null!=i?i:{},{customdata:l}=c,d=function(t,e){if(null==t)return{};var i,s,n={},r=g.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}(c,["customdata"]);return yh({},d,{licenseAcquisitionURL:n,headers:u})}function rc(t){switch(t.toLowerCase()){case"widevine":case Pi:return Pi;case"playready":case ms:return ms;case"fairplay":case Hh:return Hh}}function JA(t,e){switch(t){case Ae:return function(t){const e={},i=Kh.Ix(new DataView(t));for(const t of i)e[t.jN]=t.JN;return e}(e);case z_:case Ih:return function(t){return{[Y_]:t}}(e);default:throw new ke(X.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}async function $A(t,e){return void 0===e&&(e=!1),!(!t.widevine||!await Gn.dm())||(!(!t.playready||!await Gn.lm())||(!(!t.clearkey||!await Gn.hm())||!(e||!t.fairplay||!await Gn.um())))}function tb(t,e,i){const s=function(t,e,i){var s;const{useCredentials:n,crossOrigin:r}=function(t,e){let i=ja.dk;return t.useCredentials?i=ja.aC:t.crossOrigin&&(i=Pb(t.crossOrigin)),i===ja.dk&&e&&e.vr&&e.vr[360]&&(i=ja.oC),{useCredentials:i===ja.aC,crossOrigin:i}}(t,e);let h=t.liveOffset;Ee(h)||(h=i&&Ee(i.liveOffset)?i.liveOffset:void 0);let o=t.timeServer;Ee(o)||(o=e&&Ee(e.timeServer)?e.timeServer:void 0);let a=t.hlsDateRange;Ee(a)||(a=i&&Ee(i.hlsDateRange)?Boolean(i.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=Ee(t.dash)?ib(t.dash):void 0,v=Ee(t.hls)?sb(t.hls):void 0,g=rb(gc(t.abr),null==i?void 0:i.abr),w=Io(t.lcevc),m=Ee(t.ignoreEmbeddedTextTrackTypes)?Wb(t.ignoreEmbeddedTextTrackTypes):[];var p;const y=Tb(null!=(p=t.seamlessSwitchStrategy)?p:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),A=Ab(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:v,abr:g,lcevc:w,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:y,latencyConfiguration:A}}(t,e,i),n=_a(t.src);let r=t.type;r||(r=t.src?kt(t.src):void 0);const h=function(t,e){let i;i=Ee(t.contentProtection)?t.contentProtection:Ee(t.drm)?t.drm:Ee(e)&&Ee(e.contentProtection)?e.contentProtection:Ee(e)&&Ee(e.drm)?e.drm:void 0;return eb(i)}(t,e);return yh({},s,{src:n,type:r,contentProtection:h,ssai:Ee(t.ssai)?pA(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function eb(t){return XA(t)&&t.integration&&t.integration===cn?function(t){const e=ZA(as.Lm,t),i=ZA(as.Mm,t),s=t[as.Om]&&ZA(as.Om,t);return yh({integration:"keyos",widevine:e,playready:i},s?{fairplay:s}:{})}(t):t}function ib(t){return{useSeamlessPeriodSwitch:Tb(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:Io(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?nu(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:Io(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:Io(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:Io(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards),segmentRelativeVttTiming:Io(null==t?void 0:t.segmentRelativeVttTiming),forceRecreateMediaSourceOnAudioSwitch:Io(null==t?void 0:t.forceRecreateMediaSourceOnAudioSwitch)}}function sb(t){return{discontinuityAlignment:nb(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:ba(null==t?void 0:t.delaySubtitlePreload)}}function nb(t){if(!t||!Sc(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}t(),t(),t(),t();var Be=function(t){return t.hk="audio",t.wl="video",t.lS="text",t.ck="image",t.zS="unknown",t}({});function nt(t){return"audio"===t||"video"===t}function gc(t){if(!Ee(t))return;return hb(iA(null==t?void 0:t.preferredAudioCodecs,ci),iA(null==t?void 0:t.preferredVideoCodecs,ci),Io(null==t?void 0:t.restrictToPlayerSize))}function rb(t,e){if(!Ee(t)&&!Ee(e))return;var i;return hb(ob(null==t?void 0:t.preferredAudioCodecs,null==e?void 0:e.preferredAudioCodecs),ob(null==t?void 0:t.preferredVideoCodecs,null==e?void 0:e.preferredVideoCodecs),null!=(i=null==t?void 0:t.restrictToPlayerSize)?i:null==e?void 0:e.restrictToPlayerSize)}function hb(t,e,i){if(0!==t.length||0!==e.length||void 0!==i)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===e.length?void 0:e,restrictToPlayerSize:i}}function ob(t,e){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=e?e:[]}function ab(t,e){if(void 0!==e)switch(t){case Be.wl:return e.preferredVideoCodecs;case Be.hk:return e.preferredAudioCodecs;default:return}}t(),t(),t();var ub=!1;t();var cb=function(t){return t.kl="canplay",t._l="canplaythrough",t.jl="loadeddata",t.xl="loadedmetadata",t.Lf="readystatechange",t.rd="waiting",t.nd="playing",t}({}),lb=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function db(t,e,i){return i?t<=e:t<e}t();var r=class t{get uB(){return this.cB.slice()}Tn(t){return this.cB[2*t]}Pn(t){return this.cB[2*t+1]}lB(t){return this.dB[2*t]}fB(t){return this.dB[2*t+1]}ws(){const t=this;return{get length(){return t.U},start(e){const i=0|e;return t._B(i),t.Tn(i)},end(e){const i=0|e;return t._B(i),t.Pn(i)}}}vB(){const e=new Array(2*this.U),i=new Array(2*this.U);for(let t=0;t<this.U;t++)e[2*t]=this.Tn(t),e[2*t+1]=this.Pn(t),i[2*t]=!0,i[2*t+1]=!0;return new t(e,i)}_B(t){if(t<0)throw new v("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new v("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}gB(t){if(0===this.U)return 0;if(this.br(t))return t;if(t<=this.Tn(0))return this.Tn(0);if(t>=this.Pn(this.U-1))return this.Pn(this.U-1);{let e=0,i=1/0;for(let s=0;s<this.U;s++){const n=this.Tn(s),r=w.abs(n-t);r<i&&(e=n,i=r);const h=this.Pn(s),o=w.abs(h-t);o<i&&(e=h,i=o)}return e}}Cn(e){let i=0,s=0;const n=[],r=[];for(;i<this.U&&s<e.U;){const t=this.Tn(i),h=this.Pn(i),o=this.lB(i),a=this.fB(i),u=e.Tn(s),c=e.Pn(s),l=e.lB(s),d=e.fB(s),f=w.max(t,u),_=w.min(h,c);let v,g;v=t===u?o&&l:f===t?o:l,g=h===c?a&&d:_===h?a:d,(f<_||v&&g&&f===_)&&(n.push(f,_),r.push(v,g)),h===c?(i+=1,s+=1):h<c?i+=1:s+=1}return new t(n,r)}wB(){const e=this.mB(),i=e.U;if(0===i)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=e.Tn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!e.lB(0)));for(let t=0;t<i-1;t++)s.push(e.Pn(t),e.Tn(t+1)),n.push(!e.fB(t),!e.lB(t+1));const h=e.Pn(i-1);return h!==1/0&&(s.push(h,1/0),n.push(!e.fB(i-1),!1)),new t(s,n)}pB(e){let i=0,s=0;const n=this.U,r=e.U,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;i<n&&s<r;){const t=this.Tn(i),n=this.Pn(i),r=e.Tn(s),u=e.Pn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.lB(i),o[a+1]=this.fB(i),i++):(h[a]=r,h[a+1]=u,o[a]=e.lB(s),o[a+1]=e.fB(s),s++),a+=2}for(;i<n;)h[a]=this.Tn(i),h[a+1]=this.Pn(i),o[a]=this.lB(i),o[a+1]=this.fB(i),i++,a+=2;for(;s<r;)h[a]=e.Tn(s),h[a+1]=e.Pn(s),o[a]=e.lB(s),o[a+1]=e.fB(s),s++,a+=2;return new t(h,o)}yB(e){void 0===e&&(e=0);const i=this.U;if(i<2)return this;const s=[],n=[];let r=this.Tn(0),h=this.Pn(0),o=this.lB(0),a=this.fB(0);for(let t=1;t<i;t++){const i=this.Tn(t),u=this.Pn(t);let c=this.lB(t),l=this.fB(t);r<i&&h>u||(r===i&&(c=o||c,o=c),h===u&&(l=a||l,a=l),db(i,h+e,a||c)?(h=u,a=l):(s.push(r,h),n.push(o,a),r=i,h=u,o=c,a=l))}return s.push(r,h),n.push(o,a),new t(s,n).mB()}mB(){const e=[],i=[];for(let t=0;t<this.U;t++){const s=this.Tn(t),n=this.Pn(t),r=this.lB(t),h=this.fB(t);s===n?(r||h)&&(e.push(s,n),i.push(!0,!0)):(e.push(s,n),i.push(r,h))}return new t(e,i)}Xl(t){if(0===this.U)return t;if(0===t.U)return this;return this.pB(t).yB()}AB(t){const e=this.mB(),i=t.mB(),s=e.wB(),n=i.wB(),r=s.Cn(i),h=n.Cn(e);return r.Xl(h)}by(e){if(0===this.U||0===e)return this;const i=[],s=[];for(let t=0;t<this.U;t++){const n=this.Tn(t)+e,r=this.Pn(t)+e;i.push(n,r),s.push(this.lB(t),this.fB(t))}return new t(i,s)}bB(t){return 0===this.U||0===t.U?this:this.mB().Cn(t.mB().wB())}br(t,e){return this.TB(t,e)>=0}SB(t,e,i,s,n){return this.kB(t,e,i,s,n)>=0}EB(t,e,i,s,n){return this.PB(t,e,i,s,n)>=0}IB(t){if(t.U!==this.U)return!1;for(let e=0;e<this.U;e++)if(this.Tn(e)!==t.Tn(e)||this.Pn(e)!==t.Pn(e)||this.lB(e)!==t.lB(e)||this.fB(e)!==t.fB(e))return!1;return!0}CB(e){const i=[],s=[];for(let t=0;t<this.U;t++){const n=this.Tn(t),r=this.Pn(t),h=this.lB(t),o=this.fB(t);e(n,r,h,o)&&(i.push(n,r),s.push(h,o))}return new t(i,s)}PB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=e+n;for(let t=0;t<this.U;t+=1)if(db(this.Tn(t),h,!s||this.lB(t))&&db(r,this.Pn(t),!i||this.fB(t)))return t;return-1}kB(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=e-n;for(let t=0;t<this.U;t+=1)if(db(this.Tn(t),r,!i||this.lB(t))&&db(h,this.Pn(t),!s||this.fB(t)))return t;return-1}TB(t,e){return this.kB(t,t,!0,!0,e)}RB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=this.U-1;t>=0;t-=1)if(db(this.Tn(t),i,this.lB(t)))return t;return-1}xB(t,e){void 0===e&&(e=0);const i=t-e;for(let t=0;t<this.U;t+=1)if(db(i,this.Pn(t),this.fB(t)))return t;return-1}DB(t,e){void 0===e&&(e=0);const i=t+e;for(let t=0;t<this.U;t+=1)if(this.Tn(t)>i)return t;return-1}NB(e){return this._B(e),new t([this.Tn(e),this.Pn(e)],[this.lB(e),this.fB(e)])}BB(t,e){const i=this.TB(t,e);return i<0?void 0:this.NB(i)}get MB(){let t=0;for(let e=0;e<this.U;e++){t+=this.Pn(e)-this.Tn(e)}return t}static Sn(e){const i=[];for(let t=0;t<e.length;t++)i.push(e.start(t),e.end(t));return new t(i)}static LB(e){return new t([e,e],[!0,!0])}static OB(e,i){return e<=i?new t([e,i]):t.Ol()}static Ol(){return fb}constructor(t,e){this.U=t.length>>1,this.cB=t,this.dB=e||function(t){const e=new Array(2*t);for(let i=0,s=0;i<t;i+=1,s+=2)e[s]=!0,e[s+1]=!1;return e}(this.U)}},fb=new r([]),_b=.92,vb=1.08,gb=.25,wb=class extends Re{get FB(){return this.We&&this.io}get UB(){return this.VB}get Rt(){return this.We}set Rt(t){this.We=t,t?this.Tn():this.Al()}HB(t){this.WB.push(t),this.qB()}zB(t){Ko(this.WB,t),this.qB()}qB(){this.VB=this.XB(),this.io&&this.GB()}XB(){const t=this.QB,e=function(t,e){const i=e-t.targetOffset;return{minimumOffset:t.minimumOffset+i,targetOffset:t.targetOffset+i,maximumOffset:t.maximumOffset+i,forceSeekOffset:t.forceSeekOffset+i,minimumPlaybackRate:t.minimumPlaybackRate,maximumPlaybackRate:t.maximumPlaybackRate,leniency:t.leniency}}(this.KB,this.jB),i=[e,...this.WB],s=i.reduce(((t,e)=>{var i;return w.max(t,null!=(i=null==e?void 0:e.minimumOffset)?i:0)}),t),n=i.reduce(((t,e)=>{var i;return w.max(t,null!=(i=null==e?void 0:e.targetOffset)?i:0)}),s+gb),r=i.reduce(((t,e)=>{var i;return w.max(t,null!=(i=null==e?void 0:e.maximumOffset)?i:0)}),n+gb);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:i.reduce(((t,e)=>{var i;return w.max(t,null!=(i=null==e?void 0:e.forceSeekOffset)?i:0)}),r+gb),minimumPlaybackRate:i.reduce(((t,e)=>{var i;return w.min(t,null!=(i=e.minimumPlaybackRate)?i:_b)}),_b),maximumPlaybackRate:i.reduce(((t,e)=>{var i;return w.max(t,null!=(i=e.maximumPlaybackRate)?i:vb)}),vb)}}YB(){var t;const e=null==(t=r.Sn(this.sa.Sl).BB(this.sa.Yu))?void 0:t.Pn(0),i=void 0!==e?e-this.sa.Yu:0;this.ZB=w.min(this.ZB,i),this.JB+=1}$B(){if(this.JB<10)return;const t=.25-this.ZB,e=ht(this.jB+t,this.jB-.1,this.jB+.1);this.jB=ht(e,this.tM,this.eM),this.ZB=1/0,this.JB=0}iM(){this.sM(),this.Xk=Gn.jg((()=>this.GB()),500)}sM(){void 0!==this.Xk&&(Gn.Kg(this.Xk),this.Xk=void 0)}Tn(){this.We&&this.nM&&(this.io||this.rM.wn(Uv.Xu,this.GB),this.hM=Gn.$w((()=>this.YB()),1e3),this.oM=Gn.$w((()=>this.$B()),6e4),this.iM(),this.io=!0)}Al(){this.io&&(this.sM(),this.hM&&Gn.tm(this.hM),this.oM&&Gn.tm(this.oM),this.rM.pn(Uv.Xu,this.GB),this.aM(1),this.io=!1)}Wu(){this.Al(),this.sa.pn(cb.rd,this.Gf),this.sa.pn(cb.nd,this.qf),this.Bo()}aM(t){this.rM.cM.uM||this.sa.Hu!==t&&(this.sa.Hu=t)}get lM(){return this.sa.dM}constructor(t,e,i){var s;super(),this.io=!1,this.We=!1,this.WB=[],this.nM=!1,this.QB=0,this.Xk=void 0,this.JB=0,this.ZB=1/0,this.Gf=()=>{const t=this.rM.Sl,e=this.rM.Yu,i=t.BB(e);i&&(this.QB=ht(i.Pn(0)-e,this.QB,.5),this.qB())},this.qf=()=>{this.nM=!0,this.sa.pn(cb.nd,this.qf),this.We&&this.Tn()},this.GB=()=>{this.sM(),this.iM();const t=this.lM;if(!t)return;const e=this.fM();if(t>this.VB.forceSeekOffset)return this.wo(new o("latencyrecoveryseek")),void this.hC();const{minimumOffset:i,targetOffset:s,maximumOffset:n}=this.VB,r=this.rM.Hu;if(e>n&&this._M()){const t=this.VB.maximumPlaybackRate;ub,this.aM(t)}else if(e<i&&!Gn.Zs.uw){const t=this.VB.minimumPlaybackRate;ub,this.aM(t)}else if(r>1&&e<s){const t=1;ub,this.aM(t)}else if(r<1&&e>s){const t=1;ub,this.aM(t)}},this.sa=t,this.rM=e,this.KB=i,this.tM=i.targetOffset,this.eM=i.targetOffset+(null!=(s=i.leniency)?s:0),this.jB=i.targetOffset,this.VB=this.XB(),this.sa.wn(cb.rd,this.Gf),this.sa.wn(cb.nd,this.qf)}},mb=.66,pb=1.5,yb=3;function Ab(t){if(!Ee(t))return;const e=Gn.Zs.cw?10:0,i=t.targetOffset;var s;var n;var r;var h;var o;var a;return{minimumOffset:null!=(s=t.minimumOffset)?s:i*mb,targetOffset:i,maximumOffset:null!=(n=t.maximumOffset)?n:i*pb,forceSeekOffset:w.max(null!=(r=t.forceSeekOffset)?r:i*yb,e),minimumPlaybackRate:null!=(h=t.minimumPlaybackRate)?h:_b,maximumPlaybackRate:null!=(o=t.maximumPlaybackRate)?o:vb,leniency:null!=(a=t.leniency)?a:void 0}}var rr=function(t){return t.vM="auto",t.gM="always",t.wM="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only",t}({}),bb=function(t){return t.UPLYNK="uplynk",t.MEDIATAILOR="mediatailor",t}({});function Tb(t){if(!t||!Sc(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}t(),t();var Bn=function(t){return t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled",t}({});t();var Sb=!1;t();var kb=function(t){return t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll",t}({});t();var Zo=function(t){return t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange",t.MILLICAST="millicast",t}({});function bc(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":case"millicast":return!0;default:return!1}}function Eb(t){return!!t&&H(t,"mpd")}function kt(t){let e=Ot.dC;return Eb(t)&&(e=Ot.uC),function(t){return!!t&&H(t,"m3u8")}(t)&&(e=Ot.cC),e}function Pb(t){switch(t){case ja.oC:case ja.aC:return t;default:return ja.dk}}function wc(t){if(!t)return!1;const e=t.toLowerCase();return Kc(e,Ot.uC)}function Ib(t){if(!t)return!1;const e=t.toLowerCase();return Kc(e,Ot.cC)||Kc(e,Ot.lC)}function Cb(t){return nh(t)&&nh(t.ssai)&&"google-dai"===t.ssai.integration}function Rb(t){return nh(t)&&("verizon-media"===t.integration||"uplynk"===t.integration)}function xb(t){return nh(t)&&("theolive"===t.type||"theolive"===t.integration)}function Db(t){return nh(t)&&"mediatailor"===t.integration}function Nb(t){return nh(t)&&"millicast"===t.type}function Bb(t){if(t.sources)if(di(t.sources)){for(const e of t.sources)if(Nb(e))return!0}else if(nh(t.sources))return Nb(t.sources);return!1}function Mb(t){if(Sc(t))return!t;if(Rb(t))return!t.id;if(Cb(t)){const e=t.ssai,i="live"===e.availabilityType&&e.assetKey,s="vod"===e.availabilityType&&e.contentSourceID&&e.videoID;return Boolean(i&&s)}return Nb(t)?!t.src||!t.streamAccountId:!t.src}function kc(t){return Boolean(nh(t)&&Sc(t.src))}function Lb(t){return t.type===Ot.fC||t.type===Ot._C}function Ob(t){return Sc(t)||kc(t)||Cb(t)||Rb(t)||Nb(t)}function Tc(t){if(t){if(Ob(t))return Mb(t);for(const e of t)if(!Mb(e))return!1;return!0}return!0}function Fb(){return{crossOrigin:ja.dk,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:rr.vM,latencyConfiguration:void 0}}function Ub(){return yh({},Fb(),{src:void 0,type:Ot.dC,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function Vb(t){const e={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:Bn.ENABLED,googleIma:{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0},theoads:Sb};return void 0===t||(void 0!==t.preload&&(e.preload=function(t){return"none"===t?kb.NONE:kb.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(e.showCountdown=ba(t.showCountdown)),void 0!==t.vpaidMode&&(e.vpaidMode=function(t){switch(t){case"insecure":return Bn.INSECURE;case"disabled":return Bn.DISABLED;default:return Bn.ENABLED}}(t.vpaidMode)),di(t.allowedMimeTypes)&&(e.allowedMimeTypes=t.allowedMimeTypes.filter(Sc)),void 0!==t.googleIma&&(e.googleIma=function(t){return void 0===t?{useNativeIma:!1,useAdUiElementForSsai:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:ba(t.useNativeIma),useAdUiElementForSsai:ba(t.useAdUiElementForSsai),bitrate:null!=(e=t.bitrate)?e:-1,language:Ee(t.language)?ci(t.language):void 0,uiElements:t.uiElements};var e}(t.googleIma)),void 0!==t.theoads?e.theoads=ba(t.theoads):e.theoads=Sb),e}function Hb(t){if(!Mt(t))return[];const e=[];for(const i of t)nh(i)&&e.push(i);return e}function jc(t){return Sc(t.src)||Nb(t)}function Wb(t){return di(t)?t.filter(bc):[]}t(),t();var qb=function(t){return t[t.Jl=0]="Jl",t[t.Qn=1]="Qn",t[t.Jf=2]="Jf",t[t.Cf=3]="Cf",t[t.Ql=4]="Ql",t}({}),zb=class extends o{constructor(t,e=qb.Jl){super(Uv.Dp),this.currentTime=t,this.readyState=e}};t();var ac=class extends o{constructor(t){super(Uv.Ff),this.currentTime=t}};t();var ah=class extends o{constructor(t){super(Uv.no),this.currentTime=t}};t();var Xb=class extends o{constructor(t,e=qb.Qn){super(cb.xl),this.currentTime=t,this.readyState=e}};t();var de=class extends o{constructor(t){super(Uv.Vf),this.duration=t}};t();var Sr=class extends o{constructor(t,e){super(Uv.qu),this.currentTime=t,this.playbackRate=e}};t();var Ph=class extends o{constructor(t,e){super(Uv.Xu),this.currentTime=t,this.currentProgramDateTime=e}};t();var Zu=class extends o{constructor(t){super(Uv.Df),this.currentTime=t}};t();var Gb=class extends o{constructor(t,e=qb.Jf){super(cb.jl),this.currentTime=t,this.readyState=e}};t();var lc=class extends o{constructor(t){super(Uv.$f),this.currentTime=t}};t();var qo=class extends o{constructor(t){super(Uv.If),this.currentTime=t}};t();var Wo=class extends o{constructor(t,e){super(Uv.Bl),this.currentTime=t,this.volume=e}};t();var Tt=class extends o{constructor(t,e=qb.Cf){super(cb.kl),this.currentTime=t,this.readyState=e}};t();var Tn=class extends o{constructor(t,e=qb.Ql){super(cb._l),this.currentTime=t,this.readyState=e}};t();var xr=class extends o{constructor(t,e){super(cb.Lf),this.currentTime=t,this.readyState=e}};t();var _n=class extends Cs{get error(){return this.errorObject.message}ya(){return this}constructor(t){super(Yo.la),this.errorObject=t}};async function vt(t,e,i,s,n){void 0===i&&(i=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(e)}catch(t){if(ta(t),r<i){const t=w.min(s*2**r,n);r++,await Rt(t,e);continue}throw t}}t();var Qb={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};t();var Ge=function(t){return t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture",t.NATIVE_PICTURE_IN_PICTURE="native-picture-in-picture",t}({}),Kb=function(t){return t.NONE="none",t.ALL="all",t.CONTENT="content",t}({});function jb(t){switch(t){case"all":case"content":return t;default:return"none"}}function Yb(t){var e;const i=pr(t||{});return i.libraryLocation&&(i.libraryLocation=Hn(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const e=wA(t?t.chromecast:void 0),i=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:e,strategy:i}}(i.cast),i.ads=Vb(i.ads),i.analytics=Hb(i.analytics),i.mutedAutoplay=jb(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return Sc(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return Hn(t)}catch(t){return void Gn.Yw("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.abr=gc(i.abr),i.retryConfiguration=function(t){const e=yh({},Qb);return void 0!==t&&(void 0!==t.maxRetries&&(e.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(e.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(e.maximumBackoff=Number(t.maximumBackoff))),e}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i.theoLive=function(t){if(!t)return t;return yh({},t,{externalSessionId:t.externalSessionId?ci(t.externalSessionId):void 0,fallbackEnabled:Io(t.fallbackEnabled)})}(i.theoLive),null!=(e=i).uplynk||(e.uplynk=i.verizonMedia),i}function Zb(t){return{bt:t.bt,Yu:t.Yu,ct:t.ct,$c:t.$c,lt:t.lt,Rc:t.Rc,tc:t.tc,Oc:t.Oc,Hu:t.Hu,Vc:t.Vc,Uc:t.Uc,LP:t.LP,UP:t.UP,Pl:t.Pl}}function Jb(t,e){const i=e.Pl,s=e.tc;t.Pl=i,t.tc=s}function $b(t,e,i){if(e===i)return;const s=e.bt!==i.bt,n=e.Yu,r=e.ct,h=e.tc,o=e.Oc,a=e.Hu,u=e.Vc,c=e.Uc,l=(e.UP,e.LP,e.Pl),d=i.Yu,f=i.ct,_=i.$c,v=i.Rc,g=i.tc,w=i.Oc,m=i.Hu,p=i.Vc,y=i.Uc,A=(i.UP,i.LP,i.Pl);(s||u>qb.Jl&&p===qb.Jl)&&t.wo(new zb(d,p)),w&&!o?t.wo(new ac(d)):!w&&o&&t.wo(new ah(d)),p>=qb.Qn&&(s||u<qb.Qn)&&t.wo(new Xb(d,p)),f===r||j(f)&&j(r)||t.wo(new de(f)),m!==a&&t.wo(new Sr(d,m)),d!==n&&t.wo(new Ph(d,void 0)),_&&t.wo(new Zu(d)),p>=qb.Jf&&(s||u<qb.Jf)&&t.wo(new Gb(d,p)),y&&!c?t.wo(new lc(d)):!y&&c&&t.wo(new qo(d)),A===l&&g===h||t.wo(new Wo(d,A)),p>=qb.Cf&&(s||u<qb.Cf)&&t.wo(new Tt(d,p)),p>=qb.Ql&&(s||u<qb.Ql)&&t.wo(new Tn(d,p)),p!==u&&t.wo(new xr(d,p)),v&&t.wo(new _n(v))}function tT(t){switch(t){case Ge.INLINE:case Ge.FULLSCREEN:case Ge.PICTURE_IN_PICTURE:case Ge.NATIVE_PICTURE_IN_PICTURE:return t;default:return}}t();var Q=class extends o{constructor(t){super(Uv.Rp),this.currentSource=t}};t();var au=class extends o{constructor(){super(Uv.Bp)}};t();var at=class extends o{constructor(){super(Uv.Lp)}};t(),t(),t();var Ws=function(t){return t.mM="enterpictureinpicture",t.pM="exitpictureinpicture",t.la="pictureinpictureerror",t}({}),xc=class extends o{constructor(){super(Ws.mM)}};t();var hs=class extends o{constructor(){super(Ws.pM)}},Ar=class extends Re{get BI(){return this.MI}set BI(t){if(t===this.MI)return;this.LI(this.MI);const e=this.MI.yM;this.MI=t,this.FI(t),!e&&this.MI.yM?this.wo(new xc):e&&!this.MI.yM&&this.wo(new hs)}FI(t){t.wn(Ws.mM,this.Os),t.wn(Ws.pM,this.Os),t.wn(Ws.la,this.Os)}LI(t){t.pn(Ws.mM,this.Os),t.pn(Ws.pM,this.Os),t.pn(Ws.la,this.Os)}get AM(){return this.MI.AM}get yM(){return this.MI.yM}fo(){return this.MI.fo()}ko(){return this.MI.ko()}bn(t){this.Bo(),this.LI(this.MI),t||this.MI.bn()}constructor(t){super(),this.MI=t,this.FI(this.MI)}},eT=class extends zy{xa(){return this.bM}eP(){return this.TM}get vP(){return this.gP()}gP(){return this.SM}MP(){return this.Au}FP(){return this.kM}EM(t){const e=this.iP;if(e===t)return;e.bp(this.sI);const i=Zb(this),s=this.oP(),n=this.GP(),r=this.QP();this.iP=t,this.TM.BI=t.ht,this.kM.BI=t.rt,this.Au.BI=t.nt,this.bM.BI=t.xa(),this.SM.BI=t.vP,void 0!==i&&$b(this,i,this);const h=this.oP();h!==s&&this.wo(new Q(h)),this.GP()!==n&&this.wo(new au),this.QP()!==r&&this.wo(new at),t.wp(this.sI)}async bn(){await super.bn(),this.bM.bn(),this.TM.bn(),this.kM.bn(),this.Au.bn(),this.SM.bn()}constructor(t){super(t),this.TM=new Ic,this.kM=new Ic,this.Au=new Qt,this.SM=new _A,this.bM=new Ar(t.xa()),this.TM.BI=t.ht,this.kM.BI=t.rt,this.Au.BI=t.nt,this.SM.BI=t.vP}};t();var iT=class extends eT{yP(){return function(t){let e=0,i=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)e+=a.PM,i+=a.IM,s+=a.CM,n+=a.RM,r+=a.xM,h+=a.DM.amountOfBufferedAudioSegments,o+=a.DM.amountOfBufferedVideoSegments;return{PM:e,IM:i,CM:s,RM:n,xM:r,DM:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.NM.map((t=>t.pP)))}Al(){return Xu(this.NM.map((t=>t.Al()))).then(De)}sr(){return Xu(this.NM.map((t=>t.sr()))).then(De)}KP(){if(!this.vo){for(const t of this.NM)t.KP();this.vo=!0}}sP(){const t=[];for(const e of this.NM)t.push(...e.sP());return t}tI(t){let e=!1;for(const i of this.NM)e=i.tI(t)||e;return e}wo(t){this.tI(t)||super.wo(t)}get BI(){return this.iP}set BI(t){this.EM(t)}BM(t){this.NM.push(t)}MM(t){Ko(this.NM,t)}EM(t){if(t===this.iP)return;const e=this.iP;e.cr(),super.EM(t),t.lr(e)}JP(){for(const t of this.NM)t.JP()}async bn(){this.Bo(),this.iP.cr();for(const t of this.NM)this.iP!==t&&await t.bn();await super.bn()}constructor(t){super(t),this.NM=[],this.vo=!1,this.vl=!1,this.BM(t)}};t();var Ja=function(t){return t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR",t}({}),Fc=class extends jh{get name(){return"MediaError"}constructor(t,e,i,s){super(e),this.code=t,this.message=null!=e?e:"Unknown error",this.cause=i,this.systemCode=s,v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}};function sT(t){Vo(t,"MEDIA_ERR_ABORTED",1),Vo(t,"MEDIA_ERR_NETWORK",2),Vo(t,"MEDIA_ERR_DECODE",3),Vo(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),Vo(t,"MEDIA_ERR_ENCRYPTED",5)}function Bc(t){var e,i;return function(t){return t.category===qa.CONTENT_PROTECTION}(t)?new Fc(5,t.message,null==(e=t.cause)?void 0:e.message,t.systemCode):new Fc(nT(t.code),t.message,null==(i=t.cause)?void 0:i.message)}function nT(t){if(t===X.MEDIA_ABORTED)return 1;if(t===X.MANIFEST_LOAD_ERROR||t===X.MEDIA_LOAD_ERROR||t===X.SUBTITLE_LOAD_ERROR)return 2;if(t===X.MEDIA_DECODE_ERROR)return 3;if(t===X.MEDIA_NOT_SUPPORTED)return 4;const e=qa.fromCode(t);return e===qa.NETWORK?2:e===qa.SOURCE?4:e===qa.LICENSE?6:e===qa.CONTENT_PROTECTION?5:e===qa.AD?7:3}function Ia(t){return new ke(rT(t.code),t.message,t)}function rT(t){switch(t){case 1:return X.MEDIA_ABORTED;case 2:return X.NETWORK_ERROR;case 3:return X.MEDIA_DECODE_ERROR;case 4:return X.SOURCE_NOT_SUPPORTED;case 5:return X.CONTENT_PROTECTION_ERROR;case 6:return X.LICENSE_ERROR;case 7:return X.AD_ERROR}}sT(Fc),sT(Fc.prototype),t(),t(),t(),t(),t();var mn=class extends Tr{tt(t){return super.tt(t)}ya(){return aA(this)}};t(),t(),t(),t();var Zh=class{get RI(){return this.LM}get U(){return this.LM.length}get ba(){return this.Zu||(this.Zu=function(t){const e=t.RI.map((t=>t.ba));return e.item=e=>{const i=0|e,s=t.DI(i);return s&&s.ba||void 0},e}(this)),this.Zu}OM(t){this.LM.push(t),this.Zu&&this.Zu.push(t.ba)}sc(t){Ko(this.LM,t),this.Zu&&Ko(this.Zu,t.ba)}DI(t){return this.LM[t]}FM(t){return di(t)?function(t,e){for(const i of e)if(!Qe(t,i))return!1;return!0}(this.LM,t):Qe(this.LM,t)}sr(){us(this.LM),this.Zu&&us(this.Zu)}constructor(){this.LM=[],this.Zu=void 0}};t();var Ba=class extends xe{ya(){return new hT(this.Ht.ba)}constructor(t){super(Fe.SI),this.Ht=t}},hT=class extends eo{constructor(t){super("update"),this.track=t}};t();var oT=0;function xs(){return oT++}var aT=0;var uT=0;function cT(){return uT++}var lT=0;function dT(){return lT++}var fT=0;var Ki=class extends Re{get QI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.UM=t,this.wo(new no(this)))}get UM(){return this.VM.enabled}set UM(t){this.VM.enabled=t}get ba(){return this.Zu||(this.Zu=Ji(this)),this.Zu}get o(){return this.Wb}get KI(){return this.HM}get Lt(){return this.VM.kind}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,this.wo(new Ba(this)))}get gs(){return this.VM.language}get Tk(){return this.Rt?"enabled":"disabled"}get WM(){return this.VM}get YI(){return this.LM}get ZI(){}set ZI(t){}qM(t){this.Rt=t}zM(){this.Rt=this.UM}constructor(t){super(),this.Vm=Be.hk,this.We=!1,this.Zu=void 0,this.VM=t,this.HM=xs(),this.Wb=fT+++"",this.ec=t.label,this.LM=new Zh,this.zM()}};t();var _T=0;var vT=class extends Re{get QI(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.UM=t,this.wo(new no(this)))}get UM(){return!!this.VM.selected}set UM(t){this.VM.selected=t}get ba(){return this.Zu||(this.Zu=Ji(this)),this.Zu}get o(){return this.Wb}get KI(){return this.HM}get Lt(){return"main"}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,this.wo(new Ba(this)))}get gs(){return this.VM.language}get Tk(){return this.Rt?"enabled":"disabled"}get WM(){return this.VM}get YI(){return this.LM}get ZI(){}set ZI(t){}zM(){this.Rt=this.UM}qM(t){this.Rt=t}constructor(t){super(),this.Vm=Be.wl,this.We=!1,this.Zu=void 0,this.VM=t,this.HM=xs(),this.Wb=_T+++"",this.LM=new Zh,this.ec=t.label,this.zM()}};t();var gT=class extends o{constructor(t){super(Uv.Sp),this.wP=t}};t(),t();var Fi=function(t){return t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR",t}({});t(),t();var tl=function(t){return t.XM="cue",t.GM="region",t.QM="stylesheet",t}({});t(),t();var wT={"line-left":"start",center:"middle","line-right":"end"},mT={start:"line-left",middle:"center",end:"line-right"};function pT(t,e){if("auto"===t)switch(e){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function yT(t,e){if("auto"===t)switch(e){case"left":return 0;case"right":return 100;default:return 50}return function(t,e){const i="number"==typeof t?t:_(t);return j(i)?e:i}(t,50)}t(),t(),t();var Zs=function(t){return t.mM="fo",t.pM="ko",t.SI="Zn",t}({}),Da=class extends xe{constructor(t,e){super(t),this.KM=e}},Fa=class extends eo{constructor(t,e){super(t),this.cue=e}};function ce(t){const e=[Zs.mM,Zs.pM,Zs.SI];let i;const s={get jM(){return t},get track(){return t.Ht.ba},get id(){return t.o},get uid(){return t.KI},get startTime(){return t.YM},set startTime(e){t.YM=e},get endTime(){return t.ZM},set endTime(e){t.ZM=e},get content(){return t.O},addEventListener(t,e){const s=tc(t,ci);i.wn(s,e)},removeEventListener(t,e){const s=tc(t,ci);i.pn(s,e)}};return i=new bi(s),t.wn(e,(t=>i.wo(t.ba))),s}function AT(){}function bT(t){return Xe(ce(t),{get align(){return t.JM},get line(){return t.$M},get lineAlign(){return t.tL},get position(){return t.lo},get positionAlign(){return t.eL},get region(){return t.iL?t.iL.ba:null},get size(){return t.Iy},get snapToLines(){return t.sL},get text(){return t.O},get vertical(){return t.At}})}t(),t();var Ua=class extends Da{ya(){return new TT(this.KM.ba)}constructor(t){super(Zs.SI,t)}},TT=class extends Fa{constructor(t){super("update",t)}};t();var Ha=class extends xe{ya(){return new ST(this.KM.ba)}constructor(t){super(Fe.dI),this.KM=t}},ST=class extends eo{constructor(t){super("updatecue"),this.cue=t}},Su=.02;function kT(t,e){return Uu(t.nL,e.nL,Su)&&Uu(t.rL,e.rL,Su)&&t.o===e.o}var Hu=class extends Re{get YM(){return this.hL}set YM(t){var e,i;this.hL!==t&&(this.hL=t,null==(e=this.oL)||e.aL(this),this.wo(new Ua(this)),null==(i=this.oL)||i.wo(new Ha(this)))}get ZM(){return this.uL}set ZM(t){var e,i;this.uL!==t&&(this.uL=t,null==(e=this.oL)||e.aL(this),this.wo(new Ua(this)),null==(i=this.oL)||i.wo(new Ha(this)))}get o(){return this.Wb}get KI(){return this.HM}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return ce(this)}get Zh(){return this.io}set Zh(t){this.io=t}get Ht(){return this.oL}set Ht(t){this.oL=t}get O(){return this.cL}set O(t){var e;this.cL!==t&&(this.cL=t,this.wo(new Ua(this)),null==(e=this.oL)||e.wo(new Ha(this)))}get lL(){return this.dL}set lL(t){this.dL=t}fL(t){return this===t||$y(this,t)&&kT(this,t)&&this._L(t)}_L(t){return sn(this.O,t.O)}vL(t,e){this.hL=t,this.uL=e,this.nL=t,this.rL=e}bn(){this.Bo()}constructor(t,e,i,s,n){super(),this.Zu=void 0,this.oL=void 0,this.io=!1,this.gL=-1,this.HM=dT(),this.hL=t,this.uL=e,this.nL=t,this.rL=e,this.cL=i,this.dL=Boolean(s),this.Wb=null!=n?n:""}};function ET(t,e){return t.O===e.O&&t.$M===e.$M&&t.tL===e.tL&&t.lo===e.lo&&t.eL===e.eL&&t.iL===e.iL&&t.sL===e.sL&&t.Iy===e.Iy&&t.JM===e.JM&&t.At===e.At}var Wa=class extends Hu{get ba(){return this.Zu||(this.Zu=bT(this)),this.Zu}get Vm(){return tl.XM}_L(t){return ET(this,t)}constructor(t,e,i,s,n){super(t,e,i,s,n),this.$M="auto",this.tL="start",this.lo="auto",this.eL="auto",this.iL=void 0,this.sL=!0,this.Iy=100,this.JM="center",this.At=""}};function PT(t){const e=t.$M,i=rh(e);return i&&!t.sL&&(e<0||e>100)?100:i?Number(e):t.sL?-1:100}function IT(t){return yT(t.lo,t.JM)}function CT(t){return pT(t.eL,t.JM)}function RT(t){const e=CT(t),i=IT(t);let s;switch(e){case"line-left":s=100-i;break;case"line-right":s=i;break;case"center":s=i<=50?2*i:2*(100-i)}return w.min(t.Iy,s)}function xT(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.wL},get regionAnchorX(){return t.mL},get regionAnchorY(){return t.pL},get scrollValue(){return t.yL},get viewportAnchorX(){return t.AL},get viewportAnchorY(){return t.bL},get width(){return t.Ti}}}t(),t();var DT=class{get ba(){return this.Zu||(this.Zu=xT(this)),this.Zu}get Vm(){return tl.GM}constructor(t,e,i,s,n,r,h,o){this.o=t,this.Ti=e,this.wL=i,this.mL=s,this.pL=n,this.AL=r,this.bL=h,this.yL=o}};t(),t();var NT=1e6,BT=class{TL(t){return this.SL()*t}kL(t){return this.EL(t)>0}PL(t){return this.EL(t)>=0}IL(t,e){return this.RL(t).CL(e)}fL(t){return 0===this.EL(t)}xL(t){return this.EL(t)<0}CL(t){return this.EL(t)<=0}DL(){return this.NL()?this.BL():this}ML(t){return this.OM(t.BL())}RL(t){return this.ML(t).DL()}};function MT(t,e){return t.LL()?e.LL()?L.ih:L.Zm:e.LL()?L.Jm:t.OL()?e.OL()&&t.NL()===e.NL()?L.ih:t.NL()?L.Jm:L.Zm:e.NL()?L.Zm:L.Jm}t(),t();var LT=4294967296,OT=LT*LT,FT=OT*OT,UT=FT/2,He=class t{static FL(e,i,s){return s?new t(e.toUnsigned(),i.toUnsigned()):new t(e.toSigned(),i.toSigned())}static UL(e){return e.unsigned?new t(e,Yc.UZERO):new t(e,e.isNegative()?Yc.NEG_ONE:Yc.ZERO)}static VL(e,i){if(j(e))return i?t.HL:t.WL;if(i){if(e<0)return t.HL;if(e>=FT)return t.qL}else{if(e<=-UT)return t.zL;if(e+1>=UT)return t.XL}return e<0?t.VL(-e,i).BL():t.FL(Yc.fromNumber(e%OT),Yc.fromNumber(e/OT),i)}GL(){return this.QL.unsigned}KL(){return this.jL.isZero()&&this.QL.isZero()}NL(){return this.QL.isNegative()}YL(){return this.GL()?t.FL(this.jL,this.QL,!1):this}ZL(){return this.GL()?this:t.FL(this.jL,this.QL,!0)}JL(){return this.jL}SL(){return this.NL()?-this.BL().SL():this.QL.toNumber()*OT+this.jL.toUnsigned().toNumber()}$L(){return this.jL.toInt()}fL(t){return(this.GL()===t.GL()||this.QL.getHighBits()>>>31!=1||t.QL.getHighBits()>>>31!=1)&&(this.QL.toUnsigned().eq(t.QL.toUnsigned())&&this.jL.toUnsigned().eq(t.jL.toUnsigned()))}EL(t){if(this.fL(t))return L.ih;const e=this.NL(),i=t.NL();if(e&&!i)return L.Jm;if(!e&&i)return L.Zm;if(!this.GL())return this.ML(t).NL()?L.Jm:L.Zm;const s=this.ZL(),n=t.ZL(),r=n.QL.comp(s.QL);return r>0||0===r&&n.jL.gt(s.jL)?L.Jm:L.Zm}xL(t){return this.EL(t)<0}CL(t){return this.EL(t)<=0}tO(t){return this.EL(t)>0}eO(t){return this.EL(t)>=0}iO(){return new t(this.jL.not(),this.QL.not())}sO(e){return new t(this.jL.and(e.jL),this.QL.and(e.QL))}nO(e){return new t(this.jL.or(e.jL),this.QL.or(e.QL))}rO(e){const i=127&e;return 0===i?this:i<64?t.FL(this.jL.shl(i),this.QL.shl(i).or(this.jL.shru(64-i)),this.GL()):t.FL(Yc.ZERO,this.jL.shl(i-64),this.GL())}hO(e){const i=127&e;return 0===i?this:i<64?t.FL(this.jL.shru(i).or(this.QL.shl(64-i)),this.QL.shr(i),this.GL()):t.FL(this.QL.shr(i-64),this.QL.isNegative()?Yc.NEG_ONE:Yc.ZERO,this.GL())}oO(e){const i=127&e;return 0===i?this:i<64?t.FL(this.jL.shru(i).or(this.QL.shl(64-i)),this.QL.shru(i),this.GL()):64===i?t.FL(this.QL,Yc.ZERO,this.GL()):t.FL(this.QL.shru(i-64),Yc.ZERO,this.GL())}OM(e){const i=this.QL.high>>>16,s=65535&this.QL.high,n=this.QL.low>>>16,r=65535&this.QL.low,h=this.jL.high>>>16,o=65535&this.jL.high,a=this.jL.low>>>16,u=65535&this.jL.low,c=e.QL.high>>>16,l=65535&e.QL.high,d=e.QL.low>>>16,f=65535&e.QL.low,_=e.jL.high>>>16,v=65535&e.jL.high,g=e.jL.low>>>16;let w=0,m=0,p=0,y=0,A=0,b=0,T=0,S=0;S+=u+(65535&e.jL.low),T+=S>>>16,S&=65535,T+=a+g,b+=T>>>16,T&=65535,b+=o+v,A+=b>>>16,b&=65535,A+=h+_,y+=A>>>16,A&=65535,y+=r+f,p+=y>>>16,y&=65535,p+=n+d,m+=p>>>16,p&=65535,m+=s+l,w+=m>>>16,m&=65535,w+=i+c,w&=65535;const k=this.GL(),E=Yc.fromBits(p<<16|y,w<<16|m,k),P=Yc.fromBits(T<<16|S,A<<16|b,k);return t.FL(P,E,k)}ML(t){return this.OM(t.BL())}BL(){return this.iO().OM(t.aO)}uO(e){if(this.KL()||e.KL())return this.GL()?t.HL:t.WL;if(this.NL())return e.NL()?this.BL().uO(e.BL()):this.BL().uO(e).BL();if(e.NL())return this.uO(e.BL()).BL();if(this.QL.isZero()&&0===this.jL.high&&e.QL.isZero()&&0===e.jL.high)return t.UL(this.jL.multiply(e.jL));const i=Yc.fromBits(4294967295,0,!0),s=this.jL.and(i),n=this.jL.shru(32),r=this.QL.and(i),h=this.QL.shru(32),o=e.jL.and(i),a=e.jL.shru(32),u=e.QL.and(i),c=e.QL.shru(32);let l=Yc.UZERO,d=Yc.UZERO,f=Yc.UZERO,_=Yc.UZERO;l=l.add(s.mul(o)),d=d.add(l.shru(32)),l=l.and(i),d=d.add(n.mul(o)),f=f.add(d.shru(32)),d=d.and(i),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(i),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(i),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(i);const v=Yc.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),g=Yc.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.FL(v,g,this.GL())}cO(e){let i,s,n=e;if(n.KL())throw new RangeError("division by zero");if(this.KL())return this.GL()?[t.HL,t.HL]:[t.WL,t.WL];if(this.GL()){if(n.GL()||(n=n.ZL()),n.tO(this))return[t.HL,this];if(n.tO(this.oO(1)))return s=t.lO,i=this.ML(n),[s,i];s=t.HL}else{if(this.fL(t.zL)){if(n.fL(t.aO)||n.fL(t.dO))return[t.zL,t.WL];if(n.fL(t.zL))return[t.aO,t.WL];{const e=this.hO(1).fO(n).rO(1);return e.fL(t.WL)?s=n.NL()?t.aO:t.dO:(i=this.ML(n.uO(e)),s=e.OM(i.fO(n))),i=this.ML(n.uO(s)),[s,i]}}if(n.fL(t.zL))return this.GL()?[t.HL,this]:[t.WL,this];if(this.NL())return n.NL()?this.BL().cO(n.BL()):([s,i]=this.BL().cO(n),[s.BL(),i.BL()]);if(n.NL())return[s,i]=this.cO(n.BL()),[s.BL(),i.BL()];s=t.WL}for(i=this;i.eO(n);){let e=w.max(1,w.floor(i.SL()/n.SL()));const r=w.ceil(w.log(e)/w.LN2),h=r<=48?1:2**(r-48);let o=t.VL(e),a=o.uO(n);for(;a.NL()||a.tO(i);)e-=h,o=t.VL(e,this.GL()),a=o.uO(n);o.KL()&&(o=t.aO),s=s.OM(o),i=i.ML(a)}return[s,i]}fO(t){return this.cO(t)[0]}_O(t){return this.cO(t)[1]}toString(e){const i=e||10;if(i<2||i>36)throw new RangeError("radix");if(this.KL())return"0";if(this.NL()){if(this.fL(t.zL)){const e=t.VL(i),s=this.fO(e),n=s.uO(e).ML(this);return s.toString(i)+n.$L().toString(i)}return"-"+this.BL().toString(i)}const s=t.VL(i**6,this.GL());let n=this,r="";for(;;){const t=n.fO(s);let e=(n.ML(t.uO(s)).$L()>>>0).toString(i);if(n=t,n.KL())return e+r;for(;e.length<6;)e="0"+e;r=String(e)+r}}constructor(t,e){this.jL=t,this.QL=e}};He.WL=He.UL(Yc.ZERO),He.HL=He.UL(Yc.UZERO),He.aO=He.UL(Yc.ONE),He.lO=He.UL(Yc.UONE),He.dO=He.UL(Yc.NEG_ONE),He.XL=He.FL(Yc.NEG_ONE,Yc.MAX_VALUE,!1),He.qL=He.FL(Yc.MAX_UNSIGNED_VALUE,Yc.MAX_UNSIGNED_VALUE,!0),He.zL=He.FL(Yc.ZERO,Yc.MIN_VALUE,!1),t();var Qc=class t{get OL(){return!isFinite(this.vO)}get gO(){return this.vO/this.Wx}static wO(e){return new t(w.ceil(e.vO),e.Wx)}static mO(e){return new t(w.floor(e.vO),e.Wx)}static pO(t,e){return t.PL(e)?t:e}static yO(t,e){return t.CL(e)?t:e}OM(e){return this.Wx>=e.Wx?new t(this.vO+e.AO(this.Wx).vO,this.Wx):new t(this.AO(e.Wx).vO+e.vO,e.Wx)}kL(t){return t.xL(this)}PL(t){return t.CL(this)}RL(e){if(this.Wx>=e.Wx){const i=w.abs(this.vO-e.AO(this.Wx).vO),s=this.Wx;return new t(i,s)}return e.RL(this)}IL(t,e){return this.RL(t).CL(e)}EL(t){return function(t,e){return t.Wx>=e.Wx?yv(t.vO,e.AO(t.Wx).vO):yv(t.AO(e.Wx).vO,e.vO)}(this,t)}fL(t){return 0===this.EL(t)}xL(t){return this.EL(t)<0}CL(t){return this.EL(t)<=0}AO(e){return new t(this.vO*(e/this.Wx),e)}ML(e){return this.Wx>=e.Wx?new t(this.vO-e.AO(this.Wx).vO,this.Wx):new t(this.AO(e.Wx).vO-e.vO,e.Wx)}bO(e){return new t(this.vO*e,this.Wx)}constructor(t,e=1){this.vO=t,this.Wx=e}};Qc.TO=new Qc(1/6,1),Qc.WL=new Qc(0),Qc.SO=new Qc(1/0),Qc.kO=1e6;var Ss=class t extends BT{static EO(e,i){return void 0===i&&(i=NT),t.VL(e*i,i)}static VL(e,i){return j(e)?t.PO:e===1/0?t.IO:e===-1/0?t.CO:new t(Yc.fromNumber(e),i)}static UL(e,i){return new t(e,i)}static RO(e){return t.EO(e.gO,NT)}static xO(e){return new t(Yc.fromNumber(e.getTime()),1e3)}static pO(t,e){return t.PL(e)?t:e}static yO(t,e){return t.CL(e)?t:e}static DO(e,i,s){return t.pO(i,t.yO(s,e))}NL(){return this.yE.isNegative()}KL(){return 0!==this.Wx&&this.yE.isZero()}OL(){return 0===this.Wx&&!this.yE.isZero()}LL(){return 0===this.Wx&&this.yE.isZero()}SL(){if(0===this.Wx)return this.yE.isZero()?NaN:this.yE.isNegative()?-1/0:1/0;const t=this.yE.divide(this.Wx),e=this.yE.subtract(t.multiply(this.Wx));return t.toNumber()+e.toNumber()/this.Wx}JL(){if(0===this.Wx)throw new v("Failed to convert timestamp");return this.yE}BO(){return new Date(0===this.Wx?NaN:this.AO(1e3).yE.toNumber())}MO(){return new Qc(0===this.Wx?this.SL():this.yE.toNumber(),this.Wx)}AO(e,i){void 0===i&&(i=fs.LO);const s=this.Wx;if(s===e)return this;if(0===s)return this;const n=gd(s,e),r=function(t,e,i){const[s,n]=t.cO(e);if(n.KL())return s;if(i===fs.LO)return n.NL()?s.ML(He.aO):s;if(i===fs.OO)return n.NL()?s:s.OM(He.aO);{const t=n.uO(He.VL(2));return t.NL()?t.BL().xL(e)?s:s.ML(He.aO):t.xL(e)?s:s.OM(He.aO)}}(He.UL(this.yE).uO(He.VL(e/n)),He.VL(s/n),i);return new t(r.JL(),e)}EL(t){if(this===t)return L.ih;if(0===this.Wx||0===t.Wx)return MT(this,t);if(this.KL())return t.KL()?L.ih:t.NL()?L.Zm:L.Jm;if(t.KL())return this.NL()?L.Jm:L.Zm;const e=w.min(this.Wx,t.Wx),i=this.AO(e,fs.FO).yE,s=t.AO(e,fs.FO).yE;return i.compare(s)}BL(){return 0===this.Wx?function(t){0;return t.LL()?t:t.NL()?Ss.IO:Ss.CO}(this):new t(this.yE.negate(),this.Wx)}OM(e){if(0===this.Wx||0===e.Wx)return function(t,e){0;if(t.LL()||e.LL())return Ss.PO;if(t.OL()&&e.OL())return t.NL()===e.NL()?t:Ss.PO;return t.OL()?t:e}(this,e);if(this.KL())return e;if(e.KL())return this;const i=w.max(this.Wx,e.Wx),s=this.AO(i,fs.FO),n=e.AO(i,fs.FO);return new t(s.yE.add(n.yE),i)}uO(e){if(this.LL()||j(e))return t.PO;if(this.OL()||!isFinite(e)){if(this.KL()||0===e)return t.PO;{const i=this.NL()?t.CO:t.IO;return e<0?i.BL():i}}return this.KL()?this:new t(0===e?Yc.ZERO:this.yE.multiply(e),this.Wx)}fO(e){if(this.LL()||j(e))return t.PO;if(this.OL())return isFinite(e)?0===e?1/e<0?this.BL():this:e<0?this.BL():this:t.PO;if(!isFinite(e))return new t(Yc.ZERO,this.Wx);if(this.KL())return 0===e?t.PO:new t(Yc.ZERO,this.Wx);if(0===e){const i=this.NL()?t.CO:t.IO;return 1/e<0?i.BL():i}return new t(this.yE.divide(e),this.Wx)}UO(){return[this.yE.low,this.yE.high,this.Wx]}constructor(t,e){super(),this.yE=t.toSigned(),this.Wx=e>>>0}};Ss.WL=new Ss(Yc.ZERO,NT),Ss.PO=new Ss(Yc.ZERO,0),Ss.IO=new Ss(Yc.ONE,0),Ss.CO=new Ss(Yc.NEG_ONE,0),t();var It=class t extends BT{static EO(e,i){return void 0===i&&(i=NT),t.VL(e*i,i)}static VL(e,i){return j(e)?t.PO:e===1/0?t.IO:e===-1/0?t.CO:new t(BigInt(w.floor(e)),i)}static UL(e,i){return new t(BigInt(e.high)<<BigInt(32)|BigInt(e.low>>>0),i)}static RO(e){return t.EO(e.gO,NT)}static xO(e){return t.VL(e.getTime(),1e3)}static get WL(){return t.VO||(t.VO=new t(BigInt(0),NT)),t.VO}static get PO(){return t.HO||(t.HO=new t(BigInt(0),0)),t.HO}static get IO(){return t.WO||(t.WO=new t(BigInt(1),0)),t.WO}static get CO(){return t.qO||(t.qO=new t(BigInt(-1),0)),t.qO}static pO(t,e){return t.PL(e)?t:e}static yO(t,e){return t.CL(e)?t:e}static DO(e,i,s){return t.pO(i,t.yO(s,e))}NL(){return this.yE<BigInt(0)}KL(){return 0!==this.Wx&&this.yE===BigInt(0)}OL(){return 0===this.Wx&&this.yE!==BigInt(0)}LL(){return 0===this.Wx&&this.yE===BigInt(0)}SL(){if(0===this.Wx)return this.yE===BigInt(0)?NaN:this.yE<BigInt(0)?-1/0:1/0;const t=this.yE/BigInt(this.Wx),e=this.yE-t*BigInt(this.Wx);return Number(t)+Number(e)/this.Wx}JL(){if(0===this.Wx)throw new v("Failed to convert timestamp");return this.zO()}zO(){const t=this.yE&BigInt(4294967295),e=this.yE>>BigInt(32)&BigInt(4294967295);return Yc.fromBits(Number(t),Number(e))}BO(){return new Date(0===this.Wx?NaN:Number(this.AO(1e3).yE))}MO(){return new Qc(0===this.Wx?this.SL():Number(this.yE),this.Wx)}AO(e,i){void 0===i&&(i=fs.LO);const s=this.Wx;if(s===e)return this;if(0===s)return this;const n=gd(s,e),r=function(t,e,i){const s=t/e,n=t-s*e;if(n===BigInt(0))return s;if(i===fs.LO)return n<BigInt(0)?s-BigInt(1):s;if(i===fs.OO)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<e?s:s-BigInt(1):t<e?s:s+BigInt(1)}}(this.yE*BigInt(e/n),BigInt(s/n),i);return new t(r,e)}EL(t){if(this===t)return L.ih;if(0===this.Wx||0===t.Wx)return MT(this,t);if(this.KL())return t.KL()?L.ih:t.NL()?L.Zm:L.Jm;if(t.KL())return this.NL()?L.Jm:L.Zm;const e=w.min(this.Wx,t.Wx),i=this.AO(e,fs.FO).yE,s=t.AO(e,fs.FO).yE;return i>s?L.Zm:i<s?L.Jm:L.ih}BL(){return 0===this.Wx?function(t){0;return t.LL()?t:t.NL()?It.IO:It.CO}(this):new t(-this.yE,this.Wx)}OM(e){if(0===this.Wx||0===e.Wx)return function(t,e){0;if(t.LL()||e.LL())return It.PO;if(t.OL()&&e.OL())return t.NL()===e.NL()?t:It.PO;return t.OL()?t:e}(this,e);if(this.KL())return e;if(e.KL())return this;const i=w.max(this.Wx,e.Wx),s=this.AO(i,fs.FO),n=e.AO(i,fs.FO);return new t(s.yE+n.yE,i)}uO(e){if(this.LL()||j(e))return t.PO;if(this.OL()||!isFinite(e)){if(this.KL()||0===e)return t.PO;{const i=this.NL()?t.CO:t.IO;return e<0?i.BL():i}}return this.KL()?this:new t(0===e?BigInt(0):this.yE*BigInt(e),this.Wx)}fO(e){if(this.LL()||j(e))return t.PO;if(this.OL())return isFinite(e)?0===e?1/e<0?this.BL():this:e<0?this.BL():this:t.PO;if(!isFinite(e))return new t(BigInt(0),this.Wx);if(this.KL())return 0===e?t.PO:new t(BigInt(0),this.Wx);if(0===e){const i=this.NL()?t.CO:t.IO;return 1/e<0?i.BL():i}return new t(this.yE/BigInt(e),this.Wx)}UO(){const t=this.zO();return[t.low,t.high,this.Wx]}constructor(t,e){super(),this.yE=BigInt.asIntN(64,t),this.Wx=e>>>0}};It.VO=void 0,It.HO=void 0,It.WO=void 0,It.qO=void 0;var fs=function(t){return t[t.LO=0]="LO",t[t.OO=1]="OO",t[t.FO=2]="FO",t}({}),_r=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?It:Ss;function VT(t,e){return t.EL(e)}function HT(t,e){return void 0!==t?void 0!==e?_r.yO(t,e):t:e}t();var WT=9e4,Lu=Ut((()=>_r.VL(8589934592,WT))),qT=Ut((()=>Lu().fO(2)));t();var zT={XO:0,GO:1/0,QO:0},XT=6,GT=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],QT=[" ","\t","\n","\f","\r"],KT=/^\d*$/,jT=/.*[0-9]+.*/,YT=/^[\d.-]+$/,ZT=/(^\.|\.$)/,JT=/(\D\.|\.\D)/;function $T(t,e,i){void 0===e&&(e=zT),void 0===i&&(i=!0);return tS(Fh(Nt(t),new lh),e,i)}function tS(t,e,i){void 0===e&&(e=zT),void 0===i&&(i=!0);const s={L:[],KO:[],jO:[]},n=eS(t),r=new lh;if(lS(n),Ga(n,(t=>"\n"!==t),r),r.Fu>=n.length)return s;if(r.by(1),"\n"!==n.charAt(r.Fu)){hS(iS(n,r,false,!0,s,e,i),s)}else r.by(1);for(Ga(n,(t=>"\n"===t),r);r.Fu<n.length;){hS(iS(n,r,false,!1,s,e,i),s),Ga(n,(t=>"\n"===t),r)}return s}function eS(t){const e=rv(t,"\0"," "),i=rv(e,"\r\n","\n");return rv(i,"\r","\n")}function Ga(t,e,i){const s=i.Fu;for(;i.Fu<t.length&&e(t.charAt(i.Fu));)i.by(1);return t.substring(s,i.Fu)}function iS(t,e,i,s,n,r,h){let o,a=0,u=e.Fu,c="",l=!1,d=!1,f=null,_=null,v=null;for(;!l;)if(o=Ga(t,(t=>"\n"!==t),e),a++,e.Fu>=t.length?l=!0:e.by(1),H(o,"--\x3e")){if(s||1!==a&&(2!==a||d)){e.jc(u);break}d=!0,u=e.Fu,f=new Wa(0,0,"",!1,c);try{oS(o,n.KO,f,r,h),c=""}catch(t){Gn.Yw(t),f=null}}else{if(""===o)break;s&&Kc(o,"X-TIMESTAMP-MAP")&&(n.YO=sS(o)),s||2!==a||i||(ys("STYLE",c.replace(/ /g,""))?(_={Vm:tl.QM},c=""):ys("REGION",c.replace(/ /g,""))&&(v=new DT("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=o,u=e.Fu}if(f)return f.O=c,f;if(_);else if(v)return function(t,e){const i=t.split(/\s/),s=":";for(const t of i)if(0!==t.length&&H(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const i=t.indexOf(s),n=t.substring(0,i),r=t.substring(i+1,t.length);switch(n.toUpperCase()){case"ID":bS(r,e);break;case"WIDTH":kS(r,e);break;case"LINES":SS(r,e);break;case"REGIONANCHOR":{const t=AS(r);t&&(e.mL=t[0],e.pL=t[1]);break}case"VIEWPORTANCHOR":{const t=AS(r);t&&(e.AL=t[0],e.bL=t[1]);break}case"SCROLL":TS(r,e)}}}(c,v),v;return null}function sS(t){const e=t.split("=")[1].trim().split(","),i=rS(e[0].trim(),"MPEGTS")?e[0]:e[1],s=rS(e[0].trim(),"LOCAL")?e[0]:e[1];var n;return{ZO:nS(Number(i.split(/:(.*)/)[1].trim())||0),dh:_r.EO(null!=(n=_u(s.split(/:(.*)/)[1].trim(),new lh))?n:0)}}function nS(t){return _r.VL(t,WT)}function rS(t,e){return Kc(t,e)}function hS(t,e){t&&function(t){return"cue"===t.Vm}(t)?e.L.push(t):t&&function(t){return"region"===t.Vm}(t)?e.KO.push(t):t&&function(t){return"stylesheet"===t.Vm}(t)&&e.jO.push(t)}function oS(t,e,i,s,n){const r=new lh;fS(t,r);const h=aS(_u(t,r),s,n);if(fS(t,r),"--\x3e"!==t.substring(r.Fu,r.Fu+3))throw v("Something went wrong with parsing a WebVTT Cue");r.by(3),fS(t,r);const o=aS(_u(t,r),s,n);i.vL(h,o);!function(t,e,i){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&H(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":wS(h,e,i);break;case"VERTICAL":pS(h,e);break;case"D":yS(h,e);break;case"LINE":case"L":vS(h,e);break;case"POSITION":case"T":gS(h,e);break;case"SIZE":case"S":mS(h,e);break;case"ALIGN":case"A":_S(h,e)}}}(t.substring(r.Fu,t.length),i,e)}function aS(t,e,i){return i?t+e.XO:t}function uS(t){return/^[0-9]$/.test(t)}function _u(t,e){const i=rv(t,",",".");let s,n,r,h=!1;if(e.Fu>=i.length||!uS(i.charAt(e.Fu)))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");const o=Ga(i,uS,e),a=k(o,10);if((o.length>2||a>59)&&(h=!0),e.Fu>=i.length||":"!==i.charAt(e.Fu))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.by(1);const u=Ga(i,uS,e);if(2!==u.length)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");const c=k(u,10);if(h||e.Fu<i.length&&":"===i.charAt(e.Fu)){if(e.Fu>=i.length||":"!==i.charAt(e.Fu))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.by(1);const t=Ga(i,uS,e);if(2!==u.length)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=k(t,10)}else s=0,n=a,r=c;if(e.Fu>=i.length||"."!==i.charAt(e.Fu))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.by(1);const l=Ga(i,uS,e),d=k(l,10);if(c>59||r>59)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function cS(t){return lS(eS(t))}function lS(t){if(t.length<XT)return!1;for(const e of GT)if(Kc(t,e))return!0;return!1}function dS(t){return Qe(QT,t)}function fS(t,e){for(;e.Fu<t.length&&dS(t.charAt(e.Fu));)e.by(1)}function ps(t){const e=t.lastIndexOf("%");if(e>-1){const i=_(t.substring(0,e));if(!j(i)&&i>=0&&i<=100)return i}return null}function _S(t,e){const i=t.toLowerCase();switch(i){case"start":case"center":case"end":case"left":case"right":e.JM=i;break;case"middle":e.JM="center"}}function vS(t,e){let i,s;const n=t.indexOf(",");if(n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s=""),!jT.test(i))return;let r,h;if(wr(i,"%")){const t=ps(i);if(null===t)return;r=t,h=!1}else{if(!YT.test(i)||i.lastIndexOf("-")>0)return;const t=i.indexOf(".");if(t>=0&&(t!==i.lastIndexOf(".")||!JT.test(i)||ZT.test(i)))return;if(r=_(i),j(r))return;h=!0}switch(e.$M=r,e.sL=h,s=s.toLowerCase(),s){case"start":case"center":case"end":e.tL=s;break;case"middle":e.tL="center"}}function gS(t,e){let i,s;const n=t.indexOf(",");n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s="");const r=ps(i);if(null!==r)switch(e.lo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":e.eL=s;break;case"start":e.eL="line-left";break;case"middle":e.eL="center";break;case"end":e.eL="line-right"}}function wS(t,e,i){const s=En(i,(e=>e.o===t));void 0!==s&&(e.iL=s)}function mS(t,e){const i=ps(t);null!==i&&(e.Iy=i)}function pS(t,e){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":e.At="rl";break;case"lr":case"vertical:lr":case"vertical-lr":e.At="lr";break;default:e.At=""}}function yS(t,e){"VERTICAL"===t.toUpperCase()?e.At="rl":"VERTICAL-LR"===t.toUpperCase()&&(e.At="lr")}function AS(t){if(t.indexOf(",")>=0){const e=ps(t.substring(0,t.indexOf(","))),i=ps(t.substring(t.indexOf(",")+1,t.length));return[ht(e||0,0,100),ht(i||100,0,100)]}return null}function bS(t,e){e.o=t}function TS(t,e){"up"===t.toLowerCase()&&(e.yL="up")}function SS(t,e){KT.test(t)&&(e.wL=k(t))}function kS(t,e){const i=ps(t);null!==i&&(e.Ti=i)}function ES(t){return t&&"CE"in t?t.CE:t}t(),t(),t();var PS=class extends Hu{get JO(){return this.$O}get tF(){return this.eF}get KO(){return this.iF}get sF(){return this.nF}get ba(){return this.Zu||(this.Zu=function(t){return Xe(ce(t),{get extent(){return t.JO},get styles(){return t.tF},get regions(){return t.KO},get metadata(){return ES(t.sF)},get content(){return ES(t.O)}})}(this)),this.Zu}_L(t){return!!sn(this.JO,t.JO)&&(!!sn(this.tF,t.tF)&&(!!sn(this.KO,t.KO)&&(this.sF&&t.sF?!!this.sF.AE(t.sF)&&(this.O&&t.O?this.O.AE(t.O):this.O===t.O):this.sF===t.sF)))}constructor(t,e,i,s,n,r,h,o){super(t,e,i,s),this.$O=n,this.eF=r,this.iF=h,this.nF=o||void 0}};t();var IS=class{get rF(){return this.Bu.bE(!0)}get YM(){return this.hF}get ZM(){return this.oF}constructor(t,e,i){this.hF=t,this.oF=e,xn(i)?this.Bu=function(t,e,i){for(const t of["begin","end","dur"])i.ME(t);return i}(0,0,i):this.Bu=i}};t();var CS="http://www.w3.org/XML/1998/namespace";function RS(t,e,i,s){let n=t.IE(i,e);return 0===n.length&&(n=t.EE(s+":"+e)),n}function xS(t){const e={};for(const i of t.xE)e[i.gE]=i.yE;return e}var DS=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,NS=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,sc="http://www.w3.org/ns/ttml";function BS(t,e,i,s){void 0===i&&(i=zT),void 0===s&&(s=Pt.APPLICATION_TTML_XML);let n=[];const r=Nt(t);return s===Pt.APPLICATION_MP4?n=function(t,e,i){const s=Kh.Sx(t),n=yc(s,BA.DR);if(!n)return[];return OS(Nt(n.LS),e,i)}(r,e,i):s===Pt.APPLICATION_TTML_XML&&(n=OS(r,e,i)),n}function MS(t,e,i){return void 0===i&&(i=zT),FS(t,e,i)}function LS(t,e){const i=XS(e.rF),s={};for(const e of i)s[e]=t[e];return s}function OS(t,e,i){return FS(Fh(t,new lh),e,i)}function FS(t,e,i){const s=[];let n;try{n=Gn.vE(t)}catch(t){return s}const r=n.UE;if("tt"!==r.gE)return s;const h=r.IE(sc,"head")[0],o=r.IE(sc,"body")[0];if(!o||!h)return s;const a=VS(r.NE("tts:extent")),u=a?{width:a[0],height:a[1]}:void 0,c=function(t){const e={},i=t.IE(sc,"styling")[0],s=i&&i.IE(sc,"style")||[];for(const t of s){e[t.BE(CS,"id")]=xS(t)}return e}(h),l=function(t){const e={},i=t.IE(sc,"layout")[0],s=i&&i.IE(sc,"region")||[];for(const t of s){const i=t.BE(CS,"id");if(!i)continue;e[i]=xS(t);const s=zS(t);for(const t in s)Nl.call(s,t)&&(e[i][t]=s[t])}return e}(h),d=a?function(t,e){const i=pr(t);for(const t of g.keys(i)){const s=VS(i[t].extent);if(s){const n=US(s[0],e[0]),r=US(s[1],e[1]);i[t].extent=n+" "+r}const n=VS(i[t].origin);if(n){const s=US(n[0],e[0]),r=US(n[1],e[1]);i[t].origin=s+" "+r}}return i}(l,a):l,f=h.IE(sc,"metadata")[0],_=HS(o,i.XO,i.GO,i.QO);for(const t of _){const e=LS(d,t);s.push(new PS(t.YM,t.ZM,t.rF,!1,u,c,e,f))}return s}function US(t,e){return t/e*100+"%"}function VS(t){if(!t)return;const e=t.split(" ",2);if(2!==e.length)return;const[i,s]=e;if(!wr(i,"px")||!wr(s,"px"))return;return[Number(i.slice(0,-2)),Number(s.slice(0,-2))]}function HS(t,e,i,s){let n,r=e,h=i,o=[];const a=[];if(xn(t)){var u,c;r=null!=(u=qS(t.NE("begin"),s))?u:r,n=qS(t.NE("dur"),0),h=null!=(c=qS(t.NE("end"),s))?c:void 0!==n?r+n:h;const e=t.TE;for(let i=0;i<e.length;i++)("body"===t.gE||"div"===t.gE)&&e[i]._E>1||(o=o.concat(HS(e[i],r,h,s)))}const l=function(t,e,i){const s=[];s.push(t,e);for(const t of i)s.push(t.YM,t.ZM);s.sort(G);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Xt(s,t+1),t--,n=s.length);return s}(r,h,o);for(let e=0;e<l.length-1;e++){const i=WS(l[e],l[e+1],o);if(i.length<=0&&GS(t)){const i=t.bE(!1);a.push(new IS(l[e],l[e+1],i))}else if(i.length>0){const s=t.bE(!1);i.forEach((t=>s.RE(t.rF))),a.push(new IS(l[e],l[e+1],s))}}return a}function WS(t,e,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n].YM,h=i[n].ZM;(r>=t&&h<=e||r<e&&h>=e||r<t&&h>t)&&s.push(i[n])}return s}function qS(t,e){if(t){if(DS.test(t)){const i=DS.exec(t);if(!i)return;const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,h=i[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+e}if(NS.test(t)){const i=NS.exec(t);if(!i)return;const s=Number(i[1]);let n;switch(i[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+e}}}function zS(t){const e={},i=t.EE("style")||[];for(const t of i){const i=xS(t);for(const t in i)Nl.call(i,t)&&(e[t]=i[t])}return e}function XS(t){let e,i=[];if(xn(t)){e=t.NE("region"),e&&i.push(e);const s=t.TE;for(let t=0;t<s.length;t++)i=i.concat(XS(s[t]))}return i}function GS(t){if(xn(t)){const e=t.gE.toUpperCase(),i=Boolean(t.NE("smpte:backgroundImage"));return"BR"===e||i}return t._E===et.lS}function QS(t){const e=function(t){try{return Gn.vE(t).UE}catch(t){}}(t);return"tt"===(null==e?void 0:e.gE)}t(),t();var du=class extends Tr{tt(t){return super.tt(t)}it(t){const e=super.it(t);return e&&(t.Tk=Aa.Th),e}ya(){return va(this)}};t(),t();var ns=function(t){return t.aF="subtitles",t.uF="captions",t.cF="descriptions",t.$n="chapters",t.lF="metadata",t.dF="thumbnails",t}({}),KS=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function jS(t){return"string"==typeof t&&Qe(KS,t)}function YS(t,e){return!(!jS(t)||!jS(e))&&(t===e||"subtitles"===t&&"captions"===e||"captions"===t&&"subtitles"===e)}t();var es=class extends ke{constructor(t,e,i,s,n){super(t,e,n),this.url=i,this.status=s}};function ZS(t){return t===ns.aF||t===ns.uF}function JS(t){return t.some($S)}function $S(t){return H(t,"stpp")}function tk(t){return t.some(ek)}function ek(t){return H(t,"vtt")||H(t,"wvtt")}function ic(t,e){return Oe(t)&&tk(e)}function ik(t,e){return t===ns.dF||t===ns.lF&&e===ns.dF}function sk(t,e,i,s){for(const n of t.L.RI){if(n.YM>i)break;e<=n.ZM&&!Qe(s,n)&&s.push(n)}}function nk(t,e){return pv(t.KI,e.KI)}function rk(t,e,i,s){const n=function(t){switch(t){case Zo.WEBVTT:return"WebVTT";case Zo.SRT:return"SRT";case Zo.TTML:return"TTML";default:return""}}(t);return new es(X.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",e,i,s)}function Cr(t,e){const i=[];for(const s of t.L.RI)if(s.ZM<=e)i.push(s);else if(s.YM>=e)break;for(const e of i)t.fF(e)}function hk(t,e){if(t.U>0){const i=t.Tn(0),s=w.max(0,i-10);for(const t of e)t._F(s)}}var Vt=class extends Re{tt(t){t.wn(Fe.ca,this.vF),this.Z.tt(t),this.gF(t)}it(t){t.pn(Fe.ca,this.vF),t.Tk=Aa.Th,this.Z.it(t)}wF(t){}mF(t){}gF(t){t.Tk!==Aa.Th?this.wF(t):this.mF(t)}pF(){for(const t of this.Z.RI)t.pn(Fe.ca,this.vF),t.bn()}_F(t){if(t>0)for(const e of this.Z.RI)Cr(e,t)}sr(){return this.pF(),this.Z.sr(),Promise.resolve()}async bn(){this.Bo(),await this.sr(),this.Z.bn()}constructor(...t){super(...t),this.Z=new du,this.vF=t=>{const e=t.Ht;this.gF(e)}}};t();var ok=class extends Cs{get error(){return this.errorObject.message}ya(){return this}constructor(t){super(Yo.la),this.errorObject=t}},kn=class extends Vt{yF(t){if(!t.src)return;const e=t.kind||ns.aF,i=this.AF.iI(e,t.id,t.label,t.srclang,t.default);return i.iC=Hn(t.src),this.tt(i),i}async bF(t,e){t.Vc=Fi.LOADING;const i=new Qi({qS:t.iC,OS:Gs.lS,vk:Na.GET,ap:e});let s,n;try{const t=await this.TF.FS(i);n=t.MS,s=await t.gS()}catch(e){return ta(e),t.Vc=Fi.ERROR,void t.wo(new ok(function(t,e){let i=e,s=0;if(za(t)&&t.name===oy.Mk)i=t.FS.qS;else if(yy(t)){const e=t.Uk;if(i=e.WS,s=e.MS,0===s)return new es(X.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",i,s,t)}return new es(X.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",i,s,t)}(e,t.iC)))}try{const e=function(t){return cS(t)?Zo.WEBVTT:QS(t)?Zo.TTML:Zo.SRT}(s);t.Vm=e;let i=[];if(e===Zo.WEBVTT||e===Zo.SRT){i=tS(s).L}else e===Zo.TTML&&(i=MS(s,t));for(const e of i)t.SF(e)}catch(e){return ta(e),t.Vc=Fi.ERROR,void t.wo(new ok(rk(t.Vm,t.iC,n,e)))}t.Vc=Fi.LOADED}wF(t){Qe(this.Z.RI,t)&&t.Vc===Fi.NONE&&this.bF(t,this.kF.ap).catch(wi)}On(){}async sr(){this.kF.tf(),this.kF=new Mr;for(const t of this.Z.RI)this.AF.EF(t);await super.sr()}constructor(t,e){super(),this.kF=new Mr,this.AF=t,this.TF=e}};function ak(t,e){for(const i of t)if(i.Lt===e&&i.PF)return i}function uk(t,e){ck(ak(t.RI,e))}function ck(t){void 0!==t&&(t.Tk=Aa.Yn)}function lk(t,e){const i=ak(t.RI,e)||function(t,e){for(const i of t)if(i.Lt===e)return i}(t.RI,e);ck(i)}function dk(t){for(const e of KS)e===ns.$n?lk(t,e):uk(t,e)}t(),t();var tu=class extends o{constructor(){super(Uv.Qp)}};t(),t();var A=function(t){return t[t.IF=0]="IF",t[t.CF=1]="CF",t}({});t(),t();var zt=class extends o{constructor(t){super(cb.rd),this.currentTime=t}};t();var $n=class extends o{constructor(t){super(cb.nd),this.currentTime=t}},fk=[cb.Lf,cb.nd,Uv.no,Uv.Ff],Ir=class extends Re{RF(t){!this.xF&&t>=qb.Qn&&(this.xF=!0,this.wo(new Xb(this.DF.Yu,t)))}NF(t){!this.BF&&t>=qb.Jf&&(this.BF=!0,this.wo(new Gb(this.DF.Yu,t)))}MF(t){this.LF||(t>=qb.Cf&&this.OF<qb.Cf&&!this.DF.Oc||this.FF&&t>=qb.Cf)&&this.wo(new $n(this.DF.Yu))}UF(t){!this.VF(t)||this.DF.$c||this.DF.lt||this.wo(new zt(this.DF.Yu))}HF(t){this.OF<=qb.Jf&&t>=qb.Cf&&this.wo(new Tt(this.DF.Yu,t))}maybeDispatchCanPlayThroughEvent(t){t===qb.Ql&&this.wo(new Tn(this.DF.Yu,t))}VF(t){const e=!this.DF.Oc&&t<=qb.Jf,i=!this.WF&&this.OF<=qb.Jf;return e&&!i}get FF(){return!this.DF.Oc&&this.WF}sr(){this.OF=qb.Jl,this.WF=!0,this.BF=!1,this.xF=!1}bn(){this.Bo(),this.LF&&this.DF.pn(cb.nd,this.qF),this.DF.pn(Uv.no,this.zF),this.DF.pn(Uv.Ff,this.XF),this.DF.pn(cb.Lf,this.GF)}constructor(t,e=!1){super(),this.DF=t,this.LF=e,this.OF=qb.Jl,this.WF=!0,this.BF=!1,this.xF=!1,this.GF=t=>{const e=this.DF.Vc;e!==this.OF&&this.wo(new xr(t.currentTime,e)),e===qb.Jl&&(this.BF=!1,this.xF=!1),this.RF(e),this.NF(e),this.HF(e),this.maybeDispatchCanPlayThroughEvent(e),this.MF(e),this.UF(e),this.OF=e},this.zF=()=>{this.UF(this.OF),this.MF(this.OF),this.WF=this.DF.Oc},this.XF=()=>{this.WF=this.DF.Oc},this.qF=t=>{this.wo(new $n(t.currentTime))},this.DF.wn(cb.Lf,this.GF),this.DF.wn(Uv.no,this.zF),this.DF.wn(Uv.Ff,this.XF),this.LF&&this.DF.wn(cb.nd,this.qF)}},_k=class extends Re{get Yu(){return this.DF.Yu}get $c(){return this.DF.$c}get lt(){return this.DF.lt}get Oc(){return this.DF.Oc}get Vc(){return this.DF.Vc}Wu(){this.Bo(),this.DF.pn(fk,this.Os)}constructor(t){super(),this.DF=t,this.DF.wn(fk,this.Os)}};t(),t(),t(),t();var vk=class{QF(){return this.KF}jF(t){this.KF=t}get td(){return this.TF}get YF(){return!1}get ZF(){const t=this.JF.certificate;if(t)return Sc(t)?yi(t):fu(t)}tU(){return this.JF.licenseAcquisitionURL||this.QF()}get eU(){return!1}iU(t){return Promise.resolve()}sU(t,e){return Promise.resolve(void 0)}get Ak(){return Boolean(this.JF.useCredentials)}async nU(t,e,i,s){const n=this.rU(t,e,i,s);if(""===n.qS)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.td.FS(n);return await t.wS(e)}catch(t){return ta(t),void await this.hU(t,n.qS,s)}}rU(t,e,i,s){const n=this.oU().dS(),r=this.Ak,h={qS:this.aU(),OS:e,US:n,AS:t,Ak:r,vk:Na.POST,gk:0,ap:s,Vm:Sa.KS,pk:i};return new Qi(h)}uU(t,e){return Promise.resolve(t)}cU(t,e,i,s){return Promise.resolve(t)}oU(){return new la(this.JF.headers||{})}async hU(t,e,i){throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}aU(t,e){let i=e;const s=this.JF.queryParameters;if(!i){const t=this.tU();if(!t)return"";i=t}if(s||t){const e=Gn.Ih(i);t&&iy(e,t),s&&iy(e,s),i=e.href}return i}lU(t,e){return gk(t)}dU(t){return new x(t)}async fU(t,e,i){const s=await this.lU(t,i),n=await this.nU(s,this._U,e,i);return this.dU(n)}bn(){}constructor(t,e,i,s,n){this.KF=void 0,this.rT=t,this.vU=e,this.gU=i,this.TF=s,this._U=n,this.JF=this.wU(e)}};function gk(t){return Promise.resolve(ki(t).buffer)}var Yu=class extends vk{wU(t){return t.widevine||{}}async mU(t,e){return this.ZF?this.ZF:this.pU(new x(t),e)}pU(t,e){return super.fU(t,Qn.JS,e)}constructor(t,e,i,s){super(tv,t,e,i,s)}};t();var yt=function(t){return t.Lm="Widevine",t.yU="PlayreadyV2",t.AU="PlayreadyV3",t.Mm="PlayreadyV2",t.Om="Fairplay",t}({}),wk={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function mk(t,e){var i,s,n,r;const h=wk[e],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(i=Gn.vm)?void 0:i.Zs,OSVersion:null==(s=Gn.vm)?void 0:s.Im,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=Gn.vm)?void 0:n.Cm,DeviceModel:null==(r=Gn.vm)?void 0:r.Rm}}}function pk(t,e){if(!t.accountName)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, accountName is not set.");if(!t.customerName)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, customerName is not set.");if(!t.portalId)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, portalId is not set.");throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration.")}function yk(t,e,i){let s;if(QA(t))s={AuthToken:t.authToken,Payload:e};else{if(!KA(t))throw pk(t,i);s={LatensRegistration:mk(t,i),Payload:e}}return Lg(JSON.stringify(s))}async function Ak(t,e,i){const s=t.Uk;if(!s)throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,e);const n=s;let r,h;try{r=await n.vS(i),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.FS.qS,n.MS,n.VS,h)}t();var bk=class extends Yu{static bU(){return Gn.Zs.dw?"required":"optional"}hU(t,e,i){return Ak(t,e,i)}iU(t){return this.TU?Dc(this.TU.Pf,t):(this.TU=new ue,Promise.resolve())}async lU(t,e){const i=this.vU;if(!i)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return yk(i,Ps(t),yt.Lm)}dU(t){let e;if(!t.license)throw new ga(X.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return e=yi(t.license),e}SU(t){return Promise.resolve(new x(t))}async mU(t,e){this.kU();const i=await this.lU(t,e),s=await this.nU(i,Gs.aS,Qn.$S,e);return await this.SU(s)}async pU(t,e){const i=await super.pU(t,e);return this.kU(),i}kU(){this.TU||(this.TU=new ue),this.TU.Xf()}bn(){this.TU&&this.TU.tf(),super.bn()}constructor(t,e,i){super(t,e,i,Gs.uS),this.TU=void 0}};t();var Tk=class extends Yu{get EU(){if(jA(this.vU))return this.vU.token}async lU(t,e){const i=await gk(t),s=this.gU,n=Pg(new x(i)),r=this.EU;if(void 0===r)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,e,i){super(t,e,i,Gs.aS),this.jF("https://widevine-proxy.drm.technology/proxy")}};function Sk(t,e){let i=e||{};return t.ticket&&t.sessionId&&(i=yh({},i,{SessionId:t.sessionId,Ticket:t.ticket})),yh({},i,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}t(),t();var kk=class extends Yu{aU(t,e){let i=t;return zA(this.vU)&&(i=Sk(this.vU,i)),super.aU(i,e)}constructor(t,e,i){super(t,e,i,Gs.aS),this.jF("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};t(),t();var Ek="Conax-Custom-Data";function Pk(t,e,i){const s=t&&qA(t)&&t;if(s&&!i.has(Ek)){const t=DA(s)?s.token:void 0,n=DA(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:e+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});i.set(Ek,r)}return i}var Ik=class extends Yu{oU(){const t=super.oU();return Pk(this.vU,"Widevine",t)}constructor(t,e,i){super(t,e,i,Gs.aS),this.jF("https://connect.conax.com:8094/license")}};function Ck(t){const e=an(new x(t));return yi(JSON.parse(e).license)}function Rk(t){return"string"==typeof t.token?t.token:Lg(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function xk(t,e,i){let s;return s=i.token?"x-dt-auth-token":"dt-custom-data",t.set(s,e),t}t(),t();var Dk=class extends Yu{get EU(){return Rk(this.vU)}dU(t){return Ck(t)}oU(){return xk(super.oU(),this.EU,this.vU)}constructor(t,e,i){super(t,e,i,Gs.aS),this.jF("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};t();var Nk=class extends Yu{oU(){const t=super.oU(),e=this.vU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i){super(t,e,i,Gs.aS)}};async function Bk(t,e,i,s){if(!YA(t))throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new la;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:e,licenseType:o,streamId:h},u={qS:t.ticketAcquisitionURL,OS:Gs.uS,US:n,vk:Na.POST,AS:JSON.stringify(a),ap:s},c=await i.FS(u);return await c.vS()}t(),t();var Mk=class extends Yu{oU(){const t=super.oU();return t.set("Content-Type","application/json"),t}async lU(t,e){const i=Mg(t.buffer),s=this.vU,n=await Bk(s,"widevine_modular",this.td,e);this.jF(n.licenseServerUrl);const r=Ag(JSON.stringify({payload:i,ticket:n.ticket}));return super.lU(r,e)}dU(t){return yi(t.license)}constructor(t,e,i){super(t,e,i,Gs.uS)}};t();var Lk=class extends Yu{oU(){if(!pa(this.vU))throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.oU();return t.set("X-AxDRM-Message",this.vU.token),t}constructor(t,e,i){super(t,e,i,Gs.aS)}};function Ok(t){const e=new x(2*t.length);for(let i=0;i<t.length;i+=1)e[2*i]=t.charCodeAt(i),e[2*i+1]=0;return e}t();var Mc=class extends vk{wU(t){return t.playready||{}}oU(){const t=new la(this.PU);return t._S(super.oU()),t}IU(t){return t.length>=1&&t[0].TE.length>0}sU(t){const e=this.vU.playready.customData;if(e){const t=Ok(e),i=Ok('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Ps(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{bT:i}})}return super.sU(t)}async lU(t,e){const i=await gk(t);return this.CU(i)}async CU(t){var e,i;let s=null;const n=mg(new DataView(t),new lh,!0);let r;try{r=Gn.vE(n)}catch(t){return s}const h=null==(e=r.EE("PlayReadyKeyMessage")[0])?void 0:e.EE("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.EE("Challenge"))?o:[];this.IU(a)&&(s=Bg(a[0].DE));const u=new la;var c;const l=null!=(c=null==h||null==(i=h.EE("HttpHeaders")[0])?void 0:i.EE("HttpHeader"))?c:[];for(const t of l){const e=t.EE("name")[0].DE,i=t.EE("value")[0].DE;u.append(e,i)}return this.PU=u,s}mU(t,e){return Promise.resolve(t)}pU(t,e){return super.fU(t,Qn.ek,e)}constructor(t,e,i){super(U,t,e,i,Gs.aS),this.PU=void 0}};t(),t();var Fk=class t{static RU(t){return"3"===t.version?yt.AU:yt.yU}xU(){const t={};if(this.Eb===yt.AU){const e={LatensRegistration:mk(this.DU,yt.AU)};t["X-TITANIUM-DRM-CDATA"]=Lg(JSON.stringify(e))}return t}get NU(){return this.Eb}get vT(){return this.Eb===yt.yU}constructor(e){this.DU=e,this.Eb=t.RU(e)}};var Uk=class extends Mc{sU(t){const e=this.vU;if(!this.vU)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(KA(e)){const t={};return t.playready={bT:Vk(e,this.BU.NU)},Promise.resolve(t)}return Promise.reject(pk(e,yt.Mm))}oU(){const t=new la(this.BU.xU());return t._S(super.oU()),t}async hU(t,e,i){const s=t.Uk;if(!s)throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let n,r;try{const t=await s.mS(i),e=an(new x(t)),o=Gn.vE(e);if(o){const t=function(t,e){return function(t,e){const i=t.m.slice(),s=[];for(;i.length>0;){const t=i.shift();e(t)?s.push(t):i.push(...t.m)}return s}(t,(t=>t.PE===e))}(o,"CustomData");var h;if(t.length>0)n=JSON.parse(t[0].DE),r=null==(h=n.DrmErr)?void 0:h.desc}}catch(t){}throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,s.MS,s.VS,r)}IU(t){if(1!==t.length)throw new ga(X.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,e,i){super(t,e,i),this.BU=new Fk(this.vU)}};function Vk(t,e){const i=mk(t,e),s=i.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Lg('<LatensRegistration formatversion="'+s+'"><AccountName>'+i.AccountName+"</AccountName><CustomerName>"+i.CustomerName+"</CustomerName><PortalID>"+i.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+i.DeviceInfo.DeviceType+"</DeviceType><OSType>"+i.DeviceInfo.OSType+"</OSType><OSVersion>"+i.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+i.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+i.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+i.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+i.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+i.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=Tg(n,!0);return Tg('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Ps(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}t();var Hk=class extends Mc{get EU(){if(jA(this.vU))return this.vU.token}IU(t){if(1!==t.length)throw new ga(X.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}aU(t,e){const i=yh({},t||{},{token:this.EU});return super.aU(i,e)}constructor(t,e,i){super(t,e,i),this.jF("https://playready-license.drm.technology/rightsmanager.asmx")}};t();var Wk=class extends Mc{aU(t,e){let i=t;return zA(this.vU)&&(i=Sk(this.vU,i)),super.aU(i,e)}constructor(t,e,i){super(t,e,i),this.jF("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};t();var qk=class extends Mc{oU(){const t=super.oU();return Pk(this.vU,"PlayReady",t)}constructor(t,e,i){super(t,e,i),this.jF("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};t();var zk=class extends Mc{get EU(){return Rk(this.vU)}dU(t){const e=function(t){const e=an(new x(t));return Kc(e,"<?xml")?0:1}(t);return 1===e?Ck(t):super.dU(new x(t))}oU(){return xk(super.oU(),this.EU,this.vU)}constructor(t,e,i){super(t,e,i),this.jF("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};t();var Xk=class extends Mc{oU(){const t=super.oU();return this.MU&&t.set("Ticket",this.MU),t.set("Content-Type","text/xml"),t}async lU(t,e){const i=this.vU,s=await Bk(i,"playready",this.td,e);return this.jF(s.licenseServerUrl),this.MU=s.ticket,super.lU(t,e)}constructor(t,e,i){super(t,e,i)}};t();var Gk=class extends Mc{oU(){if(!pa(this.vU))throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.oU();return t.set("X-AxDRM-Message",this.vU.token),t}};t(),t();var zu=function(t){return t.uS="application/json",t.LU="application/x-www-form-urlencoded",t.OU="application/octet-stream",t.lS="text/plain;charset=UTF-8",t}({}),ka=class extends vk{get eU(){return!0}FU(){return this.JF.certificateURL||this.UU}VU(t){this.UU=t}lU(t){return Promise.resolve(this.HU(t,this.WU))}HU(t,e){return"spc="+encodeURIComponent(Ps(t))+"&assetId="+encodeURIComponent(e)}get qU(){return zu.LU}wU(t){return t.fairplay||{}}zU(t){const e=t.indexOf("?");if(e>=0)return Promise.resolve(t.substr(e+1));{const e=t.split("skd://").pop();if(e){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))return Promise.resolve(e)}const i=t.split("/");return Promise.resolve(i[i.length-1])}}async sU(t){var e;const i=null!=(e=this.XU)?e:kg(new x(t)),s=await this.zU(i);this.WU=s;const n={};return n.fairplay={RT:s},n}oU(){const t=super.oU();return t.set("Content-Type",this.qU),t}async mU(t,e){return this.ZF?this.ZF:await this.GU(e)}pU(t,e){return super.fU(t,Qn.YS,e)}QU(t){const e=this.FU(),i=this.oU(),s={qS:e,OS:Gs.aS,US:i,vk:Na.GET,Ak:!1,AS:null,gk:0,ap:t,Vm:Sa.KS,pk:Qn.ZS};return new Qi(s)}async GU(t){const e=this.QU(t),i=await this.td.FS(e),s=await i.mS();return new x(s)}dU(t){let e;if("string"==typeof t){let i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),e=yi(i)}else e=new x(t);return e}aU(t,e){let i=super.aU(t,e);return Kc(i,"skd:")&&(i=i.substr(4)),i}constructor(t,e,i,s,n){super(t.rT,e,i,s,n),this.WU="",this.UU=void 0,this.XU=t.KU}};t();var Qk=class extends ka{get qU(){return zu.OU}zU(t){let e=t.split("://",1);return"skd"!==e[0].slice(-3).toLowerCase()?Promise.resolve(""):(e=t.split(";",2),e.length>1?Promise.resolve(e[1]):Promise.resolve(super.zU(t)))}async lU(t){return t}dU(t){return new x(t)}aU(t,e){const i=t||{};return i.p1=Oc(),super.aU(i,e)}constructor(t,e,i,s){super(t,e,i,s,Gs.aS)}};t();var Kk=class extends ka{get qU(){return zu.uS}get EU(){if(!jA(this.vU))throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.vU.token}HU(t,e){const i={token:this.EU,contentId:e,payload:Ps(t)};return JSON.stringify(i)}dU(t){return new x(t)}oU(){const t=super.oU();return t.set("x-vudrm-token",this.EU),t}constructor(t,e,i,s){super(t,e,i,s,Gs.aS),this.jF("https://fairplay-license.drm.technology/license"),this.VU("https://fairplay-license.drm.technology/certificate")}};t();var jk="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",Yk="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",Zk=class extends ka{dU(t){const e=function(t){let e;try{e=JSON.parse(t).ckc}catch(t){throw new ga(X.CONTENT_PROTECTION_LICENSE_INVALID,jk)}if(!e)throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,Yk);return e}(an(new DataView(t)));return super.dU(e)}constructor(t,e,i,s){super(t,e,i,s,Gs.aS)}};t();var Jk=class extends ka{get qU(){return zu.uS}async lU(t){const e=this.vU;if(!e)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return yk(e,Ps(t),yt.Om)}dU(t){try{let e;if(Sc(t)){const i=t.trim();e=JSON.parse(i)}else e=t;if(e.license){const t=Bg(e.license);return new x(t)}throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new ga(X.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}hU(t,e,i){return Ak(t,e,i)}constructor(t,e,i,s){super(t,e,i,s,Gs.uS)}};t();var $k=class extends ka{FU(){const t=super.FU();if(!t)return t;const e=Gn.Ih(t),i=this.vU;return zA(i)&&iy(e,{accountId:i.accountId,applicationId:i.applicationId||""}),e.href}zU(t){return zA(this.vU)?Promise.resolve(this.vU.contentId):super.zU(t)}async lU(t){return t}dU(t){return new x(t)}get qU(){return zu.OU}aU(t,e){let i=t;return zA(this.vU)&&(i=function(t,e){return yh({},Sk(t,e),{KeyId:t.keyId})}(this.vU,i)),super.aU(i,e)}constructor(t,e,i,s){super(t,e,i,s,Gs.aS),this.jF("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.VU("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};t();var tE=class extends ka{oU(){const t=super.oU();return Pk(this.vU,"FairPlay",t)}async GU(t){const e={qS:this.FU(),OS:Gs.aS,US:{},vk:Na.GET,Ak:!1,AS:null,gk:0,ap:t,Vm:Sa.KS,pk:Qn.ZS},i=await this.td.FS(e),s=await i.mS();return new x(s)}async lU(t){return t}zU(t){const e=t.indexOf("?");if(0===t.indexOf("skd://")){let i;return i=e>=0?t.substring(6,e):t.substring(6),Promise.resolve(function(t){return an(yi(t))}(i))}return Promise.resolve("unknown")}dU(t){try{const e=JSON.parse(t);return new x(Bg(e.CkcMessage))}catch(t){throw new v("CFLRW-66")}}constructor(t,e,i,s){if(super(t,e,i,s,Gs.lS),!qA(e))throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.jF("https://connect.conax.com:8097/license")}};t();var eE=class extends ka{zU(t){return Kc(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new ga(X.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}HU(t,e){return"spc="+Ps(t)+"&assetId="+e}constructor(t,e,i,s){super(t,e,i,s,Gs.lS),this.jF(OA[as.Om])}};t();var iE=class extends ka{get EU(){return Rk(this.vU)}HU(t,e){const i="spc="+encodeURIComponent(Ps(t))+"&"+encodeURI(e);return"persistent"===this.JF.licenseType?i+"&offline=true":i}oU(){return xk(super.oU(),this.EU,this.vU)}constructor(t,e,i,s){super(t,e,i,s,Gs.lS),this.jF("https://lic.drmtoday.com/license-server-fairplay/")}};t();var sE=class extends ka{zU(t){let e=t;return Kc(e,"skd:")&&(e="http:"+e.substring(4)),Kc(e,"http:")||Kc(e,"https:")?Promise.resolve(Gn.Ih(e).hostname):Promise.reject(new v("Could not parse ExpressPlay FairPlay content ID."))}async lU(t){return t}dU(t){return new x(t)}get qU(){return zu.OU}constructor(t,e,i,s){super(t,e,i,s,Gs.aS)}};t();var nE=class extends ka{oU(){const t=super.oU(),e=this.vU.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i,s){super(t,e,i,s,Gs.lS)}};t();var rE=class extends ka{async GU(t){const e=this.FU(),i=this.oU(),s={qS:e,OS:Gs.uS,US:i,vk:Na.POST,ap:t,Vm:Sa.KS,pk:Qn.ZS},n=await this.td.FS(s),r=await n.vS();return new x(yi(r.certificate))}get qU(){return zu.uS}async pU(t,e,i){void 0===i&&(i=Gs.lS);const s=Ps(t),n=this.vU,r=await Bk(n,"fairplay",this.td,e),h=Ag(JSON.stringify({spc:s,ticket:r.ticket})),o={qS:this.tU(),OS:Gs.uS,US:this.oU(),vk:Na.POST,AS:h,gk:0,ap:e,Vm:Sa.KS,pk:Qn.YS},a=await this.td.FS(o);return yi((await a.vS()).licence)}constructor(t,e,i,s){if(super(t,e,i,s,Gs.uS),!YA(e))throw new v("Invalid Xstream DRM configuration")}};t();var hE=class extends ka{HU(t,e){return Ps(t)}dU(t){if(0===t.length)throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.dU(t)}oU(){const t=super.oU();return t.set("Content-Type","text/plain"),t}constructor(t,e,i,s){super(t,e,i,s,Gs.lS)}};t();var oE=class extends ka{get qU(){return zu.uS}HU(t,e){return t}dU(t){return new x(t)}oU(){if(!pa(this.vU))throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.oU();return t.set("X-AxDRM-Message",this.vU.token),t}constructor(t,e,i,s){super(t,e,i,s,Gs.aS)}};t();var aE=class extends ka{get qU(){return zu.lS}HU(t,e){const i={spc:Ps(t)};return JSON.stringify(i)}zU(t){const e=Gn.Ih(t);return this.jU=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new ga(X.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}aU(t,e){let i=this.tU();return!i&&this.jU&&(i=this.jU),i&&(i=i.replace("skd://","https://")),super.aU(t,e||i)}dU(t){try{let e;if(e=Sc(t)?JSON.parse(t.trim()):t,e.ckc)return yi(e.ckc)}catch(t){throw new ga(X.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,e,i,s){super(t,e,i,s,Gs.uS),this.jU=void 0}};t(),t(),t();var ot=class{YU(t){return this.ZU(t)}JU(t,e){throw new p(e+" must be "+this.$U+". (Received: "+t+")")}constructor(t,e){this.ZU=t,this.$U=e}},uE=(new ot((function(t){return!0}),"any"),new ot(rh,"a number")),cE=new ot(Sc,"a string"),lE=new ot(Me,"a boolean"),dE=(new ot(tt,"a date"),new ot(Bl,"undefined"),new ot(nh,"an object"),new ot((function(t){return null===t}),"null"),new ot((function(t){return null==t}),"null or undefined"),class{YU(t){if(!nh(t))return!1;for(const e of g.keys(this.Hw)){if(!this.Hw[e].YU(t[e]))return!1}return!0}JU(t,e){if(!nh(t))throw new p(e+" must be an object.");for(const i of g.keys(this.Hw)){const s=this.Hw[i];if(!s.YU(t[i]))return s.JU(t[i],e+"."+String(i))}throw new p}constructor(t){this.Hw=t}});var fE=function(t){return new dE(t)}({responseCode:uE,isException:lE,description:cE,title:cE,correlationId:cE});async function _E(t,e,i,s,n){const r=function(t,e,i,s){const n={token:e.token,account:e.accountId,form:"json"},r=decodeURIComponent(function(t,e){const i=Gn.Ih(t);return iy(i,e),i.toString()}(i,n)),h=new la({});h.append("Content-Type","application/json");const o=Ps(t),a={getFairplayLicense:{releasePid:e.releasePid,spcMessage:o}};return{qS:r,OS:Gs.lS,US:h,vk:Na.POST,AS:JSON.stringify(a),ap:s,Vm:Sa.KS,pk:Qn.YS}}(t,e,i,n);return await async function(t,e){const i=await e.FS(t),s=await i.vS();if(fE.YU(s))throw new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.qS,s.responseCode);return yi(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var vE=class extends ka{zU(t){const e=t.replace("FairPlay",this.tV.releasePid);return super.zU(e)}async pU(t,e){return await _E(t,this.tV,this.tU(),this.td,e)}constructor(t,e,i,s){super(t,e,i,s,Gs.aS),this.tV=e}};t();var gE=class extends vk{wU(t){return t.clearkey||{}}async nU(t,e,i,s){const n=this.JF;if(this.tU())return super.nU(t,this._U,i,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let e=t;return e||(e={}),{kty:"oct",kid:e.id,k:e.value}}))};return ro(JSON.stringify(t)).buffer}throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}mU(t,e){return Promise.resolve(new x(0))}async pU(t,e){const i=await super.fU(t,Qn.nk,e),s=JSON.parse(kg(i));if(s.keys)for(const t of s.keys)t.k&&(t.k=Yv(t.k)),t.kid&&(t.kid=Yv(t.kid));return ro(JSON.stringify(s))}constructor(t,e,i){super(yo,t,e,i,Gs.aS)}};t();var te=class extends Yu{};t(),t();var wE={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function mE(t,e,i){const s=TE(e),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(e);const r=await Dc(Promise.resolve(n.call(t,s)),i);return Eg(r)?fu(r):bE(yh({},wE,r))}async function pE(t,e,i,s,n){const r=t.onCertificateResponse,h=AE(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);return fu(await Dc(Promise.resolve(r.call(t,h)),n))}async function pe(t,e,i,s){const n=await async function(t,e,i,s){const n=null==t?void 0:t.onLicenseRequest,r=yE(e,i);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await Dc(Promise.resolve(n.call(t,r)),s);if(Eg(h))return fu(h).buffer;return yh({fairplaySkdUrl:void 0},wE,h)}(t,e,i,s);return n instanceof ArrayBuffer?n:bE(n)}async function qs(t,e,i,s,n,r){const h=yE(i,n),o=await async function(t,e,i,s,n){const r=null==t?void 0:t.onLicenseResponse,h=AE(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);0;const o=await Dc(Promise.resolve(r.call(t,h)),n);return fu(o)}(t,new x(e),h,s,r);return fu(o)}function yE(t,e){return yh({},TE(t),{fairplaySkdUrl:e})}function AE(t,e,i){return{url:i.WS,status:i.MS,statusText:i.VS,headers:i.US.dS(),body:t,request:e}}function bE(t){return new Qi({qS:t.url,vk:t.method,US:t.headers,AS:t.body,Ak:t.useCredentials,Vm:Sa.KS})}function TE(t){var e;return{url:t.qS,body:null!=(e=SE(t.AS))?e:null,headers:t.US.dS(),method:t.vk,useCredentials:t.Ak}}function SE(t){if(t)return"string"==typeof t?ro(t):t instanceof ArrayBuffer?new x(t):Cg(t)?Ht(t):void 0}var kE=class extends Mc{mU(t,e){return Promise.resolve(t)}async pU(t,e){const i=await this.CU(ki(t).buffer),s=this.rU(i,Gs.aS,Qn.ek,e),n=await pe(this.eV,s,void 0,e);if(n instanceof ArrayBuffer)return new x(n);if(""===n.qS)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.td.FS(n),i=await t.mS(e);return await qs(this.eV,i,s,t,void 0,e)}catch(t){throw ta(t),new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,e,i,s){super(t,e,i),this.eV=s}};t();var EE=class extends te{async mU(t,e){if(this.ZF)return this.ZF;const i=this.rU(t,Gs.aS,Qn.$S,e),s=await mE(this.eV,i,e);if(s instanceof x)return s;if(""===s.qS)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.td.FS(s),r=await n.mS(e)}catch(t){throw ta(t),new ga(X.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=yE(i,void 0);return await pE(this.eV,new x(r),h,n,e)}async pU(t,e){const i=this.rU(t,Gs.aS,Qn.JS,e),s=await pe(this.eV,i,void 0,e);if(s instanceof ArrayBuffer)return new x(s);if(""===s.qS)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.td.FS(s),n=await t.mS(e);return await qs(this.eV,n,i,t,void 0,e)}catch(t){throw ta(t),new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,e,i,s){super(t,e,i,Gs.aS),this.eV=s}};t();var PE=class extends ka{async mU(t,e){if(this.ZF)return this.ZF;const i=this.QU(e),s=await mE(this.eV,i,e);if(Cg(s))return s;try{const t=await this.td.FS(s),n=await t.mS(),r=yE(i,void 0);return await pE(this.eV,new x(n),r,t,e)}catch(t){throw ta(t),new ga(X.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async pU(t,e){const i=this.rU(t,Gs.aS,Qn.YS,e),s=await pe(this.eV,i,this.iV,e);if(s instanceof ArrayBuffer)return new x(s);if(""===s.qS)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.td.FS(s),n=await t.mS(e);return await qs(this.eV,n,i,t,this.iV,e)}catch(t){throw ta(t),new ga(X.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}zU(t){var e;return this.iV=t,(null==(e=this.eV)?void 0:e.extractFairplayContentId)?Promise.resolve(this.eV.extractFairplayContentId(t)):super.zU(t)}constructor(t,e,i,s,n){super(t,e,i,s,Gs.aS),this.eV=n}},we=class{sV(t,e,i,s){switch(t.rT.Vm){case as.Lm:return this.nV(e,i,s);case as.Mm:return this.rV(e,i,s);case as.Om:return this.hV(t,e,i,s);case as.Fm:default:return this.oV(e,i,s)}}nV(t,e,i){const s=function(t){return t.integration===CA&&Sc(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&Hc.BC.xC(s,Pi)){const n=Hc.BC.NC(s,Pi,t);return new EE(t,e,i,n)}switch(s){case sr:return new bk(t,e,i);case bA:return new Tk(t,e,i);case AA:return new kk(t,e,i);case wa:return new Ik(t,e,i);case fa:return new Dk(t,e,i);case kA:return new Nk(t,e,i);case ha:return new Mk(t,e,i);case bu:return new Lk(t,e,i);default:return new te(t,e,i,Gs.aS)}}rV(t,e,i){const s=t.integration;if(s&&Hc.BC.xC(s,ms)){const n=Hc.BC.NC(s,ms,t);return new kE(t,e,i,n)}switch(s){case sr:return new Uk(t,e,i);case bA:return new Hk(t,e,i);case AA:return new Wk(t,e,i);case wa:return new qk(t,e,i);case fa:return new zk(t,e,i);case ha:return new Xk(t,e,i);case bu:return new Gk(t,e,i);default:return new Mc(t,e,i)}}hV(t,e,i,s){const n=e.integration;if(n&&Hc.BC.xC(n,Hh)){const r=Hc.BC.NC(n,Hh,e);return new PE(t,e,i,s,r)}switch(n){case yA:return new Qk(t,e,i,s);case bA:return new Kk(t,e,i,s);case TA:return new Zk(t,e,i,s);case sr:return new Jk(t,e,i,s);case AA:return new $k(t,e,i,s);case wa:return new tE(t,e,i,s);case cn:return new eE(t,e,i,s);case fa:return new iE(t,e,i,s);case SA:return new sE(t,e,i,s);case kA:return new nE(t,e,i,s);case ha:return new rE(t,e,i,s);case EA:return new hE(t,e,i,s);case bu:return new oE(t,e,i,s);case PA:return new aE(t,e,i,s);case IA:return new vE(t,e,i,s);default:return new ka(t,e,i,s,Gs.lS)}}oV(t,e,i){return new gE(t,e,i)}aV(t){return t.Vm===as.Mm||t.Vm===as.Lm||t.Vm===as.Om||t.Vm===as.Fm}vT(t,e){var i;if(t.Vm!==as.Mm)return!1;if(Ee(null==(i=e.playready)?void 0:i.customData))return!0;const s=e.integration;return(!s||!Hc.BC.xC(s,Hh))&&(s===sr&&new Fk(e).vT)}bU(t,e){if(t.Vm!==as.Lm)return;const i=e.integration;return i&&Hc.BC.xC(i,Hh)?void 0:i===sr?bk.bU():void 0}};t(),t(),t();var IE="theoplayer-stored-network-info-v2",CE=25e5,Ke=class{uV(t){var e;const i=null==(e=Gn.KE)?void 0:e.xy(t);if(void 0===i)return;const s=JSON.parse(i);if(void 0!==s&&void 0!==s[this.cV]){if(!this.lV(s))return s[this.cV].availableBandwidth;var n;null==(n=Gn.KE)||n.Dy(t,JSON.stringify({}))}}dV(){const t=this.uV(IE);if(void 0!==t)return t;const e=this.uV("theoplayer-stored-network-info");return e?8*e:void 0}lV(t){const e=t[this.cV].storedTimestamp;return!!e&&Oc()-e>36e5}fV(t){this._V=t,this.vV()}gV(){var t;return null!=this._V||(this._V=null!=(t=this.dV())?t:CE),this._V}constructor(){this.cV=Rp,this._V=void 0,this.vV=Zi((()=>{var t;const e={[this.cV]:{availableBandwidth:this._V,storedTimestamp:Oc()}};null==(t=Gn.KE)||t.Dy(IE,JSON.stringify(e))}),1e4)}};Ke.Gg=new Ke,t();var hu=function(t){return t[t.wV=0]="wV",t[t.mV=1]="mV",t[t.pV=2]="pV",t[t.yV=3]="yV",t[t.AV=4]="AV",t[t.bV=5]="bV",t[t.cC=6]="cC",t[t.TV=7]="TV",t[t.SV=8]="SV",t[t._C=9]="_C",t[t.kV=10]="kV",t[t.vC=11]="vC",t[t.EV=12]="EV",t}({});t();var hh=class{get PV(){return 0}get CV(){return 0}RV(t){}};t(),t();var RE=class extends o{constructor(t){super("contentProtectionsTracked"),this.xV=t}},Xa=class extends Re{DV(t){this.DU=t}bU(t){const e=this.DU;if(void 0!==e)return this.NV.bU(t,e)}vT(t){const e=this.DU;return void 0!==e&&this.NV.vT(t,e)}BV(t){const e={rT:t.rT,MV:t.MV||[],LV:t.LV,KU:t.KU},i=this.NV.sV(e,this.DU||{},t.gU,this.TF);return e.LV&&i.jF(e.LV),new xE(i)}OV(t){if(!t)return;bv(t,(t=>void 0!==t.gU))&&this.wo(new RE(t))}constructor(t,e=new we){super(),this.DU=void 0,this.TF=t,this.NV=e}},xE=class{iU(t){return this.FV.iU(t)}sU(t,e,i){return this.FV.sU(e,i)}eU(){return this.FV.eU||void 0!==this.FV.ZF}mU(t,e){return this.FV.mU(t,e)}pU(t,e,i){return e&&this.FV.jF(e),this.FV.pU(t,i)}Wu(){this.FV.bn()}constructor(t){this.FV=t}};t();var je=class extends Tr{UV(t){this.VV.push(t);for(const e of t.RI)this.tt(e);this.HV(t)}WV(t){Ko(this.VV,t),this.qV(t);for(const e of t.RI)this.zV(e)||this.it(e)}zV(t){for(const e of this.VV)if(e.NI(t))return!0;return!1}HV(t){t.wn(ie.nI,this.XV),t.wn(ie.hI,this.GV)}qV(t){t.pn(ie.nI,this.XV),t.pn(ie.hI,this.GV)}bn(){for(;this.VV.length>0;)this.WV(this.VV[0]);super.bn()}ya(){return va(this)}constructor(t){super(),this.VV=[],this.XV=t=>{this.tt(t.Ht)},this.GV=t=>{const e=t.Ht;this.zV(e)||this.it(e)};for(const e of t)this.UV(e)}};t(),t();var DE,NE={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},mt=class{get ba(){return null!=this.Zu||(this.Zu=function(t){return{get enabled(){return t.Rt},set enabled(e){t.Rt=ba(e)},get monitoringLivePlayback(){return t.QV},get currentLatency(){return t.dM},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.aT)}}}(this)),this.Zu}get Rt(){var t,e;return null!=(e=this.We)?e:Boolean(null==(t=this.KV)?void 0:t.Rt)}set Rt(t){this.We=t,this.KV&&(this.KV.Rt=t)}get QV(){var t,e;return null!=(e=null==(t=this.KV)?void 0:t.FB)&&e}get dM(){var t;return null==(t=this.KV)?void 0:t.lM}get aT(){return this.KV?this.KV.UB:NE}Ca(t){this.KV=t,void 0!==this.We&&(this.KV.Rt=this.We)}sr(){this.KV=void 0,this.We=void 0}};var BE=!(!a||!a.TextTrack),ME=class extends S{get dM(){}get jV(){const t=this.rM.Sl,e=this.Yu;return t.br(e,.01)}get ht(){return this.TM}get Sl(){return this.rM.Sl.ws()}get Ku(){return this.rM.Ku}set Ku(t){t&&this.rM.YV(t)}get bt(){return this.ZV}get Yu(){return void 0!==this.JV?this.JV:this.rM.Yu}set Yu(t){this.uP(t)}uP(t,e){this.wP&&(this.JV=t),this.rM.jc(t)}get ct(){return this.rM.ct}get $c(){return this.rM.$c}get lt(){return this.$V}get Rc(){return this.Wl}get vP(){}get wP(){return this.rM.wP}get pP(){return yh({},{PM:0,IM:0,CM:0,RM:0,xM:0,DM:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.rM.yP())}get tc(){return this.rM.tc}set tc(t){this.rM.tc=t}get TP(){return!0}get Oc(){return this.rM.Oc}get Hu(){return this.rM.Hu}set Hu(t){this.rM.Hu=t}get Tl(){return this.rM.tH.played}get IP(){return this.eH}set IP(t){this.eH=t,this.iH&&(this.iH.IP=t)}get Vc(){return this.rM.Vc}get Cl(){return this.rM.Cl.ws()}get Uc(){return this.rM.Uc}get sH(){return this.rM.sH}get nt(){return this.Au}get rt(){return this.kM}get LP(){return this.rM.LP}get UP(){return this.rM.UP}get Pl(){return this.rM.Pl}set Pl(t){this.rM.Pl=t}get qP(){return this.nH}get XP(){return this.rM.XP}set XP(t){this.rM.XP=t}get rH(){return this.hH}ke(){this.rM.ke()}be(){this.rM.be()}async _a(t,e,i){Bv(i),this.ZV=t;const s={Vm:A.IF,iC:t.src,yS:t.type,oH:this.aH(t),IP:this.eH,uH:t.crossOrigin,cH:e.metadata&&e.metadata.title};this.lH.DV(t.contentProtection),this.iH=await this.rM.On(s),Bv(i),e.textTracks&&this.dH(e.textTracks),dk(this.nt)}dH(t){for(const i of t)if(this.rM.fH()&&ds.uv&&BE&&!ik(i.kind,i.label)&&this._H(i)){var e;const t=null!=(e=i.kind)?e:ns.aF;this.rM.vH(i.src,t,i.label,i.srclang,i.default)}else{if(void 0===i.src)continue;this.gH.yF(i)}}_H(t){return!t.format||"webvtt"===t.format}async bl(){try{await this.rM.bl()}catch(t){}for(;!this.jV;)await this.rM.Tp(Uv.zf)}Ml(){this.rM.Ml()}jP(){return void 0!==this.rM.tH.webkitShowPlaybackTargetPicker}YP(){this.rM.tH.webkitShowPlaybackTargetPicker&&this.rM.tH.webkitShowPlaybackTargetPicker()}ZP(){this.rM.tH.webkitShowPlaybackTargetPicker&&this.rM.tH.webkitShowPlaybackTargetPicker()}QP(){return this.rM.tH}GP(){return this.rM.ja}xa(){return this.rM.wH}iI(t){return this.rM.mH(t)}async sr(){this.ZV=void 0,this.$V=void 0,this.Wl=void 0,this.iH=void 0,await this.gH.sr(),this.rM.pH(),await this.rM.sr(),this.yH.sr(),this.IP=this.eH,this.ht.sr(),this.rt.sr(),this.JV=void 0}async bn(){await this.sr(),this.Bo(),this.AH(),this.bH(),this.yH.bn(),this.rM.TH=void 0,await this.kH.SH(this.rM),this.TM.bn(),this.kM.bn(),this.Au.bn(),await this.gH.bn()}EH(){this.rM.wn(Uv.no,this.Os),this.rM.wn(Uv.Ff,this.Os),this.rM.wn(Uv.Xu,this.PH),this.rM.wn(Uv.zf,this.Os),this.rM.wn(Uv.Rf,this.Os),this.rM.wn(Uv.$f,this.Os),this.rM.wn(Uv.If,this.Ef),this.rM.wn(Uv.Df,this.Os),this.rM.wn(Uv.qu,this.Os),this.rM.wn(Uv.Bl,this.Os),this.rM.wn(Uv.Vf,this.Os),this.rM.wn(Uv.Qp,this.IH),this.rM.wn(cb.nd,this.qf),this.rM.wn(Yo.la,this.ll),this.rM.wn(Uv.Cp,this.Os),this.rM.wn(Uv.Ip,this.CH),this.rM.tH.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.RH)}AH(){this.rM.pn(Uv.no,this.Os),this.rM.pn(Uv.Ff,this.Os),this.rM.pn(Uv.Xu,this.PH),this.rM.pn(Uv.zf,this.Os),this.rM.pn(Uv.Rf,this.Os),this.rM.pn(Uv.$f,this.Os),this.rM.pn(Uv.If,this.Ef),this.rM.pn(Uv.Df,this.Os),this.rM.pn(Uv.qu,this.Os),this.rM.pn(Uv.Bl,this.Os),this.rM.pn(Uv.Vf,this.Os),this.rM.pn(Uv.Qp,this.IH),this.rM.pn(cb.nd,this.qf),this.rM.pn(Yo.la,this.ll),this.rM.pn(Uv.Cp,this.Os),this.rM.pn(Uv.Ip,this.CH),this.rM.tH.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.RH)}aH(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{rT:ev,xH:[{initDataTypes:[ev.Wm],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}DH(){const t=this.rM.tH.audioTracks,e=this.rM.tH.videoTracks;t&&(t.addEventListener("addtrack",this.NH),t.addEventListener("removetrack",this.BH),t.addEventListener("change",this.MH)),e&&(e.addEventListener("addtrack",this.LH),e.addEventListener("removetrack",this.OH),e.addEventListener("change",this.FH))}bH(){const t=this.rM.tH.audioTracks,e=this.rM.tH.videoTracks;t&&(t.removeEventListener("addtrack",this.NH),t.removeEventListener("removetrack",this.BH),t.removeEventListener("change",this.MH)),e&&(e.removeEventListener("addtrack",this.LH),e.removeEventListener("removetrack",this.OH),e.removeEventListener("change",this.FH))}hh(t){for(let e=0;e<t.U;e++){t.DI(e).zM()}}JP(){this.rM.JP()}$P(){}UH(t,e){this.$V||(this.$V=e,this.Wl=t,this.wo(new _n(t)))}constructor(t,e,i,s,n,r,h=new we,o=Ep()){super(),this.iH=void 0,this.ZV=void 0,this.$V=void 0,this.Wl=void 0,this.hH=new hh,this.nH=new mt,this.ll=t=>{const e=t.lt,i=e.code,s=new ke(rT(i),"Something went wrong during native playback.",e),n=new Fc(i,s.message,e.message);this.UH(s,n)},this.PH=()=>{this.wo(new Ph(this.Yu,this.Ku))},this.Ef=t=>{this.Oc||(this.JV=void 0),this.wo(t)},this.qf=t=>{this.JV=void 0},this.RH=()=>{this.wo(new gT(this.wP))},this.IH=()=>{this.UP>0&&this.LP>0&&this.wo(new tu)},this.NH=t=>{const e=this.rM.tH.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];FE(this.TM,i)||this.TM.tt(new Ki(i))}},this.BH=t=>{const e=[],i=this.rM.tH.audioTracks;if(i){for(const t of this.TM.RI)UE(i,t.WM)||e.push(t);for(const t of e)this.TM.it(t)}},this.MH=()=>{this.hh(this.TM)},this.LH=t=>{const e=this.rM.tH.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];FE(this.kM,i)||this.kM.tt(new vT(i))}},this.OH=t=>{const e=[],i=this.rM.tH.videoTracks;if(i){for(const t of this.kM.RI)UE(i,t.WM)||e.push(t);for(const t of e)this.kM.it(t)}},this.FH=()=>{this.hh(this.kM)},this.CH=t=>{this.wo(t),this.UH(t.errorObject,Bc(t.errorObject))},this.kH=e,this.TF=i,this.Km=o,this.rM=this.kH.VH(Be.wl),this.eH=this.rM.tH.preload,this.yH=new Ir(this.rM,!0),this.yH.wn(lb,this.Os),this.lH=new Xa(i,h),this.rM.TH=this.lH,this.EH(),this.TM=new mn,this.kM=new mn,this.DH(),this.gH=new kn(this.rM,this.TF),this.Au=new je([this.rM.nt]),this.be()}};function LE(t){var e,i;if(!(null==(e=(DE||(DE=a&&a.document&&a.document.createElement("video")),i=DE).canPlayType)?void 0:e.call(i,t.type)))return!1;if(t.useNativePlayback)return!0;const s=ds.uv||ds.Og;return!t.useManagedMediaSource||!s}var OE=class{kC(t,e,i,s,n,r,h){return new ME(t,e,i,s,n,r)}HH(t,e){return LE(t)}WH(t){return $A(t)}qH(){return!1}constructor(){this.zH=hu.EV}};function FE(t,e){for(const i of t.RI)if(i.WM===e)return i}function UE(t,e){for(let i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}var $a=class{static XH(){return this.Gg}GH(t){this.QH.push(t)}get zH(){return this.KH.zH}kC(t,e,i,s,n,r,h){let o=this.KH.kC(t,e,i,s,n,r,h);for(const t of this.QH)o=t(o,i,s);return o}HH(t,e){return this.KH.HH(t,e)}WH(t){return this.KH.WH(t)}qH(){return!1}constructor(){this.KH=new OE,this.QH=[]}};function VE(t,e){return pv(t.zH,e.zH)}$a.Gg=new $a,t(),t();var HE=class{jH(t){this.YH.push(t),this.YH.sort(VE)}async ZH(t,e){for(const i of this.YH){const s=i.HH(t,e);if(Xr(s)?await s:Boolean(s))return i}}constructor(){this.YH=[]}};function WE(t){XE.Gg.jH(t)}t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t();var Un,qE,zE,XE=class extends HE{JH(t){this.$H=t}tW(){return this.$H}async eW(t,e){const i=this.$H;let s=!1;for(const n of t){const t=await this.ZH(n,e);if(t){if(WA(n.contentProtection)||await t.WH(n.contentProtection))return{iW:n,t:t};n.contentProtection&&(s=!0)}const r=i.HH(n,e);if(Xr(r)?await r:Boolean(r)){if(WA(n.contentProtection)||await i.WH(n.contentProtection))return{iW:n,t:i};n.contentProtection&&(s=!0)}}if(s)throw await Gn.im()?new ke(X.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported."):new ke(X.CONTENT_PROTECTION_NOT_SUPPORTED,"The DRM configuration is not supported by this platform.");return{iW:t[0],t:i}}constructor(...t){super(...t),this.$H=$a.XH()}};XE.Gg=new XE,t(),t();var GE=class{bn(){Es(this.Hs)}constructor(t){this.Hs=a&&a.document&&a.document.createElement("div"),Gl(this.Hs),t.appendChild(this.Hs)}};t(),t();var Ds=function(t){return t.EV="",t.sW="none",t.lF="metadata",t.vM="auto",t}({});var QE=[Yo.la,Uv.Dp,Uv.Np,Uv.oy,Uv.Sp,Uv.Bp,Uv.Lp,Uv.zp,Uv.Xp,Uv.jp,Uv.Zp,cb.kl,cb._l,cb.jl,cb.xl,cb.Lf,cb.rd,cb.nd,Uv.Ip,Uv.Cp,Uv.Vf,Uv.Df,Uv.Rf,Uv.Wp,Uv.no,Uv.zf,Uv.Ff,Uv.qu,Uv.Qp,Uv.$f,Uv.If,Uv.Xu,Uv.Bl,Uv.Gp,Uv.qp,Uv.Kp],KE=class extends S{get ht(){return this.TM}get Sl(){return this.sa.Sl}get lt(){return this.sa.lt}get Rc(){return this.sa.Rc}get Ku(){return this.sa.Ku}set Ku(t){this.sa.Ku=t}get bt(){return this.nW}get Yu(){return this.sa.Yu}set Yu(t){this.sa.Yu=t}get ct(){return this.sa.ct}get $c(){return this.sa.$c}get vP(){return this.SM}get wP(){return this.sa.wP}get pP(){return this.sa.pP}get tc(){return this.sa.tc}set tc(t){this.sa.tc=t}get TP(){return this.sa.TP}get Oc(){return this.sa.Oc}get Hu(){return this.sa.Hu}set Hu(t){this.sa.Hu=t}get Tl(){return this.sa.Tl}get IP(){return this.eH}set IP(t){this.eH=t,this.sa&&(this.sa.IP=this.eH)}get Vc(){return this.sa.Vc}get Cl(){return this.sa.Cl}get Uc(){return this.sa.Uc}get nt(){return this.Au}get LP(){return this.sa.LP}get rt(){return this.kM}get UP(){return this.sa.UP}get Pl(){return this.sa.Pl}set Pl(t){this.sa.Pl=t}get qP(){return this.sa.qP}get rH(){return this.sa.rH}Ml(){this.sa.Ml()}bl(){const t=this.sa.bl();Xr(t)&&Ov(t)}Al(){return this._a(void 0)}KP(){}rW(){this.bM.BI=this.sa.xa(),this.TM.BI=this.sa.ht,this.kM.BI=this.sa.rt,this.Au.BI=this.sa.nt,this.SM.BI=this.sa.vP,this.sa.wn(QE,this.Os)}hW(){this.sa.pn(QE,this.Os),this.TM.BI=void 0,this.kM.BI=void 0,this.Au.BI=void 0,this.SM.BI=void 0}BP(){return this.oW}async _a(t,e){if(Bv(e),this.oW=t,!t)return;const i=t.sources.filter(jc);if(Tc(i))return;const s=await this.aW.eW(i,t);Bv(e);const n=s.iW,r=s.t,h=this.GP(),o=Zb(this);(this.uW!==r||this.lt)&&(this.hW(),await this.sa.bn(),Bv(e),this.uW=r,this.sa=this.cW(r,n),function(t,e){t.tc!==e.tc&&(t.tc=e.tc);t.Pl!==e.Pl&&(t.Pl=e.Pl);t.Hu!==e.Hu&&(t.Hu=e.Hu)}(this.sa,o),$b(this,o,this),this.rW()),this.sa.IP=this.IP,this.lW?this.sa.be():this.sa.ke(),await this.sa._a(n,t,e),Bv(e),this.dW(n),this.GP()!==h&&this.wo(new au)}dW(t){this.nW!==t&&(this.nW=t,this.wo(new Q(t)))}jP(){return this.sa.jP()}YP(){this.sa.YP()}ZP(){this.sa.ZP()}GP(){return this.sa.GP()}xa(){return this.bM}JP(){this.sa.JP()}$P(){this.sa.$P()}iI(t){return this.sa.iI(t)}async sr(){this.oW=void 0,this.dW(void 0),await this.sa.sr()}async bn(){this.Bo(),await this.sr(),await this.sa.bn(),this.TM.bn(),this.kM.bn(),this.Au.bn(),this.bM.bn(),this.SM.bn()}be(){this.lW=!0,this.sa.be()}ke(){this.lW=!1,this.sa.ke()}constructor(t,e){super(),this.uW=void 0,this.nW=void 0,this.eH=Ds.sW,this.oW=void 0,this.lW=!0,this.TM=new Ic,this.kM=new Ic,this.Au=new Qt,this.SM=new _A,this.aW=t,this.sa=e,this.sa.IP=this.IP,this.bM=new Ar(e.xa()),this.rW()}};t(),t(),t(),t();var si=function(t){return t.ca="fullscreenchange",t.pa="fullscreensupportchange",t.la="fullscreenerror",t}({});t();var Ln=class extends o{constructor(){super(si.la)}},$e=(si.ca,si.pa,si.la,class extends Re{get cs(){return!1}get ra(){return!1}fo(){this.wo(new Ln)}ko(){}bn(){this.Bo()}});t(),t();var uh=class extends o{constructor(){super(Ws.la)}},gh=class extends Re{get AM(){return!1}get yM(){return!1}async fo(){this.wo(new uh)}async ko(){this.wo(new uh)}bn(){this.Bo()}},jE=class extends Re{get Ku(){}set Ku(t){}get bt(){}get Yu(){return this.fW}set Yu(t){this.uP(t)}uP(t,e){this.fW!==t&&(this.fW=t,this.sf=!0,this.wo(new lc(this.Yu)))}get pP(){return{PM:0,IM:0,CM:0,RM:0,xM:0,DM:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get tc(){return this._W}set tc(t){this._W!==t&&(this._W=t,this.wo(new Wo(this.Yu,this.Pl)))}get Oc(){return this.if}get Hu(){return this.vW}set Hu(t){this.vW!==t&&(this.vW=t,this.wo(new Sr(this.Yu,this.Hu)))}get Uc(){return this.sf}get Pl(){return this.VA}set Pl(t){this.VA!==t&&(this.VA=t,this.wo(new Wo(this.Yu,this.Pl)))}get XP(){return!1}set XP(t){}get rH(){return this.hH}get dM(){}be(){}ke(){}bl(){this.if&&(this.if=!1,this.wo(new ah(this.Yu)),this.wo(new zt(this.Yu)))}Ml(){this.if||(this.if=!0,this.wo(new Ph(this.Yu,this.Ku)),this.wo(new ac(this.Yu)))}_a(t,e){return Promise.resolve()}jP(){return!1}YP(){}ZP(){}GP(){return this.ia}xa(){return this.Ko}iI(t){throw new v("Adding a CustomTextTrack is not supported without setting a source.")}JP(){}$P(){}async sr(){this.fW=0,this.sf=!1,this.Ml(),this.wo(new zb(this.fW))}async bn(){this.Bo(),this.ht.bn(),this.nt.bn(),this.rt.bn()}constructor(...t){super(...t),this.fW=0,this._W=!1,this.if=!0,this.vW=1,this.sf=!1,this.VA=1,this.ht=new mn,this.Sl=r.Ol().ws(),this.ct=NaN,this.$c=!1,this.lt=void 0,this.Rc=void 0,this.vP=void 0,this.wP=!1,this.TP=!0,this.Tl=r.Ol().ws(),this.IP=Ds.sW,this.Vc=qb.Jl,this.Cl=r.Ol().ws(),this.sH=void 0,this.nt=new du,this.LP=0,this.rt=new mn,this.UP=0,this.qP=new mt,this.hH=new hh,this.ia=new $e,this.Ko=new gh}},YE=class extends jE{set gW(t){this.kH=t,this.rM=t.VH(Be.wl)}QP(){var t;return null==(t=this.rM)?void 0:t.tH}async bn(){await super.bn(),this.rM&&(await this.kH.SH(this.rM),this.rM=void 0)}constructor(...t){super(...t),this.kH=void 0,this.rM=void 0}},ZE=class extends KE{get je(){return this.wW}get XP(){return this.sa.XP}set XP(t){this.sa.XP=t}KP(){super.KP(),this.pW.mW()}lr(t){Jb(this,t)}cr(){}tI(t){return!1}async _a(t,e){const i=this.GP(),s=this.QP();await super._a(t,e),this.GP()!==i&&this.wo(new au),this.QP()!==s&&this.wo(new at)}uP(t,e){this.sa.uP(t,e)}cW(t,e){return t.kC(this.wW,this.pW,this.TF,this.pl,this.yW,this.AW,this.Ic,e)}QP(){return this.sa.QP()}sP(){return this.pW.bW.map((t=>t.tH))}async bn(){await super.bn(),this.pW.bn(),this.TW.bn()}constructor(t,e,i,s,n,r,h){const o=new YE;super(XE.Gg,o),this.wW=t,this.pl=e,this.TF=i,this.yW=s,this.AW=n,this.Ic=h,this.pW=new Un(r,this.Ic),this.pW.SW(this.wW),o.gW=this.pW,this.TW=new GE(this.wW)}};t(),t();var JE=class extends S{get ht(){return this.kW}get Sl(){return r.Ol().ws()}get Ku(){return new Date(NaN)}set Ku(t){}get bt(){}get Yu(){return 0}set Yu(t){}uP(t,e){}get ct(){return 0}get je(){return this.wW}get $c(){return!0}get lt(){return this.EW}get Rc(){return this.PW}get vP(){}get pP(){return{PM:0,IM:0,CM:0,RM:0,xM:0,DM:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get tc(){return!1}set tc(t){}get TP(){return!0}get Oc(){return!0}get Hu(){return 0}set Hu(t){}get Tl(){return r.Ol().ws()}get IP(){return Ds.sW}set IP(t){}get Vc(){return qb.Jl}get Cl(){return r.Ol().ws()}get Uc(){return!1}get nt(){return this.IW}get LP(){return 0}get rt(){return this.kW}get UP(){return 0}get Pl(){return 1}set Pl(t){}get qP(){return this.nH}get XP(){return!1}set XP(t){}tI(t){return!0}ke(){}bl(){throw this.wo(new _n(this.PW)),this.EW}Ml(){}BP(){}async _a(t,e){throw Bv(e),this.wo(new _n(this.PW)),this.EW}be(){}Al(){return Promise.resolve()}QP(){}GP(){return this.ia}xa(){return this.Ko}sP(){return[]}KP(){}lr(t){}cr(){}get wP(){return!1}jP(){return!1}YP(){}ZP(){}JP(){}$P(){}iI(t){}sr(){return Promise.resolve()}bn(){return this.Bo(),this.kW.bn(),this.IW.bn(),Promise.resolve()}constructor(t,e,i){super(),this.ia=new $e,this.Ko=new gh,this.nH=new mt,this.wW=t,this.EW=e,this.kW=new mn,this.IW=new du,this.PW=i}};function $E(t){if(t&&nh(t))return yh({},t,{integration:tP(t.integration),fairplay:hP(t.fairplay),widevine:eP(t.widevine),playready:iP(t.playready),clearkey:oP(t.clearkey),aes128:aP(t.aes128),integrationParameters:uP(t.integrationParameters),preferredKeySystems:cP(t.preferredKeySystems),useOipfDrmAgent:ba(t.useOipfDrmAgent)})}function tP(t){if(Sc(t))return t}function eP(t){if(t&&nh(t))return{persistentState:sP(t.persistentState),distinctiveIdentifier:sP(t.distinctiveIdentifier),audioRobustness:nP(t.audioRobustness),videoRobustness:nP(t.videoRobustness),licenseAcquisitionURL:Sc(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:rP(t.licenseType),headers:t.headers,useCredentials:!!Me(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Sc(t.certificate)||Eg(t.certificate)?t.certificate:void 0}}function iP(t){if(!t)return;const e=eP(t);if(!e)return;return yh({},e,{customData:Sc(t.customData)?t.customData:void 0})}function sP(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function nP(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function rP(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function hP(t){if(!t)return;const e=eP(t);if(!e)return;return yh({},e,{certificateURL:Sc(t.certificateURL)?t.certificateURL:void 0})}function oP(t){if(!t)return;const e=eP(t);if(!e)return;const i=di(t.keys)?t.keys.map((t=>function(t){if(!t||!nh(t))return;const e=t.id,i=t.value;if(!Sc(e)||!Sc(i))return;return{id:e,value:i}}(t))).filter(Ee):void 0;return yh({},e,{keys:i})}function aP(t){if(nh(t))return{useCredentials:Me(t.useCredentials)?t.useCredentials:void 0}}function uP(t){if(nh(t))return t}function cP(t){return t&&di(t)?t.map((t=>rc(t))).filter(Ee):[Pi,ms,Hh]}t(),t(),t(),t();var lP={bt:void 0,Yu:0,ct:NaN,$c:!1,lt:void 0,Rc:void 0,tc:!1,Oc:!0,Hu:1,Vc:qb.Jl,Uc:!1,LP:0,UP:0,Pl:1};t();var Kt=function(t){return t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads",t.UPLYNK="uplynk",t}({}),_o=class{get RW(){return this.xW}DW(t){const e=this.xW.filter((e=>e.NW(t)));if(e.length>1)0;else if(0===e.length)throw v("Unknown ad integration: "+t.integration);return e[0]||null}BW(t){this.xW.push(t)}constructor(){this.xW=[]}};_o.Gg=new _o,t(),t(),t(),t(),t(),t(),t(),t(),t(),t(),t();var D=function(t){return t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected",t}({}),dP="agama";t(),t();var fP=function(t){return t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});t();var Js=function(t){return t.NONE="",t.PM360="360",t.PM180="180",t}({});function _P(t){switch(t){case"":return fP.NONE;case"horizontal":return fP.HORIZONTAL;case"vertical":return fP.VERTICAL;default:throw new p}}function vP(t,e){if(e)return Js.PM360;if(null==t)return Js.NONE;switch(t){case"":return Js.NONE;case"360":return Js.PM360;case"180":return Js.PM180;default:throw new p("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}t();var gP=function(t){return t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event",t}({});t();var wP="https://content.uplynk.com";function mP(t){if(!t)return!0;const e=!function(t){return Ob(t)||Mt(t)&&Ob(t[0])}(t.sources)||Tc(t.sources),i=!t.ads||pP(t.ads),s=""!==t.poster&&!t.poster;return e&&i&&s}function pP(t){return!t||di(t)&&0===t.length}function yP(t){if(t&&t.sources)return AP(t.sources)}function AP(t){return Sc(t)?kt(t):kc(t)?t.type||t.src&&kt(t.src):Mt(t)&&t.length>0?AP(t[0]):void 0}function bP(t){if(t&&t.sources)return TP(t.sources)}function TP(t){return Sc(t)?t:kc(t)?t.src:Mt(t)&&t.length>0?TP(t[0]):void 0}function SP(t,e,i){return Rb(t)?function(t,e,i){let s=yh({},Fb(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:bb.UPLYNK,id:"",prefix:wP,preplayParameters:{},playbackUrlParameters:{},assetType:gP.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Sc(t))return t;if(Mt(t)&&Sc(t[0]))return t;if(function(t){return nh(t)&&Sc(t.userId)&&(Mt(t.externalId)||Sc(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return gP.CHANNEL;case"event":return gP.EVENT;default:return gP.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=ba(t.contentProtected));t.assetInfo?s.assetInfo=ba(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=ci(t.prefix)||wP);return s.ping=function(t,e){let i=!1,s=!1,n=!1;e?(i=!!Me(e.adImpressions)&&e.adImpressions,s=!!Me(e.freeWheelVideoViews)&&e.freeWheelVideoViews,n=Me(e.linearAdData)?e.linearAdData:t!==gP.ASSET):t!==gP.ASSET&&(n=!0);return{adImpressions:i,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=EP(s,t),s=IP(s,e,i),s=PP(s,t,i),s}(t,e,i):Db(t)?function(t,e,i){var s;return yh({},kP(t,e,i),{integration:bb.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,e,i):xb(t)?function(t,e,i){return yh({},kP(t,e,i),{type:"theolive"})}(t,e,i):Nb(t)?function(t,e,i){return yh({},kP(t,e,i),{type:Ot.vC,src:t.src,streamAccountId:t.streamAccountId,subscriberToken:t.subscriberToken,connectOptions:xP(t.connectOptions),apiUrl:t.apiUrl})}(t,e,i):kP(t,e,i)}function kP(t,e,i){let s=Ub();const n=e&&(e.contentProtection||e.drm);if(Sc(t)){if(s.src=t,s.type=kt(t),n){const t=$E(n);s.contentProtection=eb(t)}}else if(kc(t)||Cb(t)||Nb(t)){s.src=t.src,s.type=t.type||kt(t.src),s.isAdvertisement=t.isAdvertisement;const e=Lb(t)?t.hesp:void 0;void 0!==e&&(s.hesp=e);Db(t)&&(s.integration=t.integration);const i=$E(t.contentProtection||t.drm||n);s.contentProtection=eb(i),t.ssai&&(s.ssai=pA(t.ssai)),s=EP(s,t)}return s=IP(s,e,i),s=PP(s,t,i),s}function EP(t,e){var i,s;e.useCredentials?t.crossOrigin=ja.aC:e.crossOrigin&&(t.crossOrigin=Pb(e.crossOrigin)),Sc(e.timeServer)&&(t.timeServer=e.timeServer),e.liveOffset&&(t.liveOffset=e.liveOffset),e.hlsDateRange&&(t.hlsDateRange=e.hlsDateRange),e.lowLatency&&(t.lowLatency=ba(e.lowLatency)),e.useNativePlayback&&(t.useNativePlayback=ba(e.useNativePlayback)),e.useManagedMediaSource&&(t.useManagedMediaSource=ba(e.useManagedMediaSource)),e.dash&&(t.dash=ib(e.dash)),e.hls&&(t.hls=sb(e.hls)),e.lcevc&&(t.lcevc=ba(e.lcevc)),e.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=Wb(e.ignoreEmbeddedTextTrackTypes)),e.latencyConfiguration&&(t.latencyConfiguration=Ab(e.latencyConfiguration)),t.seamlessSwitchStrategy=Tb(null!=(s=e.seamlessSwitchStrategy)?s:null==(i=e.dash)?void 0:i.useSeamlessPeriodSwitch);const n=Io(e.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=Io(e.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function PP(t,e,i){return t.abr=rb(Sc(e)?void 0:gc(e.abr),null==i?void 0:i.abr),t}function IP(t,e,i){var s;const n=e&&e.timeServer;return i&&i.liveOffset&&!Ee(t.liveOffset)&&(t.liveOffset=i.liveOffset),i&&i.hlsDateRange&&!Ee(t.hlsDateRange)&&(t.hlsDateRange=i.hlsDateRange),t.crossOrigin===ja.dk&&(null==e||null==(s=e.vr)?void 0:s[360])&&(t.crossOrigin=ja.oC),t.useCredentials=t.crossOrigin===ja.aC,Sc(n)&&!t.timeServer&&(t.timeServer=n),t}function CP(t){const e={src:""};if(t&&t.src){if(e.src=ci(t.src),"default"in t&&(e.default=ba(t.default)),e.kind=function(t){const e=String(t||"").toLowerCase();return jS(e)?e:e?"metadata":"subtitles"}(t.kind),bc(t.format)&&(e.format=t.format),"srclang"in t){const i=t.srclang;"string"==typeof i&&""!==i&&(e.srclang=i)}if("label"in t){const i=t.label;"string"==typeof i&&""!==i&&(e.label=i)}}return e}function RP(t,e){if(nh(t))try{return e.DW(t).MW(t)}catch(t){return}}function xP(t){if(null==t)return t;if(!nh(t))throw new v("connectOptions must be an object");return t}function Gc(t,e,i){if(void 0===i&&(i=_o.Gg),mP(t))return{sources:[Ub()]};const s=pr(t);if(s.sources=function(t,e,i){if(Ob(t))return[SP(t,e,i)];if(Mt(t)&&Ob(t[0])){const s=[];for(const n of t)s.push(SP(n,e,i));return s}return[Ub()]}(s.sources,s,e),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,e){if(!Mt(t))return[];const i=[];for(let s of t)s=RP(s,e),s&&i.push(s);return i}(s.ads,i);0===t.length?delete s.ads:s.ads=t}const n=!Tc(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Mt(t))return[];const e=[];for(let i of t)i=CP(i),""!==i.src&&e.push(i);return e}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=ci(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const e=t||{};return e.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(e.stereoMode),{panoramaMode:vP(e.panoramaMode,Boolean(e[360])),stereoMode:e.stereoMode?_P(e.stereoMode):fP.NONE,nativeVR:Boolean(e.nativeVR)}}(s.vr));if("analytics"in s||(null==e?void 0:e.analytics)){const t=Hb(s.analytics),i=e&&e.analytics||[];s.analytics=function(t,e){const i=pr(t);for(const s of e){const e=!t.some((t=>t.integration===s.integration));e&&s.integration!==dP&&i.push(s)}return i}(t,i)}return"mutedAutoplay"in s&&(s.mutedAutoplay=jb(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=nu(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}t(),t(),t();var DP=function(){function t(t){this.LW=t}return t.prototype.OW=function(t){var e,i,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.LW.charAt(64);for(e=0;e<t.length;e+=4)i=(o=this.LW.indexOf(t.charAt(e))<<18|this.LW.indexOf(t.charAt(e+1))<<12|(r=this.LW.indexOf(t.charAt(e+2)))<<6|(h=this.LW.indexOf(t.charAt(e+3))))>>>16&255,s=o>>>8&255,n=255&o,a[e/4]=String.fromCharCode(i,s,n),64===h&&(a[e/4]=String.fromCharCode(i,s)),64===r&&(a[e/4]=String.fromCharCode(i));return a.join("")},t.prototype.FW=function(t,e){var i,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.LW.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(i=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=i>>12&63,r=i>>6&63,h=63&i,u[o/3]=this.LW.charAt(s)+this.LW.charAt(n)+this.LW.charAt(r)+this.LW.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),e||(a+=c),a},t.dh=new t(function(){var t,e,i,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(e=r[t],i=0;i<e.length;i+=1)s=e.charAt(i),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.UW=new t(function(t){return t.OW("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.dh)),t}();function NP(t){return"string"==typeof t}function BP(t){return"number"==typeof t}t(),t(),t();var MP={}.toString;var Cc,LP=Array.isArray||function(t){return"[object Array]"===MP.call(t)};function Wn(t,e){return LP(t)&&t.every(e)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(Cc||(Cc={}));var Ce,OP=g.keys(Cc).map((function(t){return Cc[t]}));function FP(t){return-1!==OP.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads",t.MILLICAST="millicast"}(Ce||(Ce={}));var UP,VP=g.keys(Ce).map((function(t){return Ce[t]}));function HP(t){return-1!==VP.indexOf(t)}function WP(t){try{var e=DP.UW.OW(t),i=JSON.parse(e);if(!function(t,e){var i,s=function(t){return"object"==typeof t&&null!==t}(t),n=NP(t.key),r=NP(t.customer_id),h=BP(t.generation_date),o=BP(t.expiration_date),a=Wn(t.domains_page,NP),u=Wn(t.domains_source,NP),c=Wn(t.sdks,e?FP:NP),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?i=Wn(t.features,e?HP:NP):(i=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&l&&i))return!1;return!0}(i,!1))throw new v("The provided license could not be decoded correctly.");return i}catch(t){throw new v("The provided license could not be decoded correctly.")}}function qP(){return UP||(UP={qS:a.location.href,VW:a.parent&&a.parent!==a,HW:XP()}),UP}var zP=["http:","https:","ftp:","ws:","wss:"];function XP(){var t,e;try{var i;if(null==(i=a)?void 0:i.top)return a.top.location.href}catch(t){}return null==(e=a)||null==(t=e.document)?void 0:t.referrer}var Za=function(t){return t[t.WW=0]="WW",t[t.qW=1]="qW",t[t.zW=2]="zW",t}({}),GP=class{constructor(t,e,i,s,n=[],r="",h=Date.now(),o=[],a=!0){this.XW=t,this.GW=e,this.QW=i,this.KW=s,this.jW=n,this.YW=r,this.ZW=h,this.JW=o,this.$W=a}},QP=function(t){return t.qW="expired",t.tq="invaliddomain",t.iq="invalidsource",t.nq="invalidfeature",t.la="error",t}({}),KP=class t{rq(t,e){let i=[];Ob(t.sources)?i=[t.sources]:Mt(t.sources)&&(i=t.sources),this.hq(t,i,e),this.oq(i,e)}hq(t,e,i){if(mP(t)||0===i.QW.length||$P(i.QW))return;if(!e.every((t=>this.aq(t,i)))){const t="invalidsource",e=ii.uq(t);throw new ke(jP(t),e)}}oq(t,e){for(const i of t)kc(i)&&Lb(i)&&!i.bypassLicense&&this.Yf([Ce.HESP],e)}cq(e){return this.lq(e.JW)&&this.dq(e)?t.fq(e.KW)?0:1:2}Yf(t,e){for(const i of t)if(!Qe(e.jW,i)){const t="invalidfeature",e=ii._q(t,i);throw new ke(jP(t),e)}}lq(t){return 0===t.length||t.some((t=>this.vq(t)))}vq(t){return"web"===function(t){switch(t){case Cc.ANDROID:return ua.x_;case Cc.ANDROIDTV:case Cc.FIRETV:return ua.D_;case Cc.IOS:return ua.N_;case Cc.TVOS:return ua.B_;case Cc.CHROMECAST:case Cc.CHROMECASTCAF:return ua.M_;case Cc.THEOLIVEWEB:return ua.L_;default:return ua.R_}}(t)}static fq(t){const e=Number(new Date);return!!t&&e<=t}dq(t){return!(this.gq&&0!==t.GW.length&&!$P(t.GW))||!!(this.gq&&this.wq(t.GW)&&this.mq(t.GW))}wq(t){return tI(this.bA.qS,t)}mq(t){if(!this.bA.VW)return!0;if(this.pq)return!0;const e=this.yq();return!!e&&tI(e,t)}yq(){if(!this.bA.VW)return;const t=al.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.bA.HW?this.bA.HW:void 0}aq(e,i){return!!t.Aq(e,i.QW)}static Aq(t,e){return tI(this.bq(t),e)}static bq(t){return Sc(t)?t:kc(t)&&t.src||""}constructor(t,e,i){this.pq=t,this.Tq=e,this.bA=i,this.gq=iI(this.bA)}};function jP(t){switch(t){case"invaliddomain":return X.LICENSE_INVALID_DOMAIN;case"invalidsource":return X.LICENSE_INVALID_SOURCE;case"expired":return X.LICENSE_EXPIRED;case"invalidfeature":return X.LICENSE_INVALID_FEATURE;case"error":return X.LICENSE_ERROR}}var YP="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",ZP=Ut((()=>{const t="\\.",e="(\\*|"+YP+")";return new RegExp("ip-range\\("+e+t+e+t+e+t+e+"\\)")}));function JP(t,e){let i=t,s=e;if(!i)return!1;if(s=s.trim(),"*"===s)return!0;if(i=i.replace(/\.+$/,""),s===i)return!0;if(Kc(s,"ip-range(")){const t="\\.",e=s.match(ZP()),n=t=>"*"===t?"("+YP+")":t;if(null!==e&&5===e.length){const s=new RegExp("^"+e[1]+t+n(e[2])+t+n(e[3])+t+n(e[4])+"$");return null!==i.match(s)}}return s="."+s,-1!==i.indexOf(s,i.length-s.length)}function $P(t){return t.some((t=>"*"===t))}function tI(t,e){const i=Gn.Ih(t);if(!eI(i))return!0;for(const s of e){if(JP(i.hostname,s))return!0;if(JP(ry(t),s))return!0}return!1}function eI(t){return-1!==zP.indexOf(t.protocol)}function iI(t){const e=Gn.Ih(t.qS);return eI(e)&&!function(t){return JP(t.hostname,"localhost")}(e)&&!function(t){return JP(t.hostname,"theoplayer.doubleclick.net")}(e)}var ii=class{static _q(t,e){return"The requested feature '"+e+"' is not available with the license for this player."}static uq(t){return"invaliddomain"===t?this.Sq:"invalidsource"===t?this.kq:"expired"===t?this.Eq:"invalidfeature"===t?this.Pq:this.Iq}};ii.Iq="The license for this player is invalid.",ii.Eq="The usage license for this video player has expired.",ii.Sq="The current domain is incompatible with the license for this player.",ii.kq="The provided video source is incompatible with the license for this player.",ii.Pq="The requested feature is not available with the license for this player.",t(),t();var sI=function(t){return t[t.Cq=1]="Cq",t[t.Rq=4]="Rq",t[t.xq=5]="xq",t[t.Dq=9]="Dq",t}({});function nI(t){const e=[t.RN,t.Nq,t.Bq];switch(t.Nq){case 1:e.push(t.iC);break;case 4:e.push(t.Yu),e.push(t.lt);break;case 5:e.push(t.lt);break;case 9:e.push(t.Vm)}return e}t();var Cn=new Array(256);for(let t=0;t<256;t+=1)Cn[t]=(t<16?"0":"")+t.toString(16);function iu(){const t=Oc(),e=(4294967296*w.random()|0)+t&3029421624,i=(4294967296*w.random()|0)+t&3595553209,s=(4294967296*w.random()|0)+t&1130486254,n=(4294967296*w.random()|0)+t&1284287105;return Cn[255&e]+Cn[e>>>8&255]+Cn[e>>>16&255]+Cn[e>>>24&255]+"-"+Cn[255&i]+Cn[i>>>8&255]+"-"+Cn[i>>>16&15|64]+Cn[i>>>24&255]+"-"+Cn[63&s|128]+Cn[s>>>8&255]+"-"+Cn[s>>>16&255]+Cn[s>>>24&255]+Cn[255&n]+Cn[n>>>8&255]+Cn[n>>>16&255]+Cn[n>>>24&255]}function hn(t){return Yh(t.replace(/-/g,""))}function rI(){return Gn.Qg()}t(),t(),t();var hI,oI="theoplayer-session-id";function aI(){if(!hI){const t=Sn.xy(oI);t?hI=t:(hI=iu(),Sn.Dy(oI,hI))}return hI}t(),t();var uI=/[^\x00-\x7E]/g;function cI(t){return"\\u"+ec(t.charCodeAt(0).toString(16),4,"0")}var lI="https://license.theoplayer.com";function dI(t){const e=function(t){const e=[];return function(t,e,i){return JSON.stringify(t,e,i).replace(uI,cI)}(t,((t,i)=>{if(nh(i)){if(-1!==e.indexOf(i))return null;e.push(i)}return i}))}(function(t){return[t.Mq,t.Qb,t.XW,t.bx,t.Lq,t.Oq,t.Fq.map(nI)]}(t));return DP.UW.FW(e)}var fI=class{get Fq(){return this.Uq}Vq(){return Boolean(this.Lq)}get Lq(){return this.Hq}async Wq(t){if(!(await this.zq.qq()).$W)return;const e={Nq:sI.Cq,Bq:Oc(),iC:t};await this.Xq(e)}async Gq(t){if(!(await this.zq.qq()).$W)return;const e={Nq:sI.Dq,Bq:Oc(),Vm:t};await this.Xq(e)}async Qq(t,e){const i={Nq:sI.Rq,Bq:Oc(),Yu:e,lt:t};await this.Xq(i)}async Kq(t){const e={Nq:sI.xq,Bq:Oc(),lt:t};await this.Xq(e)}async Xq(t){const e=await this.zq.qq();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.jq.FW(e.XW)&&t.Nq!==sI.xq||(t.Nq===sI.Cq?this.Yq():this.Vq()||this.Yq(),t.RN=this.YA++,this.Uq.push(t),!function(t){return t===sI.Cq||t===sI.xq}(t.Nq)?this.Uq.length>this.Zq&&await this.Jq():await this.$q())}async $q(t){for(void 0===t&&(t=!1);this.Uq.length>0;)await this.Jq(t)}async tz(t){const e=await this.zq.qq();return{Mq:Oc(),Qb:aI(),XW:this.jq.FW(e.XW)||"dev",bx:this.Eb,Lq:this.Hq,Oq:this.ez,Fq:t}}async Jq(t){void 0===t&&(t=!1);const e=this.Uq.splice(0,this.iz),i=await this.tz(e);t?this.Pk(i):this.sz(i),this.nz=rI()}async sz(t){const e=dI(t),i=new Qi({qS:lI,AS:e,Ak:!1,OS:Gs.lS,US:{"Content-Type":zu.LU},gk:4e3,vk:Na.POST});try{const t=await this.TF.FS(i);await t.mS()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+e}}Pk(t){const e=dI(t);this.TF.Pk({qS:lI,AS:e,yS:zu.LU})}Yq(){this.Vq()&&this.$q(),this.Hq=iu(),this.YA=0}bn(){zE.rz(this.oz),ll(this.cz),this.$q()}constructor(t,e,i,s=DP.dh,n=0,r=1){this.Eb=t,this.TF=e,this.zq=i,this.jq=s,this.Zq=n,this.iz=r,this.Uq=[],this.Hq=null,this.nz=0,this.ez="unknown",this.YA=0,this.lz=()=>{rI()-this.nz>6e4&&this.$q()},this.oz=()=>{this.$q(!0)},zE.fz(this.oz),this.cz=cl(this.lz,6e4)}};t(),t(),t();var _I=0;var vI=c,Oo=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Qa=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Oo&&Qa||(Oo=function(t){const e=rI(),i=w.max(0,16-(e-_I)),s=u((()=>t(e+i)),i);return _I=e+i,s},Qa=vI),Oo=Oo.bind(self),Qa=Qa.bind(self);var gI=ds.Zv||ds.uv&&ds.vg<13;function wI(t,e,i){const s=t.getImageData(e,i,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var mI=class{get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=function(t){return{drawImage(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return t._z(e,...s)},texImage2D:(e,i,s,n,r,h)=>t.vz(e,i,s,n,r,h),requestVideoFrameCallback:e=>t.gz(e),cancelVideoFrameCallback:e=>t.wz(e)}}(this)}_z(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=this.mz;return void 0!==n&&(t.drawImage(n,...i),!0)}vz(t,e,i,s,n,r){let h=this.mz;return void 0!==h&&(gI&&(h=this.pz(h)),t.texImage2D(e,i,s,n,r,h),!0)}gz(t){const e=this.yz++,i=this.Az(t,e);return this.bz.set(e,{Tz:t,Sz:i}),e}wz(t){const e=this.bz.get(t);void 0!==e&&(this.bz.delete(t),e.Sz())}Az(t,e){const i=this.mz;if(void 0===i)return De;if(i instanceof HTMLVideoElement&&i.requestVideoFrameCallback){const s=i.requestVideoFrameCallback(((i,s)=>{this.bz.delete(e),t(i,s)}));return()=>i.cancelVideoFrameCallback(s)}{let i;const s=n=>{this.kz()?(this.bz.delete(e),this.Ez=!1,t(n,void 0)):i=Oo(s)};return i=Oo(s),()=>Qa(i)}}kz(){return(!this.t.Oc||this.Ez)&&!this.t.Uc&&this.t.Vc>=qb.Jf}pz(t){let e=this.Pz;void 0===e&&(e=h.createElement("canvas"),this.Pz=e);const i=e.getContext("2d"),s=this.t,n=s.UP,r=s.LP,o=e.width,a=e.height;i.clearRect(0,0,e.width,e.height),o===n&&a===r||(e.width=n,e.height=r),i.drawImage(t,0,0,n,r);let u=!1;return n>0&&wI(i,n-1,0)&&(e.width=o,u=!0),r>0&&wI(i,0,r-1)&&(e.height=a,u=!0),u&&i.drawImage(t,0,0,n,r),e}bn(){this.bz.forEach((t=>t.Sz())),this.bz.clear(),this.t.pn(Uv.Lp,this.Iz),this.t.pn(Uv.If,this.Cz),this.mz=void 0,this.Pz=void 0}constructor(t){this.mz=void 0,this.Zu=void 0,this.Pz=void 0,this.bz=C(),this.yz=1,this.Ez=!0,this.Cz=()=>{this.Ez=!0},this.Iz=()=>{this.mz=this.t.QP(),this.bz.forEach(((t,e)=>{t.Sz(),t.Sz=this.Az(t.Tz,e)}))},this.t=t,this.t.wn(Uv.Lp,this.Iz),this.t.wn(Uv.If,this.Cz),this.Iz()}};t(),t(),t();var to=function(t){return t.gn="dimensionchange",t}({}),pI=class extends o{constructor(t,e){super(to.gn),this.width=t,this.height=e}};t(),t();var yI,AI=class{constructor(t,e){this.je=t,this.Tz=e}},bI=class extends AI{get Rz(){return this.xz}get Dz(){return this.Nz}bn(){this.Bz.disconnect()}constructor(t,e){super(t,e),this.xz=0,this.Nz=0,this.Mz=t=>{if(t.length>0){const e=t[t.length-1].contentRect;this.Nz=e.width,this.xz=e.height,this.Tz(this.Nz,this.xz)}},this.Bz=new a.ResizeObserver(this.Mz),this.Bz.observe(this.je)}};t(),t();var TI=["Webkit","Moz","O","ms"],SI=(()=>{let t=!1;try{if(void 0!==a&&"function"==typeof a.addEventListener){const e=g.defineProperty({},"passive",{get(){t=!0}});a.addEventListener("testPassiveEventSupport",De,e),a.removeEventListener("testPassiveEventSupport",De,e)}}catch(t){}return t})(),kI=sa();function EI(t){return kI.has(t)||kI.set(t,function(t){const e=(yI||(yI=a&&a.document&&a.document.createElement("span")),yI);if(!e||!e.style)return t;if(void 0!==e.style[t])return t;const i=t.charAt(0).toUpperCase()+t.slice(1);for(const t of TI){const s=t+i;if(void 0!==e.style[s])return s}return t}(t)),kI.get(t)}function PI(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.bottom="0",e.top="0",e.overflow="scroll",e.zIndex="-1",e.visibility="hidden"}function II(t){const e=t.style;e.position="absolute",e.left="0",e.top="0",e[EI("transition")]="0s"}var CI=class extends AI{bn(){Qa(this.Lz),this.Lz=0,this.Oz.removeEventListener("scroll",this.Fz),this.Uz.removeEventListener("scroll",this.Fz),Es(this.Vz),a&&a.removeEventListener("resize",this.Wz)}get Rz(){return this.je.getBoundingClientRect().height||this.xz||0}get Dz(){return this.je.getBoundingClientRect().width||this.Nz||0}constructor(t,e,i){super(t,e),this.Lz=0,this.Nz=NaN,this.xz=NaN,this.qz=void 0,this.sr=()=>{const t=1e5;this.zz.style.width=t+"px",this.zz.style.height=t+"px",this.Oz.scrollLeft=t,this.Oz.scrollTop=t,this.Uz.scrollLeft=t,this.Uz.scrollTop=t,0===this.Uz.scrollTop&&Oo(this.sr)},this.Xz=()=>{const t=this.Dz,e=this.Rz;this.Tz(t,e),this.Nz=t,this.xz=e,this.sr(),this.Lz=0},this.Fz=()=>{if(this.Lz)return;const t=this.Dz,e=this.Rz;t===this.Nz&&e===this.xz||(this.Lz=Oo(this.Xz))},this.Wz=()=>{this.qz||(this.qz=u(this.Gz,66))},this.Gz=()=>{this.qz=void 0,this.Qz()},this.Qz=()=>{this.Fz()};const s=function(t,e){return a.getComputedStyle(t,void 0).getPropertyValue(e)||t.style[e]}(t,"position");i||"static"!==s||(t.style.position="relative");const n=h.createElement("div");this.Vz=n,this.Oz=h.createElement("div"),this.zz=h.createElement("div"),this.Uz=h.createElement("div"),this.Kz=h.createElement("div"),PI(this.Oz),PI(this.Uz),II(this.zz),function(t){II(t),t.style.width="200%",t.style.height="200%"}(this.Kz),n.appendChild(this.Oz),n.appendChild(this.Uz),this.Oz.appendChild(this.zz),this.Uz.appendChild(this.Kz),t.appendChild(n),this.Oz.addEventListener("scroll",this.Fz),this.Uz.addEventListener("scroll",this.Fz),a&&a.addEventListener("resize",this.Wz),this.Fz()}},RI=class extends Re{kn(t){this.Bz||("function"==typeof a.ResizeObserver?this.Bz=new bI(this.je,this.Mz):this.Bz=new CI(this.je,this.Mz,t))}bn(){this.Bo(),this.Bz&&(this.Bz.bn(),this.Bz=void 0)}get Rz(){return this.Bz?this.Bz.Rz:0}get Dz(){return this.Bz?this.Bz.Dz:0}constructor(t){super(),this.Bz=void 0,this.Mz=(t,e)=>{this.wo(new pI(t,e))},this.je=t}};t(),t();var Jn=class extends o{constructor(){super(si.ca)}};t();var wu=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let e of t)if(e[1]in h)return{Il:e[0],Yo:e[1],jz:e[2],Yz:e[3],Ke:e[4],Zz:e[5]}}();t();var xI=class extends o{constructor(){super(si.pa)}},DI=class t extends Re{static ha(t){return Boolean(wu&&h[wu.Yz]&&wu.Il in t)}fo(){const t=this.je[wu.Il]();t&&t.then?t.then(this.Jz,this.$z):(h.removeEventListener(wu.Zz,this.$z),h.addEventListener(wu.Zz,this.$z))}ko(){const t=h[wu.Yo]();t&&t.then?t.then(this.Jz,this.$z):(h.removeEventListener(wu.Zz,this.$z),h.addEventListener(wu.Zz,this.$z))}tX(){const t=this.cs,e=this.je===h[wu.jz];this.cs=e,t!==e&&this.wo(new Jn)}eX(){this.wo(new Ln)}bn(){this.Bo(),h.removeEventListener(wu.Ke,this.Jz),h.removeEventListener(wu.Zz,this.$z)}constructor(e){super(),this.cs=!1,this.Jz=()=>this.tX(),this.$z=()=>this.eX(),this.je=e,this.ra=t.ha(e),h.addEventListener(wu.Ke,this.Jz),this.tX()}},NI=class t extends Re{static ha(t){return ds.uv&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}fo(){this.je.webkitSupportsPresentationMode&&this.je.webkitSupportsPresentationMode("fullscreen")?ds.uv?requestAnimationFrame((()=>this.je.webkitSetPresentationMode("fullscreen"))):this.je.webkitSetPresentationMode("fullscreen"):this.je.webkitEnterFullscreen()}ko(){this.je.webkitSupportsPresentationMode&&this.je.webkitSupportsPresentationMode("inline")?this.je.webkitSetPresentationMode("inline"):this.je.webkitExitFullscreen()}tX(){const t=this.cs;let e;e=this.je.webkitPresentationMode?"fullscreen"===this.je.webkitPresentationMode:Boolean(this.je.webkitDisplayingFullscreen),this.cs=e,t!==e&&this.wo(new Jn)}bn(){this.Bo(),this.je.removeEventListener("webkitbeginfullscreen",this.Jz),this.je.removeEventListener("webkitendfullscreen",this.Jz),this.je.removeEventListener("webkitpresentationmodechanged",this.Jz)}constructor(e){super(),this.cs=!1,this.Jz=()=>this.tX(),this.je=e,this.ra=t.ha(e),this.je.addEventListener("webkitbeginfullscreen",this.Jz),this.je.addEventListener("webkitendfullscreen",this.Jz),this.je.addEventListener("webkitpresentationmodechanged",this.Jz),this.tX()}},BI=class extends Re{get ra(){return!!this.iX&&this.iX.ra}get cs(){return this.sX}fo(){this.iX?this.iX.fo():this.wo(new Ln)}ko(){for(const t of this.nX)t.cs&&t.ko()}rX(t){this.iX=t}hX(t){this.nX.push(t),t.wn(si.ca,this.tX),t.wn(si.la,this.Os),this.tX()}oX(t){Ko(this.nX,t),t.pn(si.ca,this.tX),t.pn(si.la,this.Os)}aX(){for(const t of this.nX)if(t.cs)return!0;return!1}sr(){this.iX=void 0,this.sX=!1;const t=this.nX.slice();for(const e of t)this.oX(e),e.bn();this.tX()}bn(){this.Bo(),this.sr()}constructor(...t){super(...t),this.nX=[],this.iX=void 0,this.sX=!1,this.tX=()=>{const t=this.sX,e=this.aX();t!==e&&(this.sX=e,this.wo(new Jn))}}},MI=class extends Re{get ra(){return!!this.uX&&this.cX.ra}get cs(){return this.cX.cs}fo(){this.uX&&this.cX.fo()}ko(){this.cX.ko()}lX(){this.cX.wn([si.ca,si.pa],this.tX),this.cX.wn(si.la,this.Os)}dX(){this.cX.pn([si.ca,si.pa],this.tX),this.cX.pn(si.la,this.Os)}Zn(){const t=this.cX,e=this.t.GP();if(t===e)return;this.fa=!0;const i=this.cs,s=this.ra;i&&this.ko(),this.dX(),this.cX=e,this.lX(),i&&!this.cs&&this.ra?this.fo():this.ko(),this.fa=!1,s!==this.ra&&this.wo(new xI),i!==this.cs&&this.wo(new Jn)}bn(){this.Bo(),this.dX(),this.t.pn(Uv.Bp,this.fX)}constructor(t,e){super(),this.fa=!1,this.fX=()=>this.Zn(),this.tX=t=>{this.fa||this.wo(t)},this.t=t,this.uX=e,this.cX=new $e,this.lX(),this.t.wn(Uv.Bp,this.fX),this.Zn()}};t(),t(),t();var LI=function(t){return t.MODE_CHANGE="presentationmodechange",t.ERROR="error",t}({}),Ye=class extends o{constructor(t){super(LI.MODE_CHANGE),this.presentationMode=t}};t(),t();var Jt=class extends S{_X(t){t.wp(this.vX),this.gX.push(t)}wX(t){t.bp(this.vX),Ko(this.gX,t)}bn(){this.Bo();for(const t of this.gX)t.bp(this.vX);us(this.gX)}constructor(t,e=!1){super(t),this.gX=[],this.mX=t=>{Zn((()=>{this.Os(t)}))},this.vX=e?this.mX:this.Os}};t();var dn=class extends Cs{get error(){return this.errorObject.message}ya(){return this}constructor(t){super(LI.ERROR),this.errorObject=t}};t();var vn=class extends ke{constructor(t,e,i){super(t,e,i)}},OI=class extends S{get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return function(t){let e,i={get currentMode(){return t.Uo()},requestMode(e){const i=tT(e);i&&t.zo(i)},supportsMode(e){const i=tT(e);return!!i&&t.Ho(i)},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new Jt(i,!0),e._X(t),i}(this)}zo(t){this.qo!==t&&(this.qo=t,this.ta=!0,this.Go(t))}Uo(){return this.qo}Ho(t){switch(t){case Ge.NATIVE_PICTURE_IN_PICTURE:return this.Ko.AM;case Ge.FULLSCREEN:return this.ia.ra;case Ge.INLINE:return!0}return!1}Go(t){switch(this.Jo.tf(),t){case Ge.FULLSCREEN:Ov(this.Jo.Xo((t=>this.pX(t))));break;case Ge.NATIVE_PICTURE_IN_PICTURE:Ov(this.Jo.Xo((t=>this.yX(t))));break;case Ge.INLINE:Ov(this.Jo.Xo((t=>this.AX(t))))}}async pX(t){Bv(t),await this.Ko.ko().catch(De),Bv(t);try{await this.bX(),this.wo(new Ye(this.qo))}catch(e){const i=new vn(X.FULLSCREEN_ERROR,"Failed to enter fullscreen.");throw this.wo(new dn(i)),Bv(t),this.zo(Ge.INLINE),i}finally{this.ta=!1}}async yX(t){Bv(t),await this.Yo().catch(De),Bv(t);try{await this.Ko.fo(),this.wo(new Ye(this.qo))}catch(e){const i=new vn(X.PICTURE_IN_PICTURE_ERROR,"Failed to enter native picture-in-picture.");throw this.wo(new dn(i)),Bv(t),this.zo(Ge.INLINE),i}finally{this.ta=!1}}async AX(t){Bv(t),await this.Yo().catch(De),Bv(t),await this.Ko.ko().catch(De),this.wo(new Ye(this.qo)),this.ta=!1}async bX(){if(this.ia.cs)return;const t=this.ia.Tp([si.ca,si.la]);if(this.ia.fo(),await t,!this.ia.cs)throw new v("Failed to enter fullscreen.")}async Yo(){if(!this.ia.cs)return;const t=this.ia.Tp([si.ca,si.la]);if(this.ia.ko(),await t,this.ia.cs)throw new v("Failed to exit fullscreen.")}ki(){this.ta||(this.qo!==Ge.FULLSCREEN||this.ia.cs?this.qo!==Ge.FULLSCREEN&&this.ia.cs&&this.zo(Ge.FULLSCREEN):this.zo(Ge.INLINE))}bn(){this.ia.pn(si.ca,this.tX),this.ia.pn(si.la,this.eX),this.Ko.pn(Ws.mM,this.TX),this.Ko.pn(Ws.pM,this.TX),this.Ko.pn(Ws.la,this.SX),this.Bo()}constructor(t,e){super(),this.qo=Ge.INLINE,this.ta=!1,this.Jo=new jn,this.Zu=void 0,this.tX=()=>{this.ki()},this.eX=()=>{this.ta||(this.wo(new _n(new ke(X.FULLSCREEN_ERROR,"Failed to enter fullscreen."))),this.ki())},this.TX=()=>{this.ta||(this.qo!==Ge.NATIVE_PICTURE_IN_PICTURE||this.Ko.yM?this.qo!==Ge.NATIVE_PICTURE_IN_PICTURE&&this.Ko.yM&&this.zo(Ge.NATIVE_PICTURE_IN_PICTURE):this.zo(Ge.INLINE))},this.SX=()=>{this.ta||(this.wo(new dn(new vn(X.PICTURE_IN_PICTURE_ERROR,"Unexpected native picture-in-picture error."))),this.TX())},this.ia=t,this.Ko=e,this.ia.wn(si.ca,this.tX),this.ia.wn(si.la,this.eX),this.Ko.wn(Ws.mM,this.TX),this.Ko.wn(Ws.pM,this.TX),this.Ko.wn(Ws.la,this.SX)}};function FI(t){let e;return{get url(){return t.qS},get method(){return t.vk},get headers(){return e||(e=t.US.dS()),e},get body(){return t.AS},get useCredentials(){return t.Ak},get type(){return t.Vm},get subType(){return t.pk},get mediaType(){return t.yk},get responseType(){return t.OS}}}function UI(t){switch(t.toLowerCase()){case"arraybuffer":return Gs.aS;case"json":return Gs.uS;case"stream":return Gs.cS;default:return Gs.lS}}function VI(t){switch(t.toUpperCase()){case"POST":return Na.POST;case"PUT":return Na.PUT;case"DELETE":return Na.DELETE;case"HEAD":return Na.HEAD;case"OPTIONS":return Na.OPTIONS;default:return Na.GET}}function HI(t){switch(t.toLowerCase()){case"manifest":return Sa.XS;case"segment":return Sa.GS;case"preload-hint":return Sa.QS;case"content-protection":return Sa.KS;default:return Sa.zS}}function WI(t){switch(t.toLowerCase()){case"initialization-segment":return Qn.jS;case"fairplay-license":return Qn.YS;case"fairplay-certificate":return Qn.ZS;case"widevine-license":return Qn.JS;case"widevine-certificate":return Qn.$S;case"playready-license":return Qn.ek;case"clearkey-license":return Qn.nk;case"aes128-key":return Qn.rk;default:return Qn.zS}}function qI(t){switch(t.toLowerCase()){case"audio":return Ec.hk;case"video":return Ec.wl;case"text":return Ec.lS;case"image":return Ec.ck;default:return Ec.zS}}t(),t(),t(),t();var zI=class{get kX(){return this.EX.Pf}get ba(){return this.Zu||(this.Zu=this.PX()),this.Zu}get IX(){return this.CX}get RX(){return!this.CX}get xX(){return this.DX>0}get Uk(){return this.Vk}hx(){this.CX=!0,this.EX.Xf(null)}NX(){this.EX.My(new Qo(this.BX))}MX(t){if(!this.RX)throw new p("Cannot respond more than once");if(!nh(t))throw new p("Expected valid response");this.Vk=this.LX(t),this.hx()}OX(){try{const t=this.FX(this.ba);t?this.UX(t):this.xX||this.IX||this.hx()}catch(t){this.BX.push(t),this.NX()}}UX(t){if(this.IX)throw new v("Request has been redirected or a response already exists");if(Xr(t))this.VX(t);else{if("function"!=typeof t)throw new p("Expected promise or function");{const e=new ue,i=t=>{t?e.My(t):e.Xf(void 0)};try{const s=t(i);Xr(s)&&e.lp(s)}catch(t){e.My(t)}this.VX(e.Pf)}}}async VX(t){try{this.DX++,await t,this.DX--,this.xX||this.IX||(this.BX.length?this.NX():this.hx())}catch(t){this.DX--,this.BX.push(t),this.xX||this.IX||this.NX()}}constructor(t,e){this.HX=t,this.FX=e,this.EX=new ue,this.BX=[],this.Zu=void 0,this.CX=!1,this.Vk=void 0,this.DX=0}},rn=class t extends zI{get AS(){return this.WX}get US(){return this.HX.US}get FS(){return this.HX.FS}get Uk(){return this.Vk}get MS(){return this.HX.MS}get VS(){return this.HX.VS}get qS(){return this.HX.WS}static qX(t,e,i){const s=void 0===t.body?i:t.body;return new Gu({LS:s,FS:e.FS,OS:e.FS.OS,US:t.headers,MS:t.status,VS:t.statusText,WS:t.url,HS:!0},e)}PX(){return function(t){let e;const i=FI(t.FS);return{get closed(){return!t.RX},get request(){return i},get url(){return t.qS},get status(){return t.MS},get statusText(){return t.VS},get headers(){return e||(e=t.US.dS()),e},get body(){return t.AS},respondWith:e=>t.MX(e),waitUntil:e=>t.UX(e)}}(this)}LX(e){return t.qX(e,this.HX,this.WX)}constructor(t,e,i){super(t,e),this.WX=i,this.OX()}};t();var XI=class extends zI{get AS(){return this.HX.AS}get RX(){return this.zX&&!this.CX}get US(){return this.HX.US}get vk(){return this.HX.vk}get XX(){return this.GX}get Uk(){return this.Vk}get OS(){return this.HX.OS}get gk(){return this.HX.gk}get wk(){return this.HX.wk}get ap(){return this.HX.ap}get Vm(){return this.HX.Vm}get pk(){return this.HX.pk}get yk(){return this.HX.yk}get qS(){return this.HX.qS}get Ak(){return this.HX.Ak}get Sk(){return this.HX.Sk}get bk(){return this.HX.bk}get Tk(){return this.HX.Tk}get Ek(){return this.HX.Ek}PX(){return function(t){let e;return{get url(){return t.qS},get method(){return t.vk},get headers(){return e||(e=t.US.dS()),e},get body(){return t.AS},get closed(){return!t.RX},get useCredentials(){return t.Ak},get type(){return t.Vm},get subType(){return t.pk},get mediaType(){return t.yk},get responseType(){return t.OS},redirect:e=>t.QX(e),respondWith:e=>t.MX(e),waitUntil:e=>t.UX(e)}}(this)}LX(t){const e=this.HX.AS,i=new Gu({LS:e,US:{},FS:this.HX,WS:this.HX.qS,OS:this.HX.OS,MS:200,VS:"OK"});return rn.qX(t,i,e)}QX(t){if(!this.RX)throw new p("Cannot redirect, already redirected or has a response");let e;e=Sc(t)?{url:t}:t,this.GX=function(t,e){return new Qi({qS:void 0===t.url?e.qS:t.url,vk:void 0!==t.method?VI(t.method):void 0,US:t.headers,AS:t.body,Ak:t.useCredentials,Vm:void 0!==t.type?HI(t.type):void 0,pk:void 0!==t.subType?WI(t.subType):void 0,yk:void 0!==t.mediaType?qI(t.mediaType):void 0,OS:void 0!==t.responseType?UI(t.responseType):void 0},e)}(e,this.HX),this.hx()}constructor(t,e,i){super(t,e),this.GX=void 0,this.zX=i,this.OX()}};var GI=class extends er{KX(t){this.jX.KX(t)}YX(t){this.jX.YX(t)}ZX(t){this.jX.ZX(t)}JX(t){this.jX.JX(t)}$X(t){this.jX.$X(t)}constructor(t,e=!0){const i=new QI(t);super(i,e),this.jX=i}},QI=class{async FS(t){let e;try{e=await this.tG(t,t.ap)}catch(e){if(e instanceof st)return await this.eG(e,t.ap);throw e}if(e=await this.iG(e,t.ap),Fo(e))return e;throw new pc(e)}Pk(t){return this.xk.Pk(t)}async tG(t,e){Bv(e);let i,s=t;for(const t of this.sG.slice()){Bv(e);const n=new XI(s,t,!i);if(!n.IX)try{await n.kX}catch(t){0;continue}n.XX&&!i?s=n.XX:n.Uk&&!i&&(i=n.Uk)}return i||this.xk.FS(s)}async eG(t,e){let i;if(t instanceof pc)i=t.Uk;else{const e=t.FS;i=new Gu({LS:null,FS:e,OS:e.OS,MS:0,VS:""})}const s=await this.iG(i,e);if(s===i)throw t;if(Fo(s))return s;throw new pc(s)}async iG(t,e){let i=t;for(const t of this.nG.slice()){Bv(e);const s=await Promise.resolve(i.Ty().LS(e)),n=new rn(i,t,s);if(!n.IX)try{await n.kX}catch(t){0;continue}i=n.Uk||i}return i}KX(t){this.sG.unshift(t)}YX(t){this.sG.push(t)}ZX(t){Ko(this.sG,t)}JX(t){this.nG.unshift(t)}$X(t){Ko(this.nG,t)}bn(){this.xk.bn(),us(this.sG),us(this.nG)}constructor(t){this.sG=[],this.nG=[],this.xk=t}};t();var KI=class{get ba(){return this.Zu||(this.Zu=function(t){return{addRequestInterceptor(e){t.KX(e)},removeRequestInterceptor(e){t.ZX(e)},addResponseInterceptor(e){t.JX(e)},removeResponseInterceptor(e){t.$X(e)}}}(this)),this.Zu}KX(t){this.TF.KX(t)}ZX(t){this.TF.ZX(t)}JX(t){this.TF.JX(t)}$X(t){this.TF.$X(t)}constructor(t){this.TF=t}},jI=class extends Re{get ba(){return this.Zu||(this.Zu=function(t){return{get online(){return t.TP},get estimator(){return function(t){return{get bandwidth(){return t.PV},get roundTripTime(){return t.CV}}}(t.rG)},setEstimator(e){t.hG(function(t){if(!t)return;return{get PV(){return eA(t.bandwidth)},get CV(){return eA(t.roundTripTime)},RV:e=>function(t){if(!t)return;return{oG(e){t.markRequestStart(e)},aG(e){t.markResponseStart(e)},uG(e,i){t.markResponseData(e,i)},cG(e){t.markResponseEnd(e)}}}(t.createMeasurer(FI(e)))}}(e))},addRequestInterceptor(e){t.KX(e)},removeRequestInterceptor(e){t.ZX(e)},addResponseInterceptor(e){t.JX(e)},removeResponseInterceptor(e){t.$X(e)},addEventListener(e,i){t.wn(e,i)},removeEventListener(e,i){t.pn(e,i)}}}(this)),this.Zu}get TP(){return this.lG.TP}get rG(){return this.yW.rG}hG(t){this.yW.hG(t)}KX(t){this.TF.KX(t)}ZX(t){this.TF.ZX(t)}JX(t){this.TF.JX(t)}$X(t){this.TF.$X(t)}bn(){this.Bo(),this.lG.pn(Uv.Xp,this.dG),this.lG.pn(Uv.zp,this.fG)}constructor(t,e,i){super(e),this.lG=t,this.TF=e,this.yW=i,this.dG=t=>{this.wo(t)},this.fG=t=>{this.wo(t)},this.lG.wn(Uv.Xp,this.dG),this.lG.wn(Uv.zp,this.fG)}};t(),t(),t();var dh=function(t){return t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth",t}({});t();function YI(t,e,i,s,n,r){const h=[];let o=t-w.max(r,1),a=t+n;if(e&&i){const t=ht(i,1,5),s=e-t;o=w.min(o,s);const n=e+i+t;a=w.max(a,n)}0!==o&&s.EB(0,o)&&h.push([0,o]);return s.EB(a,1/0)&&h.push([a,1/0]),h}function ZI(t){return t instanceof v&&"QuotaExceededError"===t.name}t();var JI={type:dh.BANDWIDTH};function $I(t){const e=pr(JI);return Sc(t)?e.type=tC(t):nh(t)&&function(t){switch(t){case dh.PERFORMANCE:case dh.QUALITY:case dh.BANDWIDTH:return!0;default:return!1}}(t.type)&&(e.type=tC(t.type)),nh(t)&&nh(t.metadata)&&(e.metadata=function(t){const e={},i=nu(t.bitrate);return j(i)||(e.bitrate=i),e}(t.metadata)),e}function tC(t){switch(t){case"bandwidth":return dh.BANDWIDTH;case"performance":return dh.PERFORMANCE;case"quality":return dh.QUALITY}}t();var eC=class extends o{constructor(t){super("_G"),this.vG=t}};t();var iC=class extends o{constructor(t){super("gG"),this.wG=t}};t();var sC=class extends o{constructor(t){super("mG"),this.pG=t}},nC=class extends Re{yG(t){this.AG=t}get bG(){switch(this.TG.type){case dh.PERFORMANCE:return 0;case dh.QUALITY:return 1/0;case dh.BANDWIDTH:return this.TG.metadata&&void 0!==this.TG.metadata.bitrate?this.TG.metadata.bitrate:Ke.Gg.gV();default:return Ke.Gg.gV()}}get ba(){return this.Zu}get wG(){return this.TG}set wG(t){this.TG=t,this.wo(new iC(t))}get vG(){return this.SG}set vG(t){this.SG=t,this.wo(new eC(t))}get kG(){return w.min(this.SG,this.EG)}get pG(){return this.PG}set pG(t){this.PG=t,this.wo(new sC(t))}get IG(){return this.EG}get rG(){var t;return null!=(t=this.CG)?t:this.AG.rH}hG(t){this.CG=t}xG(t){let e=w.min(t,.8*this.EG);if(e=w.max(10,e),this.EG===e)return!1;const i=this.kG;this.EG=e;const s=this.kG;return s!==i&&this.wo(new eC(s)),!0}get DG(){return this.NG}set DG(t){this.NG=t}constructor(...t){super(...t),this.Zu=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.wG)},set strategy(e){t.wG=$I(e)},get targetBuffer(){return t.vG},set targetBuffer(e){const i=nu(e);j(i)||(t.vG=i)},get bufferLookbackWindow(){return t.pG},set bufferLookbackWindow(e){const i=nu(e);j(i)||(t.pG=i<=0?30:i)},get maxBufferLength(){return t.IG},get clearBufferWhenSettingTargetQuality(){return t.DG},set clearBufferWhenSettingTargetQuality(e){t.DG=ba(e)}}}(this),this.TG=JI,this.SG=20,this.PG=30,this.EG=1/0,this.NG=!1,this.CG=void 0}};t(),t();var rC=class extends Cs{ya(){return new hC}constructor(){super("yI")}},hC=class extends o{constructor(){super("change")}};t(),t();var oC=class extends Re{bn(){this.Bo();for(const t of this.Uq)this.BG.pn(t,this.MG)}constructor(t,e,i){super(i),this.MG=t=>{Xy(t)&&Zn((()=>{this.wo(t.ba)}))},this.BG=t,this.Uq=e;for(const t of this.Uq)this.BG.wn(t,this.MG)}},jo=class extends S{bn(){this.Bo(),this.BG.bp(this.MG)}constructor(t,e){super(e),this.MG=t=>{Xy(t)&&Zn((()=>{this.wo(t.ba)}))},this.BG=t,this.BG.wp(this.MG)}};var aC=class extends S{get YM(){return this.hL}set YM(t){if(this.ZM<=t)throw new v("Start time of a clip should be smaller than the end time.");this.hL!==t&&(this.hL=t,this.wo(new rC))}get ZM(){return this.uL}set ZM(t){if(t<=this.YM)throw new v("End time of a clip should be larger than the start time.");this.uL!==t&&(this.uL=t,this.wo(new rC))}get ba(){return this.Zu||(this.Zu=function(t){let e,i={get startTime(){return t.YM},set startTime(e){t.YM=e},get endTime(){return t.ZM},set endTime(e){t.ZM=e},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new jo(t,i),i}(this)),this.Zu}sr(){0===this.hL&&this.uL===1/0||(this.hL=0,this.uL=1/0,this.wo(new rC))}LG(){return new r([this.YM,this.ZM],[!0,!0])}constructor(...t){super(...t),this.hL=0,this.uL=1/0}};t();var uC=class t extends zy{uP(t,e){const i=this.Ac.LG().gB(t);super.uP(i,e),this.OG()}dP(){return super.dP()||this.FG}get UG(){return this.DP().length?this.DP():this.Ac.LG().ws()}DP(){return r.Sn(super.DP()).Cn(this.Ac.LG()).ws()}bl(){this.dP()?this.uP(this.UG.start(0)):this.VG(),super.bl(),this.OG()}async _a(t,e){Bv(e),this.FG=!1,this.Ac.sr(),await super._a(t,e)}bn(){return this.Ac.pn("yI",this.HG),this.iP.pn(Uv.Xu,this.PH),this.WG(),super.bn()}eI(t){switch(t.type){case Uv.$f:return this.wo(t),this.qG(),!0;case Uv.If:case Uv.Dp:return this.wo(t),this.zG(),!0;case Uv.Df:if(this.XG)return!0}return super.eI(t)}get XG(){return this.Ac.ZM<this.ct}WG(){this.GG&&(Qa(this.GG),this.GG=void 0)}OG(){const e=this.Yu,i=this.XG&&e>=this.Ac.ZM-t.TO;this.FG&&!i?(this.FG=!1,this.Oc&&this.bl()):this.FG||!i||this.Uc||this.QG||(this.FG=!0,this.wo(new Zu(e)),this.Ml())}VG(){if(this.ct===1/0)return;const e=this.UG,i=r.Sn(e).gB(this.Yu);Uu(this.Yu,i,t.TO)||this.uP(i)}constructor(e,i){super(e),this.FG=!1,this.GG=void 0,this.QG=!1,this.HG=()=>{this.VG(),this.OG()},this.PH=()=>{this.WG(),this.OG();this.XG&&this.Yu>=this.Ac.ZM-t.KG&&!this.$c&&(this.GG=Oo(this.PH))},this.qG=()=>{this.QG=!0},this.zG=()=>{this.QG&&(this.QG=!1,this.OG())},this.Ac=i,this.Ac.wn("yI",this.HG),this.iP.wn(Uv.Xu,this.PH)}};uC.KG=1,uC.TO=.001,t();var cC=class{get jG(){return this.YG}set jG(t){this.YG=t}constructor(){this.YG=!1}};t();var lC=class extends zy{dP(){return!this.YG.jG&&super.dP()}Ml(){this.ZG=!0,super.Ml()}bl(){this.ZG=!1,super.bl()}eI(t){if(this.YG.jG)switch(t.type){case Uv.Df:return this.Yu=0,this.ZG||(this.Uc?this.JG=!0:this.bl()),!0;case Uv.If:this.JG&&(this.JG=!1,this.bl());break;case Uv.Ff:if(this.JG||super.dP())return!0}return super.eI(t)}constructor(t,e){super(t),this.JG=!1,this.ZG=!1,this.YG=e}};t(),t();var dC=class{get ba(){return this.Zu}get IM(){return this.sa.pP.IM}get RM(){return this.sa.pP.RM}get PM(){return this.sa.pP.PM}get $G(){throw new v("Not implemented")}get tQ(){throw new v("Not implemented")}get xM(){return this.sa.pP.xM}get CM(){return this.sa.pP.CM}get DM(){return this.sa.pP.DM}constructor(t){this.sa=t,this.Zu=function(t){return{get currentBandwidthEstimate(){return t.RM},get corruptedVideoFrames(){return t.IM},get droppedVideoFrames(){return t.PM},get totalVideoFrames(){return t.CM},get totalBytesLoaded(){return t.xM},get bufferedSegments(){return t.DM}}}(this)}};function fC(t){if(!t||!me(t))return{PM:0,IM:0,CM:0,RM:0,xM:0,DM:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const e=t.getVideoPlaybackQuality();return{PM:e.droppedVideoFrames,IM:e.corruptedVideoFrames||0,CM:e.totalVideoFrames}}return{PM:t.webkitDroppedFrameCount||0,IM:0,CM:t.webkitDecodedFrameCount||0}}t(),t();var _C=class extends Cs{ya(){return new vC}constructor(){super("eQ")}},vC=class extends o{constructor(){super("castingchange")}};t();var gC=class extends Re{get iQ(){var t,e;return(null==(t=this.sQ)?void 0:t.iQ)||(null==(e=this.nQ)?void 0:e.iQ)||!1}get rQ(){return this.sQ}get hQ(){return this.nQ}oQ(t){this.sQ=t,this.aQ(t)}uQ(t){this.nQ=t,this.aQ(t)}aQ(t){t.wn("statechange",this.cQ)}lQ(t){t.pn("statechange",this.cQ)}get ba(){return this.Zu||(this.Zu=function(t){let e;const i={get casting(){return t.iQ},get airplay(){var e;return null==(e=t.rQ)?void 0:e.ba},get chromecast(){var e;return null==(e=t.hQ)?void 0:e.ba},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new oC(t,["eQ"],i),i}(this)),this.Zu}bn(){this.Bo(),this.sQ&&(this.lQ(this.sQ),this.sQ=void 0),this.nQ&&(this.lQ(this.nQ),this.nQ=void 0)}constructor(...t){super(...t),this.sQ=void 0,this.nQ=void 0,this.dQ=!1,this.Zu=void 0,this.cQ=()=>{const t=this.dQ,e=this.iQ;t!==e&&(this.dQ=e,this.wo(new _C))}}};t(),t();var T=class{static async fQ(t,e){try{const i=new Qi({qS:t,OS:Gs.lS,vk:Na.GET}),s=await e.FS(i);return(await s.LS()).trim()}catch(t){return void Eh(t)}}static _Q(t){try{const e=WP(t);return new GP(e.key,e.domains_page,e.domains_source,e.expiration_date,e.features,e.customer_id,e.generation_date,e.sdks,e.send_impression)}catch(t){throw new ke(X.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static vQ(t){void 0===t&&(t=DP.dh),Gn.Yw("The baked-in license is used. Please update the configuration with your license.");const e=t.OW("F2b-iL'[FL[S"),i=JSON.parse('["F$(:_L50F|aY"]').map((e=>t.OW(e))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((e=>t.OW(e))),n=Number(new Date(Number(t.OW('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((e=>t.OW(e)));return new GP(e,i,s,n,r)}static convertLicenseToDummyLicense(t){return new GP(t.XW,t.GW,t.QW,864e13,t.jW,t.YW,Date.now(),t.JW,t.$W)}};t();var R=class t{static oS(){return t.Gg||(t.Gg=wC.gT()?new wC:new oa),t.Gg}static By(e){t.oS().By(e)}static hS(){t.oS().hS()}static xy(e){return t.oS().xy(e)}static Dy(e,i){t.oS().Dy(e,i)}static gQ(e){const i=t.xy(e);if(void 0!==i)return _(i)}static wQ(e){return"true"===t.xy(e)}};R.Gg=void 0;var wC=class extends R{static gT(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}By(t){self.localStorage.removeItem(t)}hS(){self.localStorage.clear()}xy(t){var e;return null!=(e=self.localStorage.getItem(t))?e:void 0}Dy(t,e){self.localStorage.setItem(t,e)}},mC="https://validate.theoplayer.com/1/",pC=72e5,yC=w.floor(14399999*w.random()-pC),AC="THEOplayer.license",bC=class{async sd(){const t=await this.mQ(this.pQ.license,this.pQ.licenseUrl);this.zq.yQ(t)}async mQ(t,e){let i,s=e;t?i=T._Q(t):s||(i=T.vQ()),s||(s=mC+i.XW);const n=this.AQ();let r;if(i&&(r=this.bQ.cq(i),r===Za.WW)){if(this.TQ(i.KW)&&this.TQ(null==n?void 0:n.KW)){const t=await this.SQ(s);if(t)return t}return i}if(n){if(this.bQ.cq(n)===Za.WW){if(this.TQ(null==n?void 0:n.KW)){const t=await this.SQ(s);if(t)return t}return n}R.By(AC)}const h=await T.fQ(s,this.TF);let o;if(h){o=T._Q(h);if(this.bQ.cq(o)===Za.WW)return R.Dy(AC,h),o;R.By(AC)}else if(!this.gq&&i&&r===Za.qW&&s===mC+i.XW)return T.convertLicenseToDummyLicense(i);if(!i&&!o)throw new ke(X.LICENSE_ERROR,"The given license is invalid!");this.kQ(null!=i?i:o,new ke(X.LICENSE_ERROR,"The given license is invalid!"))}async rq(t){let e=await this.zq.qq();if(this.TQ(e.KW)){var i;const t=null!=(i=this.pQ.licenseUrl)?i:mC+e.XW,s=await this.SQ(t);s&&(this.zq.yQ(s),e=s)}try{const i=this.bQ.cq(e);if(i===Za.zW){const t=QP.tq;throw new ke(jP(t),ii.uq(t))}if(i===Za.qW){const t=QP.qW;throw new ke(jP(t),ii.uq(t))}this.bQ.rq(t,e)}catch(t){this.EQ(t)}}async Yf(t){const e=await this.zq.qq();try{this.bQ.Yf(t,e)}catch(t){this.EQ(t)}}async SQ(t){try{const e=await T.fQ(t,this.TF);if(void 0===e)return;const i=T._Q(e);return this.bQ.cq(i)===Za.WW?(R.Dy(AC,e),i):void 0}catch(t){return}}TQ(t){return!t||Number(new Date)+2592e5+yC>=t}AQ(){const t=R.xy(AC);if(t)return T._Q(t)}kQ(t,e){this.zq.yQ(t),this.EQ(e)}EQ(t){throw Jh(t.message),this.IQ.Kq(t.message),t}constructor(t,e,i,s,n,r){this.TF=t,this.bQ=e,this.IQ=i,this.zq=s,this.pQ=n,this.bA=r,this.gq=iI(r)}};t();var TC=class{yQ(t){this.CQ=t,this.RQ.Xf()}get xQ(){return this.CQ}async qq(){return this.CQ?Promise.resolve(this.CQ):(await this.RQ.Pf,this.CQ)}constructor(){this.RQ=new ue}};t(),t();var SC=class extends Cs{ya(){return new kC}constructor(){super("yI")}},kC=class extends o{constructor(){super("change")}};function EC(t){let e;const i={get fontFamily(){return t.DQ},set fontFamily(e){t.DQ=e},get fontColor(){return t.NQ},set fontColor(e){t.NQ=e},get fontSize(){return t.BQ},set fontSize(e){t.BQ=e},get backgroundColor(){return t.MQ},set backgroundColor(e){t.MQ=e},get windowColor(){return t.LQ},set windowColor(e){t.LQ=e},get edgeStyle(){return t.OQ},set edgeStyle(e){t.OQ=e},get marginTop(){return t.FQ},set marginTop(e){t.FQ=e},get marginBottom(){return t.UQ},set marginBottom(e){t.UQ=e},get marginLeft(){return t.VQ},set marginLeft(e){t.VQ=e},get marginRight(){return t.HQ},set marginRight(e){t.HQ=e},addEventListener(t,i){const s=tc(t,ci);e.wn(s,i)},removeEventListener(t,i){const s=tc(t,ci);e.pn(s,i)}};return e=new bi(i),t.wn(["yI"],(t=>e.wo(t.ba))),i}t();var PC={DQ:void 0,NQ:void 0,BQ:void 0,MQ:void 0,LQ:void 0,OQ:void 0,FQ:void 0,UQ:void 0,VQ:void 0,HQ:void 0},$t="THEOplayer.textTrackStyle.",IC=class t extends Re{get WQ(){return this.qQ}get DQ(){return this.qQ.DQ}set DQ(t){this.Zn({DQ:t})}get NQ(){return this.qQ.NQ}set NQ(t){this.Zn({NQ:t})}get BQ(){return this.qQ.BQ}set BQ(t){this.Zn({BQ:t})}get MQ(){return this.qQ.MQ}set MQ(t){this.Zn({MQ:t})}get LQ(){return this.qQ.LQ}set LQ(t){this.Zn({LQ:t})}get OQ(){return this.qQ.OQ}set OQ(t){this.Zn({OQ:t})}get FQ(){return this.qQ.FQ}set FQ(t){this.Zn({FQ:t})}get UQ(){return this.qQ.UQ}set UQ(t){this.Zn({UQ:t})}get HQ(){return this.qQ.HQ}set HQ(t){this.Zn({HQ:t})}get VQ(){return this.qQ.VQ}set VQ(t){this.Zn({VQ:t})}get ba(){return this.Zu||(this.Zu=EC(this)),this.Zu}Zn(e){this.qQ=yh({},this.qQ,e),t.zQ(this.qQ),this.wo(new SC)}static XQ(){let t=yh({},PC);return t.DQ=R.xy($t+"fontFamily")||t.DQ,t.NQ=R.xy($t+"fontColor")||t.NQ,t.BQ=R.xy($t+"fontSize")||t.BQ,t.MQ=R.xy($t+"backgroundColor")||t.MQ,t.LQ=R.xy($t+"windowColor")||t.LQ,t.OQ=R.xy($t+"edgeStyle")||t.OQ,t}static zQ(t){R.Dy($t+"fontFamily",t.DQ||""),R.Dy($t+"fontColor",t.NQ||""),R.Dy($t+"fontSize",t.BQ||""),R.Dy($t+"backgroundColor",t.MQ||""),R.Dy($t+"windowColor",t.LQ||""),R.Dy($t+"edgeStyle",t.OQ||"")}constructor(){super(),this.Zu=void 0,this.qQ=t.XQ()}};function CC(t,e){var i,s;t.style.marginLeft=(null!=(i=e.VQ)?i:0)+"px",t.style.marginRight=(null!=(s=e.HQ)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}t(),t(),t(),t();var RC=[Uv.no,Uv.Ff,cb.nd,Uv.Xu,Uv.zf,Uv.Rf,Uv.$f,Uv.If,Uv.Df,Uv.qu,Uv.Bl,Uv.Vf,cb.Lf,Uv.Qp,Yo.la,ir.Np,ir.py,Uv.Cp,Uv.Ip,Uv.$p,Uv.iy,Uv.Fp,Uv.Vp,Uv.Lp,Uv.Bp],xC={uM:!1};function DC(t){return t.aT.Vm===A.CF}t();var Xh=function(t){return t.GQ="QQ",t}({}),xo=["QQ"],lt=function(t){return t[t.KQ=0]="KQ",t[t.cS=1]="cS",t[t.jQ=2]="jQ",t}({});t(),t();var NC=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"],BC=function(t){return t.YQ="ZQ",t.JQ="$Q",t.tK="eK",t}({}),Nn=class extends Re{get aT(){return this.pl}get tH(){return this.QT}async iK(t,e){const i=await this.Km.Qm(t.Hm,e),s=await i.cT();return await this.sK(s),s}nK(t){const e=this.nT;return e?0!==t.oH.length&&t.oH.some((t=>t.rT.Hm===e.rT)):0!==this.pl.oH.length?t.oH.some((t=>this.pl.oH.some((e=>t.rT===e.rT)))):0===t.oH.length||!this.rK}hK(t){return this.oK.hK(t),this.pl=t,Promise.resolve()}aK(t){this.oK.aK(t)}async Wu(){this.Bo(),this.QT.removeEventListener("loadedmetadata",this.uK);for(const t of NC)this.QT.removeEventListener(t,this.cK);await this.Jo.bn(),this.lK(),await this.oK.sr(),await this.dK(void 0)}fK(t){t!==this._K&&(this._K=t,t?this.vK.Xf(void 0):this.vK=new ue)}sK(t){return this.Jo.Xo((()=>this.dK(t)))}async dK(t){if(t&&!this.QT.src&&!this.QT.srcObject)throw new ga(X.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.QT.src||this.QT.srcObject))throw new ga(X.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this._K&&await this.vK.Pf;const e=this.nT;e&&(await e.oT(this.QT),this.nT=void 0),t&&(await t.kn(this.QT),this.nT=t)}_a(t){return this.Jo.Xo((()=>this.gK(t)))}gK(t){this.fK(!1);const e=this.rM.Hu;if(Sc(t))this.QT.src=t;else if(function(t){if(void 0!==a.ManagedMediaSource&&t instanceof a.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&ds.uv&&ds.vg>=17}(this.QT))try{this.QT.srcObject=t}catch(e){this.QT.src=URL.createObjectURL(t)}else this.QT.src=URL.createObjectURL(t);else MC(t)&&(this.QT.srcObject=t);this.rM.Hu=e}wK(t){return this.Jo.Xo((()=>this.mK(t)))}mK(t){this.gK(t),this.QT.load()}lK(){this.fK(!1),jl(this.QT)}async pK(){this.nT&&await this.nT.sr()}constructor(t,e,i,s){super(),this._K=!1,this.vK=new ue,this.rK=!1,this.Jo=new jn,this.nT=void 0,this.uK=()=>{this.rK=!0},this.cK=()=>{this.fK(!0)},this.pl=t,this.rM=e,this.QT=e.tH,this.oK=i,this.Km=s,this.QT.addEventListener("loadedmetadata",this.uK);for(const t of NC)this.QT.addEventListener(t,this.cK)}};function MC(t){return"undefined"!=typeof MediaStream&&t instanceof MediaStream}var LC=class extends Nn{get Sl(){return r.Sn(this.QT.buffered)}get ct(){return this.QT.duration}get yK(){const t=this.ct;if(!isFinite(t))return!1;const e=this.Sl;if(0===e.U)return!1;return t-e.Pn(e.U-1)<dt}get IP(){return this.QT.preload}set IP(t){this.QT.preload=t}get Cl(){return r.Sn(this.QT.seekable)}get AK(){return this.Sl}get bK(){if(me(this.QT)&&(this.QT.videoWidth>0||this.QT.videoHeight>0))return this.Sl}async yG(){const t=this.aT;switch(t.uH){case ja.oC:case ja.aC:this.QT.setAttribute("crossorigin",t.uH);break;case ja.dk:default:this.QT.removeAttribute("crossorigin")}void 0!==t.IP?this.QT.preload=t.IP:this.QT.preload=Ds.EV,void 0!==t.cH?this.QT.title=t.cH:Qr(this.QT),t.TK?await this.wK(t.TK):await this._a(t.iC),this.oK.On(this,t)}nK(t){return!1}hK(t){return Promise.resolve(void 0)}SK(t){return!1}kK(){return!MC(this.pl.TK)}async Wu(){Qr(this.QT),await super.Wu()}static EK(t,e){return!!e.canPlayType&&Boolean(e.canPlayType(t.yS))}};t();var xu=class extends o{constructor(t){super(Uv.zf),this.currentTime=t}};t();var ji=class extends o{constructor(){super(Uv.Rf)}};t(),t();var OC=function(t){return t.PK="IK",t}({}),FC=class extends o{constructor(t){super("IK"),this.CK=t}},ar=class extends Re{get RK(){return this.xK}DK(t,e){const i=new r([t,e]);this.xK=this.xK.Xl(i),this.wo(new FC(i))}NK(t,e){this.xK=this.xK.bB(new r([t,e]))}sr(){this.xK=r.Ol()}bn(){this.Bo()}constructor(...t){super(...t),this.xK=r.Ol()}};t(),t(),t();var UC=class{start(t){this.RQ=t,this.BK()&&this.MK()}pull(){this.Fd.length>0?this.LK():this.FK=!0,this.BK()&&this.MK()}cancel(t){return us(this.Fd),this.Ud=0,this.FK=!1,this.Ed.cancel(t)}LK(){if(0===this.Fd.length)return;const t=this.Fd;this.Fd=[],this.Ud=0,this.FK=!1,this.RQ.enqueue(t)}BK(){if(this.FK)return!0;return this.UK-this.Ud>0}MK(){if(this.VK)return;const t=this.Ed.read().then(this.HK).catch(this.nE);this.VK=t;const e=()=>{this.VK===t&&(this.VK=void 0)};t.then(e,e)}constructor(t,{size:e=(()=>1),highWaterMark:i=1}){this.Fd=[],this.Ud=0,this.RQ=void 0,this.FK=!1,this.VK=void 0,this.HK=t=>t.done?(this.LK(),void this.RQ.close()):(this.Fd.push(t.value),this.Ud+=this.WK(t.value),this.FK&&this.LK(),this.BK()?this.Ed.read().then(this.HK):void 0),this.nE=t=>{this.LK(),this.RQ.error(t)},this.Ed=t.getReader(),this.WK=e,this.UK=i}};t(),t(),t(),t();var VC=class{qK(t){this.zK.push(t),this.Iy+=t.byteLength}XK(t){if(this.Iy<=t)return this.GK();const e=this.zK;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.slice(0,s);if(s<e.length&&i<t){const r=t-i;0,n.push(uc(e[s],0,r)),i+=r}return{zK:n,Iy:i}}QK(t){const e=this.XK(t);return 1===e.zK.length?e.zK[0]:Dg(e.zK,e.Iy)}GK(){return{zK:this.zK,Iy:this.Iy}}KK(t){if(this.Iy<=t)return this.jK();const e=this.zK;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.splice(0,s);if(e.length>0&&i<t){const s=t-i;0,n.push(uc(e[0],0,s)),e[0]=uc(e[0],s),i+=s}return this.Iy-=i,{zK:n,Iy:i}}YK(t){const e=this.KK(t);return 1===e.zK.length?e.zK[0]:Dg(e.zK,e.Iy)}jK(){const t=this.GK();return this.zK=[],this.Iy=0,t}ZK(){const t=1===this.zK.length?this.zK[0]:Dg(this.zK,this.Iy);return this.zK=[],this.Iy=0,t}constructor(){this.zK=[],this.Iy=0}},ou=class{JK(t,e){}$K(){}tj(t){this.Fd.qK(t),this.ej(!1)}ij(){this.ej(!0)}sj(){return 0!==this.Da||0!==this.Fd.Iy}ej(t){for(;0!==this.Fd.Iy;){if(!t&&this.nj>this.Fd.Iy)return;switch(this.Da){case 0:this.rj(t);break;case 1:this.hj(t);break;case 2:this.aj(t)}}}uj(){this.Da=0,this.nj=8}rj(t){const e=Nt(this.Fd.QK(this.nj)),i=new lh,s=z.vx(e,i);if(!s.hx)return this.nj=s.wx,void(t&&this.nj>this.Fd.Iy&&this.cj(this.Fd.Iy));const n=s.gx.Vm;let r=s.gx.Iy;0===r&&(r=1/0),this.JK(n,r),this.lj(n)?this.dj(r):this.cj(r)}dj(t){this.Da=1,this.nj=t}hj(t){const e=Nt(this.Fd.YK(this.nj)),i=new lh,s=z.ox(e,i,!t);if(!s.hx)throw new mc(i.Fu);this.$K(),this._j(s.ux),this.uj()}cj(t){this.Da=2,this.nj=0,this.vj=t}aj(t){const e=this.Fd.KK(this.vj);this.vj-=e.Iy;for(const t of e.zK)this.gj(t);(0===this.vj||t&&this.vj===1/0)&&(this.$K(),this.uj())}constructor(){this.Fd=new VC,this.Da=0,this.nj=0,this.vj=0,this.uj()}};function HC(t){return t instanceof $o}function WC(t){return t instanceof cm}function qC(t){return t instanceof $h||t instanceof oo}function zC(t){return t instanceof Uh}function XC(t){return t instanceof vw}function GC(t){return t instanceof im}function QC(t){return t instanceof tm}function KC(t){return t instanceof Gh}function jC(t){return t instanceof nn}function YC(t){return t instanceof zh}function ZC(t){return t instanceof wm}function JC(t,e){const i=bv(t.boxes,YC);if(i&&i.flags.baseDataOffsetPresent)i.baseDataOffset=i.baseDataOffset.add(e);else for(const i of t.boxes)i instanceof wm&&i.flags.dataOffsetPresent&&(i.dataOffset=i.dataOffset+e)}t();var $C=class extends ou{start(t){this.RQ=t}transform(t){this.tj(t)}flush(){this.ij()}lj(t){return t===BA.MC||t===BA.SR||t===BA.LR}_j(t){const e=this.wj(t);this.RQ.enqueue(e)}gj(t){this.RQ.enqueue(t)}wj(t){const e=Ht(t.LS.LS);switch(t.Vm){case"moov":return this.mj(e);case"sidx":return this.pj(e);case"moof":return this.yj(e)}return e}get Aj(){if(void 0===this.bj)throw new v("Expected to have found a movie header timescale.");return this.bj}Tj(t){const e=this.Sj.get(t);if(void 0===e)throw new v("Expected to have found a media header timescale for track ID "+t+".");return e}mj(t){const e=Lm(t);for(let t=0;t<e.boxes.length;t++){const i=e.boxes[t];i instanceof rm?e.boxes[t]=this.Ej(i):i instanceof hm?e.boxes[t]=this.Pj(i):i instanceof cm&&this.Ij(i)}for(const t of e.boxes)t instanceof im&&this.Cj(t);return e.serialize().join()}Ej(t){this.bj=t.timescale;const e=lu(Yc.fromNumber(t.duration,!0),this.Aj,this.Rj);return 0!==e.getHighBits()?this.Pj(function(t){return new hm({creation:Yc.fromNumber(t.creationTime,!0),modification:Yc.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Yc.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.Rj,t.duration=e.toInt(),t)}Pj(t){return this.bj=t.timescale,t.timescale=this.Rj,t.duration=lu(t.duration,this.Aj,this.Rj),t}Ij(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof $h?(e=s.trackId,t.boxes[i]=this.xj(s)):s instanceof oo?(e=s.trackId,t.boxes[i]=this.Dj(s)):s instanceof Uh?this.Nj(s,e):s instanceof Ew&&this.Bj(s)}}xj(t){const e=lu(Yc.fromNumber(t.duration,!0),this.Aj,this.Rj);return 0!==e.getHighBits()?this.Dj(function(t){return new oo({creation:Yc.fromNumber(t.creationTime,!0),modification:Yc.fromNumber(t.modificationTime,!0),duration:Yc.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=e.toInt(),t)}Dj(t){return t.duration=lu(t.duration,this.Aj,this.Rj),t}Nj(t,e){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Nw?t.boxes[i]=this.Mj(s,e):s instanceof Bw&&(t.boxes[i]=this.Lj(s,e))}}Mj(t,e){this.Sj.set(e,t.timescale);const i=lu(Yc.fromNumber(t.duration,!0),t.timescale,this.Rj);return 0!==i.getHighBits()?this.Lj(function(t){return new Bw({creation:Yc.fromNumber(t.creationTime,!0),modification:Yc.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Yc.fromNumber(t.duration,!0)},t.language,t.flags)}(t),e):(t.timescale=this.Rj,t.duration=i.toInt(),t)}Lj(t,e){return this.Sj.set(e,t.timescale),t.timescale=this.Rj,t.duration=lu(t.duration,t.timescale,this.Rj),t}Bj(t){for(const e of t.boxes)e instanceof Tw?this.Oj(e):e instanceof Sw&&this.Fj(e)}Oj(t){for(const e of t.entries)e.mediaTime=eR(e.mediaTime,this.Aj,this.Rj),e.segmentDuration=eR(e.segmentDuration,this.Aj,this.Rj)}Fj(t){for(const e of t.entries)e.mediaTime=lu(e.mediaTime,this.Aj,this.Rj),e.segmentDuration=lu(e.segmentDuration,this.Aj,this.Rj)}Cj(t){for(let e=0;e<t.boxes.length;e++){const i=t.boxes[e];i instanceof tm?this.Uj(i):i instanceof Zw?t.boxes[e]=this.Vj(i):i instanceof Jw&&(t.boxes[e]=this.Hj(i))}}Uj(t){const e=this.Tj(t.trackId);t.defaultSampleDuration=eR(t.defaultSampleDuration,e,this.Rj)}Vj(t){const e=lu(Yc.fromNumber(t.fragmentDuration,!0),this.Aj,this.Rj);return 0!==e.getHighBits()?this.Hj(function(t){return new Jw(Yc.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=e.toInt(),t)}Hj(t){return t.fragmentDuration=lu(t.fragmentDuration,this.Aj,this.Rj),t}pj(t){let e=Om(t);return e=e instanceof km?this.Wj(e):this.qj(e),e.serialize().join()}Wj(t){const e=t.timescale,i=lu(Yc.fromNumber(t.earliestPresentationTime,!0),e,this.Rj);if(0!==i.getHighBits())return this.qj(function(t){return new Em(t.referenceId,t.timescale,Yc.fromNumber(t.earliestPresentationTime,!0),Yc.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.Rj,t.earliestPresentationTime=i.toInt();for(const i of t.references)i.subsegmentDuration=eR(i.subsegmentDuration,e,this.Rj);return t}qj(t){const e=t.timescale;t.timescale=this.Rj,t.earliestPresentationTime=lu(t.earliestPresentationTime,e,this.Rj);for(const i of t.references)i.subsegmentDuration=eR(i.subsegmentDuration,e,this.Rj);return t}yj(t){const e=Fm(t),i=e.getSize();for(const t of e.boxes)t instanceof nn&&this.zj(t);const s=e.getSize();if(s!==i){const t=s-i;for(const i of e.boxes)i instanceof nn&&JC(i,t)}return e.serialize().join()}zj(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof zh?(e=this.Tj(s.trackId),this.Xj(s,e)):s instanceof go?t.boxes[i]=this.Gj(s,e):s instanceof _m?t.boxes[i]=this.Qj(s,e):s instanceof wm&&this.Kj(s,e)}}Xj(t,e){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=eR(t.defaultSampleDuration,e,this.Rj))}Gj(t,e){const i=lu(Yc.fromNumber(t.baseMediaDecodeTime,!0),e,this.Rj);return 0!==i.getHighBits()?this.Qj(function(t){return new _m(Yc.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),e):(t.baseMediaDecodeTime=i.toInt(),t)}Qj(t,e){return t.baseMediaDecodeTime=lu(t.baseMediaDecodeTime,e,this.Rj),t}Kj(t,e){let i=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=eR(s,e,this.Rj);n.duration=t-i,i=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=tR(n.compositionTimeOffset,e,this.Rj))}}constructor(t){super(),this.Sj=C(),this.Rj=t}};function tR(t,e,i){return Yc.fromInt(t,!1).multiply(i).divide(e).toNumber()}function eR(t,e,i){return Yc.fromInt(t,!0).multiply(i).divide(e).toNumber()}function lu(t,e,i){return He.UL(t).uO(He.VL(i,!0)).fO(He.VL(e,!0)).JL()}var iR=class{jj(t){return t.pipeThrough(new Uc(this.Yj))}constructor(t){this.Yj=new $C(t)}};t(),t();var sR=function(t){return t[t.Zj=64]="Zj",t[t.Jj=103]="Jj",t[t.$j=107]="$j",t}({});function nR(t,e,i){const s=_e(t,e);if(s!==i)throw new p("Expected descriptor with tag "+i+", but found "+s)}function rR(t,e){nR(t,e,3);const i=hR(t,e),s=e.Fu+i,n=Qu(t,e),r=_e(t,e),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Qu(t,e)),h){c=dc(t,e,_e(t,e))}o&&(l=dc(t,e,2));const d=function(t,e){nR(t,e,4);const i=hR(t,e),s=e.Fu+i,n=_e(t,e),r=_e(t,e),h=r>>2,o=0!=(2&r),a=Nh(t,e,3),u=No(t,e),c=No(t,e);let l;if(e.Fu<s){const i=function(t,e){return t.getUint8(e.Fu)}(t,e);5===i&&(l=function(t,e){nR(t,e,5);const i=hR(t,e),s=bn(t,e,i);return{tY:5,eY:s}}(t,e))}return e.jc(s),{tY:4,iY:n,sY:h,nY:o,rY:a,hY:u,oY:c,aY:l}}(t,e);return e.jc(s),{tY:3,o:n,uY:u,qS:c,cY:a,lY:l,dY:d}}function hR(t,e){let i=0;for(let s=0;s<4;s++){const s=_e(t,e);if(i=i<<7|127&s,!(128&s))break}return i}function oR(t,e){const i=_e(t,e),s=_e(t,e),n=_e(t,e),r=_e(t,e),h=3&_e(t,e),o=31&_e(t,e),a=[];for(let i=0;i<o;i++){const i=Qu(t,e);a.push(bn(t,e,i))}const u=_e(t,e),c=[];for(let i=0;i<u;i++){const i=Qu(t,e);c.push(bn(t,e,i))}return{fY:i,_Y:s,vY:n,gY:r,wY:h,mY:a,pY:c}}function Ft(t,e,i){if(i&&e.byte>=i)return;const s=t.xy(e.byte);return e.byte+=1,s}function aR(t,e){return function(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=256*s+Ft(t,e);return s}(t,e,2)}t(),t(),t(),t(),t(),t();var uu=class t{yY(t){this.AY=this.AY.concat(t.AY),this.bY+=t.U}TY(t,e,i){const s=this.bY,n=i-e;n>0&&(this.AY.push({SY:e,kY:i,EY:n,PY:s,IY:t}),this.bY+=n)}xy(t){for(const e of this.AY)if(e.PY<=t&&t<e.PY+e.EY)return e.IY[t+e.SY-e.PY]}CY(t,e){let i=e;for(const e of this.AY){const s=e.kY;for(let n=e.SY;n<s;n+=1,i+=1)t[i]=e.IY[n]}return i}get U(){return this.bY}set U(t){const e=this.AY;let i=this.bY-t;if(!(t>=this.bY))if(this.bY=t,0!==t)for(let t=e.length-1;t>=0;t-=1){const s=e[t];if(i<=s.EY)return s.kY-=i,s.EY-=i,void(e.length!==t+1&&(e.length=t+1));i-=s.EY}else e.length=0}get LS(){const t=new Array(this.bY);let e=0;for(const i of this.AY){const s=i.kY;for(let n=i.SY;n<s;n+=1,e+=1)t[e]=i.IY[n]}return t}RY(){const t=new x(this.bY);let e=0;for(const i of this.AY){const s=i.kY;for(let n=i.SY;n<s;n+=1,e+=1)t[e]=i.IY[n]}return t}Ty(e){const i=new t;for(const t of this.AY)i.TY(t.IY,t.SY,t.kY);return i.sF=e||yh({},this.sF),i}constructor(){this.bY=0,this.AY=[],this.sF={}}};t();var uR=[128,64,32,16,8,4,2,1];function eu(t,e){const i=w.floor(e.bit/8),s=0==(t.xy(i)&uR[e.bit%8])?0:1;return e.bit+=1,s}function Ao(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=2*s+eu(t,e);return s}function Lc(t,e){let i=0;for(;0===eu(t,e)&&i<32;)i+=1;return Ao(t,e,i)+2**i-1}function cR(t,e){const i=Lc(t,e);return 1&i?w.floor((i+1)/2):-w.floor(i/2)}function lR(t,e){const i=[],s={byte:1};let n;do{i.push(fR(t,e,s)),n=e.xy(s.byte)}while(void 0!==n&&128!==n);return i}function dR(t,e){let i,s=0;do{i=Ft(t,e),s+=i}while(255===i);return s}function fR(t,e,i){const s=dR(e,i),n=dR(e,i),r=i.byte,h=r+n;return i.byte=h,{xY:t,DY:s,NY:n,BY:r,MY:h,LY:e}}var _R=function(t){return t[t.OY=1]="OY",t[t.FY=2]="FY",t[t.UY=3]="UY",t[t.VY=4]="VY",t[t.HY=5]="HY",t[t.WY=6]="WY",t[t.qY=7]="qY",t[t.zY=8]="zY",t[t.XY=9]="XY",t}({}),vR=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function gR(t,e,i){let s=8,n=8;for(let r=0;r<i;r+=1){if(0!==n){n=(s+cR(t,e)+256)%256}s=0===n?s:n}}var wR=class{GY(){const t=this.QY;let e=w.max(0,this.KY+t.length-2);const i=this.jY,s=i.U;let n=0;for(;e<s;e+=1){const s=i.xy(e);0===s?n+=1:(3===s&&n>=2&&t.push(e),n=0)}this.KY=e-t.length}YY(t){const e=this.QY;let i=t;for(const t of e){if(!(t<=i))return i;i+=1}return i}xy(t){if(!(t>this.jY.U))return t>this.KY&&this.GY(),this.jY.xy(this.YY(t))}constructor(t){this.QY=[],this.KY=0,this.jY=t}};function mR(t){const e=new wR(t);let i,s,n,r,h,o,a=0,u=0,c=0,l=0;const d=e.xy(1),f={bit:32};if(Lc(e,f),100===d||110===d||122===d||144===d){const t=Lc(e,f);3===t&&(i=eu(e,f)),Lc(e,f),Lc(e,f),eu(e,f);if(1===eu(e,f))for(let i=0;i<(3!==t?8:12);i+=1){1===eu(e,f)&&gR(e,f,i<6?16:64)}}const _=Lc(e,f),v=Lc(e,f);if(0===v)Lc(e,f);else if(1===v){eu(e,f),cR(e,f),cR(e,f);const t=Lc(e,f);for(let i=0;i<t;i+=1)cR(e,f)}Lc(e,f),eu(e,f);const g=Lc(e,f),m=Lc(e,f),p=eu(e,f);0===p&&eu(e,f),eu(e,f);1===eu(e,f)&&(a=Lc(e,f),u=Lc(e,f),c=Lc(e,f),l=Lc(e,f));if(1===eu(e,f)){if(1===eu(e,f)){const t=Ao(e,f,8);if(255===t)s=Ao(e,f,16),n=Ao(e,f,16);else{const e=vR[t];e&&(s=e[0],n=e[1])}}1===eu(e,f)&&eu(e,f);if(1===eu(e,f)){Ao(e,f,3),eu(e,f);1===eu(e,f)&&(Ao(e,f,8),Ao(e,f,8),Ao(e,f,8))}1===eu(e,f)&&(Lc(e,f),Lc(e,f)),r=eu(e,f),1===r&&(h=Ao(e,f,32),o=Ao(e,f,32),eu(e,f))}return{width:w.floor(16*(g+1)-2*a-2*u),height:w.floor((2-p)*(m+1)*16-2*c-2*l),yN:s,AN:n,ZY:r?o/(2*h):void 0,JY:i,$Y:_}}function Dn(t){const e=yc(Kh.Sx(t),BA.MC);if(!e)return;const i=e.gx.Wx,s=[];for(const t of e.Z){const e=t.gx.Jx,i=t.Kx.gx.Wx;let o,a,u;for(const e of t.Kx.rD.aD.cD.dD){const t=pR(e);var n,r,h;if(t)o=null!=(n=t.tZ)?n:o,a=null!=(r=t.eZ)?r:a,u=null!=(h=t.iZ)?h:u}s.push({Jx:e,Wx:i,tZ:o,eZ:a,iZ:u})}return{Wx:i,Z:s}}function pR(t){let e,i,s;if(t.Vm===BA.KC){var n;const i=oR(Nt(t.QD.LS),new lh);e=function(t){return"avc1."+yR(t._Y,2)+yR(t.vY,2)+yR(t.gY,2)}(i),s=null==(n=function(t){if(0===t.mY.length)return;const e=t.mY[0],i=new uu;return i.TY(e,0,e.byteLength),mR(i)}(i))?void 0:n.ZY}else if(t.Vm===BA.YC||t.Vm===BA.ZC){const i=function(t,e){const i=e.Py(),s=wt(t,i,8),n=wt(t,i,2),r=wt(t,i,1),h=wt(t,i,5),o=wt(t,i,32),a=[];for(let e=0;e<6;e++)a.push(wt(t,i,8));const u=wt(t,i,8);i.by(4);const c=wt(t,i,12);i.by(6);const l=wt(t,i,2);i.by(6);const d=wt(t,i,2);i.by(5);const f=wt(t,i,3);i.by(5);const _=wt(t,i,3),v=wt(t,i,16),g=wt(t,i,2),w=wt(t,i,3),m=wt(t,i,1),p=wt(t,i,2),y=wt(t,i,8),A=[];for(let e=0;e<y;e++){const e=wt(t,i,1);i.by(1);const s=wt(t,i,6),n=wt(t,i,16),r=[];for(let e=0;e<n;e++){const e=wt(t,i,16),s=bn(t,new lh(i.Fu>>3),e);i.by(8*e),r.push({sZ:e,nZ:s})}A.push({rZ:e,hZ:s,oZ:n,aZ:r})}return{fY:s,uZ:n,cZ:r,lZ:h,dZ:a,fZ:u,_Z:c,vZ:l,gZ:o,wZ:d,mZ:f,pZ:_,yZ:v,AZ:w,bZ:m,TZ:g,wY:p,SZ:y,kZ:A}}(Nt(t.ZD.LS),new lh);e=function(t,e){let i=t.toString()+".";switch(e.uZ){case 0:break;case 1:i+="A";break;case 2:i+="B";break;case 3:i+="C";break;default:return}switch(i+=e.lZ.toString()+".",i+=function(t){let e=t;return e=e>>>1&1431655765|(1431655765&e)<<1,e=e>>>2&858993459|(858993459&e)<<2,e=e>>>4&252645135|(252645135&e)<<4,e=e>>>8&16711935|(16711935&e)<<8,e=e>>>16|e<<16,e}(e.gZ).toString(16)+".",e.cZ){case 0:i+="L";break;case 1:i+="H";break;default:return}i+=e.fZ.toString();const s=e.dZ.reduce(((t,e)=>0===t?e:e+1),0);for(let t=0;t<s;t++)i+="."+e.dZ[t].toString(16).toUpperCase();return i}(t.Vm,i)}else if(t.Vm===BA.oR||t.Vm===BA.aR||t.Vm===BA.uR||t.Vm===BA.cR){const i=function(t,e){const i=e.Py(),s=wt(t,i,8),n=wt(t,i,8),r=wt(t,i,7),h=wt(t,i,6),o=Boolean(wt(t,i,1)),a=Boolean(wt(t,i,1)),u=Boolean(wt(t,i,1)),c=wt(t,i,4);return wt(t,i,28),wt(t,i,32),wt(t,i,32),wt(t,i,32),wt(t,i,32),{EZ:s,PZ:n,IZ:r,CZ:h,RZ:o,xZ:a,DZ:u,NZ:c}}(Nt(t.cN.LS),new lh);e=function(t,e){const i=t.toString(),s=ec(e.IZ.toString(),2,"0"),n=ec(e.CZ.toString(),2,"0");return i+"."+s+"."+n}(t.Vm,i)}else if(t.Vm===BA.$C){const i=function(t,e){const i=e.Py(),s=wt(t,i,8);i.by(24);const n=wt(t,i,8),r=wt(t,i,8),h=wt(t,i,4),o=wt(t,i,3),a=J(t,i),u=wt(t,i,8),c=wt(t,i,8),l=wt(t,i,8),d=wt(t,i,16),f=new Array(8);for(let e=0;e<d;e++)f[e]=wt(t,i,8);return{fY:s,IZ:n,CZ:r,BZ:h,MZ:o,LZ:a,gN:u,wN:c,mN:l,OZ:d,FZ:f}}(Nt(t.$D.LS),new lh);e=function(t,e){let i=t.toString()+".";return i+="0"+e.IZ+".",i+=ec(""+e.CZ,2,"0")+".",i+=ec(""+e.BZ,2,"0")+".",i+=ec(""+e.MZ,2,"0")+".",i+=ec(""+e.gN,2,"0")+".",i+=ec(""+e.wN,2,"0")+".",i+=ec(""+e.mN,2,"0")+".",i+="0"+e.LZ,i}(t.Vm,i)}else if(t.Vm===BA.eR){const i=function(t,e){const i=e.Py();i.by(1);const s=wt(t,i,7),n=wt(t,i,3),r=wt(t,i,5),h=J(t,i),o=J(t,i),a=J(t,i),u=J(t,i),c=J(t,i),l=J(t,i),d=wt(t,i,2);i.by(3);const f=J(t,i);let _;return f?_=wt(t,i,4):i.by(4),{bx:s,UZ:n,VZ:r,HZ:h,WZ:o,qZ:a,zZ:u,XZ:c,GZ:l,QZ:d,KZ:f,jZ:_}}(Nt(t.iN.LS),new lh);e=function(t,e,i){let s=t.toString()+".";if(s+=e.UZ+".",s+=""+ec(""+e.VZ,2,"0"),s+=(0===e.HZ?"M":"H")+".",s+=(1===e.qZ?12:10)+".",s+=(1===e.UZ?0:e.zZ)+".",s+=""+e.XZ+e.GZ+(1===e.XZ&&1===e.GZ?e.QZ:"0"),i&&i.vN===hc.ON_SCREEN_COLOURS){const t=i;s+="."+ec(""+t.gN,2,"0")+"."+ec(""+t.wN,2,"0")+"."+ec(""+t.mN,2,"0")+"."+(t.pN?1:0)}return s}(t.Vm,i,t.sN)}else if(t.Vm===BA._R){i=function(t){const e=t.dY;switch(e.iY){case sR.Zj:return function(t){var e;if(!(null==(e=t.aY)?void 0:e.eY))return"mp4a.40";const i=function(t,e){let i=wt(t,e,5);31===i&&(i=32+wt(t,e,6));const s=wt(t,e,4);let n;return 15===s&&(n=wt(t,e,24)),{YZ:i,ZZ:s,JZ:n,$Z:wt(t,e,4)}}(Nt(t.aY.eY),new bh);return"mp4a.40."+i.YZ}(e);case sR.Jj:return"mp4a.40.2";case sR.$j:return"mp4a.40.34"}}(rR(Nt(t.UD.LS),new lh))}else if(t.Vm===BA.gR)i="fLaC";else{if(t.Vm!==BA.lR)return(t.Vm===BA.bR||t.Vm===BA.AR)&&t.hN?pR(t.hN):void 0;i="ec-3"}return{tZ:e,eZ:i,iZ:s}}function yR(t,e){const i=t.toString(16);return ec(i,e,"0")}function AR(t,e){const i=Kh.Sx(Nt(t)),s=function(t,e){let i;for(const n of t.Z){var s;const t=null==(s=n.MN)?void 0:s.MN;if(t){const s=n.gx.Jx,r=bv(e.Z,(t=>t.Jx===s)),h=_r.UL(t,r.Wx);i&&!h.xL(i)||(i=h)}}return i}(yc(i,BA.SR),e),n=yc(i,BA.DR);return{YM:s.SL(),tJ:n.LS}}t(),t();var bR=ds.fg,TR=class extends Re{get vG(){return this.SG}set vG(t){this.SG=t}get pG(){return this.PG}set pG(t){this.PG=t}get fa(){return this.eJ||this.iJ.updating}sJ(t,e,i){switch(t.Vm){case lt.KQ:case lt.cS:return this.nJ((i=>this.rJ(t,e,i)),i);case lt.jQ:throw new v("Opaque segments are not supported on web.")}}hJ(t,e){switch(t.Vm){case lt.KQ:return this.nJ((e=>this.oJ(t,e)),e);case lt.cS:throw new v("Streaming initialization segments are not supported on web.");case lt.jQ:throw new v("Opaque initialization segments are not supported on web.")}}async oJ(t,e){this.aJ?this.uJ=Dn(Nt(t.LS)):(await this.cJ(t,void 0,e),bR&&(this.lJ=!1,this.dJ=t))}async rJ(t,e,i){bR&&this.lJ&&this.dJ&&await this.oJ(this.dJ,i);try{if(Bv(i),this.aJ&&this.uJ){const n=await async function(t,e){switch(t.Vm){case lt.KQ:return t;case lt.cS:{const i=await jt(t.LS,e);return Bv(e),{Vm:lt.KQ,LS:new x(i)}}case lt.jQ:throw new v("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,i),r=AR(n.LS,this.uJ);var s;t={Vm:lt.KQ,LS:r.tJ},e=yh({},e,{QO:r.YM+(null!=(s=e.QO)?s:0)})}await this.cJ(t,e,i),this.wo(new o(Xh.GQ))}finally{t.Vm===lt.cS&&t.LS.cancel(new ti).catch(De)}}async cJ(t,e,i){switch(Bv(i),e&&await this.fJ(e),t.Vm){case lt.KQ:if(this._J){const e=this._J.jj(Mp(t.LS));return await this.vJ(e,i)}return await this.gJ(t.LS);case lt.cS:if(this._J){const e=this._J.jj(t.LS);return await this.vJ(e,i)}return await this.vJ(t.LS,i)}}async vJ(t,e){const i=this.wJ.Sl,s=function(t,e){return void 0===e&&(e=new Bp({highWaterMark:1/0})),new zn(new UC(t,e),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await Dc(n.read(),e);if(t.done){r=!1;break}Bv(e);const i=po(t.value);r=!0,await this.gJ(i)}}catch(t){if(n.cancel(t).catch(De),r){await this.mJ();const t=this.wJ.Sl.Cn(i.wB());for(let e=0;e<t.U;e++)await this.pJ(t.Tn(e),t.Pn(e))}throw t}}yJ(t,e){return this.nJ((()=>this.AJ(t,e)))}async AJ(t,e){this.iJ.appendWindowStart===t&&this.iJ.appendWindowEnd===e||(await this.mJ(),this.iJ.appendWindowStart=0,this.iJ.appendWindowEnd=e,this.iJ.appendWindowStart=t)}async fJ(t){if(this.iJ.timestampOffset!==t.QO)try{this.iJ.timestampOffset=t.QO}catch(e){await this.mJ(),this.iJ.timestampOffset=t.QO}}async gJ(t){this.iJ.appendBuffer(t),this.bJ=!0,await this.TJ()}SJ(t,e,i){return this.nJ((i=>this.pJ(t,e,i)),i)}async pJ(t,e,i){Bv(i),this.iJ.remove(t,e),await this.TJ()}TJ(){const t=this.wJ.Sl;return new Promise(((e,i)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},a=()=>{n=!1,s="aborted"},u=()=>{n=!1,s="sourceclose",c()},c=()=>{l(),n&&!s?(t.IB(this.wJ.Sl)||this.wo(new o(Xh.GQ)),e()):i(new v(s))},l=()=>{this.iJ.removeEventListener("update",r),this.iJ.removeEventListener("error",h),this.iJ.removeEventListener("abort",a),this.iJ.removeEventListener("updateend",c),this.kJ.pn(BC.JQ,u)};this.iJ.addEventListener("update",r),this.iJ.addEventListener("error",h),this.iJ.addEventListener("abort",a),this.iJ.addEventListener("updateend",c),ds.Lv&&ds.Fv<3&&this.kJ.wn(BC.JQ,u)}))}EJ(){return this.nJ((()=>this.mJ()))}async mJ(){if(this.kJ.Vc===HR.Mk){bR&&(this.lJ=!0),this.iJ.updating&&(this.eJ=!0);try{this.iJ.abort()}catch(t){0,this.eJ=!1}this.fa&&await this.TJ().catch(De)}}PJ(){return"function"==typeof this.iJ.changeType&&!ds.Nv}hK(t){if(this.IJ(),this.kJ.Vc===HR.CJ)return;var e;this.RJ=t;const i=null!=(e=this.kJ.xJ(t.yS))?e:t.yS;this.aJ=SR(t.yS,this.DJ),this.PJ()&&!ys(this.DJ,i)&&(this.DJ=i,this.iJ.changeType(this.DJ))}NJ(){this.kJ.Vc!==HR.Df||this.BJ||this.fa||(this.iJ.timestampOffset=this.iJ.timestampOffset,this.kJ.MJ())}async nJ(t,e){this.IJ();const i=new Mr;i.lp(this.LJ.ap),e&&i.lp(e);try{this.BJ=t(i.ap),await this.BJ,this.kJ.MJ(),this.fa&&await this.TJ()}finally{this.BJ=void 0,i.Wu()}}IJ(){if(this.BJ)throw new v("Internal error")}async Wu(){this.Bo(),this.LJ.tf(),this.BJ&&(await this.BJ.catch(De),this.BJ=void 0),this.iJ.removeEventListener("updateend",this.OJ),this.iJ.removeEventListener("bufferedchange",this.FJ)}constructor(t,e,i,s,n){var r;if(super(),this.SG=20,this.PG=30,this.eJ=!1,this.bJ=!1,this.BJ=void 0,this.LJ=new Mr,this.lJ=!1,this.dJ=void 0,this.aJ=!1,this.uJ=void 0,this.OJ=()=>{this.eJ=!1},this.FJ=t=>{t.removedRanges&&this.wo(new o(Xh.GQ))},this.kJ=e,this.wJ=t,this.iJ=i,this.iJ.addEventListener("updateend",this.OJ),this.iJ.addEventListener("bufferedchange",this.FJ),this.RJ=s,this.DJ=n,this.aJ=SR(s.yS,n),null==(r=e.aT)?void 0:r.mw){var h;const t=null!=(h=e.aT.UJ)?h:1e5;this._J=new iR(t)}}};function SR(t,e){return Kc(t,"audio/mp4")&&Kc(e,"audio/mpeg")}t();var kR=class{get Sl(){if(this.VJ.Vc===HR.CJ)return r.Ol();let t=r.Sn(this.iJ.buffered).Cn(new r([0,1/0]));const e=this.HJ;return void 0!==e&&t.U>0&&t.Pn(t.U-1)===e&&(t=t.Xl(r.LB(e))),t}yK(){return!!this.HJ&&this.Sl.vB().br(this.HJ)}WJ(){const t=this.Sl;this.HJ=t.U>0?t.Pn(t.U-1):0,this.VJ.qJ()}NJ(){this.HJ=void 0}constructor(t,e){this.HJ=void 0,this.VJ=e,this.iJ=t}};function ER(t){const e=t.fT("codecs");return e?e.split(",").map((t=>t.trim())):[]}function PR(t,e){return!("opus"===t)&&!("opus"===e)||t===e}function IR(t,e){const i=CR(t)||RR(t),s=CR(e)||RR(e);return!i&&!s||t.split(".")[0]===e.split(".")[0]}function CR(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function RR(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function qc(t,e){if(t===e)return!0;const i=t.split("."),s=e.split("."),n=i[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,e]=i,[,n,r]=s;if(t!==n)return!1;if(Number(e)!==Number(r))return!1}return!0}function xR(t,e,i,s,n,r,h){const o=new kR(n,t),a=new TR(o,t,n,i,r);return new DR(t,e,i,s,o,a,h)}t();var DR=class extends Re{get Sl(){return this.wJ.Sl}get aT(){return this.pl}get yS(){return this.ST}get zJ(){return this.XJ}get GJ(){return this.QJ.RK}get vG(){return this.KJ.vG}set vG(t){this.KJ.vG=t}get pG(){return this.KJ.pG}set pG(t){this.KJ.pG=t}get fa(){return this.KJ.fa}yK(){return this.wJ.yK()}WJ(){this.wJ.WJ()}NJ(){this.wJ.NJ(),this.KJ.NJ()}jJ(t,e){this.QJ.DK(t,e)}YJ(t,e){this.QJ.NK(t,e)}ZJ(){return this.KJ.EJ()}sJ(t,e,i){return this.KJ.sJ(t,e,i)}hJ(t,e,i){return this.KJ.hJ(t,i)}yJ(t,e){return ds.Lv&&ds.Fv<3?this.KJ.yJ(t,1/0):this.KJ.yJ(t,e)}async sc(t,e,i){this.YJ(t,e);const s=this.Sl;await this.KJ.SJ(t,e,i);const n=0!==s.U&&0===this.Sl.U;(ds.Tg||ds.Vv)&&n&&this.rM.jc(this.rM.Yu)}nK(t){const e=t.yS;if(this.ST===e)return!0;const i=this.JJ.get(e);if(void 0!==i)return i;const s=this.$J(t);return this.JJ.set(e,s),s}$J(t){const e=this.kJ.xJ(t.yS);if(void 0===e)return!1;const i=Qm(this.ST),s=Qm(e),n=ER(i),r=ER(s);if(this.KJ.PJ()){if(!function(t,e){return Dv(t,e,IR)}(n,r))return!1;if(ds.Eg&&!function(t,e){return Dv(t,e,PR)}(n,r))return!1}else{if(i.Vm!==s.Vm)return!1;if(!function(t,e){return Dv(t,e,qc)}(n,r))return!1}return!0}async hK(t){const e=t.yS;this.ST!==e&&(this.JJ.clear(),this.KJ.hK(t),this.ST=e),this.pl=t,this.kJ.t$()}async Wu(){this.JJ.clear(),this.Bo(),this.QJ.bn();try{this.KJ.pn(Xh.GQ,this.Os),await this.KJ.Wu()}catch(t){}}constructor(t,e,i,s,n,r,h){super(),this.JJ=sa(),this.kJ=t,this.pl=i,this.ST=i.yS,this.XJ=s,this.rM=e,this.wJ=n,this.KJ=r,this.QJ=h,this.KJ.wn(Xh.GQ,this.Os)}};t();var NR=class{e$(){let t=this.Tn,e=this.Pn;if(this.i$||this.s$){const i=.001*(Gn.Qg()-this.n$);this.i$&&(t+=i),this.s$&&(e+=i)}return r.OB(t,e)}constructor(t,e,i=!1,s=!1){this.Tn=t,this.Pn=e,this.i$=i,this.s$=s,this.n$=Gn.Qg()}};t(),t();var BR=.5,MR=[Uv.no,Uv.Ff,Uv.$f,Uv.If,Uv.Fp,Uv.Vp,Uv.Df,Uv.qu,cb.Lf,Yo.la],LR=class{r$(t){this.h$.push(t),t.wn(OC.PK,this.o$)}get RK(){return this.h$.reduce(((t,e)=>t.Xl(e.RK)),r.Ol())}bn(){this.a$(),this.u$.pn(cb.Lf,this.c$),this.rM.pn(Uv.zf,this.c$),this.rM.pn(MR,this.l$),this.h$.forEach((t=>t.pn(OC.PK,this.o$))),this.d$(),this.f$=!0}SK(t){if(this.rM.$c)return!1;if(0!==this._$)return!1;const e=this.wJ.Sl,i=e.TB(t);if(i>=0&&t+BR<e.Pn(i))return!1;const s=i>=0?i+1:e.DB(t);if(s<0||s>=e.U)return!1;const n=e.Tn(s);if(r.OB(t,n).bB(this.RK).MB>1)return!1;if(0===t&&!this.rM.Uc)return this.v$(t,n,2e3),!0;if(Gn.qE)return this.v$(t,n,250),!0;return!(w.abs(n-t)<=.001)&&(this.g$(n),!0)}v$(t,e,i){this.d$(),this.w$=t,this.rM.wn(Uv.$f,this.m$),this._$=Gn.jg((()=>{this.w$===this.rM.Yu&&this.g$(e),this.d$()}),i)}d$(){0!==this._$&&(this.rM.pn(Uv.$f,this.m$),Gn.Kg(this._$),this._$=0)}g$(t){this.rM.jc(t,!1,!0)}p$(){0!==this.y$&&(Gn.Kg(this.y$),this.y$=0),this.rM.pn(Uv.Xu,this.A$)}b$(){this.f$||0===this.T$&&(this.p$(),this.T$=Gn.$w(this.S$,250))}a$(){0!==this.T$&&(Gn.tm(this.T$),this.T$=0),this.p$(),this.rM.Uc||(this.k$=0)}E$(){return!this.rM.Oc&&!this.rM.Uc&&0!==this.rM.Hu&&!this.rM.$c&&!this.rM.lt&&(this.P$()||this.u$.Vc>=qb.Cf)}P$(){const t=this.rM.Yu,e=this.wJ.Sl,i=e.TB(t);return-1!==i&&e.Pn(i)>t+BR}I$(t,e){const i=e.TB(t);return i>-1?e.Pn(i):t}constructor(t,e,i,s){this.wJ=t,this.u$=e,this.rM=i,this.f$=!1,this.h$=[],this._$=0,this.y$=0,this.C$=0,this.w$=0,this.k$=0,this.T$=0,this.R$=1,this.o$=t=>{const e=this.rM.Yu,i=t.CK.br(e),s=t.CK.br(e,BR)&&this.rM.Vc<=qb.Jf;(i||s)&&this.SK(e)},this.c$=Mh((t=>{if(this.f$)return;if(this.u$.Vc<=qb.Jf){const t=this.rM.Yu;this.SK(t)||this.S$()}else this.d$()}),100),this.A$=Mh((t=>{this.b$()}),100),this.m$=t=>{t.currentTime!==this.w$&&this.d$()},this.l$=()=>{this.E$()?0===this.T$&&(this.rM.wn(Uv.Xu,this.A$),this.y$=Gn.jg((()=>{this.b$()}),3500)):this.a$()},this.S$=()=>{const t=this.C$,e=this.k$,i=this.rM.Yu,s=Gn.Qg(),n=this.wJ.Sl;if(t!==i)return this.C$=i,this.k$=s,this.R$=1,void(this.x$=Gn.XE?2e3:1e3);if(this.E$()&&0!==n.U&&e>0&&s>e+this.x$){let t;const e=this.RK.vB().bB(n),s=e.xB(i);if(-1!==s){const n=e.Tn(s);if(n-i<1){const i=e.Pn(s);0,t=i}}var r;if(!t)t=null==(r=this.D$)?void 0:r.determineStallJumpTarget(),t||(t=i+.01*this.R$,n.br(t)||(t=this.I$(i,n)));0,this.C$=t,this.R$++,this.x$=w.min(2*this.x$,1e4),this.g$(t)}},this.u$.wn(cb.Lf,this.c$),this.rM.wn(Uv.zf,this.c$),this.rM.wn(MR,this.l$),this.D$=s,this.x$=Gn.XE?2e3:1e3}};function OR(t){const e=[];if(t.N$&&e.push(t.N$.Sl),t.B$&&e.push(t.B$.Sl),0===e.length)return r.Ol();let i=0;for(const t of e)t.U>0&&(i=w.max(i,t.Pn(t.U-1)));const s=t.yK;let n=new r([0,i],[!0,s]);for(let t of e)s&&t.U>0&&(t=t.Xl(new r([t.Pn(t.U-1),i],[!0,!0]))),n=n.Cn(t);return n}function on(t,e,i){const s=t.Sl;let n,r=s.TB(e);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Tn(r+1)}else{if(r=s.DB(e),!(r>=0))return Promise.resolve();n=s.Tn(r)}return t.sc(n,1/0,i)}function FR(t,e,i){if(!t.br(e)){const s=t.TB(e,i);if(s>=0){const i=t.Tn(s);if(e<i)return i}}return e}t();var UR=ds.Kv||ds.Zv,VR=ds.og||ds.fg||ds.uv,HR=function(t){return t.CJ="closed",t.Mk="open",t.Df="ended",t}({}),WR=class extends Nn{get N$(){return this.M$}get B$(){return this.L$}get ct(){if(this.O$)return this.O$;const t=this.iH.duration;return t===fo?1/0:t}F$(t){if(j(t)||t<0)throw new v("Invalid duration");this.U$()?this.V$(t):this.O$=t}V$(t){const e=t===1/0;if(e&&this.iH.setLiveSeekableRange){const t=2**39;this.iH.setLiveSeekableRange(0,t)}this.iH.duration=e?VR?1/0:fo:t,this.O$=void 0}get Sl(){return UR?OR(this):function(t,e){let i=e;return i.U>0&&t.yK&&(i=i.Xl(r.LB(i.Pn(i.U-1)))),i}(this,r.Sn(this.QT.buffered))}get AK(){var t;return null==(t=this.M$)?void 0:t.Sl}get bK(){var t;return null==(t=this.L$)?void 0:t.Sl}get Cl(){return this.H$.e$().Cn(new r([0,this.ct],[!0,!0]))}W$(t,e,i,s){this.H$=new NR(t,e,!!i,!!s)}get yK(){return(!this.M$||this.M$.yK())&&(!this.L$||this.L$.yK())}get Vc(){return this.iH.readyState}async yG(){const t=this.pl,e=bv(t.q$,(t=>Kc(t.yS,"audio"))),i=bv(t.q$,(t=>Kc(t.yS,"video")));if(this.QT.disableRemotePlayback=!0,await this.z$(),e){const t=new ar;var s;this.X$.r$(t);const i=null!=(s=this.xJ(e.yS))?s:e.yS;this.G$=this.iH.addSourceBuffer(i),this.M$=xR(this,this.rM,e,Be.hk,this.G$,i,t),this.M$.wn(Xh.GQ,this.FJ)}if(i){const t=new ar;var n;this.X$.r$(t);const e=null!=(n=this.xJ(i.yS))?n:i.yS;this.Q$=this.iH.addSourceBuffer(e),this.L$=xR(this,this.rM,i,Be.wl,this.Q$,e,t),this.L$.wn(Xh.GQ,this.FJ)}this.oK.On(this,t)}async z$(){await super.wK(this.iH),"open"!==this.Vc&&await V(this.iH,"sourceopen")}U$(){if("open"!==this.Vc)return!1;const t=this.M$&&this.M$.fa,e=this.L$&&this.L$.fa;return!(t||e)}WJ(){this.K$=!0,this.M$&&this.M$.WJ(),this.L$&&this.L$.WJ(),this.K$=!1,this.j$()}NJ(){this.M$&&this.M$.NJ(),this.L$&&this.L$.NJ()}nK(t){const e=bv(t.q$,(t=>Kc(t.yS,"audio"))),i=bv(t.q$,(t=>Kc(t.yS,"video")));if(this.M$){if(!e)return!1;if(!this.M$.nK(e))return!1}else if(e)return!1;if(this.L$){if(!i)return!1;if(!this.L$.nK(i))return!1}else if(i)return!1;return!!super.nK(t)}async hK(t){const e=bv(t.q$,(t=>Kc(t.yS,"audio"))),i=bv(t.q$,(t=>Kc(t.yS,"video"))),s=[];this.M$&&s.push(this.M$.hK(e)),this.L$&&s.push(this.L$.hK(i)),await Promise.all(s),await super.hK(t)}aK(t){super.aK(t)}async Wu(){if(this.iH.removeEventListener("sourceclose",this.Y$),ds.Vv&&await this.pK(),this.M$){if(await this.M$.Wu(),this.M$=void 0,lo()&&(ds.Vv||ds.Lv))try{this.iH.removeSourceBuffer(this.G$)}catch(t){}this.G$=void 0}if(this.L$){if(await this.L$.Wu(),this.L$=void 0,lo()&&(ds.Vv||ds.Lv))try{this.iH.removeSourceBuffer(this.Q$)}catch(t){}this.Q$=void 0}this.QT.src&&URL.revokeObjectURL(this.QT.src),this.QT.disableRemotePlayback=!1,this.rM.pn([Uv.$f,Uv.Fp],this.Z$),this.X$.bn(),ds.Lv&&await this.pK(),await super.Wu()}t$(){const t=this.pl,e=t.q$.map((t=>Kc(t.yS,"audio")&&this.M$?this.M$.aT:Kc(t.yS,"video")&&this.L$?this.L$.aT:t));this.pl=yh({},t,{q$:e})}qJ(){this.K$||this.j$()}get J$(){if(!this.yK)return!1;const t=this.Sl;return 0!==t.U&&t.Tn(t.U-1)<=this.rM.Yu}j$(){this.J$&&this.U$()&&(this.iH.endOfStream(),this.O$=void 0,this.wo(new o(BC.YQ)),this.rM.FJ())}MJ(){this.U$()&&(this.yK?this.j$():void 0!==this.O$&&this.V$(this.O$))}SK(t){return this.X$.SK(t)}kK(){return!0}xJ(t){return qR(this.t0,t)}static EK(t){const e=pn(t.e0);if(void 0===e)return!1;if("function"!=typeof e.isTypeSupported)return!1;const i=new Qh(t.e0);for(const e of t.q$)if(void 0===qR(i,e.yS))return!1;return!0}constructor(t,e,i,s,n,r=new Qh(t.e0),h){super(t,e,s,n),this.M$=void 0,this.G$=void 0,this.L$=void 0,this.Q$=void 0,this.H$=new NR(0,1/0),this.O$=void 0,this.K$=!1,this.Y$=()=>{this.wo(new o(BC.JQ))},this.i0=()=>{this.wo(new o(BC.tK))},this.Z$=()=>{this.j$()},this.FJ=()=>{this.rM.FJ()},this.t0=r,this.iH=this.t0.Iw(),this.iH.addEventListener("sourceclose",this.Y$),this.iH.addEventListener("sourceopen",this.i0),this.rM.wn([Uv.$f,Uv.Fp],this.Z$),this.X$=new LR(this,i,this.rM,h)}};function qR(t,e){const i=Qm(e),s=ER(i),n="audio/mp4"===i.Vm,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.Rw(e)&&(!r||!ds.fg))return e;if(r){const e=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const i of e)if(t.Rw(i))return i}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const i=["flac","fLaC","FLAC"];for(const s of i){const i='audio/mp4; codecs="'+s+'"';if(t.Rw(e))return i}}}t(),t();var zR=class extends o{constructor(t){super(Uv.Fp),this.currentTime=t}},XR=[Uv.Bl,Uv.qu,Uv.$f,Uv.Fp,Uv.no,Uv.Ff],GR=class extends Re{get Yu(){return this.fW}get s0(){return this.n0}get Lc(){return this.r0}get ct(){return this.nf}get $c(){return this.ef}get Oc(){return this.if}get Vc(){return this.rf}get Uc(){return this.sf}get tc(){return this._W}set tc(t){this.tc!==t&&(this._W=t,this.wo(new Wo(this.Yu,this.Pl)))}get Hu(){return this.vW}set Hu(t){this.Hu!==t&&(this.vW=t,this.wo(new Sr(this.Yu,this.Hu)))}get Pl(){return this.VA}set Pl(t){this.Pl!==t&&(this.VA=t,this.wo(new Wo(this.Yu,this.Pl)))}jc(t,e,i){this.fW!==t&&(this.fW=t,this.n0=e,i&&!this.sf?(this.r0=!0,this.wo(new zR(this.Yu))):(this.r0=!1,this.sf=!0,this.wo(new lc(this.Yu))))}Ml(){this.if||(this.if=!0,this.wo(new ac(this.Yu)))}bl(){this.if&&(this.if=!1,this.wo(new ah(this.Yu)))}Wu(){this.Bo()}constructor(t,e,i,s,n,r,h,o,a,u,c){super(),this.fW=t,this.nf=e,this.ef=i,this.if=s,this.sf=n,this._W=r,this.vW=h,this.VA=o,this.rf=a,this.n0=u,this.r0=c}};function QR(t){return new GR(t.Yu,t.ct,t.$c,t.Oc,t.Uc,t.tc,t.Hu,t.Pl,t.Vc,!1,t.Lc)}function KR(t,e){e.ct===t.ct||j(e.ct)&&j(t.ct)||t.wo(new de(t.ct)),t.tc=e.tc,t.Pl=e.Pl,t.Hu=e.Hu,e.Oc?t.Ml():t.bl().catch(De),e.Yu!==t.Yu||e.Vc>qb.Jl&&t.Vc===qb.Jl?t.jc(e.Yu,e.s0,e.Lc):!e.Uc&&t.Uc?t.wo(new lc(t.Yu)):e.Uc&&!t.Uc&&t.Vc>=qb.Jf&&t.wo(new qo(t.Yu)),!e.$c&&t.$c&&t.wo(new Zu(t.Yu))}t(),t();var Fn=class extends Re{get Vc(){return this.xP()}h0(t){this.OF!==t&&(this.OF=t,this.wo(new xr(this.rM.Yu,t)))}o0(){this.h0(this.xP())}sr(){this.h0(qb.Jl)}Wu(){this.Bo()}constructor(t){super(),this.OF=qb.Jl,this.a0=()=>{this.o0()},this.rM=t}};t();var jR=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],So=class extends Fn{xP(){let t=this.rM.tH.readyState;return t>qb.Jf&&this.rM.u0?qb.Jf:(this.rM.tH.seeking&&t>qb.Qn&&(t=qb.Qn),t)}Wu(){for(const t of jR)this.rM.tH.removeEventListener(t,this.a0);super.Wu()}constructor(t){super(t);for(const t of jR)this.rM.tH.addEventListener(t,this.a0)}};t();var YR=class extends Fn{xP(){if(this.rM.tH.readyState===qb.Jl)return qb.Jl;const t=this.c0(),e=t?t.Pn-t.Tn:0;if(!t)return qb.Qn;const i=this.rM.Hu;return this.l0()||e>=3*i?qb.Ql:e>=3?qb.Cf:qb.Jf}c0(){const t=this.rM.Yu,e=this.rM.Sl.yB(.04),i=e.TB(t);if(!(i<0))return{Tn:t,Pn:e.Pn(i)}}l0(){if(this.rM.$c)return!0;const t=this.rM.ct,e=this.c0();return!!e&&t-e.Pn<=.16666666666666666}Wu(){this.rM.pn([Uv.$f,Uv.Fp],this.a0);for(const t of jR)this.rM.tH.removeEventListener(t,this.a0);super.Wu()}constructor(t){super(t),this.rM.wn([Uv.$f,Uv.Fp],this.a0);for(const t of jR)this.rM.tH.addEventListener(t,this.a0)}};t(),t();var ZR=[cb.Lf,Uv.no,Uv.Ff,Uv.$f,Uv.If,Uv.Fp,Uv.Vp,Uv.Df,Yo.la],JR=class extends Re{d0(){return(!this.DF.Lc||!this.DF.Hc)&&this.DF.Vc<qb.Cf}f0(){return!this.DF.Uc&&!(this.DF.Oc||this.DF.$c||this.DF.lt||this.d0())}Zn(){const t=this._0;this._0=this.f0(),!t&&this._0&&this.wo(new $n(this.DF.Yu))}sr(){this._0=!1}Wu(){this.Bo(),this.DF.pn(ZR,this.fX)}constructor(t){super(),this._0=!1,this.fX=()=>{this.Zn()},this.DF=t,this.DF.wn(ZR,this.fX)}},$R=class extends JR{f0(){return this.v0&&super.f0()}Zn(){this.v0&&(this.QT.paused||this.QT.ended||this.QT.error)&&(this.v0=!1),super.Zn()}sr(){super.sr(),this.v0=!1}Wu(){this.QT.removeEventListener(cb.nd,this.qF),super.Wu()}constructor(t){super(t),this.v0=!1,this.qF=()=>{this.v0=!0,this.Zn()},this.QT=t.tH,this.QT.addEventListener(cb.nd,this.qF)}};t();var ku=class extends o{constructor(t){super(Yo.la),this.lt=t}};function tx(t,e){return t.YM<=e&&t.ZM>e}function Rh(t,e){return function(t,e){return ch(t.YM,e.YM,Su)}(t,e)||function(t,e){return ch(t.ZM,e.ZM,Su)}(t,e)}function ex(t,e){return function(t,e){return ch(t.nL,e.nL,Su)}(t,e)||function(t,e){return ch(t.rL,e.rL,Su)}(t,e)}function Au(t,e,i){let s=function(t,e,i,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(i(t[h]),e);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(i(t[h-1]),e)))return h;a=h-1}}return~o}(t,e,Kl,i,!0);if(s<0)return s;for(;s<t.length&&i(e,t[s])===L.ih;s++)if(t[s].fL(e))return s;return-(s+1)}function ix(t,e,i){const s=Au(t,e,i);return s>=0?s:-(s+1)}function sx(t){const e=t.Ht;if(!e)return-1;if(t instanceof Hu)return e.g0(t);const i=e.L;if(!i)return-1;const s=Au(i.RI,t,Rh);return s>=0?s:-1}function nx(t,e){const i=function(t,e,i){const s=t.length,n=e.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=e[h];s===n?(r++,h++):i(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(e[h]),h++;return{w0:o,m0:a}}(t,e,Rh);return function(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s];t.length=i}(t,e),i}t(),t(),t(),t();var St=class{get RI(){return this.p0}get U(){return this.p0.length}get ba(){if(this.Zu){const t=this.p0;this.Zu.length=t.length;for(let e=0;e<t.length;e++)this.Zu[e]=t[e].ba}else this.Zu=this.ya();return this.Zu}ya(){return function(t){const e=[];for(let i=0;i<t.U;i++)e[i]=t.xy(i).ba;return e.item=e=>{const i=0|e,s=t.xy(i);return s&&s.ba||void 0},g.defineProperty(e,"constructor",{value:AT}),e}(this)}FM(t){const e=this.p0;for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(t.fL(s))return!0}return!1}xy(t){return this.p0[t]}constructor(t){this.Zu=void 0,this.p0=t}};t();var Mn=class extends xe{ya(){return new rx(this.Ht.ba,this.Vc)}constructor(t,e){super(Fe.Lf),this.Ht=t,this.Vc=e}},rx=class extends eo{constructor(t,e){super("readystatechange"),this.track=t,this.readyState=e}};t();var Vn=class extends xe{ya(){return new hx(this.Ht.ba)}constructor(t){super(Fe.bI),this.Ht=t}},hx=class extends eo{constructor(t){super("typechange"),this.track=t}};t();var On=class extends xe{ya(){return new ox(this.KM.ba)}constructor(t){super(Fe.aI),this.KM=t}},ox=class extends eo{constructor(t){super("addcue"),this.cue=t}};t();var Pn=class extends xe{ya(){return new ax(this.KM.ba)}constructor(t){super(Fe.cI),this.KM=t}},ax=class extends eo{constructor(t){super("removecue"),this.cue=t}},ru=class extends Re{get W(){return this.y0}get L(){return this.A0}b0(t){return bv(this.A0.RI,(e=>e.o===t))}get PF(){return this.T0}set PF(t){this.T0=t}get eC(){return this.S0}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return wn(this)}get o(){return this.Wb}get KI(){return this.HM}get $I(){return this.k0}set $I(t){this.k0=t}get Lt(){return this.E0}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,this.wo(new Ba(this)))}get gs(){return this.CA}get jI(){return this.P0}get Tk(){return this.qo}set Tk(t){this.I0(t)}I0(t){const e=pt(t);e!==this.Tk&&(this.qo=e,e===Aa.Th&&(this.C0.forEach((t=>{t.Zh=!1})),us(this.C0),this.R0=0),this.wo(new no(this)))}get Vc(){return this.rf}set Vc(t){this.rf!==t&&(this.rf=t,this.wo(new Mn(this,this.rf)))}get iC(){return this.x0}set iC(t){this.x0=t}get Vm(){return this.Dw}set Vm(t){this.Dw!==t&&(this.Dw=t,this.wo(new Vn(this)))}SF(t){if(!t||t.Ht)return;const e=Au(this.D0,t,ex);if(e>=0)return;t.Ht=this;const i=-(e+1);this.D0.splice(i,0,t);const s=ix(this.L.RI,t,Rh);this.N0(t,s),this.wo(new On(t))}N0(t,e){this.p0.splice(e,0,t),this.B0(e),t.gL=e,e<this.R0&&(this.R0=e)}fF(t){if(!t||t.Ht!==this)return;const e=this.g0(t);if(e<0)return;t.Zh=!1;const i=this.C0,s=Au(i,t,Rh);s>=0&&Xt(i,s);const n=Au(this.D0,t,ex);n>=0&&Xt(this.D0,n),this.M0(t,e),this.wo(new Pn(t))}M0(t,e){Xt(this.p0,e),this.B0(e),t.gL=-1,this.R0>e&&--this.R0}aL(t){if(!t||t.Ht!==this)return;const e=this.g0(t);if(e<0)return;this.M0(t,e);const i=ix(this.L.RI,t,Rh);this.N0(t,i);const s=su(this.C0,(e=>e===t));if(s>=0){Xt(this.C0,s);const e=ix(this.C0,t,Rh);this.C0.splice(e,0,t)}}L0(t,e){const i=this.C0,s=this.p0;let n=this.R0,r=!1,h=1/0;e&&(n=0);for(let e=i.length-1;e>=0;e--){const s=i[e];tx(s,t)?s.ZM<h&&(h=s.ZM):(r=!0,Xt(i,e))}for(;n<s.length&&s[n].YM<=t;){const e=s[n];tx(e,t)&&(Qe(i,e)||(r=!0,i.push(e)),e.ZM<h&&(h=e.ZM)),n++}return n<s.length&&s[n].YM<h&&(h=s[n].YM),r&&gv(i,Rh),this.R0=n,h}g0(t){return(-1===t.gL||t.gL>=this.O0)&&this.F0(),t.gL}F0(){const t=this.p0;for(let e=this.O0;e<t.length;e++)t[e].gL=e;this.O0=t.length}B0(t){t<this.O0&&(this.O0=w.max(t,0))}tC(t){this.eC||(this.Tk=t)}bn(){this.Bo();const t=this.p0.slice();for(const e of t)e.bn();us(this.p0),us(this.D0),us(this.C0)}constructor(t,e,i,s,n,r,h,o,a){super(),this.HM=xs(),this.T0=!1,this.qo=Aa.Th,this.rf=Fi.NONE,this.x0=void 0,this.p0=[],this.D0=[],this.C0=[],this.O0=0,this.R0=0,this.Wb=e||"",this.k0=o||"",this.E0=t,this.CA=s||"",this.T0=Boolean(n),this.S0=Boolean(h),this.Dw=r||Zo.DEFAULT,this.ec=i||"",this.P0=a||[],this.A0=new St(this.p0),this.y0=new St(this.C0)}};t(),t(),t();var nr=class extends Da{ya(){return new ux(this.KM.ba)}constructor(t,e){super(Zs.mM,t),this.vO=e}},ux=class extends Fa{constructor(t){super("enter",t)}};t();var hr=class extends Da{ya(){return new cx(this.KM.ba)}constructor(t,e){super(Zs.pM,t),this.vO=e}},cx=class extends Fa{constructor(t){super("exit",t)}};t();var lx=class extends xe{ya(){return new dx(this.KM.ba)}constructor(t){super(Fe._I),this.KM=t}},dx=class extends eo{constructor(t){super("entercue"),this.cue=t}};t();var fx=class extends xe{ya(){return new _x(this.KM.ba)}constructor(t){super(Fe.gI),this.KM=t}},_x=class extends eo{constructor(t){super("exitcue"),this.cue=t}},ju=class extends S{get KI(){return this.HM}get YM(){return this.U0.startTime}set YM(t){this.U0.startTime=t}get ZM(){return this.U0.endTime}set ZM(t){this.U0.endTime=t}get O(){return this.cL}set O(t){this.cL=t}get lL(){return!!this.U0.pauseOnExit}set lL(t){this.U0.pauseOnExit=!!t}get Ht(){return this.oL}set Ht(t){this.oL=t}get o(){return this.U0.id||""}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return ce(this)}get Zh(){return this.io}set Zh(t){this.Zh!==t&&(this.io=t,t?(this.wo(new nr(this,this.YM)),this.oL&&this.oL.wo(new lx(this))):(this.wo(new hr(this,this.ZM)),this.oL&&this.oL.wo(new fx(this))))}fL(t){return this===t||$y(this,t)&&kT(this,t)&&this._L(t)}_L(t){return sn(this.O,t.O)}bn(){this.Bo(),this.U0.removeEventListener("enter",this.V0),this.U0.removeEventListener("exit",this.H0)}constructor(t){super(),this.cL=void 0,this.oL=void 0,this.Zu=void 0,this.io=!1,this.V0=()=>{this.Zh=!0},this.H0=()=>{this.Zh=!1},this.HM=dT(),this.U0=t,this.nL=t.startTime,this.rL=t.endTime,this.U0.addEventListener("enter",this.V0),this.U0.addEventListener("exit",this.H0)}};t();var vx=class extends xe{ya(){return new gx(this.Ht.ba)}constructor(t){super(Fe.mI),this.Ht=t}},gx=class extends eo{constructor(t){super("cuechange"),this.track=t}};function wx(t){if(!t)return;let e=t.THEOplayerVTTRegion;return e||(e=new mx(t),t.THEOplayerVTTRegion=e),e}t(),t();var mx=class{get W0(){return this.q0}get o(){return this.q0.id||""}get Ti(){return+this.q0.width||0}set Ti(t){this.q0.width=t||0}get wL(){return+this.q0.lines||0}set wL(t){this.q0.lines=t||0}get mL(){return+this.q0.regionAnchorX||0}set mL(t){this.q0.regionAnchorX=t||0}get pL(){return+this.q0.regionAnchorY||0}set pL(t){this.q0.regionAnchorY=t||0}get AL(){return+this.q0.viewportAnchorX||0}set AL(t){this.q0.viewportAnchorX=t||0}get bL(){return+this.q0.viewportAnchorY||0}set bL(t){this.q0.viewportAnchorY=t||0}get yL(){return this.q0.scroll||""}get ba(){return this.Zu||(this.Zu=xT(this)),this.Zu}constructor(t){this.Zu=void 0,this.q0=t}};var px=class extends ju{get O(){return this.U0.text}set O(t){this.U0.text=t}get At(){return this.U0.vertical||""}set At(t){this.U0.vertical=t||""}get sL(){return this.U0.snapToLines}set sL(t){this.U0.snapToLines=t}get $M(){return this.U0.line}set $M(t){this.U0.line=t}get Iy(){return+this.U0.size}set Iy(t){this.U0.size=ht(t,0,100)}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return bT(this)}_L(t){return ET(this,t)}constructor(t){super(t)}},yx=class extends px{get iL(){return wx(this.U0.region)}get tL(){return this.U0.lineAlign||"start"}set tL(t){this.U0.lineAlign=t||"start"}get lo(){return this.U0.position}set lo(t){this.U0.position=t}get eL(){return this.U0.positionAlign||"auto"}set eL(t){this.U0.positionAlign=t||"auto"}get JM(){return this.U0.align||"center"}set JM(t){this.U0.align=t||"center"}constructor(t){super(t)}},Ax=class extends px{get iL(){return wx(this.W0)}get W0(){return function(t,e){if(void 0===e)return;let i=t&&t.regions;return i&&i.getRegionById(e)||void 0}(this.U0.track,this.U0.regionId)}get tL(){return function(t){return"middle"===t?"center":t}(this.U0.lineAlign||"start")}set tL(t){this.U0.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get lo(){return this.U0.position}set lo(t){this.U0.position=function(t,e){return yT(t,e)}(t,this.JM)}get eL(){return function(t){return mT[t]}(this.U0.positionAlign||"middle")}set eL(t){this.U0.positionAlign=function(t,e){return wT[pT(t,e)]}(t||"center",this.JM)}get JM(){return function(t){return"middle"===t?"center":t}(this.U0.align||"middle")}set JM(t){this.U0.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function bx(t,e){return t.O===e.O}function Tx(t,e){if(0===e.length)return;const i=e.length-1;if(e[i].YM<t.YM)return void Sx(e,i,t.YM);const s=e[0];if(s.YM>t.YM)return void(t.ZM=s.YM);const n=Au(e,t,Rh);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){e[h].YM<t.YM&&Sx(e,h,t.YM)}if(r<e.length){const i=e[r];t.ZM=i.YM}}function Sx(t,e,i){const s=t[e].YM;for(let n=e;n>=0&&t[n].YM===s;n--)t[n].ZM=i}function kx(t){return ce(t)}t(),t(),t(),t();var Ex=class extends ju{get O(){return this.z0}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return kx(this)}_L(t){return bx(this,t)}constructor(t,e){super(t),this.z0=e}};function ni(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function li(t){switch(t){case 0:return fg;case 1:return wg;case 2:return mg;case 3:return Vh}}function Px(t,e){const i=e.Fu,s=t.byteLength,n=Ht(t);return e.by(s-i),Nc(n,i,s).buffer}function Ix(t,e){return{id:t||"",data:e instanceof ArrayBuffer?e:void 0}}function Cx(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s);return{id:i,language:dc(t,e,3),description:n(t,e),text:n(t,e)}}function Rx(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s);return{id:i,mimeType:fg(t,e),fileName:n(t,e),description:n(t,e),data:Px(t,e)}}function xx(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s),r=[];for(;e.Fu<t.byteLength;)r.push({involvement:n(t,e),involvee:n(t,e)});return{id:i,entries:r}}function Dx(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s),r=dc(t,e,3),h=_e(t,e),o=_e(t,e),a=n(t,e);let u=!1;const c=[];for(;e.Fu<t.byteLength;){let i;if(1===s){let s=gg(t,e);void 0===s?s=u:u=s,i=mg(t,e,s)}else i=n(t,e);if(!i||e.Fu+4>t.byteLength)break;c.push({text:i,timestamp:No(t,e)})}return{id:i,language:r,format:h,contentType:o,description:a,entries:c}}function Nx(t,e,i){return{id:i,ownerIdentifier:fg(t,e),identifier:Px(t,e)}}function Bx(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s);return{id:i,language:dc(t,e,3),description:n(t,e),text:n(t,e)}}function Mx(t,e,i){const s=_e(t,e);if(!ni(s))return;return{id:i,text:li(s)(t,e)}}function Lx(t,e,i){return{id:i,url:fg(t,e)}}function Ox(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s);return{id:i,description:n(t,e),text:n(t,e)}}function Fx(t,e,i){const s=_e(t,e);if(!ni(s))return;return{id:i,description:li(s)(t,e),url:fg(t,e)}}function Ux(t,e,i){switch(i){case"COM":return Cx(t,e,i);case"GEO":return Rx(t,e,i);case"IPL":return xx(t,e,i);case"PIC":return function(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s),r=dc(t,e,3),h=_e(t,e),o=n(t,e);let a,u;return"--\x3e"===r?(a=r,u=fg(t,e)):(a="image/"+r.toLowerCase(),u=Px(t,e)),{id:i,mimeType:a,pictureType:h,description:o,data:u}}(t,e,i);case"SLT":return Dx(t,e,i);case"TXX":return Ox(t,e,i);case"UFI":return Nx(t,e,i);case"ULT":return Bx(t,e,i);case"WXX":return Fx(t,e,i);default:if("T"===i.charAt(0))return Mx(t,e,i);if("W"===i.charAt(0))return Lx(t,e,i)}}function Vx(t,e,i){switch(i){case"APIC":return function(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s),r=fg(t,e),h=_e(t,e),o=n(t,e);let a;return a="--\x3e"===r?fg(t,e):Px(t,e),{id:i,mimeType:r,pictureType:h,description:o,data:a}}(t,e,i);case"COMM":return Cx(t,e,i);case"COMR":return function(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s),r=fg(t,e),h=dc(t,e,8),o=fg(t,e),a=_e(t,e),u=n(t,e),c=n(t,e);let l,d;return e.Fu<t.byteLength&&(l=fg(t,e)||"image/",d=Px(t,e)),{id:i,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,e,i);case"GEOB":return Rx(t,e,i);case"IPLS":return xx(t,e,i);case"PRIV":return function(t,e,i){return{id:i,ownerIdentifier:fg(t,e),data:Px(t,e)}}(t,e,i);case"POSS":return function(t,e,i){return{id:i,format:_e(t,e),position:No(t,e)}}(t,e,i);case"SYLT":return Dx(t,e,i);case"TXXX":return Ox(t,e,i);case"UFID":return Nx(t,e,i);case"USER":return function(t,e,i){const s=_e(t,e);if(!ni(s))return;const n=li(s);return{id:i,language:dc(t,e,3),text:n(t,e)}}(t,e,i);case"USLT":return Bx(t,e,i);case"WXXX":return Fx(t,e,i);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return Mx(t,e,i);default:{const s=i.charAt(0);if("T"===s)return Mx(t,e,i);if("W"===s)return Lx(t,e,i)}}}t(),t();var Hx=10;function Wx(t,e){return(127&_e(t,e))<<21|(127&_e(t,e))<<14|(127&_e(t,e))<<7|127&_e(t,e)}function qx(t,e){switch(t){case 4:return{X0:mi(e,0),G0:mi(e,1),Q0:mi(e,2),K0:mi(e,3)};case 3:return{X0:mi(e,0),G0:mi(e,1),Q0:mi(e,2)};case 2:return{X0:mi(e,0),j0:mi(e,1)}}}function zx(t,e,i){switch(i.bx){case 3:i.Tx.G0&&function(t,e){const i=e.Fu,s=No(t,e)+4,n=32768&Qu(t,e);e.jc(i+s),n&&No(t,e)}(t,e);break;case 4:i.Tx.G0&&function(t,e){const i=e.Fu,s=Wx(t,e);e.jc(i+s)}(t,e)}}function Xx(t,e){if(t.byteLength-e.Fu<Hx)return null;if(73!==_e(t,e)||68!==_e(t,e)||51!==_e(t,e))return null;const i=_e(t,e),s=_e(t,e);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(i))return null;const n=_e(t,e),r=Wx(t,e);return{bx:i,Y0:s,Tx:qx(i,n),Z0:r}}function Gx(t,e,i){switch(i){case 2:return function(t,e){if(e.Fu+6>t.byteLength)return;return{o:dc(t,e,3),Iy:Nh(t,e,3)}}(t,e);case 3:return function(t,e){if(e.Fu+10>t.byteLength)return;const i=dc(t,e,4),s=No(t,e);_e(t,e);const n=_e(t,e);return{o:i,Iy:s,Tx:{j0:mi(n,0),J0:mi(n,1),groupingIdentity:mi(n,2)}}}(t,e);case 4:return function(t,e){if(e.Fu+10>t.byteLength)return;const i=dc(t,e,4),s=Wx(t,e);_e(t,e);const n=_e(t,e);return{o:i,Iy:s,Tx:{groupingIdentity:mi(n,1),j0:mi(n,4),J0:mi(n,5),X0:mi(n,6),$0:mi(n,7)}}}(t,e)}}function Qx(t){const e=Ht(t),i=new x(e.byteLength);let s=0;for(let t=0;t<e.byteLength;t++){const n=e[t];255===n&&t++,i[s]=n,s++}return Nt(Nc(i,0,s))}function Kx(t,e){const i=e||new lh,s=Xx(t,i);if(!s)return null;const n=function(t,e,i){const s=[],n=e.Fu;let r=it(t,n,n+i.Z0);const h=new lh;switch(e.by(i.Z0),i.bx){case 2:case 3:i.Tx.X0&&(r=Qx(r))}zx(t,e,i);for(;h.Fu<r.byteLength;){const t=jx(r,h,i);if(void 0===t)break;s.push(t)}return s}(t,i,s);return{gx:s,t1:n}}function jx(t,e,i){const s=Gx(t,e,i.bx);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.Iy)return;const n=e.Fu;let r,h,o=it(t,n,n+s.Iy);switch(e.by(s.Iy),i.bx){case 2:{const t=s;h=o,r=Ux(h,new lh,t.o);break}case 3:{const t=s,e=new lh;!function(t,e,i){const s=i.Tx;let n,r,h;s.j0&&(n=No(t,e)),s.J0&&(r=_e(t,e)),s.groupingIdentity&&(h=_e(t,e))}(o,e,t);h=it(o,e.Fu,o.byteLength),r=Vx(h,new lh,t.o);break}case 4:{const t=s,e=new lh;t.Tx.X0&&(o=Qx(o)),function(t,e,i){const s=i.Tx;let n,r,h,o;s.groupingIdentity&&(n=_e(t,e)),s.j0&&(r=No(t,e)),s.J0&&(h=_e(t,e)),s.$0&&(o=Wx(t,e))}(o,e,t);h=it(o,e.Fu,o.byteLength),r=Vx(h,new lh,t.o);break}}if(!r){const t=ki(Ht(h));r=Ix(s.o,t.buffer)}return r}t();function Yx(t){return Ee(t)&&"org.id3"===t.type&&Ee(t.value)}function Zx(t){return function(t,e,i){return Mx(t,e,i)}(new DataView(t.data),new lh,t.key)}function Jx(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return Zx(t);default:let e=t.key.charAt(0);if("T"===e)return function(t){return{id:t.key,text:t.data}}(t);if("W"===e)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return Ix(t.key,t.data)}(t)}t(),t();var zi=class extends Re{get W(){return this.y0}get PF(){return this.e1?this.e1.default:void 0}get L(){return this.A0}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return wn(this)}get o(){return this.VM.id||this.e1&&this.e1.id||""}get KI(){return this.HM}get $I(){return this.VM.inBandMetadataTrackDispatchType||""}get Lt(){return this.VM.kind||ns.aF}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,void 0!==this.e1&&(this.e1.label=t),this.wo(new Ba(this)))}get gs(){return this.VM.language||""}get Tk(){return this.qo}set Tk(t){let e=this.Tk;this.qo=pt(t),this.i1();let i=this.Tk;e!==i&&this.wo(new no(this)),i!==Aa.Th&&this.s1(Fi.LOADING)}get n1(){return pt(this.VM.mode)}set n1(t){this.VM.mode=t}get WM(){return this.VM}get Vc(){return this.rf}get h1(){return this.e1?+this.e1.readyState||Fi.NONE:Fi.LOADED}get iC(){return this.x0}get Vm(){return this.Dw}set Vm(t){this.Dw!==t&&(this.Dw=t,this.wo(new Vn(this)))}get o1(){return this.a1}set o1(t){this.a1=t,t&&(this.u1=!0,u((()=>{this.u1=!1}),50)),this.i1()}SF(t){t.Ht!==this&&(t.Ht=this,this.VM.addCue(t.U0),this.c1())}fF(t){t.Ht===this&&(t.Ht=void 0,this.VM.removeCue(t.U0),this.c1())}b0(t){var e;const i=null==(e=this.VM.cues)?void 0:e.getCueById(t);if(!i)return;const s=$x(i);return s&&Mt(s)?s[0]:s}_F(t){this.l1>=t||(this.l1=t,Cr(this,t))}i1(){let t=this.Tk;this.o1||t!==Aa.Yn?this.n1=t:this.n1=Aa.JI}d1(){let t=this.Tk,e=this.n1;t!==e&&(this.o1||t!==Aa.Yn||e!==Aa.JI)&&("metadata"===this.Lt&&e===Aa.Th?this.Tk=t:this.u1&&e===Aa.Th&&t===Aa.Yn?this.n1=t:this.Tk=e)}o0(t){this.rf!==t&&(this.rf=t,this.wo(new Mn(this,t)))}s1(t){let e=w.max(this.rf,this.h1,t);this.o0(e)}f1(t){let e=$x(t);if(e)return e;if(e=this._1(t),Mt(e))for(let t of e)t.Ht=this;else e.Ht=this;return e}_1(t){const e=this.v1(t);return t.THEOplayerTextTrackCue=e,e}v1(t){return t.endTime<this.l1?[]:Yx(t)?(this.Vm=Zo.ID3,function(t){let e;try{e=Jx(t.value)}catch(t){e=Ix("")}return new Ex(t,e)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Vm=Zo.ID3,function(t){let e=[];try{let i=Kx(new DataView(t.data));if(i)for(let s of i.t1)e.push(new Ex(t,s))}catch(t){}return e}(t)):function(t){return"text"in t}(t)?(this.Vm=Zo.WEBVTT,function(t){return"regionId"in t}(t)?new Ax(t):new yx(t)):new ju(t)}g1(t){let e=[];if(!t)return e;let i=t.length;for(let n=0;n<i;n++){var s;let i=this.f1(null!=(s=t[n])?s:t.item(n));if(Mt(i))for(let t of i)e.push(t);else e.push(i)}return e}w1(){let t=this.g1(this.VM.cues),e=nx(this.p0,t);for(let t of e.m0)t.pn(Zs.pM,this.c1),t.pn(Zs.mM,this.c1),this.wo(new Pn(t));for(let t of e.w0)t.wn(Zs.mM,this.c1),t.wn(Zs.pM,this.c1),this.wo(new On(t))}L0(){let t=this.g1(this.VM.activeCues),e=nx(this.C0,t);for(let t of e.m0)t.Zh=!1;for(let t of e.w0)t.Zh=!0;(e.w0.length||e.m0.length)&&this.wo(new vx(this))}tC(t){this.Tk=t}bn(){this.Bo();const t=this.p0.slice();for(let e of t)e.bn();us(this.p0),us(this.C0),this.VM.removeEventListener("cuechange",this.m1),this.VM.removeEventListener("cuechange",this.c1),this.e1&&(this.e1.removeEventListener("load",this.A1),this.e1.removeEventListener("error",this.b1),Es(this.e1))}constructor(t,e,i=!0){super(),this.p0=[],this.C0=[],this.qo=Aa.Th,this.rf=Fi.NONE,this.x0=void 0,this.Dw=Zo.DEFAULT,this.u1=!1,this.l1=0,this.m1=()=>{this.i1(),this.VM.removeEventListener("cuechange",this.m1)},this.c1=()=>{this.Tk!==Aa.Th&&(this.w1(),this.L0(),this.p0.length&&this.s1(Fi.LOADING))},this.A1=()=>{this.s1(Fi.LOADED)},this.b1=()=>{this.s1(Fi.ERROR)},this.VM=t,this.a1=i,this.VM.addEventListener("cuechange",this.m1),this.VM.addEventListener("cuechange",this.c1),this.e1=e,this.e1&&(this.x0=Hn(this.e1.src),this.e1.addEventListener("load",this.A1),this.e1.addEventListener("error",this.b1)),this.HM=xs(),this.ec=t.label||"",this.A0=new St(this.p0),this.y0=new St(this.C0),this.Tk=this.n1,Zn((()=>{this.c1(),this.s1(Fi.NONE)}))}};function $x(t){return null==t?void 0:t.THEOplayerTextTrackCue}t(),t();function tD(t,e){return G(t.vO,e.vO)||function(t,e){return t.Ht===e.Ht?pv(sx(t),sx(e)):nk(t.Ht,e.Ht)}(t.KM,e.KM)||function(t,e){return t===e?L.ih:t===Zs.mM?L.Jm:L.Zm}(t.type,e.type)}var eD=class{sr(){us(this.T1);for(const t of this.Au.slice())this.it(t);this.S1(),this.E1=0,this.In=0,us(this.P1),this.I1=!1,this.C1=!1,this.R1=0}tt(t){Qe(this.Au,t)||(this.Au.push(t),t.wn(Fe.ca,this.D1),t.Tk!==Aa.Th&&this.N1())}it(t){Ko(this.Au,t)&&(t.pn(Fe.ca,this.D1),t.Tk!==Aa.Th&&this.N1())}N1(){const t=this.P1,e=this.Au.filter((t=>t.Tk!==Aa.Th));this.P1=e;for(const i of t)Qe(e,i)||this.B1(i);for(const i of e)Qe(t,i)||this.M1(i);this.R1=0}M1(t){if(t.wn(Fe.aI,this.L1),t.wn(Fe.cI,this.O1),t.wn(Fe.dI,this.F1),t.L.U>0){for(const e of t.L.RI)this.U1.push(e);this.V1()}}B1(t){if(t.pn(Fe.aI,this.L1),t.pn(Fe.cI,this.O1),t.pn(Fe.dI,this.F1),t.L.U>0){for(const e of t.L.RI)Ko(this.T1,e),Ko(this.U1,e);this.V1()}}H1(){this.sa.Uc||this.sa.Oc?this.S1():this.V1()}V1(){this.I1&&0!==this.P1.length&&(this.R1-this.sa.Yu>.25*this.sa.Hu||this.E1||(this.E1=this.q1.W1(this.z1)))}S1(){this.E1&&(this.q1.X1(this.E1),this.E1=0)}G1(t){0!==this.R1&&(t.Zh!==tx(t,this.sa.Yu)?this.R1=0:this.In<t.YM&&t.YM<this.R1?this.R1=t.YM:this.In<t.ZM&&t.ZM<this.R1&&(this.R1=t.ZM))}Q1(){if(!this.I1)return;if(0===this.P1.length)return;if(this.sa.Uc)return;const t=this.P1,e=this.In,i=this.sa.Yu,s=i-e<-.1;let n=this.C1||s;n&&i>e&&i-e<.1&&(n=!1),this.C1=!1;const r=[];let h=1/0;for(const e of t){const t=e.L0(i,n);t<h&&(h=t);for(const t of e.W.RI)r.push(t)}const o=this.T1.slice();if(n);else for(const s of t)sk(s,e-dt,i,o);for(let t=o.length-1;t>=0;t--)Qe(r,o[t])&&Xt(o,t);const a=[];if(!n)for(let t=o.length-1;t>=0;t--){const s=o[t];s.YM>e&&s.ZM<=i&&(a.push(s),Xt(o,t))}for(const t of this.U1)t.YM!==t.ZM&&Ko(a,t);us(this.U1);const u=[],c=[];for(const t of a)t.Zh||u.push(new nr(t,t.YM)),u.push(new hr(t,w.max(t.YM,t.ZM))),t.Zh=!1;for(const t of o)t.Zh&&(u.push(new hr(t,w.max(t.YM,t.ZM))),t.Zh=!1);for(const t of r)t.Zh||(u.push(new nr(t,t.YM)),t.Zh=!0);u.sort(tD);for(const t of u){const e=t.KM;e.wo(t);const i=e.Ht;i&&(t.type===Zs.mM?i.wo(new lx(e)):i.wo(new fx(e)),Qe(c,i)||c.push(i))}c.sort(nk);for(const t of c)t.wo(new vx(t));this.In=i,this.T1=r,this.R1=h}bn(){this.sr(),this.sa.pn(Uv.Xu,this.K1),this.sa.pn(Uv.no,this.j1),this.sa.pn(cb.nd,this.K1),this.sa.pn(Uv.Ff,this.K1),this.sa.pn(Uv.$f,this.Y1),this.sa.pn(Uv.If,this.K1)}constructor(t,e){this.Au=[],this.E1=0,this.In=0,this.T1=[],this.U1=[],this.P1=[],this.I1=!1,this.C1=!1,this.R1=0,this.z1=()=>{this.E1=0,this.Q1(),this.H1()},this.K1=()=>{this.Q1(),this.H1()},this.j1=()=>{this.I1=!0,this.K1()},this.Y1=()=>{this.C1=!0,this.R1=0,this.S1()},this.D1=()=>{this.N1(),this.Q1(),this.H1()},this.L1=t=>{const e=t.KM;Qe(this.U1,e)||this.U1.push(e),this.G1(e),this.V1()},this.O1=t=>{const e=t.KM;Ko(this.T1,e),Ko(this.U1,e),this.G1(e),this.V1()},this.F1=t=>{this.G1(t.KM),this.V1()},this.q1=e,this.sa=t,t.wn(Uv.Xu,this.K1),t.wn(Uv.no,this.j1),t.wn(cb.nd,this.K1),t.wn(Uv.Ff,this.K1),t.wn(Uv.$f,this.Y1),t.wn(Uv.If,this.K1),this.V1()}};t();var iD=class{W1(t){return Oo(t)}X1(t){Qa(t)}},sD=new iD,Co=class extends eD{constructor(t,e=sD){super(t,e)}};t(),t();var nD=class extends Hu{get ba(){return this.Zu||(this.Zu=kx(this)),this.Zu}_L(t){return bx(this,t)}constructor(t,e,i){super(t,1/0,e,!1,i)}};t(),t();var rD=class extends ru{constructor(t,e,i=Zo.DEFAULT){super(ns.lF,"",e||"","",!1,i,!1,t)}},hD=class extends rD{SF(t){Tx(t,this.p0),super.SF(t)}ya(){return wn(this)}constructor(t,e){super(t,e),this.Vm=Zo.ID3}},oD=class extends hD{get o(){return this.VM.id||""}get $I(){return this.VM.inBandMetadataTrackDispatchType||""}get gs(){return this.VM.language||""}I0(t){super.I0(t),this.n1=this.Tk}get n1(){return pt(this.VM.mode)}set n1(t){this.VM.mode=t}get WM(){return this.VM}SF(t){super.SF(t),t.U0.track!==this.VM&&this.VM.addCue(t.U0)}fF(t){super.fF(t),t.U0.track===this.VM&&this.VM.removeCue(t.U0)}_F(t){this.l1>=t||(this.l1=t,Cr(this,t))}s1(t){this.Vc=w.max(this.Vc,t)}w1(){let t=this.VM.cues;if(!t)return;const e=t.length,i=[],s=[];for(let h=0;h<e;h++){var n;const e=null!=(n=t[h])?n:t.item(h);if(Yx(e)&&e.endTime>=this.l1){var r;const t=null!=(r=null==e?void 0:e.THEOplayerTextTrackCue)?r:new aD(e);i.push(t)}else s.push(e)}gv(i,Rh);let h=nx(this.L.RI.slice(),i);for(const t of s)this.VM.removeCue(t);for(let t of h.m0)t.bn(),this.fF(t);for(let t of h.w0)this.SF(t)}bn(){this.VM.removeEventListener("cuechange",this.c1),super.bn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.l1=0,this.c1=()=>{this.Tk!==Aa.Th&&(this.w1(),this.s1(Fi.LOADED))},this.VM=t,this.VM.addEventListener("cuechange",this.c1),this.Tk=this.n1,Zn((()=>{this.c1()}))}},aD=class extends nD{bn(){super.bn(),this.U0.THEOplayerTextTrackCue=void 0}constructor(t){super(t.startTime,Jx(t.value),t.id),this.U0=t,this.U0.THEOplayerTextTrackCue=this}};t(),t();var uD=class extends Vt{Z1(){this.J1.wn(ie.nI,this.XV),this.J1.wn(ie.hI,this.GV)}t2(){this.J1.pn(ie.nI,this.XV),this.J1.pn(ie.hI,this.GV)}e2(t){const e=t.L.RI[0];if(!cD(e))return;const i=function(t){const e=t.match(lD);if(!e)return;return{Ht:e[1],gs:e[2]}}(e.O.description),s=i.Ht,n=i.gs;if(this.i2(s,n))return;const r=this.AF.iI(ns.aF,t.o,s,n,!1,Zo.TTML);this.tt(r),this.s2.set(t.KI,r);for(let e of t.L.RI)cD(e)&&this.n2(e);t.wn(Fe.aI,this.h2)}i2(t,e){return this.Z.RI.some((i=>i._h===t&&i.gs===e))}n2(t){if(!t.Ht)return;const e=this.s2.get(t.Ht.KI),i=MS(t.O.text,e,{XO:0,GO:1/0,QO:t.YM});for(let t of i)e.SF(t)}async sr(){for(let t of this.J1.RI)t.pn(Fe.aI,this.h2);for(let t of this.Z.RI)this.AF.EF(t);this.s2.clear(),await super.sr()}async bn(){this.t2(),await super.bn()}constructor(t,e){super(),this.AF=t,this.J1=e,this.s2=C(),this.XV=async t=>{const e=t.Ht;if(e.Vm||await e.Tp(Fe.bI),e.Vm===Zo.ID3){for(;0===e.L.U;)await e.Tp(Fe.aI);this.e2(e)}},this.GV=t=>{const e=t.Ht;if(e.Vm!==Zo.ID3||!this.s2.has(e.KI))return;const i=this.s2.get(e.KI);this.it(i),this.AF.EF(i),e.pn(Fe.aI,this.h2)},this.h2=t=>{cD(t.KM)&&this.n2(t.KM)},this.Z1()}};function cD(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&lD.test(t.description)}(t.O)}var lD=/^Track:(.+),Lang:(.+)$/;t(),t();var Po=[Uv.Cp,Uv.Ip,Uv.$p,Uv.iy];t();var Jc=class extends o{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Uv.Ip),this.errorObject=t}};t(),t(),t();var vu=class extends o{constructor(t){super(Uv.Cp),this.o2=t}};t();var dD=class extends o{constructor(t){super("ey"),this.o2=t}},fD=new jn,_D=class extends o{constructor(t){super("Xs"),this.session=t}},vD=class extends Re{get a2(){return this.u2}Yb(){return this.c2=!0,fD.Xo((t=>this.l2(t)),this.LT.ap)}async l2(t){try{Bv(t),await this.d2.iU(t);const e=await this.d2.sU(this.f2.Wm,this.f2.Ay,t);await this._2.Yb(this.f2.Wm,this.f2.Ay,e)}catch(t){ta(t);const e=t instanceof Vg?t.Oy:void 0,i=new ga(X.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,e);throw this.Ps(i),i}}async uU(t,e){let i;try{i=function(t){return In(t,Og())}(t)?await this.d2.mU(new x(t),this.LT.ap):await this.d2.pU(new x(t),e,this.LT.ap)}catch(t){if(Eh(t))return;throw t}if(this.LT.ap.$m)return;const s=this.g2,n=new ue;this.g2=n;try{await this._2.Zn(i),await Rt(100)}catch(t){const e=t instanceof Vg?t.Oy:void 0;throw new ga(X.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,e)}finally{void 0!==s&&await s.Pf,n.Xf(),this.g2===n&&(this.g2=void 0)}}Ps(t){const e=t instanceof ga?t:new ga(X.CONTENT_PROTECTION_ERROR,t.message,t);this.wo(new Jc(e)),this.Xs()}w2(){this._2.pn("ly",this.eT),this._2.pn(Uv.iy,this.m2),this._2.pn("lt",this.A2),this.b2=!1,this.u2=!1,this.LT.tf(),this.wo(new _D(this))}async Xs(){let t;this.Bo();do{t=this.g2,void 0!==t&&await t.Pf}while(this.g2!==t);this.w2(),await this._2.Xs().catch(De)}constructor(t,e,i){super(),this._2=t,this.d2=e,this.f2=i,this.c2=!1,this.b2=!1,this.LT=new Mr,this.u2=!1,this.eT=t=>{if(!this.LT.ap.$m)switch(t.vy){case"license-request":case"license-renewal":this.uU(t.ly,t.gy).catch((t=>this.Ps(t)));break;default:this.Ps(new ga(X.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.vy))}},this.m2=t=>{this._2.uy.Ny(((t,e)=>{switch(t){case"usable":Gn.jg((()=>{this.b2=!0,this.wo(new vu(e))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.wo(new dD(e))}})),this.u2=!0,this.wo(t)},this.A2=t=>{this.Ps(new ga(X.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.wn("ly",this.eT),t.wn(Uv.iy,this.m2),t.wn("lt",this.A2),t.qb.then((()=>this.w2()),(t=>this.Ps(t)))}},gD=class extends Re{get rT(){return this.$b}get T2(){return this.S2.every((t=>t.a2))}eU(){return this.E2.eU()}P2(t){return this.I2||(this.I2=this.C2(t)),this.I2}async C2(t){Bv(t);const e=await this.E2.mU(new x(Og()),t);if(Bv(t),!this.nT)throw new v("Invalid MediaKeys when setting ServerCertificate");await this.nT.hT(e.buffer)}async R2(t){if(!this.nT)throw new v("Invalid MediaKeys when creating KeySession");try{this.D2.push(t);const e=await this.nT.sT("temporary"),i=new vD(e,this.E2,t);return this.S2.push(i),i.wn(Po,this.N2),i.wn("Xs",this.B2),i}finally{Ko(this.D2,t)}}M2(t){if(t.L2)return!1;for(const e of this.S2)if(wD(e.f2,t))return!0;for(const e of this.D2)if(wD(e,t))return!0;return!1}async bn(){this.nT=void 0,this.Bo();const t=this.S2.slice();us(this.S2),await Promise.all(t.map((t=>t.Xs()))),this.O2=void 0,this.E2.Wu()}constructor(t,e,i){super(),this.S2=[],this.I2=void 0,this.D2=[],this.N2=t=>{if(t.type===Uv.iy)return null!=this.O2||(this.O2=new K),t.uy.Ny(((t,e)=>{this.O2.Dy(e,t)})),void(this.T2&&this.wo(new Wv(this.O2)));this.Os(t)},this.B2=t=>{t.session.pn(Po,this.Os),t.session.pn("Xs",this.B2),Ko(this.S2,t.session),this.O2=void 0},this.$b=t,this.nT=e,this.E2=i}};function wD(t,e){return!t.L2&&t.Wm===e.Wm&&In(t.Ay,e.Ay)}var cu=class extends Re{get F2(){var t;return null==(t=this.$b)?void 0:t.rT}get TH(){return this.E2}set TH(t){this.E2=t}On(t,e){this.iH=t,this.hK(e)}hK(t){this.pl=t,this.U2(this.LT.ap).catch(wi)}aK(t){this.V2(t,this.LT.ap).catch(wi)}async V2(t,e){var i,s;Bv(e);var n;if(null==(i=this.pl)?void 0:i.oH)for(const i of null!=(n=null==(s=this.pl)?void 0:s.oH)?n:[]){var r;const s=bv(t,(t=>t.H2===i.rT.zm));if(void 0!==(null==s?void 0:s.W2)&&!(null==(r=i.MV)?void 0:r.some((t=>In(s.W2,t)))))try{return void await this.q2(i.rT.Wm,s.W2,e)}catch(t){ta(t)}}}async U2(t){if(!Gn.Zs.aw||!await this.z2(t))return this.pl&&this.pl.X2?await this.G2(t):void 0}async z2(t){var e,i;if(!(null==(e=this.pl)?void 0:e.oH))return!1;let s=!1;var n;for(const e of null!=(n=null==(i=this.pl)?void 0:i.oH)?n:[]){var r;for(const i of null!=(r=e.MV)?r:[])try{await this.q2(e.rT.Wm,i,t),s=!0}catch(t){ta(t)}if(s)return!0}return!1}async q2(t,e,i){if(Bv(i),!e.byteLength)return;if(!this.pl||!this.pl.oH.length)throw new ga(X.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Ae&&t!==Ih&&t!==z_)return void 0;const s=JA(t,e),n=this.pl.oH;let r;for(const e of n){Bv(i);const n=s[e.rT.qm];if(n&&e.rT.Wm===t)try{const t=await this.Q2(e,i);t.eU()&&await t.P2();const s=this.rM.wP,r={Wm:e.rT.Wm,Ay:n,L2:s};if(this.K2(t,r)){const e=await t.R2(r);await e.Yb()}return}catch(t){ta(t),r=t}}throw await Gn.im()?new ga(X.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new ga(X.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async G2(t){var e;const i=null==(e=this.pl)?void 0:e.oH;if(i)for(const e of i){Bv(t);try{const i=await this.Q2(e,t);return void(i.eU()&&await i.P2())}catch(t){ta(t)}}}K2(t,e){return Gn.Zs.ow||this.rM.cM.uM||!t.M2(e)}Q2(t,e){return this.Jo.Xo((e=>this.j2(t,e)),e)}async j2(t,e){if(Bv(e),!this.pl||!this.E2||!this.iH)throw new v("Not initialized");if(this.$b){if(this.$b.rT!==t.rT)throw new v("Internal key system error");return this.$b}const i=this.E2,s=yh({},t,{xH:t.xH.map((e=>{var s;return yh({},e,{persistentState:null!=(s=e.persistentState)?s:i.bU(t.rT),vT:e.vT||i.vT(t.rT)})}))}),n=await this.iH.iK(s.rT,s.xH),r=i.BV(s),h=new gD(s.rT,n,r);return h.wn(Po,this.Os),this.$b=h,h}Ps(t){if(Eh(t))return;const e=t instanceof ga?t:new ga(X.CONTENT_PROTECTION_ERROR,t.message,t);this.wo(new Jc(e))}async sr(){this.iH=void 0,this.pl=void 0,this.LT.tf(),this.LT=new Mr,await this.Y2()}async Y2(){await this.Jo.tf();const t=this.$b;t&&(t.pn(Uv.$p,this.Os),this.$b=void 0,await t.bn())}async Wu(){this.Bo(),this.rM.pn(ir.Np,this.Z2),await this.sr(),await this.Jo.bn()}constructor(t){super(),this.LT=new Mr,this.Jo=new jn,this.pl=void 0,this.E2=void 0,this.iH=void 0,this.$b=void 0,this.Z2=t=>{this.q2(t.Wm,t.Ay,this.LT.ap).catch((t=>this.Ps(t)))},this.rM=t,this.rM.wn(ir.Np,this.Z2)}};t();var mD=class extends o{constructor(t){super(Uv.Vp),this.currentTime=t}};t();var pD=class extends Re{get Vc(){return void 0!==this.J2?this.J2.Vc:qb.Jl}o0(){var t;null==(t=this.J2)||t.o0()}sr(){var t;null==(t=this.J2)||t.sr()}Wu(){this.Bo(),void 0!==this.J2&&(this.J2.Wu(),this.J2=void 0)}t3(t){if(this.J2===t)return;const e=this.Vc;void 0!==this.J2&&this.J2.Wu(),this.J2=t,void 0!==t&&(t.wn(cb.Lf,this.Os),t.o0());const i=this.Vc;e!==i&&this.wo(new xr(this.e3.Yu,i))}constructor(t){super(),this.e3=t}};t();var yD=class extends ru{get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=AD(this)}i3(t,e,i){const s=new Wa(t,e,i,!1);return this.SF(s),s}s3(t){this.fF(t)}constructor(t,e,i){super(t,e,"",i,void 0,Zo.WEBVTT)}};function AD(t){return Xe(wn(t),{get type(){return t.Vm},addCue:(e,i,s)=>t.i3(e,i,s).ba,removeCue(e){t.s3(e.jM)}})}t();var bD=class extends zi{get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=AD(this)}i3(t,e,i){const s=this._1(new a.VTTCue(t,e,i));return this.Hk?this.SF(s):this.n3.push(s),s}s3(t){Ko(this.n3,t),this.fF(t)}bn(){var t;super.bn(),null==(t=this.e1)||t.removeEventListener("load",this.r3),us(this.n3)}constructor(t,e){var i;super(t,e),this.Hk=!1,this.n3=[],this.r3=()=>{var t;null==(t=this.e1)||t.removeEventListener("load",this.r3),this.Hk=!0;for(const t of this.n3)this.SF(t);us(this.n3)},null==(i=this.e1)||i.addEventListener("load",this.r3),this.Vm=Zo.WEBVTT}},TD=ds.Kv||ds.Zv,SD=ds.qg,kD=ds.fg,ED=ds.fg&&ds.uv,PD=class extends Re{get u0(){return this.h3}get Sl(){return this.iH?this.iH.Sl:r.Ol()}get Ku(){const t=this.sH;if(!t||j(t.getTime()))return;const e=1e3*this.Yu;return new Date(t.getTime()+e)}get sH(){if(this.tH.getStartDate)return this.sf&&this.o3||(this.o3=this.tH.getStartDate()),this.o3}get Yu(){return this.a3?this.a3.Yu:void 0!==this.u3?this.u3:this.QT.currentTime}get c3(){return this.l3}get ct(){return this.a3?this.a3.ct:this.iH?this.iH.ct:this.QT.duration}get $c(){return this.Uc?this.d3():this.a3?this.a3.$c:this.QT.ended||this.f3}d3(){return void 0!==this.u3&&this.ct===this.u3}get lt(){return this.$V}get tH(){return this.QT}get Oc(){return this._3?this.v3:this.a3?this.a3.Oc:this.QT.paused}get Tl(){return this.$o.Xl(r.Sn(this.QT.played))}get Ci(){return this.QT.offsetHeight*Gn.Zs.nw}get Ti(){return this.QT.offsetWidth*Gn.Zs.nw}get ja(){return this.ia}get wH(){return this.Ko}get Vc(){return this.g3.Vc}get Cl(){return this.iH?this.iH.Cl:r.Ol()}get Uc(){return this.a3?this.a3.Uc:this.sf||this.QT.seeking&&!this.r0}get Lc(){return this.a3?this.a3.Lc:this.r0}get Hc(){return 0!==this.w3}get tc(){return this.a3?this.a3.tc:this.QT.muted}set tc(t){this.a3?this.a3.tc=t:(this.QT.muted=t,this.m3())}get Hu(){return this.a3?this.a3.Hu:void 0!==this.y3?this.y3:this.QT.playbackRate}set Hu(t){this.a3?this.a3.Hu=t:this.Oc||this.h3?(this.y3=t,this.A3()):(this.y3=void 0,this.QT.playbackRate=t,this.A3())}A3(){const t=this.Hu;this.b3!==t&&(this.b3=t,this.wo(new Sr(this.Yu,t)))}get T3(){return this.lW}get Pl(){return this.a3?this.a3.Pl:this.QT.volume}set Pl(t){this.a3?this.a3.Pl=t:(this.QT.volume=t,this.m3())}m3(){const t=this.Pl,e=this.tc;this.S3===t&&this.E3===e||(this.S3=t,this.E3=e,this.wo(new Wo(this.Yu,this.Pl)))}yP(){return fC(this.QT)}bl(){this.P3||(this.P3=!0);const t=this.I3();return this.C3(),t}C3(){this._3?this.v3&&(this.v3=!1,this.wo(new ah(this.Yu))):this.R3()}R3(){if(this.a3)this.a3.bl();else{ds.fg&&!ds.uv&&this.QT.preload===Ds.sW&&(this.QT.preload=Ds.lF);const t=this.Hu,e=this.QT.play();t!==this.tH.playbackRate&&(this.Hu=t),this.f3=!1,Xr(e)?e.then(this.x3,this.D3):this.df.f0()&&this.N3()}}Ml(){this._3?this.v3||(this.v3=!0,this.wo(new ac(this.Yu))):this.B3()}B3(){this.a3?this.a3.Ml():(this.QT.pause(),this.df.Zn()),this.M3(new ti)}I3(){const t=new ue;return this.L3.push(t),t.Pf}O3(){for(const t of this.L3)t.Xf(void 0);us(this.L3)}M3(t){for(const e of this.L3)e.My(t);us(this.L3)}N3(){this._3||this.a3||this.O3()}F3(t){this._3||this.a3||this.M3(t)}jc(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.a3?this.a3.jc(t,e,i):(this.U3.tf(),this.U3=new Mr,this.V3=qe(this.H3(t,e,i,this.V3,this.U3.ap),this.U3).catch(De))}YV(t){const e=this.sH;if(!e||j(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.jc(i)}async H3(t,e,i,s,n){try{if(this.u3=t,this.W3=t,this.q3=Gn.Qg(),i&&!this.sf?this.r0=!0:(this.sf=!0,this.r0=!1),this.f3&&!this.d3()&&(this.f3=!1),this.r0?this.wo(new zR(this.Yu)):this.wo(new lc(t)),await s.catch(De),Bv(n),this.iH&&!this.iH.kK())return void this.z3();for(this.X3&&this.G3(),this.g3.Vc===qb.Jl&&await this.g3.Tp(cb.Lf,n);0===this.QT.seekable.length||ED&&!this.P3;){const t={stack:[],error:void 0,hasError:!1};try{const e=oe(t,Mr.fp([n]),!1);await Promise.race([V(this.QT,"timeupdate",e.ap),Rt(100,e.ap)]),Bv(n)}catch(e){t.error=e,t.hasError=!0}finally{se(t)}}let h=FR(this.Sl,t,.05),o=this.Cl,a=!0,u=!1;for(;;){const t={stack:[],error:void 0,hasError:!1};try{var r;if(o=this.Cl,o.U>0&&!o.br(h)&&(h=o.gB(h),a=!0),e&&!this.QT.fastSeek){const t=this.Sl;if(!t.br(h)){const e=FR(t,h,1);e!==h&&(h=e,a=!0)}}if(kD){const t=this.Q3();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.K3();void 0!==t&&h>t&&(u=!0,await this.j3(t,!1,n),await V(this.QT,"seeked",n),Bv(n),a=!0)}if(a){a=!1,await this.j3(h,e,n),Bv(n);let t=this.Yu;o=this.Cl,h=o.gB(h);let i=1;for(;w.abs(h-t)>=dt;)o=this.Cl,h=CD(h,o,i),await this.j3(h,e,n),Bv(n),t=this.Yu,i++}if(!(this.QT.seeking||this.g3.Vc<qb.Jf))break;const i=oe(t,Mr.fp([n]),!1);await Promise.race([V(this.QT,"seeked",i.ap),this.Tp([Uv.zf,Uv.Vf],i.ap),this.g3.Tp(cb.Lf,i.ap),null==(r=this.iH)?void 0:r.Tp(BC.YQ,i.ap)].filter(Ee)),Bv(n)}catch(e){t.error=e,t.hasError=!0}finally{se(t)}}this.z3()}catch(t){if(Eh(t))return;0}}async j3(t,e,i){Bv(i);let s=this.Cl;if(t=s.gB(t),this.X3){let e=!0;for(;e||this.g3.Vc<qb.Cf;){const n={stack:[],error:void 0,hasError:!1};try{if(s=this.Cl,s.br(t)||(t=s.gB(t),e=!0),e){e=!1,this.u3=t,this.Y3(this.Yu);continue}const r=oe(n,Mr.fp([i]),!1);await Promise.race([this.Tp(Uv.Vf,r.ap),this.g3.Tp(cb.Lf,r.ap)])}catch(t){n.error=t,n.hasError=!0}finally{se(n)}}Bv(i)}const n=V(this.QT,"seeking",i);e&&this.QT.fastSeek?this.QT.fastSeek(t):this.QT.currentTime=t,this.u3=void 0,this.Y3(this.Yu),this.QT.seeking&&await n}Q3(){if(!this.iH||!this.iH.yK)return;const t=this.iH.AK,e=this.iH.bK,i=t&&e?t.Cn(e):t||e;if(!i||0===i.U)return;const s=i.Tn(i.U-1),n=i.Pn(i.U-1);return w.max(s,n-.001)}K3(){if(!this.iH||!this.iH.yK)return;const t=this.iH.bK;if(!t||0===t.U)return;const e=t.Tn(t.U-1);let i=t.Pn(t.U-1)-.02;return i-=.001,w.max(e,i)}Y3(t){this.W3!==t&&(this.W3=t,this.r0?this.wo(new zR(t)):this.wo(new lc(t)))}z3(){const t=this.r0;this.sf=!1,this.r0=!1,this.q3=0,this.W3=NaN,this.X3&&this.Z3(),t?(this.wo(new mD(this.Yu)),this.J3()):(this.wo(new qo(this.Yu)),this.t4=!0),this.OG()}G3(){this._3||(this.v3=this.Oc,this._3=!0,this.B3())}Z3(){this._3&&(this._3=!1,this.v3||this.C3())}EK(t){for(const e of t){if(e.Vm===A.IF&&LC.EK(e,this.QT))return e;if(e.Vm===A.CF&&WR.EK(e))return e}}ke(){this.lW=!1,me(this.QT)&&(this.QT.style.display="none")}be(){this.lW=!0,me(this.QT)&&(this.QT.style.display="block")}get nt(){return this.e4}get Du(){return this.Ic}iI(t,e,i,s,n,r,h,o,a){const u=new ru(t,e,i,s,n,r,h,a,o);return this.Au.tt(u),this.i4.tt(u),u}mH(t){const{Lt:e,_h:i,gs:s}=t;if("function"==typeof this.QT.addTextTrack&&"function"==typeof a.VTTCue){const{track:t,trackElement:n}=this.s4("data:text/vtt,WEBVTT%0A%0A",e,i,s);let r=new bD(t,n);return this.n4.tt(r),this.r4.push(r),r}const n=new yD(e,i,s);return this.Au.tt(n),this.i4.tt(n),n}fH(){return!0}vH(t,e,i,s,n){const{track:r,trackElement:h}=this.s4(t,e,i,s,n),o=new zi(r,h);return this.n4.tt(o),this.r4.push(o),o}s4(t,e,i,s,n){const r=h.createElement("track");r.src=Hn(t),r.kind=e,r.label=null!=i?i:"",s&&(r.srclang=s),r.default=!!n,r.id=iu(),this.QT.appendChild(r);return{track:this.QT.textTracks.getTrackById(r.id),trackElement:r}}EF(t){this.Au.it(t),this.i4.it(t)}pH(){for(const t of this.Au.RI.slice())t.bn();this.Au.sr();for(const t of this.r4.slice())this.n4.it(t),t.bn();us(this.r4)}DH(){let t=this.QT.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.h4),t.addEventListener("removetrack",this.o4),t.addEventListener("change",this.a4))}bH(){let t=this.QT.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.h4),t.removeEventListener("removetrack",this.o4),t.removeEventListener("change",this.a4))}u4(t){t.mode=Aa.JI;const e=new oD(t);this.n4.tt(e),this.i4.tt(e)}c4(t,e){const i=()=>{xD(t)&&(t.removeEventListener("cuechange",i),this.n4.tt(new zi(t,e)))};t.addEventListener("cuechange",i),t.mode=Aa.JI}l4(t){let e=this.QT.getElementsByTagName("track");for(let i=0;i<e.length;i++){let s=e[i]||e.item(i);if(s.track===t)return s}}d4(){if(0===this.n4.U)return;const t=this.Cl;if(0===t.U)return;const e=t.Tn(0);if(this.f4!==e){for(const t of this.n4.RI)t._F(e);this.f4=e}}On(t){return this._4.Xo((async e=>{if(Bv(e),this.iH)throw new v("Already loaded a media source");let i;if(t.Vm===A.IF)i=new LC(t,this,this.oK,this.Km),this.X3=!1,this.g3.t3(this.v4());else{if(t.Vm!==A.CF)throw new v("Unsupported configuration");{this.X3=TD;const e=this.v4();i=new WR(t,this,e,this.oK,this.Km,void 0,this.D$),this.g3.t3(e),SD&&(this.wn(Uv.Xu,this.g4),this.g3.wn(cb.Lf,this.w4))}}return this.iH=i,await i.yG(),i}))}v4(){return this.X3?new YR(this):new So(this)}m4(){if(this.h3)return;const t=this.Hu;this.h3=!0,this.Hu=t,this.QT.playbackRate=0,this.g3&&this.g3.o0()}y4(){if(!this.h3)return;const t=this.Hu;this.h3=!1,this.Hu=t,this.A4()}A4(){this.QT.currentTime=this.QT.currentTime,this.g3&&this.g3.o0()}async sr(){this.sf=!1,this.r0=!1,this.t4=!1,Gn.Kg(this.w3),this.w3=0,this.$o=r.Ol(),this.U3.tf(),this.u3=void 0,this.W3=NaN,this.o3=void 0,this.X3=!1,this._3=!1,this.$V=void 0,this.f3=!1,this.b4=void 0,this.f4=0,this.T4=!1,this.P3=!1,this.S4&&(this.E4(),this.S4=!1),this.M3(new ti),this.g3.t3(new So(this)),this.df.sr(),this.n4.sr(),this.y4(),SD&&(Qa(this.P4),this.P4=0,this.pn(Uv.Xu,this.g4)),await this._4.tf(),await this._4.Xo((async()=>{this.iH&&(await this.iH.Wu(),this.iH=void 0,ds.Lv&&ds.Fv<3&&this.I4())}))}I4(){this.C4();const t=this.QT,e=t.parentElement,i=t.tagName.toLowerCase();this.QT=lB(i),this.retainMediaElementState(t),dB(t),null==e||e.replaceChild(this.QT,t),this.E4(),this.g3.t3(this.v4()),this.df.pn(cb.nd,this.R4),this.df.Wu(),this.df=new $R(this),this.df.wn(cb.nd,this.R4),this.lW?this.be():this.ke(),this.wo(new au),this.wo(new at)}retainMediaElementState(t){this.tH.muted=t.muted,this.tH.volume=t.volume}async Wu(){this.S4=!1,this.C4(),this.bH(),await this.sr(),await this._4.bn(),this.df.Wu(),this.g3.Wu(),await this.oK.Wu(),this.pH(),this.Au.bn(),this.n4.bn(),await this.x4.bn(),this.D4.bn(),this.e4.bn(),this.Bo()}E4(){this.tH.addEventListener("play",this.N4),this.tH.addEventListener("pause",this.B4),this.tH.addEventListener("timeupdate",this.M4),this.tH.addEventListener("progress",this.L4),this.tH.addEventListener("loadstart",this.O4),this.tH.addEventListener("ended",this.F4),this.tH.addEventListener("ratechange",this.U4),this.tH.addEventListener("volumechange",this.V4),this.tH.addEventListener("durationchange",this.H4),this.tH.addEventListener("resize",this.W4),this.tH.addEventListener("loadedmetadata",this.W4),this.tH.addEventListener("error",this.q4),this.tH.addEventListener("emptied",this.z4),this.tH.addEventListener("seeked",this.X4),this.tH.addEventListener("seeking",this.G4),_v()?(this.QT.addEventListener("encrypted",this.Q4),this.QT.addEventListener("waitingforkey",this.K4)):void 0!==a.WebKitMediaKeys&&"function"==typeof a.WebKitMediaKeys.isTypeSupported?this.QT.addEventListener("webkitneedkey",this.j4):lo()?this.QT.addEventListener("webkitneedkey",this.Y4):void 0!==a.MSMediaKeys&&"function"==typeof a.MSMediaKeys.isTypeSupported&&this.QT.addEventListener("msneedkey",this.Z4)}C4(){this.tH.removeEventListener("play",this.N4),this.tH.removeEventListener("pause",this.B4),this.tH.removeEventListener("timeupdate",this.M4),this.tH.removeEventListener("progress",this.L4),this.tH.removeEventListener("loadstart",this.O4),this.tH.removeEventListener("ended",this.F4),this.tH.removeEventListener("ratechange",this.U4),this.tH.removeEventListener("volumechange",this.V4),this.tH.removeEventListener("durationchange",this.H4),this.tH.removeEventListener("resize",this.W4),this.tH.removeEventListener("loadedmetadata",this.W4),this.tH.removeEventListener("error",this.q4),this.tH.removeEventListener("encrypted",this.Q4),this.tH.removeEventListener("waitingforkey",this.K4),this.tH.removeEventListener("webkitneedkey",this.j4),this.tH.removeEventListener("webkitneedkey",this.Y4),this.tH.removeEventListener("msneedkey",this.Z4),this.tH.removeEventListener("emptied",this.z4),this.tH.removeEventListener("seeked",this.X4),this.tH.removeEventListener("seeking",this.G4)}J4(){this.a3||(this.$o=this.Tl,this.a3=QR(this),this.C4(),this.a3.wn(XR,this.Os))}t6(){if(!this.a3)return;const t=this.a3;this.a3=void 0,this.g3.o0(),KR(this,t),t.Wu(),this.E4()}J3(){const t=this.Yu;this.wo(new Ph(t,void 0)),this.b4=t}OG(){this.f3||!this.$c||this.Uc||(this.f3=!0,this.wo(new Zu(this.Yu)))}UH(t){this.$V=t,this.M3(this.$V),this.wo(new ku(this.$V))}get wP(){return!!this.QT.webkitCurrentPlaybackTargetIsWireless}get e6(){return this.i6}get cM(){return yh({},xC)}yl(){this.i6||(_B(this.QT,Gn.Zs),this.i6=!0)}s6(t){t.appendChild(this.QT)}FJ(){SD&&this.g4(),this.g3.o0()}get TH(){return this.oK.TH}set TH(t){this.oK.TH=t}get n6(){return this.D$}set n6(t){this.D$=t}get F2(){return this.oK.F2}JP(){this.oK.Y2().catch(De),this.n4.sr()}get XP(){return this.T4}set XP(t){this.T4=t,this.S4&&!this.T4&&(this.S4=!1,this.E4())}constructor(t,e,i,s){super(),this.$V=void 0,this.lW=!0,this.iH=void 0,this._4=new jn,this.a3=void 0,this.ia=new $e,this.Ko=new gh,this.r4=[],this.u3=void 0,this.q3=0,this.W3=NaN,this.o3=void 0,this.t4=!1,this.b4=void 0,this.f4=0,this.sf=!1,this.r0=!1,this.r6=qb.Jl,this.w3=0,this.V3=Promise.resolve(),this.U3=new Mr,this.L3=[],this.$o=r.Ol(),this.y3=void 0,this.b3=1,this.E3=!1,this.S3=1,this.f3=!1,this.T4=!1,this.S4=!1,this.X3=!1,this._3=!1,this.v3=!1,this.h3=!1,this.i6=!1,this.P4=0,this.P3=!1,this.h4=t=>{const e=t.track,i=this.l4(e);if(!RD(this.n4,e)){if(ds.fg){if(e.kind===ns.lF)return void this.u4(e);if(e.kind===ns.uF&&""===e.label&&""===e.language&&!xD(e))return void this.c4(e,i)}this.n4.tt(new zi(e,i))}},this.o4=t=>{const e=RD(this.n4,t.track);e&&this.n4.it(e)},this.a4=()=>{for(let t=0;t<this.n4.U;t++){let e=this.n4.DI(t);e instanceof zi&&e.d1()}},this.g4=()=>{if(void 0===this.iH||!DC(this.iH))return;if(this.Oc)return;const t=this.iH,e=t.N$,i=t.B$;if(!e||!i)return;if(t.yK)return void this.y4();if(t.Vc===HR.CJ)return;const s=e.Sl,n=i.Sl;if(0===s.U&&0===n.U)return void this.y4();const r=this.Yu;if(r<s.Tn(0)||r<n.Tn(0))return void this.y4();if(s.br(r)!==n.br(r)){if(t.SK(r))return;this.m4()}else if(this.y4(),!this.P4&&this.df.f0()){s.AB(n).EB(r,r+.5)&&(this.P4=Oo(this.h6))}},this.h6=()=>{this.P4=0,this.g4()},this.w4=()=>{if(this.Uc||this.Lc)return;if(this.g3.Vc>=qb.Cf)return;if(void 0===this.iH||!DC(this.iH))return;const t=this.iH,e=t.N$,i=t.B$;if(!e||!i)return;const s=this.Yu,n=e.Sl,r=i.Sl;if(!n.br(s)||!r.br(s))return;n.AB(r).EB(s-5,s)&&(this.h3?this.y4():this.A4())},this.N4=()=>{this.wo(new ah(this.Yu))},this.B4=()=>{this.F3(new ti),this.wo(new ac(this.Yu))},this.R4=()=>{this.N3(),this.wo(new $n(this.Yu))},this.U4=()=>{this.A3()},this.H4=()=>{this.wo(new de(this.ct))},this.L4=()=>{this.wo(new xu(this.Yu))},this.O4=()=>{this.wo(new ji)},this.X4=()=>{this.sf||this.r0||this.t4?this.t4=!1:this.wo(new qo(this.Yu))},this.G4=()=>{this.Y3(this.Yu),this.t4=!1},this.M4=()=>{const t=this.Yu,e=this.Uc,i=this.g3.Vc<qb.Cf&&!this.$c,s=void 0!==this.b4,n=s&&this.b4!==t;this.d4(),(e||!s||n&&!i)&&this.J3()},this.F4=()=>{this.OG()},this.q4=()=>{if(null!==this.QT.error){const e=this.QT.error;var t;this.UH(new Fc(null!=(t=e.code)?t:Ja.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.z4=()=>{this.T4&&(this.C4(),this.S4=!0)},this.o6=t=>{if(Gn.Kg(this.w3),this.w3=0,t.readyState<=qb.Jf)if(this.sf||this.r0){const e=Gn.Qg()-this.q3;if(e<250)return void(this.w3=Gn.jg((()=>this.o6(t)),250-e))}else if(void 0!==this.iH&&this.iH.SK(this.Yu))return void(this.w3=Gn.jg((()=>this.o6(t)),250));this.r6!==t.readyState&&(this.r6=t.readyState,this.wo(t))},this.V4=()=>{this.m3()},this.W4=()=>{this.UP>0&&this.LP>0&&this.wo(new tu)},this.Q4=t=>{this.wo(new ct(t.initDataType,t.initData||new ArrayBuffer(0)))},this.K4=()=>{this.wo(new zv)},this.Z4=t=>{const e=t.initData,i=e?ki(e).buffer:new ArrayBuffer(0);this.wo(new ct(Ae,i))},this.j4=t=>{if(t.initData){const e=function(t){try{const e=Nt(t),i=new lh,s=bn(e,i,No(e,i,!0));return Ag(bg(s,!0))}catch(t){return}}(t.initData);if(!e)return;this.wo(new ct(Ih,e))}else this.wo(new ct(Ih,new ArrayBuffer(0)))},this.Y4=t=>{const e=t.initData,i=e?ki(e).buffer:new ArrayBuffer(0);this.wo(new ct(Ae,i))},this.x3=()=>{this.N3()},this.D3=t=>{this.F3(t)},this.a6=t=>{this.wo(t),t.type===Uv.Ip&&this.UH(Bc(t.errorObject))},this.QT=t,this.Km=e,this.l3=i,this.Ic=s,this.g3=new pD(this),this.g3.wn(cb.Lf,this.o6),this.g3.t3(new So(this)),this.df=new $R(this),this.df.wn(cb.nd,this.R4),this.oK=new cu(this),this.oK.wn(Po,this.a6),this.Au=new du,this.n4=new du,this.D4=new je([this.Au,this.n4]),this.x4=new uD(this,this.D4),this.e4=new je([this.D4,this.x4.Z]),this.i4=new Co(this),this.E4(),this.DH()}};var ID=.01;function CD(t,e,i){if(void 0===i&&(i=0),!e.U)return 0;let s=e.gB(t);const n=ID*i;return s===e.Tn(0)?s+=n:s===e.Pn(e.U-1)&&(s-=n),s}function RD(t,e){for(let i of t.RI)if(i.WM===e)return i}function xD(t){return!!t.cues&&t.cues.length>0}t();var DD={DQ:void 0,NQ:void 0,BQ:void 0,MQ:void 0,LQ:void 0,OQ:void 0,FQ:void 0,UQ:void 0,VQ:void 0,HQ:void 0},ND=class extends Re{get ba(){return this.Zu||(this.Zu=EC(this)),this.Zu}get DQ(){}get NQ(){}get BQ(){}get MQ(){}get LQ(){}get OQ(){}get u6(){}get FQ(){}get UQ(){}get VQ(){}get HQ(){}constructor(...t){super(...t),this.Zu=void 0}},BD=class extends PD{QP(){}get LP(){return 0}get UP(){return 0}constructor(t,e,i){super(t,e,i,new ND)}};t(),t();var hi=class{get je(){return this.c6}ke(){this.c6.style.display="none"}be(){this.c6.style.display="block"}s6(t){t.appendChild(this.c6)}bn(){Es(this.c6)}constructor(t=5){let e=a.document.createElement("div");e.className="theoplayer-texttracks",e.style.position="absolute",e.style.display="none",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.lineHeight="1.3em",e.style.zIndex=""+t,this.c6=e,this.be()}};function MD(t,e){return yh({},e,tA(function(t){return{DQ:t.DQ,NQ:t.NQ,BQ:t.BQ,MQ:t.MQ,LQ:t.LQ,OQ:t.OQ,FQ:t.FQ,UQ:t.UQ,VQ:t.VQ,HQ:t.HQ}}(t)))}function LD(t){return t.BQ&&wr(t.BQ,"%")?Number(t.BQ.replace("%",""))/100:t.BQ&&wr(t.BQ,"em")?Number(t.BQ.replace("em","")):1}t(),t(),t(),t(),t();var OD=class t{get l6(){return this.d6+this.Ti}set l6(t){this.d6=t-this.Ti}get f6(){return this._6+this.Ci}set f6(t){this._6=t-this.Ci}v6(t){return this.d6<t.l6&&this.l6>t.d6&&this._6<t.f6&&this.f6>t._6}FM(t){return this.d6<=t.d6&&t.l6<=this.l6&&this._6<=t._6&&t.f6<=this.f6}Ty(){return new t(this.d6,this._6,this.Ti,this.Ci)}g6(e){const i=this.d6+e,s=this._6+e,n=w.max(0,this.Ti-2*e),r=w.max(0,this.Ci-2*e);return new t(i,s,n,r)}w6(e){const i=w.min(this.d6,e.d6),s=w.max(this.l6,e.l6),n=w.min(this._6,e._6),r=w.max(this.f6,e.f6);return new t(i,n,s-i,r-n)}constructor(t,e,i,s){this.d6=t,this._6=e,this.Ti=i,this.Ci=s}},FD=class{m6(t){const e=this.p6(t);if(!e)return!1;for(const t of e)Es(t);return this.y6(t),!0}get Ht(){return this.oL}get tH(){return this.QT}get c3(){return this.l3}get A6(){return this.b6}get T6(){return this.S6}yG(){this.k6(),this.oL.L.RI.forEach((t=>this.SF(t))),this.c3.wn(to.gn,this.E6),this.oe(this.c3.Dz,this.c3.Rz)}P6(t){this.S6=t,this.b6=MD(this.S6,this.I6),this.b6.DQ&&(this.tH.style.fontFamily=this.b6.DQ),this.oe(this.c3.Dz,this.c3.Rz),this.C6(!0)}R6(){return this.b6}x6(t){return this.D6.has(t.KI)}k6(){this.oL.wn(Fe.aI,this.N6),this.oL.wn(Fe.cI,this.B6),this.oL.wn(Fe.ca,this.M6)}L6(){this.oL.pn(Fe.aI,this.N6),this.oL.pn(Fe.cI,this.B6),this.oL.pn(Fe.ca,this.M6)}O6(t){t.wn(Zs.mM,this.F6),t.wn(Zs.pM,this.U6),t.wn(Zs.SI,this.V6)}H6(t){t.pn(Zs.mM,this.F6),t.pn(Zs.pM,this.U6),t.pn(Zs.SI,this.V6)}SF(t){this.O6(t),t.Zh&&this.W6(t)}fF(t){this.H6(t),this.q6(t)}z6(){this.oL.Tk===Aa.Yn?this.X6():this.G6()}X6(){if(!this.Q6)return;this.Q6=!1;const t=this.c3.Dz,e=this.c3.Rz;this.oe(t,e),this.C6(!1)}G6(){this.Q6||(this.Q6=!0,this.C6(!0))}W6(t){this.Q6||t.Zh&&!this.x6(t)&&this.C6(!1)}q6(t){this.x6(t)&&this.C6(!0)}K6(t){(t.Zh||this.x6(t))&&this.C6(!0)}C6(t){const e=this.j6,i=this.Q6?[]:this.oL.W.RI.slice();this.Y6(i,e,t),this.j6=i}p6(t){return this.D6.get(t.KI)}Z6(t,e){this.D6.set(t.KI,e)}y6(t){this.D6.delete(t.KI)}J6(t){const e=[],i=this.b6;if(void 0!==i.FQ){const s=t.Ty();s.Ci=i.FQ,e.push(s)}if(void 0!==i.UQ){const s=t.Ty();s.Ci=i.UQ,s.f6=t.f6,e.push(s)}return e}t5(){return this.j6.slice()}bn(){Es(this.tH),this.D6.clear(),this.L6(),this.oL.L.RI.forEach((t=>this.H6(t))),this.c3.pn(to.gn,this.E6)}constructor(t,e,i,s,n){this.D6=C(),this.Q6=!0,this.S6=yh({},DD),this.j6=[],this.N6=t=>this.SF(t.KM),this.B6=t=>this.fF(t.KM),this.M6=()=>this.z6(),this.F6=t=>this.W6(t.KM),this.U6=t=>this.q6(t.KM),this.V6=t=>this.K6(t.KM),this.E6=t=>this.oe(t.width,t.height),this.oL=t,this.I6=this.b6=n,this.QT=this.e5(i),this.l3=s,e.appendChild(this.QT)}};function UD(t,e,i,s,n){let r=t.Ty(),h=r,o=1,a=!1;const u=_(getComputedStyle(e).lineHeight)/4;if(!j(u)&&u>0){for(let e=0;e<i.length&&!a;e++){for(;!WD(t,s,i[e],.01)&&(!s.FM(t)||VD(t,n));)HD(t,i[e],u);if(s.FM(t)){h=t.Ty(),a=!0;break}let c=qD(t,s);o>c&&(h=t.Ty(),o=c),t=r.Ty()}s.FM(t)||(h=r.Ty())}e.style.left=(h.d6-s.d6)/s.Ti*100+"%",e.style.top=(h._6-s._6)/s.Ci*100+"%"}function VD(t,e){return e.some((e=>t.v6(e)))}function To(t){return new OD(t.left,t.top,t.width,t.height)}var qi=function(t){return t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y",t}({});function HD(t,e,i){switch(e){case 0:t.d6+=i;break;case 1:t.d6-=i;break;case 2:t._6+=i;break;case 3:t._6-=i}}function WD(t,e,i,s){switch(i){case 0:return t.l6>e.l6+s;case 1:return t.d6<e.d6-s;case 2:return t.f6>e.f6+s;case 3:return t._6<e._6-s}}function qD(t,e){return w.max(0,w.min(t.l6,e.l6)-w.max(t.d6,e.d6))*w.max(0,w.min(t.f6,e.f6)-w.max(t._6,e._6))/(t.Ti*t.Ci)}t();var zD=function(t){return t.Va='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Ua='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.La='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Ha='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif',t}({});function XD(t,e){return t?{i5:t.i5,s5:t.s5,n5:t.n5,_u:e}:null}function GD(t){const e=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return e?{i5:k(e[1],16),s5:k(e[2],16),n5:k(e[3],16)}:null}function QD(t){return("0"+t.toString(16)).slice(-2)}function KD(t){return"#"+QD(t.i5)+QD(t.s5)+QD(t.n5)}function jD(t){const e=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return e?{i5:k(e[1],10),s5:k(e[2],10),n5:k(e[3],10),_u:_(e[4])}:null}function YD(t,e){return function(t){return t?"rgba("+t.i5+", "+t.s5+", "+t.n5+", "+t._u+")":void 0}(XD(GD(t),e/100))}var Oh=function(t){return t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent",t}({});function ZD(t){return JD[t||"none"]}var JD={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},$D="monospace, sans-serif",tN="Arial, Helvetica, sans-serif",eN='"Times New Roman", Times, serif',iN=F_({monospace:"monospace",sansSerif:tN,serif:eN,monospaceSansSerif:$D,monospaceSerif:"monospace, serif",proportionalSansSerif:tN,proportionalSerif:eN,default:$D}),sN=16,nN="1.3em",rN=class extends FD{e5(t){let e=h.createElement("div");e.className="theoplayer-ttml-texttrack-"+t;const i=e.style;return i.position="absolute",zl(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.overflow="hidden",i.pointerEvents="none",i.top="0",i.left="0",i.width="100%",i.height="100%",i.fontSize=sN+"px",i.lineHeight=nN,e}oe(t,e){const i=w.min(t/640,e/360),s=sN*i*LD(this.A6);this.tH.style.fontSize=s+"px"}Y6(t,e,i){for(const t of e)!i&&t.Zh||this.m6(t);let s=[];const n=To(this.tH.getBoundingClientRect());s.push(...this.J6(n));for(const e of t){const t=this.r5(e,s,n);for(const e of t)s.push(e.g6(.1))}}r5(t,e,i){let s=this.p6(t);s||(s=this.h5(t),this.Z6(t,s));for(const t of s)this.tH.appendChild(t);const n=[],r=[qi.POS_Y,qi.NEG_Y,qi.POS_X,qi.NEG_X];for(const t of s){UD(mN(t),t,r,i,e),n.push(mN(t))}return n}h5(t){let e=[];const i=t.tF,s=t.KO,n=t.sF,r=t.O,o=t.JO,a=o?w.min(640/o.width,360/o.height):1,u=this.A6;if(0===g.keys(s).length){const t=h.createElement("div");gN(t),hN(r,i,n,t,t,a,u),oN(t,"body",u),t.firstChild&&e.push(t)}else for(let t of g.keys(s)){let o=h.createElement("div");o.id=t,gN(o),cN(o,"region",s[t],i,a),hN(r,i,n,o,o,a,u),oN(o,"body",u),o.firstChild&&e.push(o)}return e}P6(t){return CC(this.tH,t),super.P6(t)}constructor(t,e,i,s){super(t,e,i,s,DD)}};function hN(t,e,i,s,n,r,o){if(xn(t)&&function(t){const e=t.gE.toUpperCase();return"SPAN"===e||"P"===e||"BR"===e||"DIV"===e||"BODY"===e}(t)){let a=aN(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.gE.toUpperCase())a=n;else{if(a=function(t){let e;switch(t.gE.toUpperCase()){case"BR":e=h.createElement("br");break;case"SPAN":e=h.createElement("span"),wN(e),uN(e,t);break;case"P":e=h.createElement("p"),function(t){wN(t);const e=t.style;e.textAlign="inherit",e.padding="0",e.margin="0"}(e),uN(e,t);break;case"DIV":e=h.createElement("div"),uN(e,t)}return e}(t),!a)return;s.appendChild(a)}!function(t,e,i,s,n){let r=e.NE("style");fN(t,e.gE,r,i,s,n),function(t,e,i,s){for(const n of e.xE)_N(t,e.gE,n.gE,n.yE,i,s)}(t,e,s,n)}(a,t,e,n,r),function(t,e,i){let s=null==e?void 0:e.NE("smpte:backgroundImage");if(s){s=s.replace("#","");let n=i&&lN(i,(t=>t.xE.some((t=>"id"===t.gE&&t.yE===s))));n&&dN(t,n,e,!0)}!function(t,e){const i=e.m[0];if(!i||"metadata"!==i.gE.toLowerCase())return;const s=i.m[0];dN(t,s,e)}(t,e)}(a,t,i),oN(a,t.gE,o);for(const s of t.TE)hN(s,e,i,a,n,r,o)}}else if(xy(t)){const e=h.createTextNode(t.LS);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");wN(t),oN(t,"span",o),t.appendChild(e),s.appendChild(t)}else s.appendChild(e)}}function oN(t,e,i){const s=t.style;switch(i.DQ&&(s.fontFamily=i.DQ),i.NQ&&(s.color=i.NQ),e.toLowerCase()){case"span":i.MQ&&(s.background=i.MQ);break;case"p":case"div":i.LQ&&(s.backgroundColor=i.LQ);break;case"body":i.OQ&&(s.textShadow=ZD(i.OQ))}}function aN(t){const e=t.NE("region");if("p"===t.gE.toLowerCase())return e;const i=[];for(const e of t.m)i.push(aN(e));return Th(i),0===i.length?e:1===i.length?null!=(s=i[0])?s:e:void 0;var s}function uN(t,e){let i=e.BE(CS,"id");i&&(t.id=i)}function cN(t,e,i,s,n){fN(t,e,i.style,s,t,n);for(const s of g.keys(i))_N(t,e,s,i[s],t,n)}function lN(t,e){if(e(t))return t;for(let i of t.m){const t=lN(i,e);if(t)return t}return null}function dN(t,e,i,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const e=t&&t.TE.length>0?t.TE[0]:null;return e&&xy(e)?"data:image/png;base64,"+e.LS:""}(e),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,e){const i=t.style;zl(i,"flex"),i.flexDirection=i.webkitFlexDirection="column";let s=e.NE("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}i.justifyContent=i.webkitJustifyContent=n;let r=e.NE("smpte:backgroundImageHorizontal"),h="center";if(r)switch(r.toLowerCase()){case"left":h="flex-start";break;case"center":h="center";break;case"right":h="flex-end";break;case"inherit":h="inherit"}i.alignItems=i.webkitAlignItems=h}(t,i),t.appendChild(n)}function fN(t,e,i,s,n,r){if(i)for(const h of i.split(" "))if(s[h])for(const i of g.keys(s[h]))"style"===i.toLowerCase()?fN(t,e,s[h][i],s,n,r):_N(t,e,i,s[h][i],n,r)}function _N(t,e,i,s,n,r){const h=t.style;switch(i){case"backgroundColor":h.backgroundColor=s;break;case"color":h.color=s;break;case"direction":h.direction=s;break;case"display":"none"===s&&(h.display="none");break;case"fontFamily":var o;h.fontFamily=null!=(o=iN.get(s))?o:s;break;case"fontSize":{let t=s;if(wr(t,"px")){const e=Number(t.slice(0,-2));t=e*r/sN+"em"}else wr(t,"c")&&(t=t.replace("c","em"));h.fontSize=t,h.lineHeight&&"inherit"!==h.lineHeight||(h.lineHeight=nN);break}case"fontStyle":h.fontStyle=s;break;case"fontWeight":h.fontWeight=s;break;case"lineHeight":{let t=s;if(wr(t,"px")){const e=Number(t.slice(0,-2));t=e*r+"px"}h.lineHeight=t;break}case"opacity":h.opacity=s;break;case"overflow":h.overflow=s;break;case"padding":h.padding=s;break;case"textAlign":h.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":h.textDecoration="line-through";break;case"underline":case"overline":h.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":h.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":h.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":h.unicodeBidi=s}break;case"visibility":h.visibility=s;break;case"zIndex":h.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}h.justifyContent=h.webkitJustifyContent=t;break}case"extent":{const i=vN(e.toLowerCase())?n:t;let r,h,o=s.split(" ",2);2===o.length?(r=o[0],h=o[1]):r=h="100%",i&&(i.style.height=h,i.style.width=r);break}case"origin":{const i=vN(e.toLowerCase())?n:t,[r,h]=s.split(" ",2);i&&(r||h)&&(r&&(i.style.left=r),h&&(i.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":h.whiteSpace="normal";break;case"noWrap":h.whiteSpace="nowrap"}break;case"writingMode":{let t,e,i,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",e="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",i="upright";break;case"tblr":t="vertical-lr",i="upright";break;case"rl":t="horizontal-tb",e="rtl";break;default:return}h.writingMode=t,h.setProperty("-webkit-writing-mode",t),e&&(h.direction=e),i&&(h.textOrientation=i,h.setProperty("-webkit-text-orientation",i)),n&&(h.unicodeBidi=n);break}case"linePadding":if(wr(s,"c")){let t=s.replace("c","em");h.paddingLeft=h.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?h.textAlign="":h.textAlign=s}}function vN(t){return"div"===t||"p"===t||"span"===t}function gN(t){const e=t.style;zl(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.top="auto",e.left="5%",e.width="90%",e.height="100%",e.maxHeight="100%",e.maxWidth="100%",e.overflow="visible",e.position="absolute",e.fontFamily=tN,e.color=Oh.WHITE,e.background=Oh.TRANSPARENT,e.textShadow=ZD("uniform"),e.textAlign="start",e.writingMode="horizontal-tb",e.setProperty("-webkit-writing-mode","horizontal-tb"),e.padding="0",e.margin="0",e.fontSize="inherit",e.lineHeight="inherit"}function wN(t){const e=t.style;e.fontFamily="inherit",e.color="inherit",e.fontSize="inherit",e.lineHeight="inherit",e.textShadow="inherit"}function mN(t){let e=To(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const i=t.children;for(let t=0;t<i.length;t++){const s=i[t];e=e.w6(To(s.getBoundingClientRect()))}}return e}t(),t();var pN=void 0;function yN(t){return pN||(pN=a.document.createElement("textarea")),pN.innerHTML=t,pN.value}function AN(t,e){let i="Data",s="",n=[],r=t.charAt(e.Fu),h="",o={Vm:"starttag",PE:"",o5:[]};for(;e.Fu<t.length+1;){switch(r=e.Fu<t.length?t.charAt(e.Fu):"EOF",i){case"Data":switch(r){case"&":let n=t.substring(e.Fu).match(/&#?[0-9a-zA-Z]+;/);n?(s+=yN(n[0]),e.by(n[0].length-1)):s+="&";break;case"<":if(s)return{Vm:"string",O:s};i="Tag";break;case"EOF":return{Vm:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":i="StartTagAnnotation";break;case".":i="StartTagClass";break;case"/":i="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,i="TimestampTag";break;case">":return e.by(1),o;case"EOF":return o;default:s=r,i="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":i="StartTagAnnotation";break;case"\n":h=r,i="StartTagAnnotation";break;case".":i="StartTagClass";break;case">":return e.by(1),{Vm:"starttag",PE:s,o5:[]};case"EOF":return{Vm:"starttag",PE:s,o5:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",i="StartTagAnnotation";break;case"\n":n.push(h),h=r,i="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return e.by(1),n.push(h),{Vm:"starttag",PE:s,o5:n};case"EOF":return n.push(h),{Vm:"starttag",PE:s,o5:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":i="CharRefInAnnotation";break;case">":e.by(1);let t=h.trim();return t=t.replace(/\s/," "),{Vm:"starttag",PE:s,o5:n,a5:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let i=e.Fu;">"===t.charAt(i);i++)a+=t.charAt(i);h+=a||"&",i="StartTagAnnotation";break;case"EndTag":switch(r){case">":return e.by(1),{Vm:"endtag",PE:s};case"EOF":return{Vm:"endtag",PE:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return e.by(1),{Vm:"timestamp",u5:s};case"EOF":return{Vm:"timestamp",u5:s};default:s+=r}}e.by(1)}return o}var bN=function(t){return t.c5="string",t.l5="starttag",t.d5="endtag",t.f5="timestamp",t}({});function TN(t){let e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};const i=h.documentElement,s=h.body,n=i.clientLeft||s.clientLeft||0,r=a.pageXOffset||s.scrollLeft,o=e.left+r-n,u=i.clientTop||s.clientTop||0,c=a.pageYOffset||s.scrollTop,l=e.top+c-u;return{left:w.round(o),top:w.round(l)}}function SN(t,e,i,s){if(void 0===s&&(s=0),!t||!e)return;t.style.left="0px";let n=t.getClientRects(),r=e.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;!function(t,e,i,s){void 0===s&&(s=0);!function(t,e,i,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];e=ht(e,n[i]+r-t[i],n[s]-r-t[s])}t.style[i]=e+"px"}(t,e,"left","right",i,s)}(t,o.width/2+o.left-a,i,s)}function ui(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}t();var kN={NQ:Oh.WHITE,DQ:"sans-serif",BQ:"100%",MQ:"rgba(0,0,0,0.8)",LQ:Oh.TRANSPARENT,OQ:"none",FQ:void 0,UQ:void 0,VQ:void 0,HQ:void 0},EN="theoplayer-webvtt-region-",PN="theoplayer-webvtt-styling-",IN="theoplayer-webvtt-default-style",CN=5.23,RN=1.14,xN=class extends FD{e5(t){let e=h.createElement("div");e.className="theoplayer-webvtt-texttrack-"+t,Gl(e),e.style.overflow="hidden",e.style.pointerEvents="none";const i=this.A6.DQ;return i&&(e.style.fontFamily=i),e.style.whiteSpace="pre-line",function(){if(h.getElementById(IN))return;const t=[];for(const[e,i]of VN)t.push("."+PN+e+" { color: "+i+" !important; }"),t.push("."+PN+"_5"+e+" { background-color: "+i+" !important; }"),t.push("video::cue(."+e+") { color: "+i+"; }"),t.push("v5"+e+") { background-color: "+i+"; }");const e=h.createElement("style");e.id=IN,e.innerHTML=t.join("\n"),h.body.appendChild(e)}(),e}yG(){this.tH.appendChild(this.g5),super.yG()}oe(t,e){const i=w.min(t/100,e/100),s=LD(this.A6);this.w5.forEach((t=>{let{iL:e,m5:n}=t;this.p5(n,i,s,e)})),this.p5(this.g5,i,s)}P6(t){CC(this.tH,t),super.P6(t)}Y6(t,e,i){const s=this.tH,n=this.c3.Rz/100;let r=[];for(const e of t)void 0!==e.iL&&(Qe(r,e.iL)||r.push(e.iL));this.w5.forEach(((t,e)=>{let{iL:s,m5:n}=t;!i&&Qe(r,s)||(Es(n),this.w5.delete(e))}));for(const t of e)!i&&t.Zh||this.m6(t);let h=[];const o=To(this.g5.getBoundingClientRect());h.push(...this.J6(o));for(const t of r){let e;this.w5.has(t.o)?e=this.w5.get(t.o).m5:(e=FN(t,n),s.appendChild(e),this.w5.set(t.o,{iL:t,m5:e})),h.push(To(e.getBoundingClientRect()))}t.sort(HN);for(const e of t){const t=this.r5(e,h,o);void 0!==t&&h.push(t.g6(.1))}}r5(t,e,i){var s;let n;t.iL?(n=this.w5.get(t.iL.o).m5,"up"===t.iL.yL&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.g5;let r=null==(s=this.p6(t))?void 0:s[0];if(r||(r=this.y5(t),this.Z6(t,[r])),n.appendChild(r),t.iL||(DN(r,t),t.sL?function(t,e,i,s){const n=UN(t),r=n?i.Ci:i.Ti;let h=_(getComputedStyle(e).lineHeight);if(0===h||j(h))return;let o=To(e.getBoundingClientRect()),a=w.round(PT(t));"rl"===t.At&&(a=-(a+1));let u=h*a;"rl"===t.At&&(u=u-o.Ti+h);a<0&&(u+=r,h=-h);n?o._6+=u:o.d6+=u;const c=o.Ty();let l=!1;for(;!i.FM(o)||VD(o,s);)if(n)if(h<0&&o._6<i._6||h>0&&o.f6>i.f6){if(o._6=c._6,l)break;h=-h,l=!0}else o._6+=h;else if(h<0&&o.d6<i.d6||h>0&&o.l6>i.l6){if(o.d6=c.d6,l)break;h=-h,l=!0}else o.d6+=h;n?e.style.top=(o._6-i._6)/i.Ci*100+"%":e.style.left=(o.d6-i.d6)/i.Ti*100+"%"}(t,r,i,e):function(t,e,i,s){let n,r=To(e.getBoundingClientRect());if(0===r.Ti||0===r.Ci)return;UN(t)?"center"===t.tL?r._6-=r.Ci/2:"end"===t.tL&&(r._6-=r.Ci):"center"===t.tL?r.d6-=r.Ti/2:"end"===t.tL&&(r.d6-=r.Ti);n=""===t.At?[qi.POS_Y,qi.NEG_Y,qi.POS_X,qi.NEG_X]:"lr"===t.At?[qi.POS_X,qi.NEG_X,qi.POS_Y,qi.NEG_Y]:[qi.NEG_X,qi.POS_X,qi.POS_Y,qi.NEG_Y];UD(r,e,n,i,s)}(t,r,i,e)),!t.iL)return To(r.getBoundingClientRect())}y5(t){let e=new lh,i=t.O,s=this.A5(t),n={b5:void 0,je:s},r=n,o="",a="",u=[n],c=[],l=[];for(;e.Fu<i.length;){let t=AN(i,e);if(t.Vm===bN.c5){const e=h.createElement("span");ui(e,t.O),NN(e,u),""!==o&&(e.lang=o),this.T5(e,a),r.je.appendChild(e)}else if(t.Vm===bN.l5){const e=t.PE.toLowerCase();switch(e){case"i":case"b":case"u":case"ruby":{let i=h.createElement(e);r.je.appendChild(i),r={b5:t,je:i},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.b5)?void 0:d.PE.toLowerCase())){let e=h.createElement("rt");r.je.appendChild(e),r={b5:t,je:e},u.push(r)}break;case"c":case"v":r={b5:t,je:r.je},u.push(r);break;case"font":{var f;const e=null==(f=t.a5)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);e&&(a=e[1],l.push(a),r={b5:t,je:r.je},u.push(r));break}case"lang":var _;o=null!=(_=t.a5)?_:"",c.push(o)}}else if(t.Vm===bN.d5){var v;const e=t.PE.toLowerCase(),i=null==(v=r.b5)?void 0:v.PE.toLowerCase();i===e?(u.pop(),r=u[u.length-1],"font"===e&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===i&&"ruby"===e?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===e&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Vm===bN.f5){let e=t.u5,i=new lh;try{_u(e,i)}catch(t){Jh("ERROR collecting timestamp",t)}}}return s}T5(t,e){const i=this.A6,s=this.T6;i.MQ&&(t.style.background=i.MQ);const n=s.NQ||e||i.NQ;n&&(t.style.color=n)}p5(t,e,i,s){if(s){let n=BN(s,e);t.style.height=n*i+"px",t.style.left=MN(s)+"%",t.style.top=LN(s,e)+"px"}t.style.fontSize=CN*e*i+"px"}A5(t){const e=h.createElement("div");e.style.position="absolute",e.style.margin="0",e.style.padding="0",e.style.unicodeBidi="plaintext",e.style.wordWrap="break-word",e.style.overflowWrap="break-word",e.style.width="auto",e.style.textAlign=t.JM,function(t,e){"rl"===e.At?t.style.writingMode="vertical-rl":"lr"===e.At?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(e,t),function(t,e){let i=RT(e);UN(e)?(t.style.width=i+"%",t.style.height="auto"):(t.style.height=i+"%",t.style.width="auto")}(e,t),DN(e,t);const i=this.A6.LQ;i&&(e.style.background=i);const s=this.A6.NQ;return s&&(e.style.color=s),e.style.textShadow=ZD(this.A6.OQ),e}constructor(t,e,i,s){super(t,e,i,s,kN),this.w5=sa(),this.g5=ON(3)}};function DN(t,e){let i,s,n=CT(e),r=IT(e),h=RT(e);if(UN(e)){switch(n){case"line-left":i=r;break;case"center":i=r-h/2;break;case"line-right":i=r-h}s=e.sL?0:PT(e)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}i=e.sL?0:PT(e)}t.style.left=i+"%",t.style.top=s+"%"}function NN(t,e){for(const i of e)if(i.b5){for(const e of i.b5.o5)mh(t,PN+e);"v"===i.b5.PE.toLowerCase()&&i.b5.a5&&mh(t,"theoplayer-webvtt-voice-"+i.b5.a5)}}function BN(t,e){return t.wL*(CN*e)*RN}function MN(t){return t.AL-t.mL*t.Ti/100}function LN(t,e){let i=t.bL,s=t.pL*BN(t,e)/100;return w.max(0,i-s)}function ON(t){let e=h.createElement("div");return e.className=EN+"default",Gl(e),e.style.wordWrap="break-word",e.style.writingMode="horizontal-tb",e.style.pointerEvents="none",e.style.width="auto",e.style.height="auto",e.style.maxHeight="100%",e.style.minHeight="0px",e.style.padding="0",e.style.boxSizing="border-box",e.style.fontSize=CN*t+"px",e.style.lineHeight=RN+"em",e}function FN(t,e){let i=ON(e);i.className=EN+t.o;let s=t.Ti,n=BN(t,e);return i.style.width=s+"%",i.style.height=n+"px",i.style.left=MN(t)+"%",i.style.right="",i.style.top=LN(t,e)+"px",i.style.bottom="",i.style.boxSizing="border-box",i}function UN(t){return""===t.At}var VN=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function HN(t,e){const i=PT(t),s=PT(e),n=WN(i,t.sL),r=WN(s,e.sL);return n&&r?i-s||Rh(e,t)||e.KI-t.KI:Rh(t,e)||t.KI-e.KI}function WN(t,e){return e?t<0?t>-8:t>8:t>50}t(),t(),t();var qN=function(t){return t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics",t}({}),zN={NQ:Oh.WHITE,DQ:zD.La,BQ:"100%",MQ:Oh.BLACK,LQ:"transparent",OQ:"none",S5:"regular",FQ:void 0,UQ:void 0,VQ:void 0,HQ:void 0},XN=[{k5:Oh.WHITE,S5:"regular",E5:0},{k5:Oh.WHITE,S5:"underline",E5:0},{k5:Oh.GREEN,S5:"regular",E5:0},{k5:Oh.GREEN,S5:"underline",E5:0},{k5:Oh.BLUE,S5:"regular",E5:0},{k5:Oh.BLUE,S5:"underline",E5:0},{k5:Oh.CYAN,S5:"regular",E5:0},{k5:Oh.CYAN,S5:"underline",E5:0},{k5:Oh.RED,S5:"regular",E5:0},{k5:Oh.RED,S5:"underline",E5:0},{k5:Oh.YELLOW,S5:"regular",E5:0},{k5:Oh.YELLOW,S5:"underline",E5:0},{k5:Oh.MAGENTA,S5:"regular",E5:0},{k5:Oh.MAGENTA,S5:"underline",E5:0},{k5:Oh.WHITE,S5:"italics",E5:0},{k5:Oh.WHITE,S5:"underline-italics",E5:0},{k5:Oh.WHITE,S5:"regular",E5:0},{k5:Oh.WHITE,S5:"underline",E5:0},{k5:Oh.WHITE,S5:"regular",E5:4},{k5:Oh.WHITE,S5:"underline",E5:4},{k5:Oh.WHITE,S5:"regular",E5:8},{k5:Oh.WHITE,S5:"underline",E5:8},{k5:Oh.WHITE,S5:"regular",E5:12},{k5:Oh.WHITE,S5:"underline",E5:12},{k5:Oh.WHITE,S5:"regular",E5:16},{k5:Oh.WHITE,S5:"underline",E5:16},{k5:Oh.WHITE,S5:"regular",E5:20},{k5:Oh.WHITE,S5:"underline",E5:20},{k5:Oh.WHITE,S5:"regular",E5:24},{k5:Oh.WHITE,S5:"underline",E5:24},{k5:Oh.WHITE,S5:"regular",E5:28},{k5:Oh.WHITE,S5:"underline",E5:28}],GN=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function QN(t,e){return VT(t.P5,e.P5)||pv(t.RN,e.RN)}t();var Kn=32,KN=/CC([1-4])=(.*)/;function jN(t){if(!t)return[];const e=[],i=t.trim().split(";");if(i.every((t=>t.match(KN))))for(const t of i){const[,i,s]=t.match(KN);e.push({I5:Number(i),C5:s})}else for(let t=0;t<i.length;t++)e.push({I5:t+1,C5:i[t]});return e}var YN=class t{get R5(){return this.D5.x5}get N5(){return this.D5.B5}get M5(){return this.D5.B5.E5-this.D5.x5.E5+1}get L5(){return this.D5.B5.O5-this.D5.x5.O5+1}gr(){return this.F5=this.U5(),this.V5(),this.H5(),this.F5}U5(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.M5/Kn*this.q5.W5*100+"%",t.style.height=1.2*this.L5+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.q5.z5?"calc(1em - 1ch)":"";const e=this.b6.DQ;e&&(t.style.fontFamily=e);const i=this.b6.LQ;return i&&(t.style.backgroundColor=i),t}V5(){if(!this.F5)return;let t=this.R5.O5/15*100,e=this.R5.E5/Kn*100,i=(Kn-this.N5.E5-1)/Kn*100,s=(15-this.N5.O5-1)/15*100;this.q5.X5||(e=i=1,this.F5.style.width="98%"),s<t?this.F5.style.bottom=s*this.q5.W5+"%":this.F5.style.top=t*this.q5.W5+"%",i<e?this.F5.style.right=i+"%":this.F5.style.left=e+"%"}H5(){const t=this.D5.G5.sort(ZN);for(let e=0;e<t.length;e++)this.Q5(t[e-1],t[e]),this.K5(t[e]);this.Q5(t[t.length-1],void 0)}K5(e){var i;const s=MD(this.b6,e.j5),n=t.Y5(s);ui(n,e.Z5),null==(i=this.F5)||i.appendChild(n)}static Y5(t){const e=h.createElement("span");e.style.display="inline-block",t.S5!==qN.FONT_ITALICS&&t.S5!==qN.FONT_UNDERLINE_ITALICS||(e.style.fontStyle="italic"),t.S5!==qN.FONT_UNDERLINE&&t.S5!==qN.FONT_UNDERLINE_ITALICS||(e.style.textDecoration="underline");const i=t.NQ;i&&(e.style.color=i);const s=t.MQ;return s&&(e.style.backgroundColor=s),e.style.textShadow=ZD(t.OQ),e.style.height="1.2em",e}Q5(t,e){let i=t?t.B5.O5:this.D5.x5.O5;const s=e?e.x5.O5:this.D5.B5.O5;let n=t?t.B5.E5:this.D5.x5.E5;const r=e?e.x5.E5:this.D5.B5.E5;i<s&&(!e||t&&t.x5.O5!==e.x5.O5?this.J5():this.t8(this.D5.B5.E5-n),n=this.D5.x5.E5),n<r&&(e?this.t8(r-n):this.J5())}J5(){var t;const e=h.createElement("br");null==(t=this.F5)||t.appendChild(e)}t8(t){var e;if(t<=0)return;const i=h.createElement("span");i.style.display="inline-block",ui(i,hv(" ",t)),null==(e=this.F5)||e.appendChild(i)}constructor(t,e,i){this.D5=t,this.q5=e,this.b6=i}};function ZN(t,e){return function(t,e){if(t.O5!==e.O5)return t.O5-e.O5;return t.E5-e.E5}(t.x5,e.x5)}var JN=class extends FD{e5(t){let e=h.createElement("div");return e.className="theoplayer-cea608-texttrack-"+t,e.style.position="absolute",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.top="10%",e.style.bottom="10%",this.A6.DQ&&(e.style.fontFamily=this.A6.DQ),e}oe(t,e){this.ru()}ru(){let t=LD(this.A6);this.e8=function(t){return{W5:t/100,z5:t<=100,X5:t<=150}}(100*t);const e=this.i8/Kn;this.s8=e*t,this.tH.style.fontSize=this.s8+"px"}get i8(){let t=this.tH.offsetWidth;return this.e8&&this.e8.X5||(t*=.8),t}Y6(t,e,i){for(const t of e)!i&&t.Zh||this.m6(t);for(const e of t)this.r5(e)}r5(t){this.e8&&this.e8.X5?this.n8(80):this.n8(100),this.ru();let e=this.p6(t);e||(e=this.h5(t),this.Z6(t,e));for(const t of e)this.tH.appendChild(t)}h5(t){return t.O.map((t=>new YN(t,this.e8,this.A6).gr()))}n8(t){const e=(100-t)/2;this.tH.style.left=e+"%",this.tH.style.width=t+"%"}constructor(t,e,i,s){super(t,e,i,s,zN)}},Ei=class t{r8(t){for(let e of this.h8)if(e.Ht===t)return e}static o8(t){switch(t.Vm){case Zo.TTML:case Zo.SRT:case Zo.WEBVTT:case Zo.CEA608:return!0}return!1}a8(t){switch(t.Vm){case Zo.TTML:return new rN(t,this.u8,t._h,this.l3);case Zo.SRT:case Zo.WEBVTT:return new xN(t,this.u8,t._h,this.l3);case Zo.CEA608:return new JN(t,this.u8,t._h,this.l3)}}c8(t){let e=this.r8(t);e||(e=this.a8(t),e&&(e.yG(),e.P6(this.Ic),this.h8.push(e),t.Tk===Aa.Yn&&e.X6()))}l8(t){let e=this.h8;for(let i=e.length-1;i>=0;i-=1){let s=e[i];s.Ht===t&&(s.bn(),Xt(e,i))}}d8(e){ZS(e.Lt)&&t.o8(e)&&(e.Vc===Fi.ERROR?this.l8(e):this.c8(e))}get o1(){return this.f8.cs||this.Ko.yM}sr(){for(let t of this.h8)t.Ht.pn(Fe.Lf,this._8),t.Ht.pn(Fe.bI,this._8),t.bn();us(this.h8)}bn(){this.sr();for(let t of this.h8)t.bn();this.Au.pn(ie.nI,this.v8),this.Au.pn(ie.hI,this.g8),this.Au.pn(Fe.ca,this._8),this.f8.pn(si.ca,this.w8),this.Ko.pn([Ws.mM,Ws.pM],this.w8),this.Ic.pn("yI",this.m8)}constructor(t,e,i,s,n,r){this.h8=[],this.v8=t=>{let e=t.Ht;e.wn(Fe.Lf,this._8),e.wn(Fe.bI,this._8),e instanceof zi&&(e.o1=this.o1),this.d8(e)},this._8=t=>{let e=t.Ht;this.d8(e)},this.g8=t=>{let e=t.Ht;e.pn(Fe.Lf,this._8),e.pn(Fe.bI,this._8),this.l8(e)},this.w8=()=>{let t=this.o1;for(let e of this.Au.RI)e instanceof zi&&(e.o1=t)},this.m8=()=>{for(let t of this.h8)t.P6(this.Ic)},this.u8=t,this.l3=e,this.Au=i,this.f8=n,this.Ko=r,this.Ic=s,this.Au.wn(ie.nI,this.v8),this.Au.wn(ie.hI,this.g8),this.Au.wn(Fe.ca,this._8),this.f8.wn(si.ca,this.w8),this.Ko.wn([Ws.mM,Ws.pM],this.w8),this.Ic.wn("yI",this.m8),this.w8()}};t();var $N=class extends Re{get AM(){var t;return null!=(t=this.p8.ownerDocument.pictureInPictureEnabled)&&t}get yM(){return this.y8}async fo(){if(this.AM){if(!this.yM){const t=this.Tp([Ws.mM,Ws.la]);await this.p8.requestPictureInPicture(),await t,this.y8||this.wo(new uh)}}else this.wo(new uh)}async ko(){if(this.AM){if(this.y8){const t=this.Tp([Ws.pM,Ws.la]);await this.p8.ownerDocument.exitPictureInPicture(),await t,this.y8&&this.wo(new uh)}}else this.wo(new uh)}bn(){this.Bo(),this.p8.removeEventListener("enterpictureinpicture",this.A8),this.p8.removeEventListener("leavepictureinpicture",this.b8)}constructor(t){super(),this.y8=!1,this.A8=()=>{this.y8=!0,this.wo(new xc)},this.b8=()=>{this.y8=!1,this.wo(new hs)},this.p8=t,this.p8.addEventListener("enterpictureinpicture",this.A8),this.p8.addEventListener("leavepictureinpicture",this.b8)}};function tB(t){const e=new BI,i=function(t){const e=[];return DI.ha(t)&&e.push(new DI(t)),NI.ha(t)&&e.push(new NI(t)),e}(t);if(i.length>0){for(const t of i)e.hX(t);e.rX(i[0])}return e}var eB=class extends PD{get tH(){return this.QT}get LP(){return this.QT.videoHeight}get UP(){return this.QT.videoWidth}get ja(){return this.T8}get wH(){return this.S8}QP(){return this.QT}async Wu(){this.S8.bn(),this.T8.bn(),this.k8.bn(),this.E8.bn(),await super.Wu()}ke(){super.ke(),this.k8.ke()}be(){super.be(),this.k8.be()}s6(t){super.s6(t),this.k8.s6(t)}constructor(t,e,i,s){super(t,e,i,s),this.T8=tB(t),this.S8=new $N(t),this.k8=new hi,this.E8=new Ei(this.k8.je,this.c3,this.nt,this.Du,this.ja,this.wH)}};t(),t();t(),t();var iB=function(t){return t.P8="HELLO",t.I8="HI_THERE",t.C8="INITIALIZE",t.x8="APPEND_INIT",t.D8="APPEND_DATA",t.N8="ACK",t.B8="REMOVE",t.M8="DESTROY_SESSION",t}({}),sB=class{L8(t){return this.Jo.Xo((async t=>{Bv(t);const e=new MessageChannel,i=e.port1,s=e.port2;ul.serviceWorker.controller||await V(ul.serviceWorker,"install",t),"activated"!==ul.serviceWorker.controller.state&&await V(ul.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};ul.serviceWorker.controller.postMessage(n,[s]),i.start(),this.Qw=i;try{const e=await V(i,"message",t),s=e.data;if("HI_THERE"!==s.kind)throw new v("Could not set up message channel");this.YT=s.sessionId}catch(t){throw Eh(t)&&this.O8(),t}}),t)}F8(t,e){return this.Qw,this.Jo.Xo((async()=>{if(!this.Qw)throw new v("MessageSession not set up yet or already closed.");e||(e=[]),this.Qw.postMessage(t,e);const i=await V(this.Qw,"message");return i.data}))}U8(){return this.Jo.Xo((()=>this.O8()))}O8(){if(!ul.serviceWorker.controller)return;if("activated"!==ul.serviceWorker.controller.state)return;if(!this.Qw)return;const t={kind:"DESTROY_SESSION"};this.Qw.postMessage(t),this.Qw.close(),this.Qw=void 0}constructor(){this.Jo=new jn}};t();var nB=class{get V8(){return this.H8}W8(t,e){const i=t-e;this.H8=i>this.V8?this.H8:i}q8(t){this.H8=t}constructor(){this.H8=1/0}};t(),t(),t();var rB=function(t){return t.hk="audio",t.wl="video",t.lF="metadata",t}({}),hB=class extends Re{get Sl(){return void 0===this.z8||void 0===this.X8?r.Ol():new r([this.z8,this.X8])}get aT(){return{yS:this.ez}}get zJ(){return Kc(this.ez,"audio")?Be.hk:Kc(this.ez,"video")?Be.wl:Be.zS}get Oq(){return this.ez}get GJ(){return r.Ol()}get vG(){return 30}set vG(t){}get pG(){return 30}set pG(t){}jJ(t,e){}YJ(t,e){}yK(){return this.G8}get fa(){return this.Q8}get K8(){return this.z8}get ZM(){return this.X8}async ZJ(){}async yJ(t,e){}async sJ(t,e,i){if(t.Vm!==lt.KQ)throw new v("Streaming or opaque segments are not supported yet.");const s=t.LS,n=async()=>{const t=s.buffer,i={kind:iB.D8,mediaType:oB(this.ez),segment:s,startPts:e.j8,totalDuration:e.ct};if(await this.Y8.F8(i,[t]),void 0===this.z8){const t=e.j8+e.QO;this.z8=t,this.X8=t}this.X8=this.X8+e.ct,this.wo(new o(Xh.GQ))};return this.Jo.Xo((async t=>{Bv(t);try{this.Q8=!0,await n()}finally{this.Q8=!1}}),i)}async hJ(t,e,i){if(t.Vm!==lt.KQ)throw new v("Streaming or opaque initialization segments are not supported yet.");const s=t.LS,n=async()=>{const t={kind:iB.x8,mediaType:oB(this.ez),segment:s};await this.Y8.F8(t,[])};return this.Jo.Xo((async t=>{Bv(t);try{this.Q8=!0,await n()}finally{this.Q8=!1}}),i)}WJ(){this.G8=!0}NJ(){this.G8=!1}async sc(t,e,i){const s=async()=>{const t={kind:iB.B8,mediaType:oB(this.ez),endTime:e};await this.Y8.F8(t),this.z8=void 0,this.X8=void 0,this.wo(new o(Xh.GQ))};return this.Jo.Xo((async t=>{Bv(t);try{this.Q8=!0,await s()}finally{this.Q8=!1}}),i)}nK(t){return this.ez===t.yS}hK(t){return this.ez=t.yS,Promise.resolve()}async Wu(){this.Bo(),await this.Jo.bn()}constructor(t,e){super(),this.ez=t,this.Y8=e,this.z8=void 0,this.X8=void 0,this.Jo=new jn,this.Q8=!1,this.G8=!1}};function oB(t){return t.match(/video/)?rB.wl:rB.hk}var aB=class t{static Z8(e,i,s,n){const r=[];for(let t=0;t<e.q$.length;t++){const s=e.q$[t].yS;r.push(new hB(s,i))}return new t(e,r,s,n)}J8(){}get t9(){return[this.M$,this.L$].filter(Ee)}get N$(){return this.M$}get Sl(){return OR(this)}get aT(){return this.pl}get ct(){return 0}get yK(){var t,e,i;const s=null==(i=null==(t=this.M$)?void 0:t.yK())||i;var n;const r=null==(n=null==(e=this.L$)?void 0:e.yK())||n;return s&&r}get Cl(){return new r([0,1/0])}get B$(){return this.L$}async Wu(){await Promise.all([this.M$,this.L$].filter(Ee).map((t=>t.Wu())))}F$(t){}W$(t,e,i,s){}WJ(){var t,e;null==(t=this.M$)||t.WJ(),null==(e=this.L$)||e.WJ()}NJ(){var t,e;null==(t=this.M$)||t.NJ(),null==(e=this.L$)||e.NJ()}nK(t){return!0}hK(t){return this.pl=t,Promise.resolve()}aK(t){}async iK(t,e){const i=await this.Km.Qm(t.Hm,e),s=await i.cT();return await this.sK(s),s}async sK(t){if(t&&!this.QT.src)throw new ga(X.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.QT.src)throw new ga(X.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const e=this.nT;e&&(await e.oT(this.QT),this.nT=void 0),t&&(await t.kn(this.QT),this.nT=t)}constructor(t,e,i,s){this.nT=void 0,this.pl=t,this.L$=bv(e,(t=>Boolean(t.Oq.match(/video/)))),this.M$=bv(e,(t=>Boolean(t.Oq.match(/audio/)))),this.Km=i,this.QT=s,this.J8()}},uB=class extends Re{e9(){this.p8.addEventListener("timeupdate",this.i9),this.p8.addEventListener("ended",this.s9),this.p8.addEventListener("timeupdate",this.n9),this.p8.addEventListener("ratechange",this.r9),this.p8.addEventListener("volumechange",this.h9),this.p8.addEventListener("durationchange",this.o9),this.p8.addEventListener("playing",this.a9),this.p8.addEventListener("seeking",this.u9),this.p8.addEventListener("play",this.c9),this.p8.addEventListener("pause",this.l9),this.p8.addEventListener("encrypted",this.Q4)}d9(){this.p8.removeEventListener("timeupdate",this.i9),this.p8.removeEventListener("ended",this.s9),this.p8.removeEventListener("timeupdate",this.n9),this.p8.removeEventListener("ratechange",this.r9),this.p8.removeEventListener("volumechange",this.h9),this.p8.removeEventListener("durationchange",this.o9),this.p8.removeEventListener("playing",this.a9),this.p8.removeEventListener("seeking",this.u9),this.p8.removeEventListener("play",this.c9),this.p8.removeEventListener("pause",this.l9)}f9(){this.g3.wn(cb.Lf,this.Os)}_9(){this.g3.pn(cb.Lf,this.Os)}get tH(){return this.p8}get u0(){return!1}get Yu(){return this.p8.currentTime+this.v9.V8}get Oc(){return this.p8.paused}get Pl(){return this.p8.volume}set Pl(t){this.p8.volume=t}get Hu(){return this.p8.playbackRate}set Hu(t){this.p8.playbackRate=t}get g9(){return this.p8.defaultPlaybackRate}get Sl(){var t,e;return null!=(e=null==(t=this.iH)?void 0:t.Sl)?e:r.Ol()}get w9(){return r.Sn(this.p8.buffered)}get Tl(){const t=this.m9;return this.$o.Xl(t.by(this.v9.V8))}get m9(){return r.Sn(this.p8.played)}get Uc(){return this.sf}get Lc(){return!1}get Hc(){return!1}get ct(){return this.p8.duration}get tc(){return this.p8.muted}set tc(t){this.p8.muted=t}get j5(){return this.p8.style}get cM(){return yh({},xC,{uM:!0})}jc(t,e,i){this.U3.tf(),this.U3=new Mr,this.V3=qe(this.H3(t,this.V3,this.U3.ap),this.U3).catch(De)}async H3(t,e,i){var s;this.$o=this.Tl;const n=null==(s=this.iH)?void 0:s.t9;if(!n)return;const r=w.max(...n.map((t=>t.K8?t.K8:1/0)));this.sf=!0,this.wo(new lc(t)),await e.catch(De),Bv(i);try{for(this.p9||this.y9(),this.p8.load(),this.A9||(this.b9=!1,await Dc(this.p8.play(),i));this.Vc<qb.Jf;)await this.g3.Tp(cb.Lf,i);this.T9.Xf(),this.p9=!1,this.sf=!1,this.wo(new qo(this.Yu))}catch(t){throw this.T9.My(t),t}finally{this.S9(),this.v9.q8(r)}}Ml(){this.A9=!0,this.p8.pause()}async bl(){this.A9&&(this.p8.src||this.yl(),await this.T9.Pf,await this.p8.play())}async Wu(){this.Y8&&this.Y8.U8().catch(De),this.U3.tf(),this.d9(),this._9(),this.g3.Wu(),this.Bo(),this.Au.bn(),this.k8.bn(),this.E8.bn()}async sr(){this.Y8&&this.Y8.U8().catch(De),this.U3.tf(),this.p8.removeAttribute("src"),this.p8.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.p8.removeAttribute("x-airplay-deny"),this.p8.disableRemotePlayback=!1,this.p8.load(),this.g3.sr(),this.$o=r.Ol()}yl(){this.e6||(_B(this.p8,Gn.Zs),this.i6=!0)}get Vc(){return this.g3.Vc}y9(){const t=this.p8.getClientRects();let e;if(!(t.length>0))return;e=t[0];const i=e.width,s=this.p8.videoWidth/this.p8.videoHeight,n=e.height;let r,h;i/n>s?(r=n*s,h=n):(h=i/s,r=i),this.p8.style.width=r+"px",this.p8.style.height=h+"px",this.p8.style.marginLeft=(i-r)/2+"px",this.p8.style.marginTop=(n-h)/2+"px",this.p8.style.backgroundColor="black"}S9(){this.p8.style.width="100%",this.p8.style.height="100%",this.p8.style.marginLeft="",this.p8.style.marginTop="",this.p8.style.backgroundColor=""}get LP(){return this.p8.videoHeight}get UP(){return this.p8.videoWidth}get $c(){return this.p8.ended}get Ci(){return this.p8.offsetHeight*Gn.Zs.nw}get Ti(){return this.p8.offsetWidth*Gn.Zs.nw}get wP(){return!1}get e6(){return this.i6}get Ku(){}get c3(){return this.k9}get lt(){}get ja(){return this.T8}get wH(){return this.Ko}get Cl(){return this.iH?this.iH.Cl:r.Ol()}get sH(){}get nt(){return this.Au}get Du(){return this.Ic}get XP(){return!1}set XP(t){}vH(t,e,i,s,n){}iI(t,e,i,s,n,r,h,o,a){const u=new ru(t,e,i,s,n,r,h,a,o);return this.Au.tt(u),this.i4.tt(u),u}mH(t){throw v("Not supported.")}EK(t){}yP(){return fC(this.p8)}get T3(){return"block"===this.p8.style.display}be(){this.p8.style.display="block",this.k8.be()}ke(){this.p8.style.display="none",this.k8.ke()}J4(){}async On(t){if(t.Vm===A.IF)throw new v("Not yet implemented");await this.Y8.L8();const e=bv(t.oH,(t=>t.rT.Vm===as.Om)),i={kind:iB.C8,mediaBufferConfigs:t.q$.map((t=>t.yS)),fairPlaySdkUri:null==e?void 0:e.KU};return await this.Y8.F8(i),this.iH=aB.Z8(t,this.Y8,this.Km,this.p8),this.oK.On(this.iH,t),this.p8.setAttribute("x-webkit-airplay","deny"),this.p8.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.p8.disableRemotePlayback=!0,this.p8.preload="none",this.p8.src="https://theo.proxy/"+this.Y8.YT+"/master.m3u8",this.iH}t6(){}EF(t){this.Au.it(t),this.i4.it(t)}pH(){for(const t of this.Au.RI.slice())t.bn();this.Au.sr()}YV(t){}fH(){return!1}s6(t){t.appendChild(this.p8),this.k8.s6(t)}QP(){return this.p8}get TH(){return this.oK.TH}set TH(t){this.oK.TH=t}get n6(){}set n6(t){}get F2(){}JP(){}constructor(t,e,i,s){super(),this.p9=!0,this.Y8=new sB,this.v9=new nB,this.A9=!0,this.T9=new ue,this.sf=!1,this.V3=Promise.resolve(),this.U3=new Mr,this.b9=!0,this.$o=r.Ol(),this.i6=!1,this.i9=()=>{this.Oc||this.w9.U<=0||this.Sl.U<=0||this.v9.W8(this.Sl.Pn(this.Sl.U-1),this.w9.Pn(this.w9.U-1))},this.s9=()=>{this.wo(new Zu(this.Yu))},this.n9=()=>{this.wo(new Ph(this.Yu,this.Ku))},this.r9=()=>{this.wo(new Sr(this.Yu,this.Hu))},this.h9=()=>{this.wo(new Wo(this.Yu,this.Pl))},this.o9=()=>{this.wo(new de(this.ct))},this.a9=()=>{this.wo(new $n(this.Yu))},this.u9=()=>{this.jc(this.Yu)},this.c9=async()=>{this.b9&&this.wo(new ah(this.Yu)),this.A9=!1,this.b9=!0},this.l9=()=>{this.A9=!0,this.wo(new ac(this.Yu))},this.Q4=t=>{const e=t.initDataType;var i;const s=null!=(i=t.initData)?i:new ArrayBuffer(0);this.wo(new ct(e,s))},this.p8=t,this.g3=new So(this),this.k9=i,this.Ic=s,this.p8.playsInline=!0,this.p8.style.width="100%",this.p8.style.height="100%",this.e9(),this.f9(),this.T8=tB(this.p8),this.Ko=new $N(this.p8),this.oK=new cu(this),this.Km=e,this.Au=new du,this.i4=new Co(this),this.k8=new hi,this.E8=new Ei(this.k8.je,this.c3,this.nt,this.Du,this.ja,this.wH)}},cB=[Be.hk,Be.wl];function lB(t){const e=h.createElement(t);return me(e)&&e.addEventListener("contextmenu",vB),fB(e),e}function dB(t){fB(t),t.removeEventListener("contextmenu",vB)}function fB(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),Xi(t),jl(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Ds.vM,t.controls=!1,t.style.display="none",me(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function _B(t,e){if(e.Sw){const e=t.muted;t.muted=!0,t.muted=!1,t.muted=e}else if(t.paused){const e=t.play();Xr(e)&&Ov(e),t.pause()}}function vB(t){t.preventDefault()}t(),t();var gB=class{FS(t){return this.TF.FS(t)}Pk(t){this.TF.Pk(t)}bn(){this.TF.bn()}constructor(t){this.TF=t}},wB=class extends gB{FS(t){const e=new Qi(t),i=this.yW.rG.RV(e);return i?this.E9(e,i):this.TF.FS(e)}async E9(t,e){e.oG(Gn.Qg()/1e3);const i=await this.TF.FS(t);let s;e.aG(Gn.Qg()/1e3),s=i.kS?i.pS().pipeThrough(new Uc(new mB(e))):i.mS().then((t=>{const i=Gn.Qg()/1e3;return e.uG(i,new x(t)),e.cG(i),t}));const n={LS:s,FS:i.FS};return new Gu(n,i)}constructor(t,e){super(t),this.yW=e}},mB=class{start(t){this.RQ=t}transform(t){this.P9.uG(Gn.Qg()/1e3,t),this.RQ.enqueue(t)}flush(){this.P9.cG(Gn.Qg()/1e3)}constructor(t){this.P9=t}};function pB(t){return{get ratio(){return t.Oo},get thresholds(){return t.I9.slice()}}}function yB(t){const e=[],i=w.floor(1/t);if(j(i))return[];for(let s=0;s<=i;s++){const i=ht(s*t,0,1);e.push(i)}return e}t(),t(),t();var AB=class{get Oo(){return this.C9}get I9(){return this.R9}x9(t){return e=>{const i=e[e.length-1];this.C9=i.intersectionRatio,t(i.intersectionRatio)}}get ba(){return this.Zu||(this.Zu=pB(this)),this.Zu}Al(){this.D9.disconnect()}constructor(t,e,i){this.C9=1,this.Zu=void 0,this.R9=yB(e);const s=this.x9(i);this.D9=new a.IntersectionObserver(s,{root:null,threshold:this.R9}),this.D9.observe(t)}},bB=class{get Oo(){return this.C9}get I9(){return this.R9}get ba(){return this.Zu||(this.Zu=pB(this)),this.Zu}N9(t){this.C9=t;const e=this.R9;let i=0;if(t>0)for(;i<e.length&&e[i]<=t;)++i;this.B9!==i&&(this.B9=i,this.M9(t))}constructor(t,e){this.C9=1,this.B9=-1,this.Zu=void 0,this.R9=yB(t),this.M9=e}},TB=class extends bB{L9(){const t=this.do.getBoundingClientRect();return ht(w.max(0,w.min(a.innerWidth,t.right)-w.max(0,t.left))*w.max(0,w.min(a.innerHeight,t.bottom)-w.max(0,t.top))/(t.width*t.height),0,1)}Al(){a.removeEventListener("scroll",this.O9)}constructor(t,e,i){super(e,i),this.O9=Zi((()=>this.N9(this.L9())),50),this.do=t,a.addEventListener("scroll",this.O9,!!SI&&{passive:!0}),Zn((()=>this.N9(this.L9())))}},SB=.1,kB=class{get F9(){return this.U9}get Ro(){return this.V9}set Ro(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.V9=t}get ba(){return this.Zu||(this.Zu=function(t){return{get ratio(){return t.F9},get visible(){return t.F9>t.Ro},get visibleThreshold(){return t.Ro},set visibleThreshold(e){e=nu(e),t.Ro=e},addObserver:(e,i)=>(e=nu(e),t.Io(e,i).ba),removeObserver(e){let i=t.H9(e);i&&t.No(i)}}}(this)),this.Zu}W9(t){return e=>{this.U9=e,null==t||t(this.U9)}}Io(t,e){if(j(t))throw new p("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let i;return i="function"==typeof a.IntersectionObserver?new AB(this.do,t,this.W9(e)):new TB(this.do,t,this.W9(e)),this.q9.push(i),i}No(t){t.Al(),Ko(this.q9,t)}H9(t){for(const e of this.q9)if(e.ba===t)return e}bn(){for(const t of this.q9)t.Al();us(this.q9)}constructor(t){this.U9=1,this.V9=0,this.q9=[],this.Zu=void 0,this.do=t,this.Io(.1,this.W9())}};t();var EB=class extends o{constructor(){super(Uv.xp)}},PB=class extends S{get z9(){return this.yW}get vl(){return this.Hl}set vl(t){this.Hl=t,this.Sa.vl=t}get X9(){return this.gl}get ht(){return this.Sa.ht}get G9(){return this.Q9}get c3(){return this.K9}get vP(){return this.Sa.vP}get pP(){return this.j9}get Y9(){return this.Z9}get nt(){return this.Sa.nt}get Du(){return this.Ic}get rt(){return this.Sa.rt}get Sl(){return this.nP()}nP(){return this.Sa.Sl}get J9(){return this.Ac}get jG(){return this.YG}get Yu(){return this.aP()}set Yu(t){this.uP(t)}aP(){return this.Sa.Yu}uP(t,e){this.Sa.uP(t,e)}t7(){return this.aP()}get Ku(){return this.Sa.Ku}set Ku(t){this.Sa.Ku=t}get bt(){return this.Sa.bt}get ct(){return this.cP()}cP(){return this.Sa.ct}get je(){return this.Sa.je}get $c(){return this.Sa.$c}get lt(){return this.fP()}fP(){return this.Sa.lt}get Rc(){return this._P()}_P(){return this.Sa.Rc}get ja(){return this.Sa.GP()}get wH(){return this.Sa.xa()}get XP(){return this.Sa.XP}set XP(t){this.Sa.XP=t}get tc(){return this.Sa.tc}set tc(t){const e=Boolean(t);this.bP(e)}bP(t){this.Sa.tc=t,t||this.Oc||this.KP()}get Oc(){return this.Sa.Oc}get Hu(){return this.EP()}set Hu(t){this.$u(t)}EP(){return this.Sa.Hu}$u(t){this.Sa.Hu=t}get Tl(){return this.PP()}PP(){return this.Sa.Tl}get IP(){return this.Sa.IP}set IP(t){this.Sa.IP=t}get Vc(){return this.Sa.Vc}get Cl(){return this.DP()}DP(){return this.Sa.Cl}get Uc(){return this.Sa.Uc}get KI(){return this.HM}get LP(){return this.Sa.LP}get UP(){return this.Sa.UP}get Pl(){return this.Sa.Pl}set Pl(t){const e=ht(Number(t),0,1)||0;this.WP(e)}get qP(){return this.AW}WP(t){this.Sa.Pl=t}Ca(){$b(this,lP,this)}bl(){this.Sa.bl()}Ml(){this.Sa.Ml()}BP(){return this.oW}async _a(t,e){if(this.oW=t,t){this.e7.rq(t).catch(this.i7);const i=function(t){t.sources;const e=t.sources.filter((t=>Bl(t.integration)));0;return t.sources=e,t}(t);await this.Sa._a(i,e)}}KP(){if(this.vo)return;this.Sa.KP(),this.gl.KP();const t=this.je.getElementsByTagName("video");for(let e=0;e<t.length;e++){const i=t[e];"Advertisement"===i.title&&_B(i,Gn.Zs)}this.vo=!0}cs(){return this.s7.Uo()===Ge.FULLSCREEN}be(){this.Sa.be()}ke(){this.Sa.ke()}QP(){return this.Sa.QP()}JP(){this.Sa.JP()}$P(){this.Sa.$P()}iI(t){return this.Sa.iI(t)}async Al(){this.oW=void 0,await this.Sa.Al(),await this.Sa.sr()}async bn(){this.wo(new EB),this.Bo(),this.Q9.bn(),this.td.bn(),this.Z9.bn(),this.n7.bn(),this.r7.bn(),this.s7.bn(),this.K9.bn(),this.h7.bn(),this.gl.bn(),this.pW.bn(),await this.Sa.bn()}constructor(t,e,i){super(),this.Hl=!1,this.vo=!1,this.oW=void 0,this.o7=!1,this.Ta=void 0,this.i7=t=>{if(this.o7)return;this.o7=!0;const e=this.a7,i=Bc(t);this.Sa.BI=new JE(this.je,i,t),Ov(e.bn())},this.u7=t=>{t.type!==Uv.Xp&&t.type!==Uv.zp&&this.wo(t)};const s=nu(e.uid);j(s)?this.HM=aT++:this.HM=s,this.aT=e;const n=Gn.td,r=new TC;this.h7=new fI("9.0.0",n,r),this.yW=new nC,this.AW=new mt;const h=new wB(n,this.yW);this.td=new GI(h,e.allowMixedContent),this.bQ=null!=i?i:new KP(e.isEmbeddable,"9.0.0",qP()),this.e7=new bC(n,this.bQ,this.h7,r,e,qP()),this.e7.sd().catch(this.i7),this.K9=new RI(t),this.K9.wn(to.gn,this.Os),this.Ic=new IC,this.Ac=new aC,this.YG=new cC;const o=new ZE(t,e,this.td,this.yW,this.AW,this.K9,this.Ic);this.yW.yG(o);let a=o;a=new uC(a,this.J9),a=new lC(a,this.jG),this.a7=a,this.Sa=new iT(this.a7),this.Sa.wp(this.u7),this.j9=new dC(this.Sa),this.Z9=new jI(this.Sa,this.td,this.yW),this.n7=new mI(this),this.r7=new MI(this.Sa,e.allowNativeFullscreen),this.s7=new OI(this.r7,this.Sa.xa()),this.K9.kn(),this.Mo=new kB(t),this.pW=new Un(this.K9,this.Ic,1,[Be.wl]),this.gl=new qE(this.pW),this.Q9=new gC}};t(),t();var Mi=class extends S{get z9(){return this.c7()}c7(){return this.sa.z9}get l7(){return this.d7()}d7(){return this.sa.l7}get h7(){return this.sa.h7}get X9(){return this.f7()}f7(){return this.sa.X9}get vl(){return this.sa.vl}set vl(t){this.sa.vl=t}get n7(){return this.sa.n7}get G9(){return this.sa.G9}get J9(){return this.sa.J9}get aT(){return this.sa.aT}get c3(){return this.sa.c3}get ja(){return this.GP()}GP(){return this.sa.ja}get wH(){return this.xa()}xa(){return this.sa.wH}get td(){return this.sa.td}get qP(){return this.sa.qP}get e7(){return this.sa.e7}get jG(){return this.sa.jG}get Y9(){return this.sa.Y9}get s7(){return this.sa.s7}get K9(){return this.sa.K9}get Sa(){return this.sa.Sa}get Du(){return this.sa.Du}get _7(){return this.v7()}v7(){return this.sa._7}get g7(){return this.w7()}w7(){return this.sa.g7}get KI(){return this.sa.KI}get Mo(){return this.sa.Mo}get ht(){return this.eP()}eP(){return this.sa.ht}nP(){return this.sa.nP()}get Ku(){return this.rP()}set Ku(t){this.hP(t)}rP(){return this.sa.Ku}hP(t){this.sa.Ku=t}get bt(){return this.oP()}oP(){return this.sa.bt}aP(){return this.sa.aP()}uP(t,e){this.sa.uP(t,e)}t7(){return this.sa.t7()}cP(){return this.sa.cP()}get je(){return this.lP()}lP(){return this.sa.je}get $c(){return this.dP()}dP(){return this.sa.$c}fP(){return this.sa.fP()}_P(){return this.sa._P()}get vP(){return this.gP()}gP(){return this.sa.vP}get XP(){return this.sa.XP}set XP(t){this.sa.XP=t}get pP(){return this.yP()}yP(){return this.sa.pP}get tc(){return this.AP()}set tc(t){this.bP(t)}AP(){return this.sa.tc}bP(t){this.sa.bP(t)}get Oc(){return this.kP()}kP(){return this.sa.Oc}get Hu(){return this.EP()}set Hu(t){this.$u(t)}EP(){return this.sa.Hu}$u(t){this.sa.Hu=t}PP(){return this.sa.PP()}get IP(){return this.CP()}set IP(t){this.RP(t)}CP(){return this.sa.IP}RP(t){this.sa.IP=t}get Vc(){return this.xP()}xP(){return this.sa.Vc}get Ta(){return this.sa.Ta}set Ta(t){this.sa.Ta=t}DP(){return this.sa.DP()}get Uc(){return this.NP()}NP(){return this.sa.Uc}get nt(){return this.MP()}MP(){return this.sa.nt}get LP(){return this.OP()}OP(){return this.sa.LP}get rt(){return this.FP()}FP(){return this.sa.rt}get UP(){return this.VP()}VP(){return this.sa.UP}get Pl(){return this.HP()}set Pl(t){this.WP(t)}HP(){return this.sa.Pl}WP(t){this.sa.WP(t)}KP(){this.sa.KP()}Ml(){this.sa.Ml()}bl(){this.sa.bl()}be(){this.sa.be()}ke(){this.sa.ke()}cs(){return this.sa.cs()}QP(){return this.sa.QP()}JP(){this.sa.JP()}$P(){this.sa.$P()}iI(t){return this.sa.iI(t)}Ca(){this.sa.Ca()}BP(){return this.sa.BP()}_a(t,e){return this.sa._a(t,e)}Al(){return this.sa.Al()}eI(t){return!1}rW(){this.m7&&this.sa.wp(this.sI)}hW(){this.m7&&this.sa.bp(this.sI)}async bn(t){this.Bo(),t||await this.sa.bn(),this.hW()}constructor(t,e){super(),this.sI=t=>{this.eI(t)||this.wo(t)},this.sa=t,this.m7=!e,this.rW()}},qt=function(t){return t[t.p7=0]="p7",t[t.y7=1]="y7",t[t.vC=2]="vC",t[t.A7=3]="A7",t[t.b7=4]="b7",t[t.T7=5]="T7",t}({}),IB=[0,1,2,3,4,5],CB={};function RB(t,e){(CB[e]||(CB[e]=[])).push(t)}var xB={};function DB(t,e){(xB[e]||(xB[e]=[])).push(t)}var NB=[];function BB(t){for(const e of NB)e(t)}t();var MB=self.CustomEvent;var LB=function(){try{const t=new MB("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,e){return new CustomEvent(t,e)}:function(t,e){const i=h.createEvent("CustomEvent");return i.initCustomEvent(t,(null==e?void 0:e.bubbles)||!1,(null==e?void 0:e.cancelable)||!1,null==e?void 0:e.detail),i};t();var OB=new class{get U(){return this.NM.length}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=function(t){const e=[];for(let i=0;i<t.U;i++)e[i]=t.DI(i).ba;return e.getPlayerByUID=e=>{const i=t.S7(e);return i&&i.ba},e}(this)}DI(t){return this.NM[t]}qK(t){this.NM.push(t),this.ba.push(t.ba)}sc(t){const e=this.NM.indexOf(t);e<0||(Xt(this.NM,e),this.Zu&&Xt(this.Zu,e))}S7(t){for(const e of this.NM)if(e.KI===t)return e}constructor(){this.NM=[],this.Zu=void 0}};function FB(t){let e,i;const s=e=>{i=e;const s=Gc(e,t.aT);t._a(s)};let n={get abr(){return t.z9.ba},get ads(){var e;return null==(e=t.l7)?void 0:e.ba},get audioTracks(){return t.ht.ba},get autoplay(){return t.vl},set autoplay(e){t.vl=Boolean(e)},get buffered(){return t.nP()},get canvas(){return t.n7.ba},get cast(){var e;return null==(e=t.G9)?void 0:e.ba},get clip(){return t.J9.ba},get currentProgramDateTime(){var e;return null!=(e=t.Ku)?e:null},set currentProgramDateTime(e){t.Ku=null!=e?e:void 0},get currentTime(){return t.aP()},set currentTime(e){t.uP(Number(e))},get duration(){return t.cP()},get element(){return t.je},get ended(){return t.$c},get error(){return t.fP()},get errorObject(){return t._P()},get loop(){return t.jG.jG},set loop(e){t.jG.jG=Boolean(e)},get metrics(){return t.pP.ba},get muted(){return t.tc},set muted(e){t.bP(e)},get network(){return t.Y9.ba},get paused(){return t.Oc},get playbackRate(){return t.Hu},set playbackRate(e){const i=Number(e);if(i<0)throw new RangeError("playbackRate must be a positive number");t.Hu=i},get played(){return t.PP()},get poster(){return t.mi},set poster(e){t.mi=ci(e)},get preload(){return t.IP},set preload(e){t.IP=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(e)},get presentation(){return t.s7.ba},get readyState(){return t.Vc},get seekable(){return t.DP()},get seeking(){return t.Uc},get source(){return i},set source(t){s(t)},get src(){return bP(t.BP())},set src(t){s({sources:t})},get textTracks(){return t.nt.ba},get textTrackStyle(){return t.Du.ba},get theoLive(){return t._7},get uid(){return t.KI},get videoHeight(){return t.LP},get videoTracks(){return t.rt.ba},get videoWidth(){return t.UP},get visibility(){return t.Mo.ba},get volume(){return t.Pl},set volume(e){t.WP(Number(e))},get latency(){return t.qP.ba},get theoads(){return t.g7},destroy(){t.bn(),t=null,i=void 0},play(){t.k7()},pause(){t.Ml()},stop(){i=void 0,t.Al()},prepareWithUserAction(){t.KP()},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)},setSource(t){s(t)},addTextTrack:e=>t.iI(function(t){return{Lt:ci(t.kind),_h:ci(t.label),gs:ci(t.language),Vm:ci(t.type)}}(e)).ba};return e=new Jt(n,!0),e._X(t),e.wn("destroy",(()=>{e.bn()})),n}t(),t(),t(),t();var UB=class extends o{constructor(t){super(Uv.oo),this.source=t}};t();var VB=class extends S{get Ku(){}set Ku(t){}get Yu(){return this.aP()}set Yu(t){this.uP(t)}aP(){return this.fW}t7(){return this.aP()}uP(t,e){this.sf&&this.fW===t||(this.fW=t,this.sf=!0,this.wo(new lc(this.fW)))}get Oc(){return this.if}get Hu(){return this.vW}set Hu(t){this.vW!==t&&(this.vW=t,this.wo(new Sr(this.fW,this.Hu)))}get Vc(){return qb.Jl}get Uc(){return this.sf}bl(){this.if&&(this.if=!1,this.wo(new ah(this.fW)),this.wo(new zt(this.fW)))}Ml(){this.if||(this.if=!0,this.wo(new Ph(this.fW,this.Ku)),this.wo(new ac(this.fW)))}sr(){this.fW=0,this.sf=!1,this.vW=1,this.Ml()}bn(){this.Bo()}ke(){}be(){}constructor(){super(),this.fW=0,this.if=!0,this.sf=!1,this.vW=1}};t();var HB={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},WB={visibility:"hidden"},qB={visibility:"visible"},zB=class{get qS(){return void 0!==this.E7?this.E7:void 0!==this.P7?this.P7:void 0}set I7(t){this.P7=t,this.Zn()}Zn(){const t=this.sa.Oc,e=this.C7;this.qS?this.Hs.style.backgroundImage='url("'+lv(this.qS)+'")':this.Hs.style.backgroundImage="",t&&this.qS&&!e?this.be():this.ke()}be(){Xl(WB,this.sa.je),Xl(qB,this.Hs)}ke(){Xl(WB,this.Hs),Xl(qB,this.sa.je)}rW(){this.sa.wn(Uv.oo,this.R7),this.sa.wn(Uv.no,this.zF)}bn(){this.sa.pn(Uv.oo,this.R7),this.sa.pn(Uv.no,this.zF),Es(this.Hs)}constructor(t){this.C7=!1,this.R7=t=>{var e;this.C7=!this.sa.Oc,this.E7=null==(e=t.source)?void 0:e.poster,this.Zn()},this.zF=()=>{this.C7=!0,this.ke()},this.sa=t,this.rW(),this.Hs=function(){let t=a&&a.document&&a.document.createElement("div");return t.className="theoplayer-poster",Xl(HB,t),t}(),t.je.appendChild(this.Hs)}};t(),t(),t(),t();var _c=function(t){return t[t.x7=0]="x7",t[t.D7=1]="D7",t}({});function XB(t){let e;const i={get playing(){return t.N7},get currentAds(){return t.B7.map((t=>t.M7()))},get currentAdBreak(){var e,i;return null!=(i=null==(e=t.L7)?void 0:e.M7())?i:null},get scheduledAds(){return t.O7.map((t=>t.M7()))},get scheduledAdBreaks(){return t.F7.map((t=>t.M7()))},skip(){t.$R()},schedule(e){let i=RP(e,_o.Gg);i?t.W1(i,_c.x7,!1):console.error("Invalid ad description")},registerServerSideIntegration(e,i){t.U7(e,i)},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new jo(t,i),i}var GB=class extends S{get N7(){return!!this.V7&&this.V7.N7}get B7(){return this.V7?this.V7.B7:[]}get L7(){return this.V7?this.V7.L7:null}get O7(){return this.V7?this.V7.O7:[]}get F7(){return this.V7?this.V7.F7:[]}W1(t,e,i){var s;null==(s=this.V7)||s.W1(t,e,i)}H7(t){var e;null==(e=this.V7)||e.H7(t)}$R(){var t;null==(t=this.V7)||t.$R()}W7(t){var e;null==(e=this.V7)||e.W7(t)}U7(t,e){var i;null==(i=this.V7)||i.U7(t,e)}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=XB(this)}async bn(t){this.Bo(),void 0!==this.V7&&(this.V7.bp(this.Os),t||await this.V7.bn(),this.V7=void 0)}constructor(t){var e;super(),this.Zu=void 0,this.V7=t,null==(e=this.V7)||e.wp(this.Os)}};t(),t();var Iu=class extends Cs{constructor(t,e){super(t),this.q7=e}},yu=class extends o{get ad(){return this.adBreak}constructor(t,e){super(t),this.adBreak=e}},Do=class extends Iu{ya(){return new QB(this.q7.M7())}constructor(t){super("z7",t)}},QB=class extends yu{constructor(t){super("removeadbreak",t)}};t();var Bo=class extends Iu{ya(){return new KB(this.q7.M7())}constructor(t){super("X7",t)}},KB=class extends yu{constructor(t){super("addadbreak",t)}};t(),t();var Tu=class extends Cs{constructor(t,e){super(t),this.G7=e}},Ra=class extends o{constructor(t,e){super(t),this.ad=e}},Mo=class extends Tu{ya(){return new jB(this.G7.M7())}constructor(t){super("Q7",t)}},jB=class extends Ra{constructor(t){super("addad",t)}};t();var Li=class extends Iu{ya(){return new YB(this.q7.M7())}constructor(t){super("K7",t)}},YB=class extends yu{constructor(t){super("adbreakend",t)}};t();var ZB=class extends Iu{ya(){return new JB(this.q7.M7())}constructor(t){super("j7",t)}},JB=class extends yu{constructor(t){super("adbreakbegin",t)}};t();var Pe=class extends Tu{ya(){return new $B(this.G7.M7(),this.currentTime)}constructor(t,e){super("Y7",t),this.currentTime=e}},$B=class extends Ra{constructor(t,e){super("adbegin",t),this.currentTime=e}};t();var Ls=class extends Tu{ya(){return new tM(this.G7.M7(),this.currentTime)}constructor(t,e){super("Z7",t),this.currentTime=e}},tM=class extends Ra{constructor(t,e){super("adend",t),this.currentTime=e}};t();var eM=class extends Cs{ya(){return new iM}constructor(){super("J7")}},iM=class extends o{constructor(){super("adadded")}},Nu=class extends GB{get BI(){return this.V7}set BI(t){const e=this.V7;if(e===t)return;const i=this.B7,s=this.L7,n=this.O7,r=this.F7;null==e||e.bp(this.Os),this.V7=t,null==t||t.wp(this.Os);const h=this.B7,o=this.L7,a=this.O7,u=this.F7,c=[];let l=!1;for(const t of r)Qe(u,t)||c.push(new Do(t));for(const t of u)Qe(r,t)||c.push(new Bo(t));for(const t of a)Qe(n,t)||(c.push(new Mo(t)),l=!0);l&&c.push(new eM),s!==o&&(s&&c.push(new Li(s)),o&&c.push(new ZB(o)));for(const t of i)Qe(h,t)||c.push(new Ls(t,this.sa.aP()));for(const t of h)Qe(i,t)||c.push(new Pe(t,this.sa.aP()));for(const t of c)this.wo(t)}constructor(t){super(void 0),this.sa=t}};t(),t();var sM=class extends S{get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=XB(this)}W7(t){}U7(t,e){}W1(t,e,i){}$R(){}H7(t){}bn(){return this.Bo(),Promise.resolve()}constructor(...t){super(...t),this.N7=!1,this.L7=null,this.B7=[],this.F7=[],this.O7=[],this.Zu=void 0}},Eu=class extends sM{W1(t,e,i){this.ttt.push({ett:t,itt:e,stt:i})}$R(){}W7(t){}U7(t,e){this.ntt.push({TC:t,htt:e})}H7(t){const e=this.ntt.slice(),i=this.ttt.slice();this.sr();for(const i of e)t.U7(i.TC,i.htt);for(const e of i)t.W1(e.ett,e.itt,e.stt)}ott(){const t=this.ttt.map((t=>t.ett));return this.sr(),t}sr(){us(this.ntt),us(this.ttt)}async bn(){this.sr(),await super.bn()}constructor(...t){super(...t),this.ntt=[],this.ttt=[]}};t();var nM,rM=class extends o{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function hM(){if(!nM){let t=PB;t=function(t){return class extends Mi{constructor(e,i){let s=new t(e,i);for(const t of IB)if(xB[t])for(const e of xB[t])s=e(s);super(s)}}}(t);let e=function(t){return class extends S{get h7(){return this.att.h7}get l7(){return this.V7}get n7(){return this.att.n7}get aT(){return this.att.aT}get td(){return this.att.td}get ja(){return this.att.ja}get wH(){return this.att.wH}get s7(){return this.att.s7}get K9(){return this.att.K9}get Sa(){return this.att.Sa}get z9(){return this.att.z9}get vl(){return this.att.vl}set vl(t){this.att.vl=t,this.dl()}get X9(){return this.att.X9}get ht(){return this.att.ht}get G9(){return this.att.G9}get c3(){return this.att.K9}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}get vP(){return this.att.vP}get XP(){return this.att.XP}set XP(t){this.att.XP=t}get pP(){return this.att.pP}get Y9(){return this.att.Y9}get nt(){return this.att.nt}get Du(){return this.att.Du}get rt(){return this.att.rt}get J9(){return this.att.J9}get jG(){return this.att.jG}get Ku(){return this.sa.Ku}set Ku(t){this.sa.Ku=t}get bt(){return this.att.bt}get je(){return this.att.je}get $c(){return this.att.$c}get tc(){return this.att.tc}set tc(t){this.bP(t)}get Oc(){return this.sa.Oc}get mi(){return this.utt.qS||""}set mi(t){this.utt.I7=t}get Hu(){return this.EP()}set Hu(t){this.$u(t)}EP(){return this.att.Hu}$u(t){this.sa.Hu=t}get IP(){return this.att.IP}set IP(t){this.att.IP=t}get Vc(){return this.sa.Vc}get Ta(){return this.att.Ta}set Ta(t){this.att.Ta=t}get Uc(){return this.sa.Uc}get _7(){return this.att._7}get g7(){return this.att.g7}get KI(){return this.att.KI}get LP(){return this.att.LP}get UP(){return this.att.UP}get Pl(){return this.att.Pl}set Pl(t){this.WP(t)}get qP(){return this.att.qP}get e7(){return this.att.e7}get Mo(){return this.att.Mo}async Xo(t,e){return this.Jo.Xo(t,e).catch(wi)}async ctt(t,e){Bv(e),this.att.wp(this.ltt);try{await this.att._a(t,e)}finally{this.att.bp(this.ltt)}}async dl(){const t=await this.dtt();this.ftt(t)}async dtt(){const t=this.BP();return t&&!mP(t)&&this.vl&&this.Oc?this.X9.ml(this.tc):"none"}ftt(t){var e;const i=(null==(e=this.BP())?void 0:e.mutedAutoplay)||this.aT.mutedAutoplay;switch(t){case"all":this.k7();break;case"muted":(this.tc||i===Kb.ALL)&&(this.tc=!0,this.bl())}}_a(t){mP(this.oW)||this.wo(new zb(0,qb.Jl)),this.sr(),this.oW=t,Ov(this.Xo((async e=>{Bv(e);try{await this.ctt(t,e)}catch(t){return ta(t),this.oW=void 0,void this.UH(lp(t,X.SOURCE_NOT_SUPPORTED))}finally{this._tt(this.att)}const i=await this.dtt();this.wo(new UB(this.BP())),this.ftt(i)})))}uP(t,e){this.sa.uP(t,e)}fP(){var t;return null!=(t=this.EW)?t:this.att.fP()}_P(){var t;return null!=(t=this.$V)?t:this.att._P()}UH(t){void 0===this._P()&&(this.$V=t,this.EW=Bc(t),this.wo(new _n(t)))}bl(){this.sa.bl()}k7(){this.tc||this.KP(),this.bl()}KP(){this.att.KP()}Ml(){this.sa.Ml()}Al(){this._a(void 0)}be(){this.lW=!0,this.sa.be()}ke(){this.lW=!1,this.sa.ke()}Ca(){this.att.Ca()}WP(t){this.att.WP(t)}bP(t){this.att.bP(t)}Pa(t){this.gtt=t,t.qK(this)}cs(){return this.att.cs()}BP(){return this.oW}QP(){return this.att.QP()}aP(){return this.sa.aP()}t7(){return this.sa.t7()}cP(){return this.att.cP()}nP(){return this.att.nP()}PP(){return this.att.PP()}DP(){return this.att.DP()}JP(){this.att.JP()}$P(){this.att.$P()}iI(t){return this.att.iI(t)}sr(){this.oW=void 0,this.$V=void 0,this.EW=void 0,this.wtt=!0,us(this.mtt),this.ptt.sr(),this._tt(this.ptt),this.Jo.tf(),Ov(this.Jo.Xo((async t=>{Bv(t),await this.att.Al()})))}bn(){this.wo(new EB),this.utt.bn(),this.hW(),this.sr(),Ov(this.Xo((async()=>{await this.att.bn(),this.gtt&&(this.gtt.sc(this),this.gtt=void 0),this.Jo.bn()}))),this.Bo()}_tt(t){if(this.sa===t)return;const e=this.sa.Oc,i=this.sa.aP(),s=this.sa.Hu,n=this.sa.Vc,r=this.sa.Uc;this.ytt=e,this.r6=n,this.hW(),t.wp(this.Att),t===this.att?(void 0!==this.V7&&(this.V7.BI=t.l7,this.btt.H7(this.V7)),(r||t.aP()!==i)&&t.uP(i),t.Hu!==s&&(t.Hu=s),e?t.Ml():t.bl()):(void 0!==this.V7&&(this.V7.BI=this.btt,this.btt.sr()),this.aT.retainPlaybackRateOnSourceChange?t.Hu=s:1!==s&&this.wo(new Sr(this.aP(),1))),t.bp(this.Att),this.sa=t,this.rW();for(const t of this.mtt)this.wo(t);us(this.mtt),this.lW?t.be():t.ke()}rW(){this.sa.wp(this.tI)}hW(){this.sa.bp(this.tI)}ya(){return FB(this)}constructor(e,i){super(),this.ytt=!0,this.r6=qb.Jl,this.wtt=!1,this.oW=void 0,this.$V=void 0,this.EW=void 0,this.ltt=t=>{t.type!==Uv.qu&&this.mtt.push(t)},this.Att=t=>{(t.type!==Uv.no||this.sa.Oc)&&(t.type===Uv.Ff&&this.sa.Oc||t.type===Uv.$f&&this.sa.Uc&&this.sa.aP()===t.currentTime||t.type===Uv.qu&&this.sa.Hu===t.playbackRate||this.wo(t))},this.tI=t=>{if(this.wtt){if(t.type===cb.rd)return;t.type!==cb.kl&&t.type!==cb.nd||(this.wtt=!1)}if(t.type===Uv.no){if(!this.ytt)return;this.ytt=!1}else if(t.type===Uv.Ff){if(this.ytt)return;this.ytt=!0}else if(t.type===cb.Lf){if(this.r6===t.readyState)return;this.r6=t.readyState}else if(t.type===Uv.xp)return;this.wo(t)},this.att=new t(e,i),this.ptt=new VB,this.sa=this.att,this.utt=new zB(this),this.att.l7&&(this.V7=new Nu(this),this.V7.BI=this.att.l7,this.btt=new Eu),this.Jo=new jn,this.mtt=[],this.lW=!0,this.rW()}}}(t);ds.Lv&&ds.Fv<3&&(e=function(t){return class extends t{_a(t){this.Ttt=0,super._a(t)}wo(t){if(t.type===Yo.la&&this.Ttt<3)return this.Ttt++,super.wo(new rM(t)),void super._a(this.BP());super.wo(t)}constructor(...t){super(...t),this.Ttt=0}}}(e)),e=function(t){let e=t;for(const t of IB)if(CB[t])for(const i of CB[t])e=i(e);return e}(e),nM=e}return nM}function oM(t,e){const i=Yb(e),s=new(hM())(t,i);s.Ta=s;let n=s.ba;return s.Ca(),s.Pa(OB),g.defineProperty(n,"constructor",{value:oM}),n=Jy(n),BB(s),n}Zn((()=>{self.dispatchEvent&&self.dispatchEvent(LB("theoplayerready"))})),t();var aM={base64:new class{encode(t){return Ps(t)}decode(t){return yi(t)}}};t();var uM=JSON.parse('["hbbtv","dash","hls","chromecast","ads","airplay","cache","webaudio","mediatailor","ui","texttrackstyle-ui","multiview"]');t(),t(),t();var cM=class{get Yu(){const t=this.sa.currentTime;return isFinite(t)?t:"now"}get Stt(){return this.sa.src||""}sr(){}constructor(t,e){this.ktt=!1,this.Ett=t=>{this.Ptt.Qq(t.error,this.Yu)},this.Itt=()=>{this.Ptt.Wq(this.Stt),this.sa.removeEventListener("playing",this.Itt),this.ktt=!1},this.Ms=()=>{var t,e,i,s;this.ktt||(this.sa.addEventListener("playing",this.Itt),this.ktt=!0),null==(t=this.sa.ads)||t.removeEventListener("adbegin",this.Ctt),null==(e=this.sa.theoads)||e.removeEventListener("interstitialbegin",this.Rtt);var n,r;(null==(s=this.sa.source)||null==(i=s.ads)?void 0:i.some((t=>"theoads"===t.integration)))&&(null==(n=this.sa.ads)||n.addEventListener("adbegin",this.Ctt),null==(r=this.sa.theoads)||r.addEventListener("interstitialbegin",this.Rtt))},this.Ctt=t=>{"theoads"!==t.ad.integration||t.ad.isSlate||this.Ptt.Gq("ad")},this.Rtt=t=>{const e=t.interstitial;(function(t){return"adbreak"===t.type})(e)||this.Ptt.Gq(function(t){switch(t){case"adbreak":default:return"ad";case"overlay":return"overlay"}}(e.type))},this.Ptt=e,this.sa=t,this.sa.addEventListener("error",this.Ett),this.sa.addEventListener("sourcechange",this.Ms),this.Ms()}};!function(t){NB.push(t)}((function(t){new cM(t.ba,t.h7)})),t();var lM="theoplayer-stored-volume",dM="theoplayer-stored-mutedstate";RB((function(t){return class extends t{bP(t){this.aT.persistVolume&&R.Dy(dM,""+Boolean(t)),super.bP(t)}WP(t){this.aT.persistVolume&&R.Dy(lM,""+Number(t)),super.WP(t)}constructor(t,e){if(super(t,e),e.persistVolume){let t=R.gQ(lM);(void 0===t||j(t))&&(t=1);const e=R.wQ(dM)||!1;this.Pl=t,this.tc=e}}}}),qt.p7);var fM="9.0.0",_M=OB.ba,vM=Hc.BC.registerContentProtectionIntegration.bind(Hc.BC);t(),t(),t(),t();var gM={fz(t){a.addEventListener("beforeunload",t)},rz(t){a.removeEventListener("beforeunload",t)}},wM={xtt:class{get bW(){const t=[];for(const e of this.Dtt){const i=this.Ntt.get(e);if(i){const e=i.map((t=>t.Btt));t.push(...e)}}return this.Mtt&&t.push(this.Mtt),t}SW(t){for(const e of this.bW)e.s6(t)}VH(t){const e=bv(this.Ntt.get(t),(t=>t.Ltt));if(e)return e.Ltt=!1,e.Btt}Ott(t){if(!this.Mtt){var e;const t=null==(e=this.Ntt.get(Be.wl))?void 0:e[0].Btt.tH;if(!t)throw new v("Error creating iOS Safari MediaController");this.Mtt=new uB(t,this.Km,this.l3,this.Ic),t.parentElement&&this.Mtt.s6(t.parentElement)}return this.Mtt}async SH(t){const e=t.tH,i=e.tagName.toLowerCase();await t.sr(),fB(e);const s=bv(this.Ntt.get(i)||[],(e=>t===e.Btt));s&&(s.Ltt=!0)}mW(){for(const t of this.bW)t.yl()}bn(){for(const t of this.bW){const e=t.tH;t.Wu(),dB(e),Es(e)}this.Ntt.clear(),this.Mtt=void 0}Ftt(){for(const t of this.Dtt){const e=[];this.Ntt.set(t,e);for(let i=0;i<this.Utt;i++){const i=lB(t),s=t===Be.hk?new BD(i,this.Km,this.l3):new eB(i,this.Km,this.l3,this.Ic);e.push({Btt:s,Ltt:!0})}}}constructor(t,e,i=2,s=cB,n=Ep()){this.Utt=i,this.Dtt=[...s],this.Km=n,this.l3=t,this.Ic=e,this.Ntt=sa(),this.Ftt()}},Vtt:class t{ml(t){return this.Htt.Xo((()=>this.Wtt(t)))}KP(){this.pW.mW()}async Wtt(e){const i=this.pW.VH(Be.wl),s=i.tH,n=await t.qtt(s,e);return await this.pW.SH(i),n}static async qtt(e,i){return ds.Vv||ds.Lv?"all":(e.src||(e.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.ztt(),!i&&await t.Xtt(e,!1)?"all":await t.Xtt(e,!0)?"muted":"none")}static async Xtt(t,e){t.muted=e;const i=t.play();try{if(!Xr(i))return!ds.Ks;const t=Rt(250);return await Promise.race([i,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static ztt(){return new Promise((t=>{if("function"==typeof MessageChannel){const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage("")}else u(t,0)}))}bn(){this.Htt.bn()}constructor(t){this.pW=t,this.Htt=new jn}},Gtt:gM};t();(function(t){Un=t.xtt,qE=t.Vtt,zE=t.Gtt})(ds.Wv&&ds.zv?yh({},wM,{Vtt:class{ml(t){return Promise.resolve("all")}KP(){}bn(){}}}):wM),t(),t(),t(),t();var mM=class{async HH(t){return wc(t.type)}async WH(t){return!!await $A(t,!0)}},pM=class extends mM{async HH(t){return!!pn(t.useManagedMediaSource)&&super.HH(t)}};function Ui(t){return Hn(t)}function yM(t,e){const i=Hn(t);return e?""+i+e:""+i}t(),t();var AM=class{async Qtt(t){return(await this.jtt.Ktt(t.map(Ui))).shift()}Ytt(t,e){const i=yM(t,e);return this.Ztt.Ry(i)}async Jtt(t,e){var i;const s=yM(t,e);return null==(i=await this.$tt.xy(s))?void 0:i.data}AQ(t){return this.tet.xy(t)}constructor(t,e,i,s){this.jtt=t,this.Ztt=e,this.$tt=i,this.tet=s}};t(),t(),t();var Ou=class{eet(t){return Promise.resolve(!1)}iet(t){return Promise.reject(bM)}net(t){return Promise.reject(bM)}Ry(t){return Promise.resolve(!1)}xy(t){return Promise.resolve(void 0)}ret(t,e){return Promise.resolve(void 0)}Ktt(t){return Promise.resolve([])}het(){return Promise.resolve([])}oet(t){return Promise.resolve([])}aet(t,e){return Promise.resolve([])}sc(t){return Promise.reject(bM)}uet(t){return Promise.reject(bM)}cet(){return Promise.reject(bM)}},bM="Storage disabled",TM="Storage disabled";t(),t(),t();var Bu=class{get let(){return this.cp.Pf}async eet(t){return(this.det||await this.let).eet(t)}async iet(t,e){return(this.det||await this.let).iet(t,e)}async net(t,e){return(this.det||await this.let).net(t,e)}async Ry(t){return(this.det||await this.let).Ry(t)}async xy(t){return(this.det||await this.let).xy(t)}async ret(t,e){return(this.det||await this.let).ret(t,e)}async Ktt(t){return(this.det||await this.let).Ktt(t)}async het(){return(this.det||await this.let).het()}async oet(t){return(this.det||await this.let).oet(t)}async aet(t,e){return(this.det||await this.let).aet(t,e)}async sc(t){return(this.det||await this.let).sc(t)}async uet(t){return(this.det||await this.let).uet(t)}async cet(){return(this.det||await this.let).cet()}constructor(t){this.cp=new ue,this.det=void 0,this.cp.lp(t),this.cp.Pf.then((t=>{this.det=t}))}},SM=class{get fet(){return this.cp.Pf}async _et(t){const e=this.vet||await this.fet;return await e._et(t)}constructor(t){this.cp=new ue,this.vet=void 0,this.cp.lp(t);const e=this.cp.Pf;e.then((t=>{this.vet=t})),this.wet=new Bu(e.then((t=>t.wet))),this.met=new Bu(e.then((t=>t.met))),this.pet=new Bu(e.then((t=>t.pet))),this.yet=new Bu(e.then((t=>t.yet))),this.Aet=new Bu(e.then((t=>t.Aet)))}};function Ti(t){return new v("This storage cannot handle persistency type "+t)}t(),t(),t();var B=function(t){return t.bet="readonly",t.Tet="readwrite",t}({}),gs=class{eet(t){return Promise.resolve("temporary"===t)}iet(t,e){return void 0===e&&(e="temporary"),"temporary"!==e?Promise.reject(Ti(e)):(this.ket(t.key),this.fA.push(t),Promise.resolve())}net(t,e){if(void 0===e&&(e="temporary"),"temporary"!==e)return Promise.reject(Ti(e));for(const e of t)this.ket(e.key);for(const e of t)this.fA.push(e);return Promise.resolve()}Ry(t){return Promise.resolve(Boolean(this.Eet(t)))}xy(t){return Promise.resolve(this.Eet(t))}ret(t,e){return Promise.resolve(this.Pet(t,e))}Ktt(t){const e=t?t.map((t=>this.Eet(t))):this.fA;return Promise.resolve(e.filter(Ee))}het(){return Promise.resolve([...this.fA])}oet(t){return this.aet(t,"key")}aet(t,e){const i=this.fA.filter((i=>i[e]===t));return Promise.resolve(i)}sc(t){return this.ket(t),Promise.resolve()}uet(t){for(const e of t)this.ket(e);return Promise.resolve()}cet(){return us(this.fA),Promise.resolve()}Eet(t){return this.Pet(t,"key")}Pet(t,e){for(const i of this.fA)if(i[e]===t)return i}ket(t){const e=this.Eet(t);e&&Ko(this.fA,e)}constructor(){this.fA=[]}},kM=class t{static Z8(){return Promise.resolve(new t)}_et(t){return t(this)}constructor(){this.met=new gs,this.wet=new gs,this.pet=new gs,this.yet=new gs,this.Aet=new gs}};t(),t();var Ru=class{async eet(t){for(let e of this.Iet)if(await e.eet(t))return!0;return!1}async iet(t,e){void 0===e&&(e="persistent");for(let i of this.Iet)if(await i.eet(e))return i.iet(t);throw Ti(e)}async net(t,e){void 0===e&&(e="persistent");for(let i of this.Iet)if(await i.eet(e))return i.net(t);throw Ti(e)}async Ry(t){for(let e of this.Iet)if(await e.Ry(t))return!0;return!1}async xy(t){for(let e of this.Iet){const i=await e.xy(t);if(i)return i}}async ret(t,e){for(let i of this.Iet){const s=await i.ret(t,e);if(s)return s}}async Ktt(t){const e=[];for(let i of this.Iet)e.push(...await i.Ktt(t));return e}async het(){const t=[];for(let e of this.Iet)t.push(...await e.het());return t}async oet(t){const e=[];for(let i of this.Iet)e.push(...await i.oet(t));return e}async aet(t,e){const i=[];for(let s of this.Iet)i.push(...await s.aet(t,e));return i}async sc(t){for(let e of this.Iet)await e.sc(t)}async uet(t){for(let e of this.Iet)await e.uet(t)}async cet(){for(let t of this.Iet)await t.cet()}constructor(t){this.Iet=t}};function EM(t){return async()=>{const e=await Promise.all(t.map((t=>t())));return PM.Z8(e)}}var PM=class t{static Z8(e){return Promise.resolve(new t(e))}get yet(){return this.Cet}get Aet(){return this.Ret}get pet(){return this.xet}get met(){return this.Det}get wet(){return this.Net}_et(e){if(0===this.Bet.length)return e(this);const i=[];let s=0;const n=r=>(i.push(r),s++,s<this.Bet.length?this.Bet[s]._et(n):e(new t(i)));return this.Bet[s]._et(n)}constructor(t){this.Bet=t,this.Cet=new Ru(t.map((t=>t.yet))),this.Ret=new Ru(t.map((t=>t.Aet))),this.xet=new Ru(t.map((t=>t.pet))),this.Det=new Ru(t.map((t=>t.met))),this.Net=new Ru(t.map((t=>t.wet)))}},gi=class t{static Pa(e){t.NV.Pa(e)}static get Gg(){return t.Met||(t.Met=t.NV.Z8()),t.Met}};function IM(t){return void 0!==t.LP}function CM(t){const e=ds.Vv||ds.Lv,i=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=e&&!i,n=new Qh(!0);return async t=>{const e=t.yS;if(!n.Rw(e)&&!function(t,e){return!!t&&(Oe(t)?JS(e)||tk(e):H(t,Pt.APPLICATION_TTML_XML)||H(t,Pt.TEXT_VTT)||H(t,Pt.IMAGE_JPEG))}(t.Oq,t.Let))return!1;const i=t.Let.some((t=>"ac-3"===t||"ec-3"===t));if(s&&i)return!1;if(t.xV){const i=t.xV,s=fn(i,(t=>nv(t.H2))).filter(Ee),n=await async function(t,e){for(const i of t)if(await e(i))return!0;return!1}(s,(t=>Gn.fm(t,e)));if(!n)return!1}return!0}}gi.NV=new class{Z8(){return new SM(this.Oet())}async Oet(){this.Fet&&(await Promise.resolve(),this.Fet=!1);for(const t of this.Uet)try{return await EM([kM.Z8,t])()}catch(t){}return await EM([kM.Z8,this.Vet])()}Pa(t){if(!this.Fet)throw new v("Registration overdue");this.Uet.push(t)}constructor(t){this.Uet=[],this.Fet=!0,this.Vet=t}}(class t{static Z8(){return Promise.resolve(new t)}_et(t){return Promise.reject(TM)}constructor(){this.met=new Ou,this.wet=new Ou,this.pet=new Ou,this.yet=new Ou,this.Aet=new Ou}}.Z8),gi.Met=void 0,t(),t(),t(),t();var RM=class{get Ci(){return this.Het.offsetHeight*Gn.Zs.nw}get Ti(){return this.Het.offsetWidth*Gn.Zs.nw}constructor(t){this.Het=t}};t();var Ju=class{get nt(){return this.Au}iI(t,e,i,s,n,r,h,o){const a=new ru(t,e,i,s,n,r,h,void 0,o);return this.Au.tt(a),this.i4.tt(a),a}EF(t){this.Au.it(t),this.i4.it(t),t.bn()}mH(t){const e=new yD(t.Lt,t._h,t.gs);return this.Au.tt(e),this.i4.tt(e),e}sr(){for(const t of this.Au.RI.slice())t.bn();this.Au.sr(),this.i4.sr()}bn(){this.sr(),this.Au.bn(),this.i4.bn()}constructor(t,e){this.Au=new du,this.i4=new eD(t,e)}};t(),t();var _s=class{VH(t){return this.NV.VH(t)}Ott(t){return this.NV.Ott(t)}SH(t){return this.NV.SH(t)}constructor(t){this.NV=t}};t(),t(),t();var xM=class extends Re{get Wet(){return this.rM}get Sl(){return this.nP()}nP(){return this.rM.Sl}get Ku(){return this.rP()}rP(){return this.rM.Ku}get Yu(){return this.aP()}aP(){return this.rM.Yu}get c3(){return this.rM.c3}get ct(){return this.cP()}cP(){return this.rM.ct}get sH(){return this.qet()}qet(){return this.rM.sH}get $c(){return this.zet()}zet(){return this.rM.$c}get lt(){return this.rM.lt}get Ci(){return this.rM.Ci}get Ti(){return this.rM.Ti}get ja(){return this.GP()}GP(){return this.rM.ja}get wH(){return this.xa()}xa(){return this.rM.wH}get tc(){return this.rM.tc}set tc(t){this.rM.tc=t}get Oc(){return this.Xet()}Xet(){return this.rM.Oc}get Hu(){return this.rM.Hu}set Hu(t){this.rM.Hu=t}get Tl(){return this.PP()}PP(){return this.rM.Tl}get Vc(){return this.xP()}xP(){return this.rM.Vc}get Cl(){return this.DP()}DP(){return this.rM.Cl}get Uc(){return this.NP()}NP(){return this.rM.Uc}get Lc(){return this.Get()}Get(){return this.rM.Lc}get Hc(){return this.Qet()}Qet(){return this.rM.Hc}get nt(){return this.MP()}MP(){return this.Ket}get Du(){return this.R6()}R6(){return this.rM.Du}get T3(){return this.rM.T3}get Pl(){return this.rM.Pl}set Pl(t){this.rM.Pl=t}get e6(){return this.rM.e6}get wP(){return this.rM.wP}get cM(){return this.rM.cM}get TH(){return this.jet()}set TH(t){this.Yet(t)}jet(){return this.rM.TH}Yet(t){this.rM.TH=t}get n6(){return this.rM.n6}set n6(t){this.Zet(t)}Zet(t){this.rM.n6=t}get F2(){return this.Jet()}Jet(){return this.rM.F2}yP(){return this.rM.yP()}bl(){return this.rM.bl()}Ml(){this.rM.Ml()}jc(t,e,i){this.rM.jc(t,e,i)}YV(t){this.rM.YV(t)}be(){this.rM.be()}ke(){this.rM.ke()}iI(t,e,i,s,n,r,h,o){return this.rM.iI(t,e,i,s,n,r,h,o)}mH(t){return this.rM.mH(t)}fH(){return this.rM.fH()}vH(t,e,i,s,n){return this.rM.vH(t,e,i,s,n)}EF(t){this.rM.EF(t)}pH(){this.rM.pH()}EK(t){return this.rM.EK(t)}async On(t){const e=await this.rM.On(t);let i;return i=t.Vm===A.IF?this.$et(e):this.tit(e),this.iH=i,i}async sr(){this.iH&&(await this.iH.Wu(),this.iH=void 0),await this.rM.sr()}J4(){this.rM.J4()}t6(){this.rM.t6()}async Wu(){this.Bo(),this.rM.pn(RC,this.eit),this.Ket.BI=void 0,this.Ket.bn(),this.iH&&(await this.iH.Wu(),this.iH=void 0)}yl(){this.rM.yl()}iit(t){this.rM.pn(RC,this.eit),this.rM=t,this.Ket.BI=t.nt,this.rM.wn(RC,this.eit)}tI(t){this.wo(t)}constructor(t){super(),this.iH=void 0,this.Ket=new Qt,this.eit=t=>this.tI(t),this.rM=t,this.Ket.BI=t.nt,this.rM.wn(RC,this.eit)}},DM=class extends xM{get tH(){return this.rM.tH}get u0(){return this.rM.u0}get XP(){return this.rM.XP}set XP(t){this.rM.XP=t}s6(t){this.rM.s6(t)}JP(){this.rM.JP()}constructor(t){super(t)}};t(),t(),t();var NM=class{get aT(){return this.dT()}dT(){return this.iH.aT}get Cl(){return this.DP()}DP(){return this.iH.Cl}nK(t){return this.iH.nK(t)}hK(t){return this.iH.hK(t)}Wu(){return Promise.resolve()}constructor(t){this.iH=t}},bs=class extends NM{get N$(){return this.M$}get B$(){return this.L$}get Sl(){return this.nP()}nP(){return this.iH.Sl}get ct(){return this.cP()}cP(){return this.iH.ct}get yK(){return this.sit()}sit(){return this.iH.yK}F$(t){this.iH.F$(t)}W$(t,e,i,s){this.iH.W$(t,e,i,s)}WJ(){this.iH.WJ()}NJ(){this.iH.NJ()}Wu(){return this.M$&&(this.M$.Wu(),this.M$=void 0),this.L$&&(this.L$.Wu(),this.L$=void 0),super.Wu()}nit(t){this.iH=t,this.M$?t.N$?this.M$.rit(t.N$):(this.M$.Wu(),this.M$=void 0):t.N$&&(this.M$=this.hit(t.N$),this.M$.wn(xo,this.oit)),this.L$?t.B$?this.L$.rit(t.B$):(this.L$.Wu(),this.L$=void 0):t.B$&&(this.L$=this.hit(t.B$),this.L$.wn(xo,this.oit))}aK(t){this.iH.aK(t)}ait(t){}constructor(t){super(t),this.M$=void 0,this.L$=void 0,this.oit=t=>this.ait(t)}};t(),t(),t();var BM=class extends Re{get pG(){return this.PG}set pG(t){this.PG=t}get Sl(){return r.Ol()}get aT(){return this.pl}get zJ(){return Be.zS}get GJ(){return r.Ol()}get uit(){return!1}get vG(){return this.SG}set vG(t){this.SG=t}sJ(t,e,i){return Promise.reject(new v("Invalid media buffer"))}ZJ(){return Promise.reject(new v("Invalid media buffer"))}hJ(t,e,i){return Promise.reject(new v("Invalid media buffer"))}yK(){return!1}WJ(){}jJ(t,e){}YJ(t,e){}sc(t,e,i){return Promise.resolve()}yJ(t,e){return Promise.reject(new v("Invalid media buffer"))}qM(t,e){return Promise.reject(new v("Invalid media buffer"))}nK(t){return!1}hK(t){return Promise.reject(new v("Invalid media buffer"))}Wu(){this.Bo()}constructor(t){super(),this.SG=0,this.PG=0,this.pl=t}},Wu=class extends Re{get pG(){return this.cit()}set pG(t){this.dit(t)}cit(){return this.fit.pG}dit(t){this.fit.pG=t}get Sl(){return this.nP()}nP(){return this.fit.Sl}get aT(){return this.dT()}dT(){return this.fit.aT}get zJ(){return this.fit.zJ}get GJ(){return this._it()}_it(){return this.fit.GJ}get vG(){return this.vit()}set vG(t){this.git(t)}vit(){return this.fit.vG}git(t){this.fit.vG=t}sJ(t,e,i){return this.fit.sJ(t,e,i)}ZJ(){return this.fit.ZJ()}hJ(t,e,i){return this.fit.hJ(t,e,i)}yK(){return this.fit.yK()}WJ(){this.fit.WJ()}jJ(t,e){this.fit.jJ(t,e)}YJ(t,e){this.fit.YJ(t,e)}sc(t,e,i){return this.fit.sc(t,e,i)}yJ(t,e){return this.fit.yJ(t,e)}nK(t){return this.fit.nK(t)}hK(t){return this.fit.hK(t)}tI(t){this.wo(t)}Wu(){this.Bo(),this.rit(new BM(this.aT))}rit(t){this.fit.pn(xo,this.wit),this.fit=t,this.fit.wn(xo,this.wit)}constructor(t){super(),this.wit=t=>this.tI(t),this.fit=t,this.fit.wn(xo,this.wit)}},MM=class extends Wu{get Btt(){return this.rM}set Btt(t){this.rM=t}async sJ(t,e,i){return Bv(i),await this.mit(this.rM.Yu,null==e?void 0:e.j8,null==e?void 0:e.ct),Bv(i),t.Vm===lt.cS?await this.pit(t,e,i):await this.yit(t,e,i)}async pit(t,e,i){let s=t;for(;;){const[t,n]=Op(s.LS);s={Vm:lt.cS,LS:t};try{return await this.Ait(s,e,i),void n.cancel(new ti).catch(De)}catch(t){if(ZI(t)){if(await this.mit(this.rM.Yu,e.j8,e.ct,i)){s={Vm:lt.cS,LS:n};continue}}throw n.cancel(t).catch(De),t}}}async yit(t,e,i){for(;;)try{return Bv(i),await this.Ait(t,e,i)}catch(t){if(ZI(t)){if(await this.mit(this.rM.Yu,e.j8,e.ct,i))continue}throw t}}async mit(t,e,i,s){const n=YI(t,e,i,this.Sl,this.vG,this.pG);for(const[t,e]of n)await this.Tit(t,e,s);return n.length>0}Ait(t,e,i){return super.sJ(t,e,i)}Tit(t,e,i){return super.sc(t,e,i)}constructor(t){super(t),this.rM=void 0}},LM=class extends bs{get Btt(){return this.rM}set Btt(t){this.rM=t,this.M$&&(this.M$.Btt=t),this.L$&&(this.L$.Btt=t)}hit(t){const e=new MM(t);return e.Btt=this.rM,e}constructor(t){super(t),this.rM=void 0,this.nit(t)}};t();var pi=class extends NM{get IP(){return this.iH.IP}set IP(t){this.iH.IP=t}};t();var qu=class extends xM{get tH(){return this.rM.tH}get u0(){return this.rM.u0}get UP(){return this.rM.UP}get LP(){return this.rM.LP}get XP(){return this.rM.XP}set XP(t){this.rM.XP=t}s6(t){this.rM.s6(t)}JP(){this.rM.JP()}QP(){return this.rM.QP()}constructor(t){super(t)}},OM=class extends DM{get Wet(){return this.rM}tit(t){const e=new LM(t);return e.Btt=this,e}$et(t){return new pi(t)}},FM=class extends qu{get Wet(){return this.rM}tit(t){const e=new LM(t);return e.Btt=this,e}$et(t){return new pi(t)}},os=class extends _s{VH(t){return t===Be.wl?new FM(super.VH(t)):t===Be.hk?new OM(super.VH(t)):void 0}async SH(t){const e=t;await e.Wu(),await super.SH(e.Wet)}};t();var UM=class{Sit(){this.sa.$P()}bn(){a.removeEventListener("pageshow",this.kit)}constructor(t){this.kit=t=>{t.persisted&&this.Sit()},this.sa=t,a.addEventListener("pageshow",this.kit)}};t(),t(),t(),t(),t();var VM=class{Eit(t,e,i){return Promise.resolve()}Pit(t,e,i,s){let n=[];if(s){const r={XO:e.YM,GO:e.ZM,QO:i.Iit.QO};s.Vm===Zo.TTML?n=BS(t,s,r,i.Oq):s.Vm===Zo.WEBVTT&&(n=$T(t,r,this.Cit).L)}return n}sr(){}constructor(t){this.Cit=t}};t(),t(),t();var Xc=function(t){return t.pR="vttc",t.Rit="vsid",t.xit="iden",t.Dit="ctim",t.Nit="sttg",t.Bit="payl",t.Mit="vtte",t.Lit="vtta",t}({}),Vu=class t{static Oit(e){return Boolean(t.Fit[e])}static Sx(e){const i=[],s=z.sx(new xh(e,new lh));for(const e of s)t.Oit(e.Vm)&&i.push(t.Fit[e.Vm](e.LS));return i}static Uit(e){const i=z.sx(e),s=Te(i,Xc.Rit),n=Te(i,Xc.xit),r=Te(i,Xc.Dit),h=Te(i,Xc.Nit),o=Te(i,Xc.Bit);return{Vm:Xc.pR,Vit:s?t.Hit(s):void 0,Wit:n?t.qit(n):void 0,zit:r?t.Xit(r):void 0,Git:h?t.Qit(h):void 0,Kit:o?t.jit(o):void 0}}static Hit(t){return{Vm:Xc.Rit,Yit:t.QR()}}static qit(t){return{Vm:Xc.xit,Wit:t.JR()}}static Xit(t){return{Vm:Xc.Dit,Zit:t.JR()}}static Qit(t){return{Vm:Xc.Nit,Jit:t.JR()}}static jit(t){return{Vm:Xc.Bit,$it:t.JR()}}static tst(t){return{Vm:Xc.Mit}}static ist(t){return{Vm:Xc.Lit,sst:t.JR()}}};Vu.Fit={[Xc.pR]:Vu.Uit,[Xc.Mit]:Vu.tst,[Xc.Lit]:Vu.ist};var HM=class{Eit(t,e,i){const s=new DataView(t.nst),n=Kh.Sx(s),r=bv(n,(t=>t.Vm===BA.MC));return r&&(this.rst=r.Z[0].Kx.gx.Wx),Promise.resolve()}Pit(t,e,i){if(j(this.rst))return[];const s=Nt(t),n=Kh.Sx(s),r=yc(n,BA.SR),h=yc(n,BA.DR);if(!r||0===r.Z.length||!h)return[];const o=function(t,e,i){const s=t.Z[0],n=s.MN?s.MN.MN.toNumber()/i:e.YM,r=[];for(const t of s.BN)r.push(...t.HN);return{hst:n,HN:r}}(r,e,this.rst),a=i.Iit.QO;return function(t,e,i,s){const n=Vu.Sx(Nt(e.LS)),r=t.HN,h=t.hst+s,o=[];let a=0;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];var u;const c=(null!=(u=e.ct)?u:0)/i;let l;s.Vm===Xc.pR&&(l=WM(s,a,c,h)),l&&o.push(l),a+=c}return o}(o,h,this.rst,a)}sr(){this.rst=NaN}constructor(){this.rst=NaN}};function WM(t,e,i,s){if(!t.Kit)return void 0;const n=t.zit?function(t){return _u(t.Zit,new lh(0))}(t.zit):e,r=s+n,h=r+i,o=t.Kit.$it;return new Wa(r,h,o,!1)}t(),t();var Ri=function(t){return t[t.ost=0]="ost",t[t.ast=1]="ast",t[t.ust=10]="ust",t[t.cst=11]="cst",t[t.lst=12]="lst",t[t.dst=13]="dst",t[t.fst=14]="fst",t[t._st=15]="_st",t[t.vst=20]="vst",t[t.gst=21]="gst",t[t.wst=22]="wst",t[t.mst=23]="mst",t[t.pst=24]="pst",t[t.yst=30]="yst",t[t.Ast=31]="Ast",t[t.bst=32]="bst",t[t.Tst=33]="Tst",t[t.Sst=34]="Sst",t[t.kst=35]="kst",t[t.Est=40]="Est",t[t.Pst=41]="Pst",t[t.Ist=42]="Ist",t[t.Cst=43]="Cst",t[t.Rst=44]="Rst",t[t.xst=50]="xst",t[t.Dst=51]="Dst",t[t.Nst=52]="Nst",t[t.Bst=60]="Bst",t[t.Mst=61]="Mst",t[t.Lst=62]="Lst",t[t.Ost=63]="Ost",t[t.Fst=70]="Fst",t[t.Ust=71]="Ust",t[t.Vst=72]="Vst",t[t.Hst=73]="Hst",t[t.Wst=74]="Wst",t[t.qst=75]="qst",t[t.zst=76]="zst",t[t.Xst=77]="Xst",t[t.Gst=90]="Gst",t[t.Qst=91]="Qst",t}({});function qM(t,e){const i=e.CB(((e,i)=>t.EB(e,i,!1,!1)));return t.Xl(i)}function zM(t,e){const i=e.Cn(t.wB()).CB(((e,i)=>t.br(i)));return t.Xl(i)}t(),t(),t(),t();var We=function(t){return t.Kst="jst",t.Yst="Zst",t}({});t();var ss=class extends Pa{constructor(t,e,i){super("Jst"),this.Tn=t,this.Pn=e,this.$st=i}},XM=class extends o{constructor(){super("tnt")}},GM=[Uv.jp,Uv.Zp,Uv.Kp,Uv.Ep],QM=class extends Re{get ent(){var t,e;return(null==(t=this.snt.int)?void 0:t.$st)||(null==(e=this.snt.nnt)?void 0:e.$st)}get rnt(){return this.hnt}set ont(t){this.snt.ont=t}get ont(){return this.snt.ont}get MS(){return this.ant}unt(t){this.ant!==t&&(this.ant=t,this.wo(new XM))}get cnt(){return this.hnt.Ht.cnt}get lt(){return this.$V}async Tn(t){if(!this.lnt&&!this.dnt)return;const e=this.Tp("tnt");this.lnt?(this.fnt.tf(),this.fnt=new Mr,qe(this._nt(this.fnt.ap),this.fnt)):(this.vnt.Xf(void 0),this.vnt=new ue),await e}get lnt(){return"gnt"===this.ant}get dnt(){return"wnt"===this.ant}get mnt(){return"pnt"===this.ant}get ynt(){return"Ant"===this.ant}async Al(t){if(this.mnt||this.dnt)for(0,this.fnt.tf();!this.lnt&&!this.ynt;)await this.Tp("tnt")}async sr(t){this.ynt?(this.$V=void 0,this.unt("gnt")):await this.Al(t),this.snt.sr(),this.hnt.sr()}UH(t){this.$V=t,this.unt("Ant"),this.wo(new _n(t))}bnt(){this.e3.wn(Uv.Xu,this.Tnt),this.e3.wn([Uv.$f,Uv.Fp],this.Xe),this.snt.wn(GM,this.Os),this.Snt.wn(We.Kst,this.Tnt)}knt(){this.e3.pn(Uv.Xu,this.Tnt),this.e3.pn([Uv.$f,Uv.Fp],this.Xe),this.snt.pn(GM,this.Os),this.Snt.pn(We.Kst,this.Tnt)}async Ent(t){this.knt(),this.Pnt.tf(),await this.Al(null!=t?t:Ri.Cst),this.snt.sr()}async Int(t){this.bnt(),await this.Tn(null!=t?t:Ri._st)}Cnt(t,e,i){if(this.lnt)for(const s of t.hnt.Rnt())s.xnt<=i&&e<=s.Dnt&&this.Snt.Nnt.some((t=>t.o===s.Bnt))&&this.hnt.Mnt(s)}async bn(){this.Bo(),this.knt(),this.Pnt.tf(),await this.Al(Ri.Rst),this.snt.bn()}async _nt(t){for(;;)try{Bv(t),this.unt("pnt"),await this.snt.Lnt(t),Bv(t),this.unt("wnt"),await Dc(this.vnt.Pf,t)}catch(t){if(Eh(t))this.unt("gnt");else{const e=t instanceof ke?t:new ke(X.MEDIA_LOAD_ERROR,t.message,t);this.UH(e)}break}}async Ont(t){Bv(t),await this.Al(Ri.Ist),this.snt.sr(),Bv(t),await this.Tn(Ri.dst)}constructor(t,e,i,s,n){super(),this.Fnt=t,this.Snt=e,this.hnt=i,this.snt=s,this.e3=n,this.ant="gnt",this.$V=void 0,this.vnt=new ue,this.Pnt=new Mr,this.fnt=new Mr,this.Xe=t=>{if(this.lnt||this.ynt)return;if(!Gn.QE&&this.snt.Unt(t.currentTime))return;this.Pnt.tf(),this.Pnt=new Mr;qe(this.Ont(this.Pnt.ap),this.Pnt).catch(wi)},this.Tnt=Zi((()=>{if(this.dnt){try{this.snt.Vnt();if(this.snt.Hnt())return}catch(t){if(!(t instanceof ss))throw t}this.Tn(Ri.fst)}}),250),this.bnt()}};t(),t();var KM=class t{Wnt(t,e){return this.qnt(t,!1,e)}znt(t,e){return this.qnt(t,!0,e)}async qnt(e,i,s){Bv(s.ap);const n=await this.Xnt(e,i,s);return n.kS?t.Gnt(n):this.Qnt(n)}Qnt(t){return t}static Gnt(t){return t}Xnt(t,e,i){var s;const n=new Qi({qS:t.qS,OS:Gs.aS,US:t.Knt?{Range:"bytes="+t.Knt[0]+"-"+(null!=(s=t.Knt[1])?s:"")}:void 0,Ak:t.Ak,vk:Na.GET,Vm:Sa.GS,pk:e?Qn.jS:Qn.zS,yk:this.jnt,gk:i.Ynt,wk:i.wk,ap:i.ap,Sk:i.Sk});return this.TF.FS(n)}constructor(t,e){this.TF=t,this.jnt=e}};t(),t();var jM=class{Znt(t,e){const i=this.Jnt**t,s=e*(1-i)+i*this.W8;j(s)||(this.W8=s,this.$nt+=t)}trt(){const t=1-this.Jnt**this.$nt;return this.W8/t}constructor(t){this.W8=0,this.$nt=0,this.Jnt=w.exp(w.log(.5)/t)}},YM=class{Znt(t,e){const i=8e3*e/t,s=t/1e3;this.ert+=e,this.irt.Znt(s,i),this.nrt.Znt(s,i)}trt(){return this.rrt()?w.min(this.irt.trt(),this.nrt.trt()):this.hrt}rrt(){return this.ert>=this.ort}constructor(t=2,e=5,i=128e3){this.ert=0,this.hrt=CE,this.irt=new jM(t),this.nrt=new jM(e),this.ort=i}},ZM=class{get art(){return this.urt.trt()}get rrt(){return this.urt.rrt()}crt(t){const e=t.lrt,i=this.drt?t.frt-t._rt:t.frt-t.vrt,s=t.grt;!s&&e<this.wrt||(s?this.urt.Znt(2*i,e):this.urt.Znt(i,e))}constructor(t,e){this.drt=e,e&&nt(t)?t===Be.wl?(this.wrt=5e3,this.urt=new YM(.05,1,0)):(this.wrt=0,this.urt=new YM(.005,.1,0)):(this.wrt=16e3,this.urt=new YM)}};t(),t(),t();var JM=class{transform(t,e){this.Vd.write(t).catch(De),e.enqueue(t)}flush(){this.Vd.close().catch(De)}constructor(t){this.Vd=t}},oc=class{mrt(){return new $M(ya(this.nst),this.prt,this.yrt)}constructor(t,e,i){this.nst=t,this.prt=e,this.yrt=i}},$M=class t{get pS(){return this.Art}mS(t){return jt(this.Art,t)}Ty(){const[e,i]=Op(this.Art);return this.Art=e,new t(i,this.prt,this.yrt)}brt(){const[e,i]=function(t){const e=new Uc,i=e.writable.getWriter(),s=new Uc(new JM(i));return t.pipeTo(s.writable).catch((t=>{i.abort(t).catch(De)})),[s.readable,e.readable]}(this.Art);return this.Art=e,new t(i,this.prt,this.yrt)}Trt(t){return this.mS(t).then((t=>new oc(t,this.prt,this.yrt)))}constructor(t,e,i){this.Art=t,this.prt=e,this.yrt=i}};t();var or=class extends Pa{constructor(t,e,i){super(e,i),this.Srt=t}},tL="Cache lookup failed.",eL=class extends Re{async krt(t,e){Bv(e);const i=await this.Ert.Jtt(t.qS.qS,t.qS.Knt);if(Bv(e),!i)throw new or(t,tL);const s=new oc(i.buffer,i.byteLength,i.reference);return{Srt:t.Srt,Prt:{Vm:lt.KQ,LS:s},$st:t.$st,qS:t.qS}}async Irt(t,e){Bv(e);const i=await this.Ert.Jtt(t.qS,t.Knt);if(Bv(e),!i)throw new or(t,tL);const s=new oc(i.buffer,i.byteLength,i.reference);return{Vm:lt.KQ,LS:s}}bn(){this.Bo()}constructor(t){super(),this.Ert=t}};t();var iL=["Yp","Jp"],sL=class extends Re{async krt(t,e){let i;for(const s of this.Crt)try{return await s.krt(t,e)}catch(t){ta(t),i=t}throw i}async Irt(t,e){let i;for(const s of this.Crt)try{return await s.Irt(t,e)}catch(t){ta(t),i=t}throw i}bn(){for(const t of this.Crt)t.pn(iL,this.Os),t.bn()}constructor(t){super(),this.Crt=t;for(const t of this.Crt)t.wn(iL,this.Os)}};function Pc(t){return rh(t.Rrt)}function nL(t){return Pc(t)?t.Rrt:t.xrt}t(),t(),t(),t();var rL=class extends o{constructor(t,e,i,s,n,r){super(t),this.Drt=e,this.Nrt=i,this.RN=s,this.Jx=n,this.yk=r}},hL=class extends rL{constructor(t,e,i,s,n){super(Uv.jp,t,e,i,s,n)}};t(),t();var oL=class{constructor(t,e){this.Brt=t,this.Mrt=e}},aL=class extends oL{get lrt(){return this.Lrt}start(){}transform(t,e){this.Lrt+=t.byteLength,e.enqueue(t)}flush(){this.Ort(!1)}tf(){this.Ort(!0)}Ort(t){this.Brt(this.Mrt,Gn.Qg(),this.lrt,t)}constructor(...t){super(...t),this.Lrt=0}},uL=class extends oL{get lrt(){return this.Lrt}start(){this.Mrt=Gn.Qg()}transform(t,e){this.Lrt+=t.byteLength,this.Frt||this.Urt(t)&&this.Ort(!1),e.enqueue(t)}flush(){}tf(){this.Ort(!0)}Urt(t){const e=this.Vrt(t),i=this.Hrt(e);return Boolean(bv(i,cL))}Vrt(t){return this.Wrt&&void 0!==this.qrt?(this.Wrt=po([this.Wrt,t]),new xh(Nt(this.Wrt),new lh(this.qrt))):(this.Wrt=t,new xh(Nt(t),new lh))}Hrt(t){const e=z.nx(t.LS,t.qR,!0);return e.hx?(this.Wrt=void 0,this.qrt=void 0):this.qrt=t.qR.Fu,e.m}Ort(t){this.Frt||(this.Brt(this.Mrt,Gn.Qg(),this.lrt,t),this.Frt=!0)}constructor(...t){super(...t),this.Lrt=0,this.Frt=!1}};function cL(t){return t.Vm===BA.DR}var lL=class{zrt(t){const e=t.HS?this.Xrt:Gn.Qg(),i=this.Grt(e),s=new Uc(i),n=t.pS().pipeTo(s.writable).then((()=>({pP:{lrt:i.lrt}})),(t=>{throw i.tf(),t}));return this.Qrt.lp(n),s.readable}Krt(t){const e=t.HS?this.Xrt:Gn.Qg(),i=t.mS(),s=i.then((t=>{const i=Gn.Qg();return this.crt(e,i,t.byteLength,!1),{pP:{lrt:t.byteLength}}}),(t=>{const i=Gn.Qg();throw this.crt(e,i,0,!0),t}));return this.Qrt.lp(s),i}get jrt(){return this.Qrt.Pf}constructor(t){this.Yrt=t,this.Qrt=new ue,this.crt=(t,e,i,s)=>{const n={vrt:this.Xrt,_rt:t,frt:e,lrt:i,grt:s};this.Yrt.crt(n),this.Yrt.rrt&&Ke.Gg.fV(this.Yrt.art)},this.Qrt.Pf.catch(De),this.Xrt=Gn.Qg()}},dL=class extends lL{Grt(t){return new aL(this.crt,t)}},fL=class extends lL{Grt(t){return new uL(this.crt,t)}};t();var _L=class extends rL{constructor(t,e,i,s,n,r,h){super(Uv.Zp,t,e,i,s,n),this.Zrt=r,this.xM=h}};t();var cc=class extends Pa{constructor(t,e,i){super("Error downloading segment "+nL(e),t),this.Jrt=e.YM,this.$rt=e.ZM,this.tht=i}},vL=class extends Re{eht(){return this.drt?new fL(this.Yrt):new dL(this.Yrt)}async krt(t,e){Bv(e);const i=t.$st,s=t.qS,n=t.Srt,r=nL(n),h=i.$st?i.$st.KI:-1,o=function(t){const e=t.$st;let i;i=e===function(t){return t.Nnt.reduce(((t,e)=>t.PV<e.PV?t:e))}(e.iht)?le(5*t.Srt.ct):le(1.2*t.Srt.ct);return ht(i,1e3,18e3)}(t);this.wo(new hL(s,i.PV,r,h,i.Vm));try{const t=this.eht(),a=await this.sht.Wnt(s,{Sk:this.drt,Ynt:o,ap:e}),u=await this.nht(a,a.kS,e,t);return Ov(this.rht(t.jrt,i,s,r,h,a)),{Prt:u,$st:i,Srt:n,qS:s}}catch(t){throw ta(t),new cc(t,n,i)}}async Irt(t,e){Bv(e);const i=await this.sht.znt(t,{Sk:false,Ynt:1e4,ap:e});return await this.nht(i,false,e)}async nht(t,e,i,s){if(e){const e=s?s.zrt(t):t.pS();return{Vm:lt.cS,LS:new $M(e)}}{const e=s?await s.Krt(t):await t.mS(i);return{Vm:lt.KQ,LS:new oc(e)}}}async rht(t,e,i,s,n,r){try{const h=await t;this.wo(new _L(i,e.PV,s,n,e.Vm,r.MS,h.pP.lrt))}catch(t){}}bn(){this.Bo()}constructor(t,e,i){super(),this.sht=t,this.Yrt=e,this.drt=i}};t();var gL=.001,wL=class{get Sl(){return this.hht.Sl}get oht(){return this.hht.oht}get RK(){return this.hht.RK}get aht(){if(this.u$.Vc<qb.Qn)return!1;if(this.hht.Pn<=this.uht&&this.hht.cht())return!0;const t=this.hht.jV;if(!t||0===t.U)return!1;const e=r.OB(this.e3.Yu,1/0);return t.Cn(e).bB(this.hht.RK).MB>=this.yW.kG}get uht(){const t=this.hht.jV;let e;if(t&&t.U>0)e=t.Pn(0);else{e=this.e3.Yu;const t=this.hht.RK,i=t.TB(e);i>=0&&(e=t.Pn(i))}const i=this.hht.Cl.Tn(0);if(i>e){if(this.hht.Tn<=e&&this.hht.Pn>=e&&i>e+gL)throw new ss(e,i);e=i}return e=this.hht.dht.gB(e),e}constructor(t,e,i,s){this.hht=t,this.e3=e,this.u$=i,this.yW=s}};t();var mL=class{get fht(){if(0===this.Bm.size)return this._ht;let t=r.OB(0,1/0);return t=t.Cn(this._ht),this.Bm.forEach((e=>{t=t.Cn(e)})),t}vht(t){return this.Bm.get(t.o)}ght(){let t=this._ht;return this.Bm.forEach((e=>{t=t.Xl(e)})),t}wht(t){if(this._ht.br(t))return!0;let e=!1;return this.Bm.forEach((i=>{e=e||i.br(t)})),e}mht(t,e){const i=this.Bm.get(e.o);return!!i&&i.br(t)}SB(t,e){if(this._ht.SB(t,e))return!0;let i=!1;return this.Bm.forEach((s=>{i=i||s.SB(t,e)})),i}pht(t,e){const i=this.Bm.get(e),s=i?i.Xl(t):t;this.Bm.set(e,s),this._ht=this._ht.Xl(t)}yht(t){this.Bm.forEach(((e,i)=>{this.Bm.set(i,e.Xl(t))})),this._ht=this._ht.Xl(t)}Aht(t){this.Bm.forEach(((e,i)=>{this.Bm.set(i,e.Cn(t))})),this._ht=this._ht.Cn(t)}sr(){this.Bm.forEach(((t,e)=>{this.Bm.set(e,r.Ol())})),this._ht=r.Ol()}constructor(){this.Bm=sa(),this._ht=r.Ol()}},pL=class{get bht(){return this.Tht}get RK(){return this.xK}Sht(t){for(const e of this.wet){if(e.xnt>t)break;if(e.Dnt>t)return e}}kht(t){for(const e of this.wet){if(e.Eht>t)break;if(e.Pht>=t)return e}}Iht(t,e){const i=[];for(const s of this.wet){if(s.xnt>t)break;s.Dnt>=e&&i.push(s)}return i}Rnt(){return this.wet}Mnt(t){const e=r.OB(t.Eht,t.Pht),i=e.wB();this.Tht.Aht(i),this.Tht.pht(e,t.Bnt),this.Cht(i);const s=su(this.wet,(e=>t.xnt<=e.xnt));if(s<0)this.wet.push(t);else{this.wet[s].Dnt<=t.Dnt?this.wet.splice(s,1,t):this.wet.splice(s,0,t)}}DK(t,e){this.xK.pht(t,e)}Rht(t){this.xK.yht(t)}Aht(t){this.Tht.Aht(t),this.xK.Aht(t);const e=this.Tht.ght();this.Cht(e)}Cht(t){this.wet=this.wet.filter((e=>t.EB(e.Eht,e.Pht))).map((e=>e.xht&&!t.SB(e.Eht,e.Pht)?function(t,e){return{Bnt:t.Bnt,xnt:t.xnt,Dnt:t.Dnt,Eht:t.Eht,Pht:t.Pht,xht:e}}(e,!1):e))}sr(){this.Tht.sr(),this.xK.sr(),this.wet=[]}bn(){this.sr()}constructor(t){this.wet=[],this.Ht=t,this.Tht=new mL,this.xK=new mL}};t(),t();var yL=class{get ont(){return this.Dht}set ont(t){this.Dht=t}get cnt(){return this.hnt.Ht.cnt}async Nht(t,e,i){let s;Bv(i);const n=this.hnt.kht(t);s=n&&Uu(n.Pht,t,1e-5)?n.Dnt:t;const r=this.Bht(s),h=function(t){return AL.bind(void 0,t)}(s);let o=await this.Vw.Mht(h,r,e,i);for(Bv(i);o&&this.Lht(o.Srt);){const t=kL(o.Srt),s=o.$st;o=await this.Vw.Mht(t,[s],e,i),Bv(i)}if(!o)return void 0;if(!this.Oht(o.Srt))return o;const a=this.Fht(o.Srt);if(t<a.Tn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,e,i,a);if(t>=a.Pn)return await this.findFirstNonAppendedSegmentAfterSegment(o,e,i);if(!o.$st.Uht(o.Srt))throw new v("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,e,i){let s=t;do{const n=kL(s.Srt),r=t.$st;s=await this.Vw.Mht(n,[r],e,i),Bv(i)}while(s&&this.Oht(s.Srt));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,e,i,s){let n=t;do{const s=SL(n.Srt),r=t.$st;n=await this.Vw.Mht(s,[r],e,i),Bv(i)}while(n&&this.Oht(n.Srt));if(!n){0;const e=t.$st.Vht.Tn;throw new ss(e,s.Tn,t.$st)}return n}Hht(t){return this.hnt.bht.wht(t)}Wht(t){return this.hnt.Iht(t.YM,t.ZM)}Oht(t){const e=this.Wht(t);return e.length>0&&function(t,e){return function(t){let e=r.Ol();for(const i of t)e=e.Xl(r.OB(i.xnt,i.Dnt));return e}(t).SB(e.YM,e.ZM)}(e,t)&&e.every(EL)}Lht(t){return this.hnt.RK.SB(t.YM,t.ZM)}Fht(t){const e=this.Wht(t);return{Tn:e[0].Eht,Pn:e[e.length-1].Pht}}Bht(t){const e=this.qht(t);if(0===e.length){const t=this.Dht?this.Dht:this.hnt.Ht.Nnt;return[t[t.length-1]]}const i=e.filter((t=>{var e;return(null==(e=t.$st)?void 0:e.Ltt)&&!t.zht}));return i.length>0?i:[e[e.length-1]]}qht(t){return(this.Dht?this.Dht:this.hnt.Ht.Nnt).filter((e=>!this.hnt.RK.mht(t,e)))}constructor(t,e,i){this.Fnt=t,this.hnt=e,this.Vw=i}};async function AL(t,e,i,s){const n=e.Iit.Xht(t);if(n){if(e.Ght(n)){return(await e.Kht(n,i,s)).Qht(t)}return n}}async function bL(t,e,i,s){if(Pc(t)){if(0===t.Rrt)return;const n=e.Iit.jht(t);if(!n)return;return(await e.Kht(n,i,s)).Yht(t.Rrt-1)}return e.Iit.Zht(t)}async function TL(t,e,i,s){if(Pc(t)){const n=e.Iit.jht(t);if(!n)return;const r=await e.Kht(n,i,s);if(t.Rrt+1===r.U)return;return r.Yht(t.Rrt+1)}return e.Iit.Jht(t)}function SL(t){return bL.bind(void 0,t)}function kL(t){return TL.bind(void 0,t)}function EL(t){return t.xht}t();var PL=class{async Mht(t,e,i,s){Bv(s);const n=this.$ht(e,i);if(!n)return;const r=await t(n,this.tot,s);if(!r)return;const h=n.eot(r);return{$st:n,Srt:r,qS:h}}$ht(t,e){if(0===t.length)return;const i=this.rot.iot(t,this.hot?e:void 0,this.hht,this.yW.bG);return this.hot||(this.hot=!0),i}constructor(t,e,i,s){this.rot=t,this.hht=e,this.yW=i,this.tot=s,this.hot=!1}};t();var IL=class{async Mht(t,e,i,s){Bv(s);const n=this.rot.oot(e,i,this.hht);if(!n.length)return;let r;for(const e of n)try{Bv(s);const i=await t(e,this.tot,s);if(i){const t=e.eot(i);if(await this.Ert.Ytt(t.qS,t.Knt))return{Srt:i,$st:e,qS:t}}}catch(t){ta(t),r=t}if(r)throw r}constructor(t,e,i,s){this.rot=t,this.hht=e,this.Ert=i,this.tot=s}};function CL(t){return void 0!==t.Hu}function RL(t,e){const i=t.Ti&&e.Ti,s=t.Ci&&e.Ci;if(i||s){if(i&&s)return t.Ti*t.Ci-e.Ti*e.Ci;if(i)return t.Ti-e.Ti;if(s)return t.Ci-e.Ci;return(t.Ti||1)*(t.Ci||1)-(e.Ti||1)*(e.Ci||1)}return 0}function xL(t,e){return RL(t,e)||function(t,e){return t.PV-e.PV}(t,e)}t(),t();var DL=class t{iot(e,i,s,n){let r=t.sortByQuality(e);if(void 0!==this.aot&&void 0===i&&e.length>1){const e=t.uot(r,this.aot);e&&(r=e)}const h=this.oot(r,i,s,n);return h.length?h[h.length-1]:r[0]}oot(e,i,s,n){var r;const h=t.sortByQuality(e),o={art:void 0===n||this.cot.rrt?this.cot.art:n,Hu:CL(s)&&s.Hu?s.Hu:1,lot:s.Ti,dot:s.Ci,fot:null==(r=this._ot)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.vot)a=t(a,i,o,this.ym,this.got);return a}static wot(e){return t.sortByQuality(e)[0]}static mot(e,i){var s;return i?t.wot(null!=(s=t.uot(e,i))?s:e):t.wot(e)}static uot(t,e){for(const i of e){const e=t.filter((t=>qc(t.Ew,i)));if(e.length>0)return e}}static sortByQuality(t){const e=[...t];return e.sort(xL),e}constructor(t,e,i,s,n,r){this.vot=t,this.cot=e,this.ym=i,this._ot=s,this.aot=n,this.got=r}};t();var NL=(t,e,i,s,n)=>t.filter((t=>n.nK(t)&&s.Aw(e,t)));t();var BL=(t,e,i)=>t.filter((t=>function(t,e,i){const s=i.art;if(s<=0)return!1;return.8*s>t.PV*i.Hu}(t,0,i)));t();var ML=(t,e,i,s,n)=>{const r=i.fot;if(void 0===r&&!s.Ks)return t;if(!1===r)return t;if(t.length>0&&t[0].Vm!==Be.wl)return t;for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.Ci===i.dot&&s.Ti===i.lot)return t.slice(0,e+1);if(s.Ci<i.dot||s.Ti<i.lot)return t.slice(0,e+2)}return[]};t();var LL=class{async Mht(t,e,i,s){let n;for(const r of this.pot)try{const n=await r.Mht(t,e,i,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.pot=t}};t(),t();var OL=class{async yot(t,e,i,s){let n;for(const r of this.Aot)try{return await r.yot(t,e,i,s)}catch(t){ta(t),n=t}throw n}constructor(t){this.Aot=t}};t();var FL=class{async yot(t,e,i,s){var n;const r=await this.TF.FS({qS:t,OS:Gs.aS,US:e?{Range:"bytes="+e[0]+"-"+(null!=(n=e[1])?n:"")}:void 0,Ak:i,vk:Na.GET,Vm:Sa.zS,ap:s});return await r.mS()}constructor(t){this.TF=t}};t();var UL=class{async yot(t,e,i,s){const n=await this.Ert.Jtt(t,e);if(n)return n.buffer;if(e){const i=await this.Ert.Jtt(t);if(i)return Nc(new x(i.buffer),e[0],e[1])}throw new or({qS:t,Knt:e,Ak:!1})}constructor(t){this.Ert=t}};t();var VL=1.05,HL=(t,e,i,s)=>{if(!1===i.fot)return t;if(s.ew)return t;const n=s.iw;var r;const h=(null!=(r=null==n?void 0:n.width)?r:i.lot)*VL;var o;const a=(null!=(o=null==n?void 0:n.height)?o:i.dot)*VL;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.Ci<=a&&i.Ti<=h)return t.slice(0,e+1)}return[]},WL=class{static Z8(t,e,i,s,n,r,h,o,a,u){const c=function(t,e){return new OL([new UL(e),new FL(t)])}(r,h),l=new DL([NL],n,Gn.Zs,o,a,u),d=new IL(l,e,h,c),f=new DL([BL,NL,ML,HL],n,Gn.Zs,o,a,u),_=new PL(f,e,s,c),v=new LL([d,_]);return new yL(t,i,v)}};t(),t();var qL=class extends o{constructor(t,e,i,s,n,r=0){super(Uv.Kp),this.segmentStartTime=t,this.error=e,this.trackType=i,this.track=s,this.quality=n,this.retryCount=r}};t();var zL=class extends o{constructor(t,e){super(Uv.Ep),this.track=t,this.segments=e}},XL=class extends Pa{constructor(t,e){super(e),this.bot=t}},GL=[Uv.jp,Uv.Zp],QL=class extends Re{get int(){return this.Tot}get nnt(){return this.Sot}set ont(t){this.kot.ont=t}get ont(){return this.kot.ont}get cnt(){return this.hnt.Ht.cnt}Eot(t){return!this.dJ||!t||!In(this.dJ.nst,t.nst)}Unt(t){if(!this.Tot)return!1;const e=this.Tot.Srt,i=r.OB(e.YM,e.ZM),s=this.Pot.oht,n=s.TB(t);return n<0?i.br(t,gL):i.EB(t,s.Pn(n),!0,!0,gL)}async Lnt(t){const e=this.hnt.Ht.Nnt;for(;;){let n;try{var i;Bv(t),this.Vnt();if(this.Hnt())break;n=this.Iot();const r=await this.Mht(n,t);if(void 0===r)break;if(this.Tot=r,!KL(this.Tot)){await this.Cot(this.Tot,t);continue}var s;if(this.Sot&&!qc(this.Sot.$st.yS,this.Tot.$st.yS)&&await this.got.hK(this.Tot.$st),this.Tot.$st.xV&&(!this.nnt||(null==(i=this.Sot)?void 0:i.$st)!==this.Tot.$st))null==(s=this.lH)||s.OV(this.Tot.$st.xV);await this.Rot(n,this.Tot.Srt,t),this.dJ=await this.xot(this.Tot.$st,t);const h=await this.krt(this.Tot,t),o=this.Pot.Sl,a=this.Sot;this.Sot=await this.Dot(h,t);const u=this.Pot.Sl;this.Not(a,this.Tot,o,u,n),e.forEach((t=>t.zht=!1)),this.Bot=0,this.Mot=0}catch(i){if(i instanceof ss){this.jJ(i.Tn,i.Pn,i.$st);continue}if(i instanceof XL){let s=500;if(e.every((t=>t.zht))){if(2===this.Bot){const t=this.Pot.Sl;if(this.Lot(this.Tot),this.Not(this.Sot,this.Tot,t,t,n),e.forEach((t=>t.zht=!1)),this.Mot+=1,this.Bot=0,this.Mot===this.Oot.maxRetries)throw new ke(X.MEDIA_LOAD_ERROR,"The segments could not be loaded.",i);continue}this.Bot++;const t=this.Oot.minimumBackoff*2**(this.Bot-1);s=w.min(t,this.Oot.maximumBackoff)}await Rt(s,t);continue}throw this.Fot=r.Ol(),i}finally{this.Tot=void 0}}}Not(t,e,i,s,n){const h=s.bB(i),o=e.$st,a=o.Uot(e.Srt),u=o.Uht(e.Srt);let c=e.Srt.YM,l=e.Srt.ZM;a&&(c=w.min(c,w.max(0,o.Vht.Tn-.05))),u&&(l=w.max(l,o.Vht.Pn));const d=r.OB(c,l).bB(s);if(0===h.U)return void this.Vot(i,d,c,n);if(a||this.Fot.U>0){const t=d.Cn(r.OB(c,h.Tn(0)));this.Hot(t)}const f=h.wB().Cn(r.OB(h.Tn(0),h.Pn(h.U-1)));if(this.Hot(f),u){const t=d.Cn(r.OB(h.Pn(h.U-1),l));this.Hot(t)}if(this.Fot.U>0){const t=this.Fot.bB(h);this.Hot(t),this.Fot=r.Ol()}const _=o.Iit,v=Pc(e.Srt)?void 0:_.Zht(e.Srt);var g;const m=null!=(g=null==t?void 0:t.Srt)?g:this.Wot(v)?v:void 0;if(m){const t=this.hnt.Iht(m.YM,m.ZM);if(t.length>0){const e=r.OB(t[t.length-1].Pht,h.Tn(0));this.Hot(e)}}const p=Pc(e.Srt)?void 0:_.Jht(e.Srt);if(p&&this.Wot(p)){const t=this.hnt.Iht(p.YM,p.ZM);if(t.length>0){const e=r.OB(h.Pn(h.U-1),t[0].Eht);this.Hot(e)}}}Vot(t,e,i,s){let n=e;0===this.Fot.U&&(this.Fot=r.OB(t.Pn(t.U-1),i)),0===n.U&&void 0!==s&&(n=r.LB(s)),this.Fot=this.Fot.Xl(n),this.hnt.Rht(this.Fot)}Wot(t){return!!t&&this.hnt.Iht(t.YM,t.ZM).length>0}Hot(t){const e=t.bB(this.Pot.Sl);for(let t=0;t<e.U;t++)e.Tn(t)!==e.Pn(t)&&this.qot.DK(e.Tn(t),e.Pn(t))}zot(t,e){throw new XL(t,e)}Vnt(){if(this.Fot.U>0)return;var t;const e=this.Pot.oht.Xl(null!=(t=this.Pot.RK.vB().BB(this.Pot.uht))?t:r.Ol());this.hnt.Aht(e),this.Xot&&!this.Got(this.Xot)&&(this.Xot=void 0),this.wo(new zL(this.hnt.Ht.cnt,this.hnt.Rnt()))}Hnt(){return this.Sot&&this.Sot.$st.Uht(this.Sot.Srt)?(this.qot.WJ(),!0):(this.Xot&&this.Xot.$st.Uht(this.Xot.Srt)&&this.Got(this.Xot)&&this.qot.WJ(),!!this.Pot.aht)}Got(t){return this.hnt.bht.SB(t.Qot,t.Kot)}jot(t,e,i){(!this.Xot||this.Xot.Srt.ZM<t.Srt.ZM)&&(this.Xot=yh({},t,{Qot:e,Kot:i}))}Iot(){const t=this.Pot.uht;return t}async Mht(t,e){Bv(e);const i=this.Sot?this.Sot.$st:void 0,s=await this.kot.Nht(t,i,e);if(s)return s}async Cot(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=t.$st,n=s.Iit,r=Pc(t.Srt)?n.jht(t.Srt):t.Srt,h=s.Zot.Yot(),o=n.Jot(r);if(o&&o.getTime()<=h.getTime())return this.zot(Ri.wst,"Segment is not available.");const a=n.$ot(r).getTime()-h.getTime();0;const u=oe(i,Mr.fp([e]),!1);await Promise.race([Rt(a,u.ap),s.Tp(We.Kst,u.ap)])}catch(t){i.error=t,i.hasError=!0}finally{se(i)}}async xot(t,e,i){void 0===i&&(i=0),Bv(e);const s=t.eat;if(!s)return this.dJ;try{if(!t.iat){const i=await this.sat.Irt(s,e);t.iat=i.LS}}catch(s){if(ta(s),za(s)){if(2===i)return t.zht=!0,this.zot(Ri.kst,"Could not fetch the initializer.");const s=w.min(this.Oot.minimumBackoff*2**i,this.Oot.maximumBackoff);return await Rt(s,e),this.xot(t,e,i+1)}throw new ke(X.MEDIA_LOAD_ERROR,s.message,s)}Bv(e);try{this.Eot(t.iat)&&await this.qot.Eit(t.iat,t,e)}catch(t){if(ta(t),za(t))return this.zot(Ri.kst,"Could not append the initializer.");throw new ke(X.MEDIA_DECODE_ERROR,t.message,t)}return t.iat}async krt(t,e,i){void 0===i&&(i=0);try{return Bv(e),await this.sat.krt(t,e)}catch(s){if(ta(s),s instanceof cc){if(function(t){return t instanceof ay}(s.cause))return this.nat(new cc(s,t.Srt,t.$st),i),this.zot(Ri.wst,"Could not append the segment.");if(2===i)return t.$st.zht=!0,this.nat(s,i),this.zot(Ri.wst,"Could not fetch the segment.");const n=w.min(this.Oot.minimumBackoff*2**i,this.Oot.maximumBackoff);return await Rt(n,e),await this.krt(t,e,i+1)}throw new ke(X.MEDIA_LOAD_ERROR,s.message,s)}}async Rot(t,e,i){const s=this.hnt.Iht(e.YM,e.ZM),n=this.Pot.oht.BB(t);let h=r.Ol();for(const t of s){Bv(i);const e=t.Eht,s=t.Pht,o=n&&n.EB(e,s)?w.max(e,n.Pn(0)):e,a=s;o<a&&(h=h.Xl(r.OB(o,a)))}for(let t=0;t<h.U;t++)await this.qot.rat(h.Tn(t),h.Pn(t),i);this.Vnt()}async Dot(t,e){try{Bv(e);const i=await this.qot.oat(t.Prt,t.Srt,t.$st,e);return this.aat(t,i.Qot,i.Kot),this.jot(t,i.Qot,i.Kot),t}catch(e){if(ta(e),za(e))return this.nat(new cc(e,t.Srt,t.$st),0),this.zot(Ri.wst,"Could not append the segment.");if(ZI(e)&&this.qot.xG())return this.zot(Ri.pst,"Buffer is full. Could not reduce the buffer.");throw new ke(X.MEDIA_DECODE_ERROR,e.message,e)}}aat(t,e,i){const s=t.$st,n=t.Srt;this.Mnt(n,s,e,i)}Mnt(t,e,i,s){this.hnt.Mnt({Bnt:e.o,xnt:t.YM,Dnt:t.ZM,Eht:i,Pht:s,xht:!0}),this.qot.NK(i,s)}jJ(t,e,i){const s=r.OB(t,e);i?this.hnt.DK(s,i.o):this.hnt.Rht(s),this.qot.DK(t,e)}Lot(t){const e=r.OB(t.Srt.YM,t.Srt.ZM);t.$st?this.hnt.DK(e,t.$st.o):this.hnt.Rht(e)}nat(t,e){const i=t.Jrt,s=this.hnt.Ht.cnt,n=this.hnt.Ht.ba,r=t.tht.$st&&t.tht.$st.ba,h=new qL(i,t.message,s,n,r,e);this.wo(h)}sr(){this.dJ=void 0,this.Sot=void 0}bn(){this.sr(),this.Xot=void 0,this.sat.pn(GL,this.Os),this.sat.bn()}constructor(t,e,i,s,n,h,o,a,u){super(),this.Fnt=t,this.hnt=e,this.Pot=i,this.kot=s,this.sat=n,this.qot=h,this.got=o,this.Oot=a,this.lH=u,this.Tot=void 0,this.dJ=void 0,this.Sot=void 0,this.Xot=void 0,this.Bot=0,this.Mot=0,this.Fot=r.Ol(),this.sat.wn(GL,this.Os)}};function KL(t){const e=t.$st,i=e.Iit,s=Pc(t.Srt)?i.jht(t.Srt):t.Srt;return i.uat(s,e.Zot.Yot())}var jL=0,YL=class{Z8(t){const e=jL++,i=this.hht.zJ,s=new pL(t),n=this.dat&&nt(i),r=new ZM(i,n),h=new wL(this.hht,this.e3,this.u$,this.yW),o=WL.Z8(e,this.hht,s,this.yW,r,this.TF,this.Ert,this._ot,this.aot,this.got),a=function(t){switch(t){case Be.hk:return Ec.hk;case Be.wl:return Ec.wl;case Be.lS:return Ec.lS;case Be.ck:return Ec.ck;default:return Ec.zS}}(i),u=function(t,e,i,s){const n=new eL(s),r=new vL(t,e,i);return new sL([n,r])}(new KM(this.TF,a),r,n,this.Ert),c=new QL(e,s,h,o,u,this.hht,this.got,this.Oot,this.lH);return new QM(e,t.iht,s,c,this.e3)}fat(t,e){const i={cnt:Be.lS,iht:e,Nnt:e.Nnt,ba:t.ba};return this.Z8(i)}constructor(t,e,i,s,n,r,h,o,a,u,c,l){this.hht=t,this.e3=e,this.u$=i,this.TF=s,this.yW=n,this.dat=r,this.Ert=h,this._ot=o,this.aot=a,this.got=u,this.Oot=c,this.lH=l}};t();var ZL=class{nK(t){return this.fit.nK(t)}hK(t){return this.fit.hK(t)}constructor(t){this.fit=t}},JL=class{nK(t){return!0}hK(t){return Promise.resolve(void 0)}};t(),t();var nc=class extends Cs{ya(){return new $L(this.YI.map((t=>t.ba)))}constructor(t,e){super(Fe.II),this.YI=t||[],this.Ht=e}},$L=class extends o{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};t();var tO=class extends xe{ya(){return new eO(this.quality.ba)}constructor(t){super(Fe.QUALITY_UNAVAILABLE),this.quality=t}},eO=class extends eo{constructor(t){super("qualityunavailable"),this.quality=t}};t();var iO=class extends o{constructor(){super(Fe.NO_QUALITY)}};function sO(t){return{PV:t.PV,Ew:t.Let,Ci:nO(t)?t.Ci:0,Vm:nO(t)?Be.wl:Be.hk,Ti:nO(t)?t.Ti:0}}function nO(t){const e=t;return void 0!==e.Ci&&void 0!==e.Ti}t();var rO=0,hO=class extends Re{get jI(){return this.Snt._at.map(oO).filter(Ee)}vat(t){for(const e of t)e.wn("update",this.gat),this.LM.OM(e)}wat(t){if(!this.LM.FM(t))return;t.mF();const e=this.mat();if(this.pat&&Qe(this.pat,t)){const t=this.pat.filter((t=>t.Ltt));0===t.length&&e.length>0?this.ZI=e:this.ZI=t}else this.ZI=e;this.wo(new tO(t))}yat(t){if(!this.LM.FM(t))return;const e=this.mat();t.wF(),this.pat&&!function(t,e){return Ev(t,e,((t,e)=>t===e))}(this.pat,e)||(this.ZI=this.mat())}mat(){return this.LM.RI.filter((t=>t.Ltt))}get QI(){return this.Aat}bat(t){this.Aat=t.$st,this.wo(t)}get iht(){return this.Snt}get Rt(){return this.We}set Rt(t){this.qM(t)}get ba(){return this.Zu||(this.Zu=Ji(this)),this.Zu}get Tat(){return this.Sat}set Tat(t){this.Sat=t}get o(){return this.Wb}get KI(){return this.HM}get Lt(){return this.E0}get gs(){return this.CA}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,this.wo(new Ba(this)))}get Tk(){return this.Rt?"enabled":"disabled"}get ZI(){return this.pat}set ZI(t){let e;if(t){const i=this.QI?sO(this.QI):void 0;e=t.filter((t=>t.Ltt&&Gn.Zs.Aw(i,sO(t))))}else e=this.mat();0!==e.length?(this.pat=t&&this.LM.FM(t)?t:void 0,this.Eat=this.Pat(this.pat),this.wo(new nc(t,this))):this.wo(new iO)}get Iat(){return this.Eat}Pat(t){if(!t||0===t.length)return;const e=[];for(const i of this.Nnt)for(const s of t)s===i.$st&&s.Ltt&&e.push(i);return e}get YI(){return this.LM}get Nnt(){return this.Cat}Rat(t){this.xat.push(t),this.Cat.push(...t.Nnt);const e=t.Nnt.map((t=>t.$st));this.vat(e)}get cnt(){return this.Dat}get Nat(){return this.xat}get Bat(){return this.Nnt.every((t=>t.Bat))}qM(t){this.We=t,this.Sat&&(t?this.Sat.wF(this):this.Sat.mF(this))}Mat(t){this.We=t,this.Lat!==t&&(this.Lat=t,this.wo(new no(this)))}bn(){for(const t of this.LM.RI)t.pn("update",this.gat);this.LM.sr()}constructor(t,e,i="alternative"){super(),this.Aat=void 0,this.We=!1,this.Zu=void 0,this.Sat=void 0,this.Wb="",this.Lat=!1,this.LM=new Zh,this.Cat=[],this.pat=void 0,this.Eat=void 0,this.gat=()=>this.wo(new Ba(this)),this.xat=[],this.Snt=t,this.Wb=String(rO++),this.HM=xs(),this.E0=i,this.CA=t.C5,this.ec=t._h,this.Dat=t.Vm,this.Cat=t.Nnt,this.vat(e)}};function oO(t){if("urn:mpeg:dash:role:2011"===t.H2)return aO(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.H2){if("1"===t.yE)return An.WI;if("2"===t.yE)return An.zI}}function aO(t){if(void 0!==(null==t?void 0:t.yE))switch(t.yE){case"caption":return An.HI;case"sign":return An.qI;case"description":return An.WI;case"enhanced-audio-intelligibility":return An.zI;default:return}}var uO=class t extends Vt{get Oat(){return this.Fat}set Oat(t){this.Fat=t}get Rt(){for(const t of this.Z.RI)if(t.Tk!==Aa.Th)return!0;return!1}get jV(){const t=this.e3.Yu;return this.oht.BB(t,.01)}get Uat(){return this.Oat&&this.Vat[this.Oat.KI]?this.Vat[this.Oat.KI]:r.Ol()}get Hat(){return this.Oat&&this.Wat[this.Oat.KI]?this.Wat[this.Oat.KI]:r.Ol()}get dht(){return new r([0,1/0])}get Sl(){return this.Uat}get RK(){return this.qat?this.qat.rnt.RK.fht:r.Ol()}get oht(){return qM(this.Sl,this.RK).yB(2*this.zat)}get Tn(){return this.Xat?this.Xat.Vht.Tn:NaN}get Pn(){return this.Xat?this.Xat.Vht.Pn:NaN}get $c(){const t=this.Pn;return!!t&&this.e3.Yu>=t}get zat(){var t;const e=this.Gat();if(!e)return.04;var i;return 1/(null!=(i=this.Oat&&(null==e||null==(t=e.Qat)?void 0:t.SL()))?i:25)}get Ci(){return this.mc}get zJ(){return Be.lS}get Hu(){return this.vW}set Hu(t){this.vW=t}get Tl(){return this.Hat}get Cl(){if(!this.Oat)return r.LB(0);const t=this.Kat(this.Oat),e=null==t?void 0:t.jat,i=null==t?void 0:t.Yat;if(void 0===i||void 0===e)return r.LB(0);const s=w.max(e,this.e3.Yu);return new r([i,s]).vB()}get Ti(){return this.dc}WJ(){}cht(){return this.oht.br(this.Pn)}async oat(t,e,i,s){const n=t.Vm===lt.KQ?t.LS.nst:await t.LS.mS(s),h=this.findTrackForRepresentation(i),o=this.Vat[h.KI],a=e.YM,u=e.ZM,c=new r([a,u]);o||(this.Vat[h.KI]=r.Ol(),this.Wat[h.KI]=r.Ol()),this.mit(s);const l=this.Pit(new x(n),e,i,h);for(const t of l)h.SF(t);return this.Vat[h.KI]=this.Vat[h.KI].Xl(c),{Qot:a,Kot:u}}mit(t){const e=YI(this.e3.Yu,void 0,void 0,this.Sl,this.yW.kG,this.yW.pG);for(const[i,s]of e)Ov(this.rat(i,s,t))}Eit(t,e,i){return this.Zat.Eit(t,e,i)}Pit(t,e,i,s){return this.Zat.Pit(t,e,i,s)}rat(t,e,i){const s=t,n=e;let h=new r([t,e]);for(const t of this.Z.RI){const e=[];for(const i of t.L.RI)i.YM>=s&&i.ZM<=n?e.push(i):h=h.bB(new r([i.YM,i.ZM]));for(const i of e)t.fF(i);const i=this.Vat[t.KI];i&&(this.Vat[t.KI]=i.bB(h))}return Promise.resolve()}DK(t,e){}NK(t,e){}xG(){return!1}wF(t){const e=this.Jat(t);if(e&&this.Oat!==e){this.Oat=e;for(const t of this.Z.RI)t!==e&&(t.Tk=Aa.Th);if(this.Zat.sr(),this.qat&&(this.qat.bn(),this.qat=void 0),this.Oat){const t=this.Kat(this.Oat);this.qat=new YL(this,this.e3,this.e3,this.TF,this.yW,!1,this.Ert,void 0,void 0,new JL,Qb,void 0).fat(this.Oat,t),this.qat.wn(Yo.la,this.$at),this.qat.Tn(Ri.cst)}}}mF(t){if(this.Oat===t){const e=this.Jat(t);e&&this.Oat===e&&(this.Oat=void 0),this.qat&&(this.qat.bn(),this.qat=void 0)}}async On(t){await this.sr(),this.Xat=t,this.tut(t)}eut(t){const e=function(t){const e=t.Nnt&&t.Nnt.length>0&&t.Nnt[0],i=e&&JS(e.Let),s=JS(t.Let),n=t.Oq===Pt.APPLICATION_TTML_XML;return i||s||n?Zo.TTML:t.Oq===Pt.TEXT_VTT||ic(t.Oq,t.Let)?Zo.WEBVTT:Zo.DEFAULT}(t);if(!e)throw new v("Unknown TextTrack type for Representation");const i=t.iut.concat(t._at);return this.sut(function(t){return Qe(t.filter((t=>"urn:mpeg:dash:role:2011"===t.H2)).map((t=>t.yE)).filter(Ee),"caption")?ns.uF:ns.aF}(i),t._h,t.C5,!1,e,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.H2)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.yE)))}(t.iut),t._at.map(aO).filter(Ee))}tut(t){for(const e of t.nut){const t=this.eut(e);this.rut.set(t.KI,e),t.Vc=Fi.LOADED,this.tt(t)}}it(t){this.rut.delete(t.KI),super.it(t)}sut(t,e,i,s,n,r,h,o){var a;const u=r.Nnt.reduce(((t,e)=>t||e.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.AF.iI(t,l,e,i,s,n,h,o)}async sr(){await super.sr(),this.qat&&(await this.qat.sr(Ri.Dst),this.qat.pn(Yo.la,this.$at),this.qat=void 0),this.Xat=void 0,this.Vat={},this.Wat={}}hut(){this.Vat={},this.Wat={}}findTrackForRepresentation(e){for(const i of this.Z.RI){const s=this.Kat(i);if(s&&t.out(s)===e)return i}}Jat(t){return bv(this.Z.RI,(e=>t.KI===e.KI))}Kat(t){return this.rut.get(t.KI)}Gat(){if(!this.Oat)return;const e=this.Kat(this.Oat);return e?t.out(e):void 0}static out(t){return t.Nnt&&t.Nnt.length>0?t.Nnt[0]:void 0}bn(){for(const t of this.Z.RI)this.AF.EF(t);return super.bn()}constructor(t,e,i,s,n,r){super(),this.mc=0,this.vW=1,this.qat=void 0,this.Vat={},this.Wat={},this.dc=0,this.rut=C(),this.$at=t=>{0},this.e3=t,this.TF=e,this.yW=i,this.Zat=s,this.Ert=n,this.AF=r}},cO=class{get nt(){return this.Au}async bF(t){if(t.Vm!==Be.lS)return;const e=function(t,e,i){return JS(e)||t===Pt.APPLICATION_TTML_XML||t===Pt.TEXT_VTT?new VM(i):ic(t,e)?new HM:void 0}(t.Oq,t.Let,this.Cit);if(e){const i=this.aut(e);return this.uut(i),await i.On(t),i}}aut(t){return new uO(this.e3,this.TF,this.yW,t,this.Ert,this.AF)}uut(t){this.cut.push(t),this.Au.UV(t.Z)}async sr(){for(const t of this.cut.slice())await t.sr();us(this.cut),this.Au.sr()}async bn(){for(const t of this.cut)await t.bn();us(this.cut),this.Au.bn()}constructor(t,e,i,s,n,r){this.cut=[],this.Au=new je([]),this.e3=t,this.TF=e,this.yW=i,this.Ert=s,this.AF=n,this.Cit=r}};t();var lO=class extends o{constructor(t){super(Uv.qp),this.error=t}};t();var Is=function(t){return t.IF="static",t.CF="dynamic",t}({});t(),t();var dO=function(t){return t.lut="fut",t}({}),fO=class extends o{constructor(){super(dO.lut)}};t(),t();var _O=class extends o{constructor(t,e){super(Uv.Gp),this.representation=t,this.previousRepresentation=e}};t(),t(),t();var Us=function(t){return t[t._ut=0]="_ut",t[t.vut=1]="vut",t[t.gut=2]="gut",t[t.wut=3]="wut",t[t.mut=4]="mut",t[t.yut=5]="yut",t}({}),fi=function(t){return t[t.Aut=0]="Aut",t[t.but=1]="but",t[t.Tut=2]="Tut",t[t.Sut=3]="Sut",t}({});function vO(t,e,i){return i===Us._ut?i:e!==fi.Aut&&e!==fi.but||i!==Us.vut&&i!==Us.gut?t?e===fi.Tut?Us.mut:e===fi.Sut?Us.wut:Us._ut:Us.yut:Us.gut}function gO(t,e,i,s){const n={byte:i};let r=Us.vut;const h=[],o=31&Ft(e,n,s);n.byte+=1;for(let i=0;i<o;i+=1){const o=Ft(e,n,s),a=4&o,u=3&o;r=vO(Boolean(a),u,r);const c=Ft(e,n,s),l=Ft(e,n,s);h.push({kut:t,RN:-1,Eut:!i,Put:Boolean(a),Vm:u,Iut:r,Cut:c,Rut:l})}return h}function wO(t,e,i){const s=Ft(t,e,i);if(!j(s))return String.fromCharCode(s)}function mO(t){const e=t.LY,i={byte:t.BY},s=t.MY,n=Ft(e,i,s);if(255===n&&(i.byte+=1),181!==n)return;const r=aR(e,i);if(47!==r&&49!==r)return;if(49===r){const t=function(t,e,i){let s="",n=i;for(;n>0;)n-=1,s+=wO(t,e);return s}(e,i,4);if("GA94"!==t)return}if(3!==Ft(e,i,s))return;47===r&&(i.byte+=1);const h=t;return h.xut=i.byte,h}function pO(t){return 4===t.DY}function yO(t){const e=t.filter(pO).map(mO).filter(Ee),i=[];for(const t of e)i.push(...gO(t.xY,t.LY,t.xut,t.MY));return i}t();var AO="und";function bO(t){if(t===AO)return;const e=t.toLowerCase();for(const t of TO)if(t[1]===e||t[2]===e||t["2T"]===e||t["2B"]===e||t[3]===e)return t}var TO=[{l:"Abkhaz",dh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",dh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",dh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",dh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",dh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",dh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",dh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",dh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",dh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",dh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",dh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",dh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",dh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",dh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",dh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",dh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",dh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",dh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",dh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",dh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",dh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",dh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",dh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",dh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",dh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",dh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",dh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",dh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",dh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",dh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",dh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",dh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",dh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",dh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",dh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",dh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",dh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",dh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",dh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",dh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",dh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",dh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",dh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",dh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",dh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",dh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",dh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",dh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",dh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",dh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",dh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",dh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",dh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",dh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",dh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",dh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",dh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",dh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",dh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",dh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",dh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",dh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",dh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",dh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",dh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",dh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",dh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",dh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",dh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",dh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",dh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",dh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",dh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",dh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",dh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",dh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",dh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",dh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",dh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",dh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",dh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",dh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",dh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",dh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",dh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",dh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",dh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",dh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",dh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",dh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",dh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",dh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",dh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",dh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",dh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",dh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",dh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",dh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",dh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",dh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",dh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",dh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",dh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",dh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",dh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",dh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",dh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",dh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",dh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",dh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",dh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",dh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",dh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",dh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",dh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",dh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",dh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",dh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",dh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",dh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",dh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",dh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",dh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",dh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",dh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",dh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",dh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",dh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",dh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",dh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",dh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",dh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",dh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",dh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",dh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",dh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",dh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",dh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",dh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",dh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",dh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",dh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",dh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",dh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",dh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",dh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",dh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",dh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",dh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",dh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",dh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",dh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",dh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",dh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",dh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",dh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",dh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",dh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",dh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",dh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",dh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",dh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",dh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",dh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",dh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",dh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",dh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",dh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",dh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",dh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",dh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",dh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",dh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",dh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",dh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",dh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",dh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",dh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",dh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",dh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",dh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",dh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",dh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",dh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];t();function SO(t){var e;const i=null!=(e=function(t){const e=t.mY,i=new uu;return i.TY(e,0,e.byteLength),mR(i).ZY}(t))?e:24;return t.Dut/i}function kO(t){return t.Vm===BA.SR}function EO(t,e,i,s,n){const r=function(t,e,i,s){const n=i.Dut,r=Yc.fromNumber(t.WN||0),h=s.OM(_r.UL(r,n));return{Nut:s.SL(),But:s,Mut:h,Lut:s}}(t,0,i,s),h=_r.VL(t.ct||0,i.Dut),o=t.Tx||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=Nt(n),l=new lh;for(;l.Fu<c.byteLength;){const t=No(c,l);if((31&Nh(c,l,1))===_R.WY){const e=new uu;e.TY(n,l.Fu-1,l.Fu+t-1);const i=new wR(e),s=lR(r.Mut,i);u=u||[],u.push(...yO(s))}l.by(t-1)}return yh({},r,{ct:h.SL(),Out:h,Fut:r.Mut.SL(),Uut:r.Nut,Vut:a,Hut:u,Wut:!1,qut:!1})}function PO(t){return{Jx:t.gx.Jx,Dut:t.Kx.gx.Wx}}function IO(t){return t.Vm===BA.MC}t(),t(),t(),t(),t(),t(),t(),t();var CO=class{fL(t){return this.O5===t.O5&&this.E5===t.E5}constructor(t,e){this.O5=t,this.E5=e}};t();var RO=class{get Z5(){return this.zut}get G5(){return[this]}get j5(){return this.qQ}get x5(){return this.Xut}get B5(){return new CO(this.x5.O5,this.x5.E5+this.Z5.length-1)}Gut(t){this.zut+=t}Qut(t){for(const e of t)this.Gut(e)}constructor(t,e){this.qQ=t,this.Xut=e,this.zut=""}};function xO(t,e){return t===e||t.Z5===e.Z5&&t.x5.fL(e.x5)&&sn(t.j5,e.j5)}function DO(t,e){return t===e||t.x5.fL(e.x5)&&t.B5.fL(e.B5)&&Ev(t.G5,e.G5,xO)}var NO=class extends Hu{_L(t){return Ev(this.O,t.O,DO)}constructor(t,e,i){super(t,e,i,!1)}};t();var BO=class{Kut(t){return t.UO(this)}jut(t){return fn(t,((t,e)=>t.UO(this,e)))}Yut(t,e){return new MO(t,e).Zut()}},MO=class{Zut(){if(this.Jut)return[];for(let t=0;t<this.O5.length;t++)this.$ut(t);return this.tct(),this.ect}ict(t){this.sct=new RO(zN,new CO(this.nct,t))}tct(){this.sct&&(this.ect.push(this.sct),this.sct=null)}$ut(t){const e=this.O5[t];LO(e)?this.sct&&this.tct():(this.sct||this.ict(t),this.sct.Gut(e))}get Jut(){return this.O5.every(LO)}constructor(t,e){this.O5=t,this.nct=e,this.ect=[],this.sct=null}};function LO(t){return null==t}var OO=class{static rct(t,e,i){if(e>=i)return;const s=fn(t,((t,e)=>new MO(t.map((t=>t?t.hct():null)),e).Zut()));return 0!==s.length?new NO(e,i,s):void 0}},FO="black",UO="white";t(),t();var VO=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,e)=>(t[e[0]]=e[1],t)),{}),HO=class{act(t){for(let e=0;e<Kn;e++)t&&(this.uct[e]=t.uct[e])}fL(t){for(let e=0;e<Kn;e++)if(this.uct[e]!==t.uct[e])return!1;return!0}cct(){for(let t=0;t<Kn;t++)if(null!==this.uct[t])return!1;return!0}lct(t){this.dct!==t&&(this.dct=t),this.dct<0?this.dct=0:this.dct>Kn&&(this.dct=31)}fct(t){const e=this.dct+t;this.lct(e)}_ct(){this.fct(-1),this.uct[this.dct]=null}Gut(t){t>=144&&this._ct();const e=function(t){return VO[t]?String.fromCharCode(VO[t]):String.fromCharCode(t)}(t);this.addParsedChar(e)}addParsedChar(t){this.dct>=Kn||(32===Number(t)?(this.uct[this.dct]=this.vct?"</i>":"<i>",this.vct=!this.vct):this.uct[this.dct]=t,this.fct(1))}gct(t){for(let e=t;e<Kn;e++)this.uct[e]=null}By(){this.gct(0),this.dct=0}wct(){this.gct(this.dct)}mct(t,e){const i=this.uct;let s=null;for(let n=0;n<Kn;n++){const r=i[n];null===r?s=null:(s||(s={Lh:n,Hh:t,Ti:0,Ci:1,uct:[[]]},e.push(s)),s.uct[0].push(r),s.Ti++)}}UO(t,e){return t.Yut(this.uct,e)}constructor(){this.uct=[],this.dct=0;for(let t=0;t<Kn;t++)this.uct.push(null);this.vct=!1}};var WO=class{pct(t,e){const i="CC"+(this.yct<<1|this.Act+1);if(t>=e)return null;const s=(new BO).jut(this.bct.slice(1));return 0===s.length?null:{KM:new NO(t,e,s),pS:i,Tct:this.yct<<1|this.Act+1}}sr(){this.Sct(),this.kct=1}Ect(){return this.kct}Pct(t){this.kct=t}lct(t){this.bct[this.kct].lct(t)}fct(t){this.bct[this.kct].fct(t)}Ict(){return this.Cct}Rct(t){this.Cct=t}Gut(t,e){if(e<32||e>127)return;let i="";switch(t){case 0:i=void 0!==XO[e]?XO[e]:String.fromCharCode(e);break;case 1:i=GO[e];break;case 2:this.xct(),i=QO[e];break;case 3:this.xct(),i=KO[e]}i&&this.bct[this.kct].addParsedChar(i)}xct(){this.bct[this.kct]._ct()}Dct(t,e,i){if(t>=e)for(let s=i-1;s>=0;s--)this.bct[t+s]=this.bct[e+s];else for(let s=0;s<i;s++)this.bct[t+s]=this.bct[e+s]}Nct(t,e){for(let i=0;i<=e;i++)this.bct[t+i]=new HO}Sct(){this.Nct(0,qO)}Bct(){this.kct=this.Cct>0?this.Cct:0,this.Sct()}Mct(t){this.Lct=t}Oct(t){this.Fct=t}Uct(t){this.Vct=t}Hct(t){this.Wct=t}constructor(t,e){this.bct=new Array(qO+1);for(let t=0;t<=qO;t++)this.bct[t]=new HO;this.kct=1,this.Cct=0,this.yct=t,this.Act=e,this.Lct=!1,this.Fct=!1,this.Vct=UO,this.Wct=FO,this.sr()}},qO=15,zO=function(t){return t[t.qct=0]="qct",t[t.zct=1]="zct",t[t.Xct=2]="Xct",t[t.Gct=3]="Gct",t}({}),XO={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},GO={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},QO={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},KO={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},jO=class{sr(){this.Qct=!0,this.Kct=0,this.Dw=0,this.jct=this.Yct,this.Zct=void 0,this.Yct.sr(),this.Jct.sr(),this.$ct.sr()}tlt(t,e){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|e>>5&1]}elt(t,e){const i=this.tlt(t,e),s=(30&e)>>1;let n=UO,r=!1;s<7?n=JO[s]:7===s&&(r=!0);const h=1==(1&e);if(4===this.Dw)return;const o=this.jct;if(3===this.Dw&&i!==o.Ect()){const t=1+o.Ect()-o.Ict(),e=1+i-o.Ict();o.Dct(e,t,o.Ict()),o.Nct(0,e-1),o.Nct(i+1,qO-i)}o.Pct(i);const a=GN[t<<1&14|e>>5&1]-1;if(a<0)return;const u=function(t,e){const i=e>95?e-96:e-64;return{k5:XN[i].k5,S5:XN[i].S5,E5:XN[i].E5,O5:t}}(a,e);o.lct(u.E5),this.jct.Mct(h),this.jct.Oct(r),this.jct.Uct(n),this.jct.Hct(FO)}ilt(t,e){this.jct.Mct(!1),this.jct.Oct(!1),this.jct.Uct(UO);const i=this.slt(t,zO.qct," ".charCodeAt(0));let s=UO,n=!1;const r=1==(1&e);return s=JO[(14&e)>>1],"white_italics"===s&&(s="white",n=!0),this.jct.Mct(r),this.jct.Oct(n),this.jct.Uct(s),i}slt(t,e,i){if(this.jct.Gut(e,i),2===this.Dw||3===this.Dw){const e=this.nlt(this.jct,this.Kct,t);return this.Kct=t,e}return null}nlt(t,e,i){return this.Qct?null:2===this.Dw||3===this.Dw?t.pct(i,i+10):t.pct(e,i)}rlt(t,e){let i=FO;0==(7&t)&&(i=ZO[(14&e)>>1]),this.jct.Hct(i)}hlt(t){const e=YO,i=t.olt,s=t.ult;let n=null;switch(i){case e.RCL:this.clt();break;case e.BS:this.llt();break;case e.AOD:case e.AON:case e.DER:break;case e.RU2:n=this.dlt(2,s);break;case e.RU3:n=this.dlt(3,s);break;case e.RU4:n=this.dlt(4,s);break;case e.FON:n=this.flt(s);break;case e.RDC:this._lt(s);break;case e.TR:this.vlt();break;case e.RTD:this.glt();break;case e.EDM:n=this.wlt(s);break;case e.CR:n=this.plt(s);break;case e.ENM:this.ylt();break;case e.EOC:n=this.Alt(s)}return n}plt(t){const e=this.jct;if(3!==this.Dw)return null;const i=this.nlt(e,this.Kct,t),s=e.Ect()-e.Ict()+1;return e.Dct(s-1,s,e.Ict()),e.Nct(0,s-1),e.Nct(e.Ect(),qO-e.Ect()),this.Kct=t,i}dlt(t,e){this.jct=this.Yct;const i=this.jct;let s=null;return 3!==this.Dw&&4!==this.Dw&&(s=this.nlt(i,this.Kct,e),this.Yct.Bct(),this.Jct.Bct(),this.Qct=!1,i.Pct(qO)),this.Dw=3,i.Rct(t),s}flt(t){return this.slt(t,zO.qct," ".charCodeAt(0))}wlt(t){const e=this.Yct;let i=null;return 4!==this.Dw&&(i=this.nlt(e,this.Kct,t)),e.Sct(),this.Qct=!1,i}_lt(t){this.Dw=2,this.jct=this.Yct,this.jct.Rct(0),this.Kct=t}ylt(){this.Jct.Sct()}Alt(t){let e=null;4!==this.Dw&&(e=this.nlt(this.Yct,this.Kct,t));const i=this.Jct;return this.Jct=this.Yct,this.Yct=i,this.clt(),this.Kct=t,e}clt(){this.Dw=1,this.jct=this.Jct,this.jct.Rct(0)}llt(){this.jct.xct()}vlt(){this.$ct.sr(),this.Qct=!1,this.glt()}glt(){this.jct=this.$ct,this.Dw=4}blt(t,e,i){return this.jct.Gut(zO.qct,e),this.slt(t,zO.qct,i)}Tlt(t,e,i){const s=1&e?zO.Gct:zO.Xct;return this.slt(t,s,i)}Slt(t){const e=t.klt,i=t.olt,s=t.ult;if(this.Zct===(e<<8|i))return this.Zct=void 0,null;if(this.Zct=e<<8|i,this.Elt(e,i))this.elt(e,i);else{if(this.Plt(e,i))return this.ilt(s,i);if(this.Ilt(e,i))this.rlt(e,i);else{if(this.Clt(e,i))return this.slt(s,zO.zct,i);if(this.Rlt(e,i))return this.Tlt(s,e,i);if(this.xlt(e,i))return this.hlt(t);this.isTabOffset(e)&&this.jct.fct(i-32)}}return null}isTabOffset(t){return 23===t||31===t}xlt(t,e){return 20==(246&t)&&32==(240&e)}Elt(t,e){return 16==(240&t)&&64==(192&e)}Plt(t,e){return 17==(247&t)&&32==(240&e)}Ilt(t,e){return 16==(247&t)&&32==(240&e)||23==(247&t)&&45==(255&e)}Clt(t,e){return 17==(247&t)&&48==(240&e)}Rlt(t,e){return 18==(246&t)&&32==(224&e)}static Dlt(t){return 16==(112&t)}constructor(t,e){this.Dw=0,this.$ct=new WO(t,e),this.Yct=new WO(t,e),this.Jct=new WO(t,e),this.jct=this.Yct,this.Kct=0,this.Zct=void 0,this.Qct=!1}},YO={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},ZO=["black","green","blue","cyan","red","yellow","magenta","black"],JO=["white","green","blue","cyan","red","yellow","magenta","white_italics"];t(),t(),t();var $O=class{hct(){return this.Nlt}Blt(){return this.Lct}Mlt(){return this.Fct}Llt(){return this.Wct}Olt(){return this.Vct}constructor(t,e,i,s,n){this.Nlt=t,this.Lct=e,this.Fct=i,this.Wct=s,this.Vct=n}},tF=class{Flt(t,e,i,s,n,r,h){this.lW=t,this.Ult=e,this.Vlt=i,this.Hlt=s,this.Wlt=n,this.qlt=r,this.zlt=h}Xlt(){this.Glt=[];for(let t=0;t<iF;t++)this.Glt.push(this.Qlt())}Qlt(){const t=[];for(let e=0;e<eF;e++)t.push(null);return t}Klt(t){this.jlt()&&(this.Glt[this.kct][this.Ylt]=new $O(t,this.Lct,this.Fct,this.Wct,this.Vct),this.Ylt++)}Zlt(){this.jlt()&&(this.Ylt<=0&&this.kct<=0||(this.Ylt<=0?(this.Ylt=this.zlt-1,this.kct--):this.Ylt--,this.Glt[this.kct][this.Ylt]=null))}jlt(){const t=this.kct<this.qlt&&this.kct>=0,e=this.Ylt<this.zlt&&this.Ylt>=0;return t&&e}Jlt(){return this.lW}$lt(t){let e=0;for(let i=t;i<iF;i++,e++)this.Glt[e]=this.Glt[i];for(let i=0;i<t;i++,e++)this.Glt[e]=this.Qlt()}tdt(){if(this.kct+1>=this.qlt)return this.$lt(1),void(this.Ylt=0);this.kct++,this.Ylt=0}edt(){this.Glt[this.kct]=this.Qlt(),this.Ylt=0}pct(t,e){if(this.hL>=t)return null;const i=OO.rct(this.Glt,this.hL,t);return i?(this.idt(t),{KM:i,pS:"svc"+e,Tct:e}):null}sdt(t,e){this.kct=t,this.Ylt=e}ndt(t){this.Wct=t}rdt(t){this.Vct=t}hdt(t){this.Lct=t}odt(t){this.Fct=t}adt(){this.kct=0,this.Ylt=0,this.Lct=!1,this.Fct=!1,this.Vct=UO,this.Wct=FO}udt(t){this.cdt=t}ldt(){this.lW=!0}ke(){this.lW=!1}jh(){this.lW=!this.lW}idt(t){this.hL=t}constructor(t){this.ddt=t,this.lW=!1,this.Wlt=!1,this.Vlt=0,this.Ult=0,this.Hlt=0,this.qlt=0,this.zlt=0,this.cdt=2,this.Glt=[],this.hL=0,this.kct=0,this.Ylt=0,this.Fct=!1,this.Lct=!1,this.Vct=UO,this.Wct=FO,this.Xlt()}},eF=42,iF=15,sF=class{fdt(t){const e=t._dt();let i=e.yE;const s=e.ult;if(i===aF){i=i<<16|t._dt().yE}return i>=0&&i<=31?this.vdt(i,s):i>=128&&i<=159?this.gdt(t,i,s):(i>=4096&&i<=4127?this.wdt(t,255&i):i>=4224&&i<=4255?this.mdt(t,255&i):i>=32&&i<=127?this.pdt(i):i>=160&&i<=255?this.ydt(i):i>=4128&&i<=4223?this.Adt(255&i):i>=4256&&i<=4351&&this.bdt(255&i),null)}pdt(t){this.Tdt&&(127!==t?this.Tdt.Klt(String.fromCharCode(t)):this.Tdt.Klt("\u266a"))}ydt(t){this.Tdt&&this.Tdt.Klt(String.fromCharCode(t))}Adt(t){if(!this.Tdt)return;if(void 0===uF[t])return void this.Tdt.Klt("_");const e=uF[t];this.Tdt.Klt(e)}bdt(t){this.Tdt&&(160===t?this.Tdt.Klt("[CC]"):this.Tdt.Klt("_"))}vdt(t,e){if(!this.Tdt)return null;const i=this.Tdt;let s=null;switch(t){case nF:i.Zlt();break;case hF:i.Jlt()&&(s=i.pct(e,this.Sdt)),i.tdt();break;case oF:i.Jlt()&&(s=i.pct(e,this.Sdt)),i.edt();break;case rF:i.Jlt()&&(s=i.pct(e,this.Sdt)),i.Xlt(),i.sdt(0,0)}return s}gdt(t,e,i){if(e>=128&&e<=135){const t=7&e;this.kdt(t)}else{if(136===e){const e=t._dt().yE;return this.Edt(e,i)}if(137===e){const e=t._dt().yE;this.Pdt(e,i)}else{if(138===e){const e=t._dt().yE;return this.Idt(e,i)}if(139===e){const e=t._dt().yE;return this.Cdt(e,i)}if(140===e){const e=t._dt().yE;return this.Rdt(e,i)}if(143===e)return this.sr(i);if(144===e)this.xdt(t);else if(145===e)this.Ddt(t);else if(146===e)this.sdt(t);else if(151===e)this.Ndt(t);else if(e>=152&&e<=159){const s=(15&e)-8;this.Flt(t,s,i)}}}return null}wdt(t,e){e>=8&&e<=15?t.$R(1):e>=16&&e<=23?t.$R(2):e>=24&&e<=31&&t.$R(3)}mdt(t,e){e>=128&&e<=135?t.$R(4):e>=136&&e<=143&&t.$R(5)}kdt(t){this.Bdt[t]&&(this.Tdt=this.Bdt[t])}*Mdt(t){for(let e=0;e<8;e++){1==(1&t)&&this.Bdt[e]&&(yield e),t>>=1}}Edt(t,e){let i=null;for(const s of this.Mdt(t)){const t=this.Bdt[s];t.Jlt()&&(i=t.pct(e,this.Sdt)),t.Xlt()}return i}Pdt(t,e){for(const i of this.Mdt(t)){const t=this.Bdt[i];t.Jlt()||t.idt(e),t.ldt()}}Idt(t,e){let i=null;for(const s of this.Mdt(t)){const t=this.Bdt[s];t.Jlt()&&(i=t.pct(e,this.Sdt)),t.ke()}return i}Cdt(t,e){let i=null;for(const s of this.Mdt(t)){const t=this.Bdt[s];t.Jlt()?i=t.pct(e,this.Sdt):t.idt(e),t.jh()}return i}Rdt(t,e){let i=null;for(const s of this.Mdt(t)){const t=this.Bdt[s];t.Jlt()&&(i=t.pct(e,this.Sdt)),this.Bdt[s]=void 0}return i}sr(t){const e=this.Rdt(255,t);return this.By(),e}By(){this.Tdt=void 0,this.Bdt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}xdt(t){t.$R(1);const e=t._dt().yE;if(!this.Tdt)return;const i=(128&e)>0,s=(64&e)>0;this.Tdt.odt(i),this.Tdt.hdt(s)}Ddt(t){const e=t._dt().yE,i=t._dt().yE;if(t.$R(1),!this.Tdt)return;const s=3&e,n=(12&e)>>2,r=(48&e)>>4,h=3&i,o=(12&i)>>2,a=(48&i)>>4,u=this.Ldt(r,n,s),c=this.Ldt(a,o,h);this.Tdt.rdt(u),this.Tdt.ndt(c)}sdt(t){const e=t._dt().yE,i=t._dt().yE;if(!this.Tdt)return;const s=15&e,n=63&i;this.Tdt.sdt(s,n)}Ndt(t){t.$R(1),t.$R(1);const e=t._dt().yE;if(t.$R(1),!this.Tdt)return;const i=3&e;this.Tdt.udt(i)}Flt(t,e,i){const s=void 0!==this.Bdt[e];if(!s){const t=new tF(e);t.idt(i),this.Bdt[e]=t}const n=t._dt().yE,r=t._dt().yE,h=t._dt().yE,o=t._dt().yE,a=t._dt().yE,u=t._dt().yE,c=(32&n)>0,l=127&r,d=(128&r)>0,f=h,_=1+(15&o),v=(240&o)>>4,g=1+(63&a);s&&0===(7&u)||this.Bdt[e].adt(),this.Bdt[e].Flt(c,l,f,v,d,_,g),this.Tdt=this.Bdt[e]}Ldt(t,e,i){const s={0:0,1:0,2:1,3:1};return cF[s[t]<<2|s[e]<<1|s[i]]}constructor(t){this.Sdt=t,this.Bdt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Tdt=void 0}},nF=8,rF=12,hF=13,oF=14,aF=16,uF={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},cF=["black","blue","green","cyan","red","magenta","yellow","white"];t();var lF=class{Odt(t){if(t.Vm===fi.Sut){const e=63&t.yE;return this.Fdt=2*e-1,void(this.Udt=[])}if(this.Udt&&(this.Fdt>0&&(this.Udt.push(t),this.Fdt--),0===this.Fdt)){const t=new dF(this.Udt);this.Vdt.push(t),this.Udt=null,this.Fdt=0}}Hdt(){return this.Vdt}Wdt(){this.Vdt=[]}By(){this.Vdt=[],this.Udt=[],this.Fdt=0}constructor(){this.Vdt=[],this.Udt=null,this.Fdt=0}},dF=class{qdt(){return this.zdt<this.Xdt.length}Gdt(){return this.zdt}_dt(){if(!this.qdt())throw new ke(X.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Xdt[this.zdt++]}$R(t){if(this.zdt+t>this.Xdt.length)throw new ke(X.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.zdt+=t}constructor(t){this.zdt=0,this.Xdt=t}},fF=class{By(){this.Qdt=0,this.Kdt=[],this.jdt=[],this.Ydt.By(),this.sr(),this.Zdt.forEach((t=>{t.By()}))}sr(){this.Jdt=0,this.$dt=0,this.tft.forEach((t=>{t.sr()}))}eft(t,e){if(t.Put){const i=t.Cut,s=t.Rut,n=t.Vm;n===fi.Aut||n===fi.but?this.Kdt.push({ult:e,Vm:n,klt:i,olt:s,ift:this.Kdt.length}):this.sft&&(this.jdt.push({ult:e,Vm:n,yE:i,ift:this.jdt.length}),this.jdt.push({ult:e,Vm:fi.Tut,yE:s,ift:this.jdt.length}))}}OW(){const t=[];this.Kdt.sort(((t,e)=>t.ult-e.ult||t.ift-e.ift)),this.jdt.sort(((t,e)=>t.ult-e.ult||t.ift-e.ift));for(const e of this.Kdt){const i=this.nft(e);i&&t.push(i)}for(const t of this.jdt)this.Ydt.Odt(t);const e=this.Ydt.Hdt();for(const i of e){const e=this.rft(i);t.push(...e)}return this.Ydt.Wdt(),this.Kdt=[],this.jdt=[],t}nft(t){const e=t.Vm;if(jO.Dlt(t.klt)){const i=t.klt>>3&1;0===e?this.Jdt=i:this.$dt=i}const i="CC"+(e<<1|(e?this.$dt:this.Jdt)+1),s=this.tft.get(i);return 255===t.klt&&255===t.olt||!t.klt&&!t.olt||!this.hft(t.klt)||!this.hft(t.olt)?(++this.Qdt>=45&&this.sr(),null):(this.Qdt=0,t.klt&=127,t.olt&=127,t.klt||t.olt?jO.Dlt(t.klt)?s.Slt(t):s.blt(t.ult,t.klt,t.olt):null)}rft(t){const e=[];try{for(;t.qdt();){const i=t._dt().yE;let s=(224&i)>>5;const n=31&i;if(7===s&&0!==n){s=63&t._dt().yE}if(0!==s){if(!this.Zdt.has(s)){const t=new sF(s);this.Zdt.set(s,t)}const i=this.Zdt.get(s),r=t.Gdt();for(;t.Gdt()-r<n;){const s=i.fdt(t);s&&e.push(s)}}}}catch(t){if(!(t instanceof ke&&t.code===X.SUBTITLE_PARSE_ERROR))throw t}return e}hft(t){let e=0;for(;t;)e^=1&t,t>>=1;return 1===e}constructor(){this.sft=!1,this.Kdt=[],this.jdt=[],this.Ydt=new lF,this.Qdt=0,this.tft=F_({CC1:new jO(0,0),CC2:new jO(0,1),CC3:new jO(1,0),CC4:new jO(1,1)}),this.Jdt=0,this.$dt=0,this.Zdt=C(),this.sr()}};t();var _F=class extends o{constructor(t,e){super("oft"),this.Tct=t,this.KM=e}},vF=_r.EO(.1),gF=class extends Re{aft(t,e){this.uft.eft(t,e)}OW(){const t=this.uft.OW();for(const e of t)this.wo(new _F(e.Tct,e.KM))}sr(){this.uft.By()}bn(){this.Bo(),this.uft.By()}constructor(){super(),this.uft=new fF}},wF=class extends gF{cft(t,e,i,s){const n=this.lft(t,s);this.dft(n,e,i),this.OW()}lft(t,e){const i=t.slice().sort(QN),s=this.fft;if(0===s.length)return i;if(0===i.length)return s;let n;const r=s[0].P5,h=s[s.length-1].P5,o=i[0].P5,a=s[0].$st===i[0].$st;if(h.ML(o).DL().xL(_r.EO(2.5*e))&&a)n=s.concat(i).sort(QN);else if(o.PL(r)){let t=0;for(;t<s.length&&s[t].P5.xL(o);)t++;let e=!1,r=!1;for(let n=t,h=0;n<s.length&&h<i.length;n++,h++)mF(s[n],i[h])?e=!0:r=!0;const h=e&&!r,a=e&&r;!e&&r?n=s.concat(i).sort(QN):h?n=s.slice(0,t).concat(i):(n=i,a&&this.sr())}else n=i,this.sr();return n}dft(t,e,i){for(let s=0;s<t.length;s++){const n=t[s],r=n.P5.SL();if(!i&&e-r<vF.SL())return void(this.fft=t.slice(s));this.aft(n,r)}this.fft=[]}constructor(...t){super(...t),this.fft=[]}};function mF(t,e){return t.P5.fL(e.P5)&&t.Vm===e.Vm&&t.Cut===e.Cut&&t.Rut===e.Rut}var pF=class extends Vt{_ft(t){return this.vft.get(t)}gft(t){let e=this.vft.get(t.I5);return e||(e=this.wft(t),this.vft.set(t.I5,e)),e}wft(t){const e=[An.HI],i=bO(t.C5);let s,n=i?i.l:"";t.mft&&(n="easy "+n,e.push(An.XI)),s=t._h?"CC "+t._h:n?"CC "+n:"CC"+t.I5;const r=this.AF.iI(ns.uF,s,s,t.C5,!1,Zo.CEA608,void 0,e);return this.tt(r),r}Eit(t){const e=Kh.Sx(Nt(t));this.pft=function(t){for(const e of t.Z){const t=PO(e),i=e.Kx.rD.aD.cD.dD;let s=bv(i,(t=>t.Vm===BA.KC));if(!s){const t=i.filter((t=>t.Vm===BA.bR)),e=bv(t,(t=>{var e;return(null==(e=t.hN)?void 0:e.Vm)===BA.KC}));e&&(s=e.hN)}if(!s)continue;const n=oR(Nt(s.QD.LS),new lh),r=s.jD;return yh({},t,{Jx:e.gx.Jx,QD:Pg(s.QD.LS),Ti:s.Ti,Ci:s.Ci,AN:r&&r.AN,yN:r&&r.yN,IZ:n._Y,yft:n.vY,CZ:n.gY,mY:n.mY[0],pY:n.pY[0]})}}(bv(e,IO))}oat(t,e,i,s,n,r){var h;if(!this.pft)return;if(!j(this.Aft)&&Uu(this.Aft,e,1e-5))return;j(this.bft)||Uu(this.bft,e,.1)||this.Tft.sr();const o=function(t,e,i,s,n){const r=[],h=e.filter(kO),o=s(i);for(const e of h){const s=bv(e.Z,(t=>t.gx.Jx===i.Jx));if(!s)continue;const h=s.gx.SN||0,u=s.gx.kN||0;let c=s.MN?s.MN.MN:Yc.ZERO;var a;const l=e.CN+(null!=(a=s.gx.LN)?a:Yc.ZERO).toNumber();for(const a of s.BN){let s=l+(a.CN||0);for(const l of a.HN){const a=l.Iy||u,d=new uu;d.TY(t,s,s+a);const f=_r.UL(c,i.Dut);d.sF=n(l,e,i,f,Nc(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||h||o)}}}return r}(t,Kh.Sx(Nt(t)),this.pft,SO,EO);var a;const u=null!=(a=null==(h=Rv(o,(t=>t.sF.ct)))?void 0:h.sF.ct)?a:0,c=function(t){const e=[];for(const i of t)i.sF.Hut&&e.push(...i.sF.Hut),delete i.sF.Hut;for(let t=0;t<e.length;t+=1)e[t].RN=t;return e}(o),l=_r.EO(s),d=[];for(const t of c)d.push(yh({},t,{$st:n,P5:t.kut.OM(l)}));this.Tft.cft(d,i,r,u),this.Aft=e,this.bft=i}sr(){return this.Tft.sr(),this.vft.forEach((t=>{t.bn(),this.it(t),this.AF.EF(t)})),this.vft.clear(),this.pft=void 0,this.Aft=NaN,this.bft=NaN,super.sr()}bn(){return this.Tft.pn("oft",this.Sft),this.Tft.bn(),super.bn()}constructor(t){super(),this.pft=void 0,this.Aft=NaN,this.bft=NaN,this.Sft=t=>{const e=this.gft({I5:t.Tct,C5:""}),i=t.KM;for(const t of e.L.RI)i.YM<t.YM&&i.ZM>t.YM?i.ZM=t.YM:i.YM>t.YM&&t.ZM>i.YM?t.ZM=i.YM:i.YM===t.YM&&(i.ZM=t.ZM);e.SF(i)},this.AF=t,this.vft=C(),this.Tft=new wF,this.Tft.wn("oft",this.Sft)}};t(),t();var yF=/(.*)=(.*)/,AF=/(.*):(.*)/;function bF(t){if(!t)return[];const e=[],i=t.trim().split(";");for(const t of i){const i=t.match(yF);if(i){const[,t,s]=i;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(AF)){const[,e,i]=t.match(AF);switch(e){case"lang":n=i;break;case"er":r=Boolean(Number(i))}}e.push({I5:Number(t),C5:n,mft:r})}}return e}var TF={1:1,2:3,3:2,4:4},SF="urn:scte:dash:cc:cea-608:2015",kF="urn:scte:dash:cc:cea-708:2015";t(),t();var EF=class extends Cs{ya(){return new PF(this.$st&&this.$st.ba)}constructor(t,e,i){super(Fe.kI),this.$st=t,this.tht=e,this.kft=i}},PF=class extends o{constructor(t){super("activequalitychanged"),this.quality=t}},IF=[Uv.no,cb.Lf,Uv.Xu],CF=class extends Re{Eft(t){const e=this.qat.rnt;for(const i of e.Ht.Nnt)if(e.bht.mht(t,i))return i}bn(){this.Bo(),this.rM.pn(IF,this.Pft)}constructor(t,e){super(),this.Pft=t=>{const e=this.Ift,i=this.Eft(t.currentTime)||this.qat.ent;i&&e!==i&&(this.Ift=i,i.$st&&this.wo(new EF(i.$st,null==i?void 0:i.ba,null==e?void 0:e.ba)))},this.rM=t,this.rM.wn(IF,this.Pft),this.qat=e}};function RF(t,e,i){const s=new xh(Nt(t),new lh),n=z._x(s,BA.MC);if(!n)return;const r=z.sx(n.LS),h=bv(r,(t=>t.Vm===BA.OC)),o=bv(r,(t=>t.Vm===BA.NR));if(!h)return;const a=z._x(h.LS,BA.UC);if(!a)return;const u=z._x(a.LS,BA.WC);if(!u)return;const c=z._x(u.LS,BA.qC);if(!c)return;const l=z.sx(c.LS),d=bv(l,(t=>t.Vm===BA.zC));if(!d)return;const f=z.Ax(d.LS,BA.zC,!1),_=new xh(Nt(f.LS),new lh);_.$R(4);const v=z.sx(_),g=[];for(const t of v){if(t.Vm===BA.AR||t.Vm===BA.bR)return;t.Vm===BA.KC?g.push({Cft:t,Rft:BA.bR}):t.Vm===BA._R&&g.push({Cft:t,Rft:BA.AR})}if(!function(t,e){return void 0===t&&void 0!==e&&e.length>0}(o,e)&&0===g.length)return;let w=ki(t);const m=bv(r,(t=>t.Vm===BA.GC)),p=m?z._x(m.LS,BA.QC):void 0,y=p?function(t){const e=t.LS.Ty();return e.$R(4),e.$R(4),e.GR()}(p):1,A=bv(l,(t=>t.Vm===BA.XC));A&&function(t,e,i){const s=dr(Nt(t),e),n=z.lx(s,new lh),r=n.LS;r.$R(4);const h=r.GR();for(let t=0;t<h;t++){r.$R(4),r.$R(4);const t=r.qR.Ty(),e=r.GR();Vc(r.LS,t,e+i)}}(w,A,g.length),p&&function(t,e,i){const s=dr(Nt(t),e),n=z.lx(s,new lh),r=n.LS;r.$R(4),r.$R(4),Vc(r.LS,r.qR,i)}(w,p,1),w=function(t,e,i,s){if(i||!s)return t;let n=t;for(const t of s)n=xF(n,e,new x(t));return n}(w,n,o,e);const b=[n,h,a,u,c,d];for(let t=g.length-1;t>=0;t--){const e=g[t];w=DF(w,e.Cft,d,b,e.Rft,i)}return{xft:w,Dft:{Nft:g.length,TN:y}}}function xF(t,e,i){const s=Ng(t,i,e.LS.LS.byteOffset+e.LS.LS.byteLength);return NF(dr(Nt(s),e),i.byteLength),s}function DF(t,e,i,s,n,r){const h=function(t,e,i){0;const s=t.LS.LS,n=FF(),r=new x(s.byteLength+n.byteLength),h=Nt(r);r.set(Ht(s),0),NF(h,n.byteLength),vg(h,new lh(HF),e),r.set(n,s.byteLength),vg(h,new lh(s.byteLength+UF),t.Vm),i&&vo(h,new lh(s.byteLength+VF),i);return r}(e,n,r),o=Ng(t,h,e.LS.LS.byteOffset),a=Nt(o);!function(t,e){const i=z.lx(t,new lh),s=z.Ax(i.LS,BA.zC,!1),n=Nt(s.LS),r=n.getUint32(0);n.setUint32(0,r+e)}(dr(a,i),1);for(const t of s)NF(dr(a,t),h.byteLength);return o}function dr(t,e){const i=e.LS.LS.byteOffset;return it(t,i,i+e.LS.LS.byteLength)}function NF(t,e){const i=new lh,s=No(t,i);if(0===s);else if(1===s){i.by(4);const s=Z(t,i.Ty());cg(t,i,s.add(e))}else i.jc(0),Vc(t,i,s+e)}t();var BF=class extends ou{start(t){this.RQ=t}transform(t){this.tj(t),this.Bft()}flush(){this.ij(),this.Bft()}lj(t){return t===BA.SR}_j(t){let e=ki(Ht(t.LS.LS));const i=z.lx(Nt(e),new lh);e=MF(e,i,this.Mft),this.Lft.push(e)}gj(t){this.Lft.push(t)}Bft(){for(const t of function(t){if(t.length<2)return t;const e=[];let{buffer:i,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];i===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(e.push(new x(i,s,n)),({buffer:i,byteOffset:s,byteLength:n}=h))}return e.push(new x(i,s,n)),e}(this.Lft))this.RQ.enqueue(t);us(this.Lft)}constructor(t){super(),this.Lft=[],this.Mft=t}};function MF(t,e,i){let s=t;const n=z.sx(e.LS);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Vm===BA.ER&&(s=LF(s,r,e,i))}return s}function LF(t,e,i,s){const n=dr(Nt(t),e),r=z.lx(n,new lh),h=z.sx(r.LS),o=bv(h,(t=>t.Vm===BA.PR));if(!o)return t;const a=o.LS,u=a.qR.Ty(),c=a.GR(),{flags:l}=zc(c);a.$R(4),l.Sy(Rn.BASE_DATA_OFFSET_PRESENT)&&a.$R(8);const d=a.qR.Ty();if(l.Sy(Rn.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const e=No(a.LS,d);return Vc(a.LS,a.qR,e+s.Nft),t}{Vc(a.LS,u,c|Rn.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new x(4);Nt(n).setUint32(0,s.TN+s.Nft);const r=a.LS.byteOffset+d.Fu;for(const t of h.filter((t=>t.Vm===BA.IR)))OF(t,n.byteLength);for(const s of[o,e,i])NF(dr(Nt(t),s),n.byteLength);return Ng(t,n,r)}}function OF(t,e){const i=t.LS,s=i.GR(),{flags:n}=zc(s);if(i.$R(4),n.Sy(MA.DATA_OFFSET_PRESENT)){const t=i.Ty().GR();Vc(i.LS,i.qR,t+e)}}var FF=Ut((()=>new x([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),UF=16,VF=64,HF=4,WF=[Yo.la,Uv.Kp,Uv.jp,Uv.Zp,Uv.Ep],qF=class extends Re{get Oat(){return this.Fat}get o(){return this.Wb}get zJ(){return this.XJ}get nt(){return this.Oft}get Qat(){return function(t){const e=29.97,i=1024,s=44100;return t===Be.hk?s/i:e}(this.XJ)}get zat(){return 1/this.Qat}get Rt(){return Boolean(this.Fat&&this.Fat.Rt)}get RK(){const t=this.qat?this.qat.rnt.RK.fht:r.Ol();return this.Fft().Xl(t)}get Sl(){let t=this.Uft();const e=this.Vft;return void 0!==e&&t.vB().br(e)&&(t=t.Xl(r.LB(e))),t}get oht(){return qM(this.Uft(),this.RK.Xl(this.Hft)).yB(2*this.zat)}get Hft(){const t=this.Vft;if(t&&isFinite(t)){const e=this.Wft.Pn;if(isFinite(e)&&t<e)return new r([t,e],[!1,!0])}return r.Ol()}get Cl(){const t=this.Fat;if(!t)return r.LB(0);const e=t.iht.jat,i=t.iht.Yat;if(void 0===i||void 0===e)return r.LB(0);const s=i;let n=e>=t.iht.Vht.Pn?w.max(e,this.Pn):e;return n=w.max(s,n),r.OB(s,n).vB()}get jV(){return this.oht.BB(this.Yu)}get dht(){return this.Wft.dht}get Yu(){return this.rM.Yu}get Tn(){return this.Fat?this.Fat.iht.Vht.Tn:NaN}get Pn(){const t=this.qft(),e=this.Vft;return void 0===t?NaN:void 0!==e?e:t}qft(){var t;return null==(t=this.Fat)?void 0:t.iht.Vht.Pn}get Ci(){return this.Wft.Ci}get Ti(){return this.Wft.Ti}get zft(){return this.Vft}mnt(){return void 0!==this.qat&&this.qat.mnt}cht(){if(void 0===this.Vft)return!1;const t=this.Uft().vB(),e=t.TB(this.Vft);return!(e<0)&&t.Tn(e)!==this.Vft}WJ(){const t=this.Wft.dht,e=this.Uft().Cn(t);this.Vft=e.U>0?e.Pn(e.U-1):0;const i=t.Pn(0);isFinite(i)&&this.Vft<i&&this.DK(this.Vft,i),this.Xft()}async oat(t,e,i,s){const n=i.Iit.QO,r=this.Gft(t,e,i,n,s),h=this.Qft(t,e,i,n,s),[o]=await Xu([h,r]);return o}async Gft(t,e,i,s,n){if(!Oe(i.Oq))return;let r;if(t.Vm===lt.cS){const e=t.LS.brt(),i=await e.mS(n);r=new x(i)}else r=new x(t.LS.nst);const h=[];if(void 0!==this.Kft&&(this.Kft.oat(r,e.YM,s),h.push(this.Kft)),void 0!==this.jft){const t=i.Uht(e);this.jft.oat(r,e.YM,e.ZM,s,i.$st,t),h.push(this.jft)}hk(this.Sl,h)}async Qft(t,e,i,s,n){var r;let h;if(Bv(n),t.Vm===lt.cS){let e=t.LS.pS;this.Yft&&(e=function(t,e){return t.pipeThrough(new Uc(new BF(e)))}(e,this.Yft)),h={Vm:lt.cS,LS:e}}else{let e=new x(t.LS.nst);this.Yft&&(e=function(t,e){let i=ki(t);const s=new xh(Nt(i),new lh),n=z.sx(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Vm===BA.SR&&(i=MF(i,s,e))}return i}(e,this.Yft)),h={Vm:lt.KQ,LS:e}}const o={j8:e.YM,ct:e.ct,QO:s,CZ:null==(r=i.$st)?void 0:r.KI},a=this.fit.Sl;await this.Zft(),await this.fit.sJ(h,o,n);return function(t,e,i,s){let n,r,h=e.bB(t.vB());h=h.bB(i.bB(e)),!1;0===h.U?(n=s.ZM,r=n):(n=h.Tn(0),r=h.Pn(0));return{Qot:n,Kot:r}}(a,this.fit.Sl,this.fit.GJ,e)}async Eit(t,e,i){var s;Bv(i),this.jft&&this.jft.Eit(new x(t.nst));let n=new x(t.nst);if(this.Jft(e)){const t=this.Wft.$ft;let e,i=[];t&&(i=fn(t.t_t,(t=>t.MV)),e=t.e_t.gU?hn(t.e_t.gU):void 0);const s=RF(n,i,e);s?(this.Yft=s.Dft,n=s.xft):this.Yft=void 0}const r={Vm:lt.KQ,LS:n};await this.Zft(),await this.fit.hJ(r,{CZ:null==(s=e.$st)?void 0:s.KI},i)}rat(t,e,i){return this.fit.sc(t,e,i)}DK(t,e){this.fit.jJ(t,e)}NK(t,e){this.fit.YJ(t,e)}Uft(){return this.fit?this.fit.Sl:r.Ol()}Fft(){return this.fit?this.fit.GJ:r.Ol()}i_t(){return this.fit?this.fit.sc(0,1/0):Promise.resolve()}s_t(){return this.fit&&(this.fit.pn(Xh.GQ,this.Os),this.fit=void 0),Promise.resolve()}async n_t(t){var e;const i=DL.mot(null!=(e=t.Iat)?e:t.Nnt,this.aot).Oq;this.fit||(this.fit=this.Wft.r_t(i),this.fit.wn(Xh.GQ,this.Os),this.got=new ZL(this.fit)),await this.Zft()}On(t,e){const i=Mr.fp([e]);this.kF.tf(),this.kF=i;const s=this.h_t(t,this.o_t,i.ap);return this.o_t=s,s}a_t(t){if(Qe(this.u_t,Zo.CEA608))return;const e=t.iht._at;if(function(t){return t.some((t=>t.H2===SF||t.H2===kF))}(e)){this.jft=new pF(this.AF);const t=function(t){const e=[];for(const i of t)if(i.H2===SF){const t=jN(i.yE);for(const i of t)e.push(i)}else if(i.H2===kF){const t=bF(i.yE);for(const i of t)if(i.I5<=4){const t=TF[i.I5];e.push(yh({},i,{I5:t}))}}return e}(e);for(const e of t)this.jft.gft(e);this.Oft.UV(this.jft.Z)}}async h_t(t,e,i){Bv(i),e&&await e.catch(De),this.Fat===t&&this.c_t||(await this.l_t(),Bv(i),await this.i_t(),Bv(i),t&&await this.bF(t))}async l_t(){const t=this.Fat;this.Fat=void 0,this.c_t=!1,this.Vft=void 0,t&&(t.pn(Fe.II,this.d_t),t.Mat(!1),t.pn(Fe.NO_QUALITY,this.Os)),this.f_t&&(this.f_t.bn(),this.f_t=void 0),this.qat&&(await this.qat.bn(),this.qat=void 0),this.jft&&(this.Oft.WV(this.jft.Z),await this.jft.bn())}async bF(t){this.Fat=t,this.a_t(t),t.wn(Fe.II,this.d_t),t.wn(Fe.NO_QUALITY,this.Os),await this.n_t(t),this.qat=this.__t(t),this.qat.wn(WF,this.Os),this.qat.wn("tnt",this.Xft),this.qat.ont=t.Iat,this.f_t=new CF(this.rM,this.qat),this.f_t.wn(Fe.kI,this.bat),t.Mat(!0),this.c_t=!0}__t(t){return new YL(this,this.rM,this.rM,this.TF,this.yW,this.dat,this.Ert,this._ot,this.aot,this.got,this.Oot,this.lH).Z8(t)}async sr(t){this.kF.tf(),this.o_t&&(await this.o_t.catch(De),this.o_t=void 0),await this.l_t(),t||await this.i_t(),await this.s_t()}async v_t(){await this.l_t()}yat(t){var e;null==(e=this.Oat)||e.yat(t)}async wat(t,e){var i,s;await this.Ent(),null==(i=this.Oat)||i.wat(e);const n=null==(s=this.qat)?void 0:s.rnt.bht.vht(t);if(n&&n.U>0)for(let t=0;t<n.U;t++){var r;await(null==(r=this.fit)?void 0:r.sc(n.Tn(t),n.Pn(t)))}await this.Int()}g_t(t){const e=t.Ht.Iat;if(void 0===e)return this.w_t(t);if(e.some((t=>this.got.nK(t))))return this.w_t(t);this.wo(new o("m_t"))}w_t(t){this.qat&&this.Fat&&this.Fat===t.Ht&&(this.qat.ont=this.Fat.Iat)}async Ent(t){this.qat&&await this.qat.Ent(t)}async Int(t){this.qat&&await this.qat.Int(t)}xG(){const t=this.Sl.MB;return this.yW.xG(t)}Zft(){const t=this.Wft.dht,e=w.max(0,t.Tn(0)-.1),i=t.Pn(0)+.01;return this.fit.yJ(e,i)}Jft(t){if(!Oe(t.Oq))return!1;if(this.Wft.F2)return!0;return void 0!==this.Wft.$ft}Cnt(t){if(!nt(this.XJ))return;const e=this.qat,i=t.qat;void 0!==e&&void 0!==i&&e.Cnt(i,this.Tn,this.Pn)}async bn(t){this.Bo();try{await this.sr(t),await this.v_t()}catch(t){}}constructor(t,e,i,s,n,r,h,o,a,u,c,l,d){super(),this.Fat=void 0,this.qat=void 0,this.c_t=!1,this.kF=new Mr,this.o_t=void 0,this.Vft=void 0,this.fit=void 0,this.got=new JL,this.Yft=void 0,this.jft=void 0,this.Oft=new je([]),this.Xft=()=>{!this.mnt()&&this.cht()&&this.Wft.Xft()},this.bat=t=>{this.Fat.bat(t),this.wo(new _O(t.tht,t.kft))},this.d_t=t=>{this.g_t(t)},this.Wb=function(){const t=zF;return zF+=1,t}(),this.XJ=t,this.TF=s,this.yW=n,this.Wft=e,this.rM=i,this.Ert=r,this.AF=h,this.Kft=o,this._ot=a,this.aot=a?ab(t,a):void 0,this.Oot=u,this.u_t=c,this.dat=l,this.lH=d}};var zF=0;var XF=class extends Re{yG(t,e){return this.p_t(t,e)}async p_t(t,e){for(const e of t)this.y_t(e);await this.On(e);for(const t of this.b_t.A_t)t.Vm===Be.lS&&(t.Nnt&&0!==t.Nnt.length?await this.T_t.bF(t):this.wo(new lO("No supported representation found in the AdaptationSet with mimetype : "+t.Vm)))}get KI(){return this.HM}get ct(){return this.rM.ct}S_t(t){return new qF(t,this,this.rM,this.TF,this.yW,this.Ert,this.AF,this.Kft,this.k_t,this.Oot,this.u_t,this.dat,this.lH)}mnt(){return this.cut.some((t=>t.mnt()))}cht(){return 0!==this.cut.length&&this.cut.every((t=>t.cht()))}Xft(){this.E_t()&&this.wo(new fO)}r_t(t){if(Kc(t,"audio")){if(this.kJ.N$)return this.kJ.N$}else if(Kc(t,"video")&&this.kJ.B$)return this.kJ.B$;throw new v("Cannot allocate source buffer for mime type "+t)}P_t(t){t.wn([Yo.la,Uv.Gp,Uv.Kp,Uv.jp,Uv.Zp,Uv.Ep],this.Os),t.wn(Xh.GQ,this.I_t),t.wn("m_t",this.Os)}get Rt(){return this.cut.some((t=>t.Rt))}async C_t(t){await Promise.all(this.cut.map((e=>e.bn(t)))),us(this.cut)}get ht(){return this.TM}get Sl(){if(0===this.cut.length)return r.Ol();const t=this.cut.map((t=>t.Sl));let e=r.OB(0,1/0);for(const i of t)e=e.Cn(i);if(0===e.U)return e;if(this.cht()){const t=e.Cn(this.dht);if(0===t.U)return e;const i=t.Pn(t.U-1);let s=0;for(const t of this.cut)s=w.max(s,t.zft);i<=s&&(e=e.Xl(new r([i,s],[!0,!0])))}return e}get F2(){return this.rM.F2}get Yu(){return this.rM.Yu}get $ft(){return this.R_t}get Pn(){if(this.x_t){const t=this.ct;if(!j(t)&&t!==fo)return t}if(!this.cut.length)return NaN;let t=0;for(const e of this.cut)t=w.max(t,e.Pn);return t}get x_t(){const t=this.b_t.Zot;if(t.Vm===Is.CF)return!1;const e=t.D_t;return 0!==e.length&&this.b_t===e[e.length-1]}get Cl(){if(!this.cut.length)return r.Ol();let t=new r([0,1/0]);for(const e of this.cut)t=t.Cn(e.Cl);if(t.U>0&&this.x_t&&isFinite(this.ct)){const e=this.ct,i=t.Pn(t.U-1);e>i&&(t=t.Xl(r.OB(i,e).vB()))}return t}get iW(){return this.b_t}get nt(){return this.Au}get rt(){return this.kM}get Ti(){return this.Zf.Ti}get Ci(){return this.Zf.Ci}get jV(){const t=this.Yu,e=this.Sl,i=e.TB(t);if(-1!==i)return{Tn:e.Tn(i),Pn:e.Pn(i)}}get dht(){const t=this.b_t.Tn,e=this.x_t?1/0:this.b_t.Pn;return r.OB(t,e)}E_t(){if(this.mnt())return!1;if(!this.cht())return!1;const t=this.Sl;if(0===t.U)return!1;const e=this.Yu;if(this.x_t)return t.Tn(t.U-1)<=e;{const i=t.Cn(this.dht);if(0===i.U)return!0;const s=i.Tn(i.U-1),n=i.Pn(i.U-1)+.1;return s<=e&&e<=n}}get N_t(){return this.B_t}async Ent(t){this.B_t||(this.B_t=!0,await Promise.all(this.cut.map((e=>e.Ent(t)))))}async Int(t){this.B_t&&(this.B_t=!1,await Promise.all(this.cut.map((e=>e.Int(t)))))}async bn(t){this.rM.pn(Uv.$p,this.M_t),this.rM.pn(Uv.Cp,this.L_t),this.Bo(),this.b_t.pn(We.Yst,this.Os),this.O_t.tf(),this.o_t&&(await this.o_t.catch(De),this.o_t=void 0),await this.C_t(t),await this.T_t.bn(),this.TM.bn(),this.kM.bn(),this.Au.bn(),this.F_t()}y_t(t){this.U_t.push(t),t.wn("V_t",this.H_t);const e=t.Vm===Be.hk?this.TM:this.kM;for(const i of t.Z)e.tt(i)}W_t(t){const e=t.Vm===Be.hk?this.TM:this.kM;for(const i of t.Z)e.it(i),i.bn();t.bn(),Ko(this.U_t,t)}F_t(){for(let t=this.U_t.length-1;t>=0;t--)this.W_t(this.U_t[t])}get q_t(){return this.U_t.map((t=>t.Oat)).filter(Ee)}get z_t(){return this.cut.map((t=>t.Oat)).filter(Ee)}On(t,e){return this.O_t.tf(),this.O_t=Mr.fp([e]),this.o_t=qe(this.zk(t,this.o_t,this.O_t.ap),this.O_t).catch(this.X_t),this.o_t}async zk(t,e,i){e&&await e.catch(De),Bv(i);const s=[],n=this.cut.slice(),r=t.slice();us(this.cut);for(const t of n){const e=t.Oat;e&&Qe(r,e)?(this.cut.push(t),s.push(t.On(e,i)),Ko(r,e)):(this.Au.WV(t.nt),await t.bn(),Bv(i))}for(const t of r){const e=this.S_t(t.cnt);this.Au.UV(e.nt),this.cut.push(e),this.P_t(e),s.push(e.On(t,i))}await Promise.all(s)}async hK(t,e,i){this.kJ!==i&&(this.kJ=i,await this.C_t(!1)),await this.On(t),this.R_t=e}async G_t(t){for(const e of this.cut){const i=e.Oat;if(void 0!==i)for(const s of i.iht.Nnt){(s.xV||[]).some((e=>e.gU&&Rg(fu(t),hn(e.gU))))&&!s.Bat&&(s.Bat=!0,await e.wat(s,s.$st),this.wo(new Jc(new ga(X.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions"))))}}}async Q_t(t){for(const e of this.cut){const i=e.Oat;if(void 0!==i)for(const s of i.Nnt){const i=s.xV,n=s.$st;if(void 0===i||0===i.length||void 0===n)continue;const r=this.K_t(i,t.uy);n.Ltt!==r&&(r?e.yat(n):await e.wat(s,n))}}}K_t(t,e){let i=!1;return e.Ny(((e,s)=>{t.some((t=>t.gU&&Rg(fu(s),hn(t.gU))))&&"usable"===e&&(i=!0)})),i}Cnt(t){if(void 0===t)return;const e=t.b_t;if(this.b_t.j_t===e||this.b_t.Y_t===e)for(const e of this.cut){const i=bv(t.cut,(t=>t.zJ===e.zJ));void 0!==i&&e.Cnt(i)}}constructor(t,e,i,s,n,r,h,o,a,u,c,l,d,f){var _,v;super(),this.TM=new mn,this.kM=new mn,this.U_t=[],this.O_t=new Mr,this.B_t=!0,this.cut=[],this.o_t=void 0,this.I_t=Zi((()=>{this.wo(new xu(this.Yu))}),350),this.H_t=t=>{const e=t.Z_t.Oat;if(e)for(const t of this.U_t){var i;t.Oat&&t.Oat!==e&&t.Vm===(null==(i=e.Tat)?void 0:i.Vm)&&(t.pn("V_t",this.H_t),t.Oat.Rt=!1,t.wn("V_t",this.H_t))}this.Os(t)},this.X_t=t=>{Eh(t)||this.wo(new _n(lp(t,X.MEDIA_LOAD_ERROR)))},this.M_t=t=>{const e=t.o2;e&&this.G_t(e).catch(this.X_t)},this.J_t=t=>{this.Q_t(t).catch(this.X_t)},this.L_t=t=>{const e=t.o2;if(e)for(const t of this.z_t)for(const i of t.iht.Nnt){const s=(i.xV||[]).some((t=>t.gU&&Rg(fu(e),hn(t.gU))));i.Bat&&s&&(i.Bat=!1,i.$st&&t.yat(i.$st))}},this.TF=i,this.yW=s,this.Ert=n,this.rM=t,this.HM=xs(),this.U_t=[],this.b_t=h,this.R_t=o,this.lH=f,this.AF=u,this.T_t=new cO(t,i,s,n,u,null==(v=null==r||null==(_=r.dash)?void 0:_.segmentRelativeVttTiming)||v),this.Au=new je([this.T_t.nt]),this.Oot=l,this.u_t=d,this.b_t.wn(We.Yst,this.Os),this.Zf=a,this.kJ=e,this.dat=r.lowLatency,this.Kft=c,this.k_t=r.abr,this.rM.wn(Uv.$p,this.M_t),this.rM.wn(Uv.Cp,this.L_t)}};t(),t(),t();var GF=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,QF=class t{static Sx(e){const i=e.match(GF);if(!i)throw new v("The given value could not be parsed as a valid DateTimeInterval");const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,h=Number(i[4])||0,o=Number(i[5])||0,a=Number(i[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get Nut(){return _r.EO(this.$_t,1e3)}tvt(){return this.$_t}evt(){return 1e3*this.$_t}constructor(t){this.$_t=t}};t();var KF=function(t){return t.ivt="progressive",t.svt="interlaced",t.zS="unknown",t}({});t();var jF=class{SL(){return this.nvt/this.rvt}constructor(t,e){this.nvt=t,this.rvt=e}},YF=/^(?:true|false)$/i,ZF=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function Fs(t){if(void 0!==t)return QF.Sx(t)}function JF(t){if(void 0===t)return;const e=t.match(ZF);if(!e)throw new v("The given value could not be parsed as a valid Date");const[,i,s,n,r,h,o,a,u,c,l,d]=e,f=("-"===i?-1:1)*Number(s),_=Number(n)-1,g=Number(r),m=Number(h);let p=Number(o);const y=Number(a),A=Number("0."+(u||"")),b=w.round(1e3*A);if(c){p-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,_,g,m,p,y,b));if(j(T.getTime()))throw new v("The given value could not be parsed as a valid Date");return T}function $F(t){if(!t)return;const e=/(\d+)-(\d+)/.exec(t);return e?[cs(e[1]),cs(e[2])]:void 0}function tU(t){if(void 0!==t){if(!j(Number(t)))try{return Yc.fromString(t,!0)}catch(t){}throw new v("The given value could not be parsed as a valid unsigned long")}}function cs(t){if(void 0===t)return;const e=Number(t);if(!j(e))return e;throw new v("The given value could not be parsed as a valid Number")}function eU(t){if(void 0===t)return;const e=t.split("/"),i=Number(e[0]),s=Number(e[1]||1);if(!j(i)&&!j(s))return new jF(i,s);throw new v("The given value could not be parsed as a valid frame rate")}function ao(t){if(void 0!==t){if(YF.test(t))return"true"===t.toLowerCase();if(!j(k(t)))return Boolean(k(t));throw new v("The given value could not be parsed as a valid Boolean.")}}function iU(t){return{qS:t.DE,ovt:ao(t.NE("availabilityTimeComplete")),avt:cs(t.NE("availabilityTimeOffset"))}}function sU(t){return t.map(iU)}function nU(t){const e=_U(t),i=function(t,e,i,s){let n=t.BE(i,e);return void 0===n&&(n=t.NE(s+":"+e)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=RS(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Bg(n.DE)),!s){const e=RS(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==e&&(s=function(t){const e=yi(t.DE),i=new x([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=e.length,n=12+i.length+4+s,r=new ArrayBuffer(n),h=new x(r),o=new DataView(r),a=new lh;Vc(o,a,n),Vc(o,a,1886614376),Vc(o,a,0),vo(o,a,i),Vc(o,a,s),vo(o,a,e),!1;return h.buffer}(e))}return{gU:i,W2:s,H2:e.H2,yE:e.yE}}function rU(t){return{uvt:t.NE("sourceURL"),Knt:$F(t.NE("range"))}}function hU(t,e){const i=t.NE("d"),s=t.NE("t"),n=cs(t.NE("r"));e.push({ct:i,YM:s,cvt:n})}function oU(t){return{xrt:t.NE("index"),lvt:$F(t.NE("indexRange")),Kx:t.NE("media"),dvt:$F(t.NE("mediaRange"))}}function aU(t){const e=cU(t),i=function(t){const e=t.map(oU);return e.length>0?e:void 0}(t.EE("SegmentURL"));return yh({},e,{fvt:i,_vt:t.NE("xlink:href"),vvt:t.NE("xlink:actuate")})}function uU(t){const e=ao(t.NE("availabilityTimeComplete")),i=cs(t.NE("availabilityTimeOffset")),s=$F(t.NE("indexRange")),n=ao(t.NE("indexRangeExact")),r=t.EE("Initialization");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.PE+" element can not have more than one Initialization element.");const h=1===r.length?rU(r[0]):void 0,o=tU(t.NE("presentationTimeOffset")),a=t.EE("RepresentationIndex");if(a.length>1)throw new v("The provided MPEG-DASH document's "+t.PE+" element can not have more than one RepresentationIndex element.");return{ovt:e,avt:i,lvt:s,gvt:n,wvt:h,mvt:o,pvt:1===a.length?rU(a[0]):void 0,yvt:Fs(t.NE("timeShiftBufferDepth")),Wx:cs(t.NE("timescale"))}}function cU(t){const e=uU(t),i=t.EE("BitstreamSwitching"),s=i.length>0?rU(i[0]):void 0,n=cs(t.NE("duration")),r=t.EE("SegmentTimeline");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.PE+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const e=[],i=t.EE("S");for(const t of i)hU(t,e);return e}(r[0]):void 0;return yh({},e,{Avt:s,ct:n,Iit:h,bvt:cs(t.NE("startNumber")),Tvt:cs(t.NE("endNumber"))})}function lU(t){return{Svt:function(t){if(!t)return;const e=t.split(/\s/);return e.length>1?(e.length=2,e.map(cs)):1===e.length?e.map(cs)[0]:void 0}(t.NE("audioSamplingRate")),Let:t.NE("codecs"),kvt:ao(t.NE("codingDependency")),xV:function(t){if(0!==t.length)return t.map(nU)}(t.EE("ContentProtection")),Evt:function(t){return t.map(vU)}(t.EE("EssentialProperty")),Pvt:function(t){return t.map(gU)}(t.EE("SupplementalProperty")),Qat:eU(t.NE("frameRate")),Ci:cs(t.NE("height")),Ivt:cs(t.NE("maxPlayoutRate")),Cvt:cs(t.NE("maximumSAPPeriod")),Oq:t.NE("mimeType"),Rvt:t.NE("profiles"),xvt:t.NE("sar"),Dvt:function(t){switch(t){case KF.ivt:case KF.svt:case KF.zS:return t;default:return}}(t.NE("scanType")),Nvt:t.NE("segmentProfiles"),Bvt:cs(t.NE("startWithSAP")),Ti:cs(t.NE("width"))}}function dU(t){const e=sU(t.EE("BaseURL")),i=t.EE("SegmentBase");if(i.length>1)throw new v("The provided MPEG-DASH document's "+t.gE+" element can not have more than one SegmentBase element.");const s=1===i.length?uU(i[0]):void 0,n=function(t){const e=t.map(aU);return e.length>0?e:void 0}(t.EE("SegmentList")),r=t.EE("SegmentTemplate");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.gE+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return yh({},cU(t),{Mvt:t.NE("bitstreamSwitching"),Lvt:t.NE("index"),Ovt:t.NE("initialization"),Fvt:t.NE("media")})}(r[0]):void 0;return{Uvt:e,Vvt:s,Hvt:n,Wvt:h}}function fU(t){const e=lU(t),i=dU(t),s=cs(t.NE("bandwidth")),n=t.NE("dependencyId"),r=t.NE("id"),h=t.NE("mediaStreamStructureId"),o=cs(t.NE("qualityRanking"));if(t.EE("SegmentBase").length>1)throw new v("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return yh({},e,i,{PV:s,qvt:n,o:r,zvt:h,Xvt:o})}function _U(t){return{H2:t.NE("schemeIdUri"),yE:t.NE("value")}}function vU(t){return _U(t)}function gU(t){return _U(t)}function wU(t){return _U(t)}function mU(t){return _U(t)}function pU(t){var e;const i=lU(t),s=dU(t),n=function(t){return t.map(mU)}(t.EE("Accessibility")),r=ao(t.NE("bitstreamSwitching")),h=t.NE("contentType"),o=cs(t.NE("group")),a=cs(t.NE("id")),u=(null==(e=t.EE("Label")[0])?void 0:e.DE)||"",c=t.NE("lang"),l=cs(t.NE("maxBandwidth")),d=eU(t.NE("maxFrameRate")),f=cs(t.NE("maxHeight")),_=cs(t.NE("maxWidth")),g=cs(t.NE("minBandwidth")),w=eU(t.NE("minFrameRate")),m=cs(t.NE("minHeight")),p=cs(t.NE("minWidth")),y=t.NE("par"),A=function(t){return t.map(fU)}(t.EE("Representation"));if(0===A.length)throw new v("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const b=function(t){return t.map(wU)}(t.EE("Role")),T=ao(t.NE("segmentAlignment"))||!1,S=cs(t.NE("selectionPriority")),k=S||1,E=ao(t.NE("subsegmentAlignment"))||!1;let P;try{P=cs(t.NE("subsegmentStartsWithSAP"))}catch(t){}return yh({},i,s,{_at:n,Avt:r,yS:h,Tat:o,o:a,_h:u,gs:c,Gvt:l,Qvt:d,Kvt:f,jvt:_,Yvt:g,Zvt:w,Jvt:m,$vt:p,tgt:y,Nnt:A,iut:b,egt:T,zH:k,igt:E,sgt:P,ngt:t.NE("xlink:actuate")||"onRequest",rgt:t.NE("xlink:href")})}function yU(t){const e=tU(t.NE("presentationTime"))||Yc.ZERO,i=tU(t.NE("duration")),s=cs(t.NE("id")),n=function(t){const e=t.xE,i={};for(let t=0;t<e.length;t++)i[e[t].l]=e[t].yE;return i}(t),r=t.DE;return{zN:e,ct:i,o:s,xE:n,LS:""!==r.trim()?r:t.NE("messageData")||""}}function AU(t){return{rgt:t.NE("xlink:href"),ngt:t.NE("xlink:actuate"),H2:t.NE("schemeIdUri"),yE:t.NE("value"),Wx:cs(t.NE("timescale")),mvt:tU(t.NE("presentationTimeOffset")),Fq:t.EE("Event").map(yU)}}function bU(t){const e=dU(t),i=t.EE("AssetIdentifier");if(i.length>1)throw new v("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===i.length?function(t){return _U(t)}(i[0]):void 0,n=function(t){return t.map(pU)}(t.EE("AdaptationSet")),r=ao(t.NE("bitstreamSwitching")),h=Fs(t.NE("duration")),o=function(t){return t.map(AU)}(t.EE("EventStream")),a=t.NE("id"),u=Fs(t.NE("start")),c=(t.EE("Subset"),t.NE("xlink:href"));return yh({},e,{nut:n,hgt:s,Avt:r,ct:h,ogt:o,o:a,Tn:u,ngt:t.NE("xlink:actuate"),rgt:c})}function TU(t){const e=t.NE("schemeIdUri");if(!e)return;return{H2:e,yE:t.NE("value")}}function SU(t,e){const i=JF(t.NE("availabilityEndTime")),s=JF(t.NE("availabilityStartTime")),n=sU(t.EE("BaseURL")),r=t.NE("id"),h=function(t){return t.map((t=>""+t.DE))}(t.EE("Location")),o=Fs(t.NE("maxSegmentDuration")),a=Fs(t.NE("maxSubsegmentDuration")),u=Fs(t.NE("mediaPresentationDuration")),c=(t.EE("Metrics"),Fs(t.NE("minBufferTime")));if(!c)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=Fs(t.NE("minimumUpdatePeriod")),d=function(t){return t.map((t=>bU(t)))}(t.EE("Period"));if(!d.length)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.NE("profiles");if(!f)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=JF(t.NE("publishTime")),g=Fs(t.NE("suggestedPresentationDelay")),w=Fs(t.NE("timeShiftBufferDepth")),m=function(t){switch(t){case Is.IF:case Is.CF:return t;default:return}}(t.NE("type")),p=function(t){const e=[];for(const i of t){const t=TU(i);t&&e.push(t)}return e}(t.EE("UTCTiming")),y=function(t){if(0===t.length)return;const e=t[0],i=e.EE("Latency");if(0===i.length)return;const s=function(t){const e=t[0],i=cs(e.NE("target"));if(void 0===i)return;const s=cs(e.NE("min")),n=cs(e.NE("max"));return{agt:i,yO:s,pO:n}}(i);if(void 0===s)return;const n=function(t){if(0===t.length)return;const e=t[0],i=cs(e.NE("max")),s=cs(e.NE("min"));return{yO:s,pO:i}}(e.EE("PlaybackRate"));return{ugt:s,Hu:n}}(t.EE("ServiceDescription"));return{cgt:i,lgt:s,Uvt:n,o:r,dgt:h,fgt:e,_gt:o,vgt:a,ggt:u,wgt:c,mgt:l,D_t:d,Rvt:f,pgt:_,ygt:g,yvt:w,Vm:m,Agt:p,bgt:y}}var kU=class{Tgt(t,e){return function(t,e){if(!t)throw new v("The provided MPEG-DASH document does not contain a valid MPD root element.");return SU(t,e)}(Gn.vE(t).UE,e)}};function EU(t){return{get bandwidth(){return t.PV},get codecs(){return t.Let},get id(){return t.o},get uid(){return t.KI},get name(){return t._h},get averageBandwidth(){return t.Sgt},get label(){return t._h},set label(e){t._h=ci(e)},get available(){return t.Ltt},get score(){return t.kgt},addEventListener(e,i){t.wn(e,i)},removeEventListener(e,i){t.pn(e,i)}}}function PU(t){return Xe(EU(t),{get height(){return t.Ci},get width(){return t.Ti},get frameRate(){return t.Qat},get firstFrame(){return t.Egt}})}function IU(t){return Xe(EU(t),{get audioSamplingRate(){return t.Svt}})}t(),t(),t(),t(),t(),t(),t(),t();var Rs=class extends o{constructor(t){super("update"),this.quality=t}},CU=class extends Re{get _h(){return this.ec}set _h(t){this.ec!==t&&(this.ec=t,this.wo(new Rs(this.ba)))}get Sgt(){}get Ltt(){return this.Pgt}get kgt(){}mF(){this.Pgt=!1,this.wo(new Rs(this.ba))}wF(){this.Pgt=!0,this.wo(new Rs(this.ba))}constructor(t,e,i,s,n){super(),this.o=t,this.PV=e,this.Let=i,this.Igt=n,this.KI=cT(),this.ec=s||"",this.Pgt=!0}},RU=class extends CU{get ba(){return this.Zu||(this.Zu=PU(this)),this.Zu}constructor(t,e,i,s,n,r,h,o,a=0){super(t,e,i,s,n),this.Qat=r,this.Ti=h,this.Ci=o,this.Egt=a,this.Zu=void 0}},xU=class extends CU{get ba(){return this.Zu||(this.Zu=IU(this)),this.Zu}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.Svt=r,this.Zu=void 0}};t(),t();var As=class extends Re{get Cgt(){const t=this.Rgt();return null==t?void 0:t.Tn}get xgt(){const t=this.Rgt();return null==t?void 0:t.Pn}constructor(...t){super(...t),this.Dgt=t=>{this.wo(t)}}},DU=class extends As{get iht(){return this.Snt}get Svt(){var t;return null!=(t=this.Ngt.LS.Svt)?t:this.iht.Svt}get PV(){return this.Ngt.LS.PV||0}get Let(){const t=this.Ngt.LS;return t.Let?[t.Let]:this.iht.Let}get Bgt(){const t=this.Ngt.LS;return t.Let?[t.Let]:[]}get Ew(){return this.Ngt.LS.Let||this.iht.Ew}get kvt(){return this.Ngt.LS.kvt||this.iht.kvt}get xV(){return this.Ngt.LS.xV||this.iht.xV}get yS(){return this.Oq+'; codecs="'+this.Ew+'"'}get Evt(){const t=this.Ngt.LS;return t.Evt.length?t.Evt:this.iht.Evt}get ba(){return this.Zu||(this.Zu=function(t){return{get id(){return t.o},get type(){return t.Vm},get bandwidth(){return t.PV},get width(){return t.Ti},get height(){return t.Ci},get frameRate(){var e,i;return null!=(i=null==(e=t.Qat)?void 0:e.SL())?i:NaN},get audioSamplingRate(){return t.Svt}}}(this))}get Qat(){var t;return null!=(t=this.Ngt.LS.Qat)?t:this.iht.Qat}get Ci(){return this.Ngt.LS.Ci||this.iht.Ci}get o(){return this.Ngt.LS.o||""}get iat(){return this.Mgt}set iat(t){this.Mgt=t}get eat(){const t=this.Ngt.Lgt();if(t)return{qS:t.qS,Knt:t.Knt,Ak:this.Zot.Ak}}get Ivt(){return this.Ngt.LS.Ivt||this.iht.Ivt||1}get Cvt(){return this.Ngt.LS.Cvt||this.iht.Cvt}get Zot(){return this.Vht.Zot}get Oq(){return this.Ngt.LS.Oq||this.iht.Oq}get Vht(){return this.iht.Vht}get Rvt(){return this.Ngt.LS.Rvt||this.iht.Rvt}get $st(){return this.Ogt}get xvt(){return this.Ngt.LS.xvt||this.iht.xvt}get Dvt(){return this.Ngt.LS.Dvt||this.iht.Dvt}get Fgt(){return this.Ngt.Fgt}get Nvt(){return this.Ngt.LS.Nvt||this.iht.Nvt}get Iit(){return this.Ngt.Iit}get Bvt(){return this.Ngt.LS.Bvt||this.iht.Bvt}get Vm(){const t=this.Oq.split("/")[0];return"application"===t||"text"===t||ic(this.Oq,this.Let)?Be.lS:"video"===t?Be.wl:"audio"===t?Be.hk:"image"===t?Be.ck:Be.zS}get Ti(){return this.Ngt.LS.Ti||this.iht.Ti}get zht(){return this.Ugt}set zht(t){this.Ugt=t}get Bat(){return this.Vgt}set Bat(t){this.Vgt=t}eot(t){const e=Pc(t)?this.Ngt.Hgt(t):this.Ngt.eot(t);return{qS:e.qS,Knt:e.Knt,Ak:this.Zot.Ak}}Wgt(){return this.Ngt.Wgt()}Rgt(){return this.Ngt.Rgt()}qgt(){return this.Ngt.qgt()}Ght(t){return this.Ngt.Ght(t)}Kht(t,e,i){return this.Ngt.Kht(t,this.Zot.Ak,e,i)}Uot(t){return Pc(t)?this.Iit.zgt(t,this.Ngt):this.Iit.Uot(t)}Uht(t){return Pc(t)?this.Iit.Xgt(t,this.Ngt):this.Iit.Uht(t)}bn(){this.Ngt.pn(We.Kst,this.Dgt)}constructor(t,e){if(super(),this.Zu=void 0,this.Mgt=void 0,this.Ugt=!1,this.Vgt=!1,this.Snt=t,this.Ngt=e,this.Ngt.wn(We.Kst,this.Dgt),this.Vm===Be.wl){var i,s;const t=null!=(s=null==(i=this.Qat)?void 0:i.SL())?s:NaN;this.Ogt=new RU(this.o,this.PV,this.Ew,"","",t,this.Ti,this.Ci)}else this.Vm===Be.hk?this.Ogt=new xU(this.o,this.PV,this.Ew,"","",this.Svt):this.Ogt=void 0}},NU=class extends As{get _at(){return this.Ngt.LS._at}get Svt(){var t;return null!=(t=this.Ngt.LS.Svt)?t:-1}get Let(){if(this.Ngt.LS.Let)return[this.Ngt.LS.Let];{const t=[];for(const e of this.Nnt)e.Bgt.length&&-1===t.indexOf(e.Ew)&&t.push(e.Ew);return t}}get Ew(){return this.Let.join()}get kvt(){return this.Ngt.LS.kvt}get xV(){return this.Ngt.LS.xV}get yS(){return this.Oq+'; codecs="'+this.Ew+'"'}get Evt(){return this.Ngt.Evt}get Pvt(){return this.Ngt.Pvt}get Qat(){return this.Ngt.LS.Qat}get Tat(){return this.Ngt.LS.Tat}get Ci(){return this.Ngt.LS.Ci||0}get o(){return this.Ngt.LS.o}get _h(){return this.Ngt.LS._h||""}get Ivt(){return this.Ngt.LS.Ivt}get Cvt(){return this.Ngt.LS.Cvt}get Zot(){return this.Vht.Zot}get Oq(){return this.Ngt.LS.Oq||this.Cat[0].Oq}get Vht(){return this.b_t}get Rvt(){return this.Ngt.LS.Rvt}get Nnt(){return this.Cat}get iut(){return this.Ngt.LS.iut||[]}get xvt(){return this.Ngt.LS.xvt}get Dvt(){return this.Ngt.LS.Dvt}get Nvt(){return this.Ngt.LS.Nvt}get zH(){return this.Ngt.LS.zH}get Bvt(){return this.Ngt.LS.Bvt}get Vm(){const t=(this.Ngt.LS.yS||this.Oq).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||ic(this.Oq,this.Let)?Be.lS:"video"===t?Be.wl:"audio"===t?Be.hk:"image"===t?Be.ck:Be.zS}get Ti(){return this.Ngt.LS.Ti||0}get C5(){return this.Ngt.LS.gs||""}get Yat(){return this.Cgt}get jat(){const t=this.Yat,e=this.xgt;if(void 0===t||void 0===e)return;const i=w.min(e,this.Zot.Ggt);return w.max(t,i)}async Zn(t,e){if(0===this.Cat.length){const i=this.Ngt.Nnt.map((i=>this.Qgt(i,t,e)));this.Cat=(await Promise.all(i)).filter(Ee)}this.Kgt()}async Qgt(t,e,i){const s=new DU(this,t),n=await e(s);if(Bv(i),n)return s}Kgt(){if(!this.Cat.length)throw new v("Detected an AdaptationSet without any supported Representations.")}Rgt(){return this.Ngt.Rgt()}qgt(){return this.Ngt.qgt()}bn(){this.Ngt.pn(We.Kst,this.Dgt);for(const t of this.Cat)t.bn();us(this.Cat)}constructor(t,e){super(),this.Cat=[],this.b_t=t,this.Ngt=e,this.Ngt.wn(We.Kst,this.Dgt)}};function BU(t,e){const i=[];for(const s of e)for(const e of t)i.push(Gn.Ih(e,s));return i}t(),t(),t(),t(),t(),t(),t();var fc=class{jgt(t){const e=t-this.b_t.Tn;if(e<0||e>=this.b_t.ct)return;const i=this.Ygt();return void 0!==i&&Uu(i,e,1e-5)?this.Zgt():this.Jgt(e)}Xht(t){const e=t-this.b_t.Tn;if(!(e<0))return this.$gt(w.min(e,this.b_t.ct))}Zgt(){return this.twt(0)}ewt(){const t=this.b_t.ct;if(isFinite(t))return this.$gt(t)}get iwt(){return this.b_t.nwt.swt&&void 0!==this.rwt()}Wgt(t){if(this.b_t.nwt.Vm===Is.CF){if(this.iwt){const e=this.Zgt(),i=this.rwt();if(void 0===e||void 0===i)return;return{hwt:t,owt:e,awt:i}}const e=this.uwt(t);if(!e)return;return{hwt:t,owt:this.cwt(t),awt:e}}{0;const e=this.Zgt();if(e)return{hwt:t,owt:e,awt:this.ewt()}}}qgt(t,e){if(e){let t=this.Jot(e.owt);const i=this.Jht(e.awt);if(i){const e=this.$ot(i);(!t||e.getTime()<t.getTime())&&(t=e)}return t}{const e=this.Zgt();if(e){const i=this.$ot(e);if(t.getTime()<i.getTime())return i}const i=this.b_t.nwt.lgt;return t.getTime()<i.getTime()?i:void 0}}uwt(t){const e=(t.getTime()-this.b_t.nwt.lgt.getTime())/1e3-this.b_t.Tn+this.lwt;let i=this.$gt(ht(e,0,this.b_t.ct));if(!i)return;if(i=this.dwt(i,t),!i)return;let s=this.Jht(i);for(;s&&this.uat(s,t);)i=s,s=this.Jht(i);return i}cwt(t){let e;const i=this.fwt.yvt;if(i){const s=(t.getTime()-this.b_t.nwt.lgt.getTime())/1e3-this.b_t.Tn-i.tvt();e=this.$gt(ht(s,0,this.b_t.ct)),e||(e=this.Zgt())}else e=this.Zgt();if(!e)return;if(e=this.dwt(e,t),!e)return;let s=this.Zht(e);for(;s&&this.uat(s,t);)e=s,s=this.Zht(e);return e}dwt(t,e){let i=t;for(;i&&this.$ot(i).getTime()>e.getTime();)i=this.Zht(i);if(!i)return;const s=this.Jot(i);if(s&&s.getTime()<=e.getTime()){const t=this.Zht(i);for(t&&this.uat(t,e)&&(i=t);i;){if(this.$ot(i).getTime()>e.getTime())return;if(this.uat(i,e))break;i=this.Jht(i)}if(!i)return}return i}uat(t,e){if(this.iwt)return!0;if(this.$ot(t).getTime()>e.getTime())return!1;const i=this.Jot(t);return!(i&&e.getTime()>=i.getTime())}_wt(t,e){if(this.iwt)return!0;if(this.vwt(t).getTime()>e.getTime())return!1;const i=this.Jot(t);return!(i&&e.getTime()>=i.getTime())}gwt(t,e,i){const s=Ro(e,this.IA)+this.b_t.Tn;return{xrt:t,wwt:e,YM:s,ct:i,ZM:s+i}}vwt(t){return this.b_t.nwt.Vm===Is.CF?new Date(this.b_t.nwt.lgt.getTime()+1e3*(t.YM+t.ct)):this.b_t.nwt.lgt}$ot(t){const e=this.vwt(t);return this.b_t.nwt.Vm===Is.CF?new Date(e.getTime()-1e3*this.lwt):e}Jot(t){let e=1/0;if(this.b_t.nwt.Vm===Is.CF){const i=this.fwt.yvt;i&&(e=this.vwt(t).getTime()+1e3*t.ct+i.evt())}const i=this.b_t.nwt.cgt;return i&&(e=w.min(e,i.getTime())),e===1/0?void 0:new Date(e)}mwt(t,e){return t.xrt+e}get QO(){return this.b_t.Tn-Ro(this.pwt,this.IA)}get mvt(){return Ro(this.pwt,this.IA)}Ght(t){return!1}Kht(t,e,i,s,n){const r=this.ywt(t);if(!r)return Promise.reject(new v("Invalid segment"));const h=this.Awt(r.xrt,e);return h?Promise.resolve(h):Dc(this.bwt(r.xrt,e,i,s),n)}Awt(t,e){}bwt(t,e,i,s){return Promise.reject(new v("Not supported"))}Zht(t){const e=this.ywt(t);if(e)return this.twt(e.xrt-1)}Jht(t){const e=this.ywt(t);if(e)return this.twt(e.xrt+1)}ywt(t){const e=this.twt(t.xrt);if(e&&e.YM===t.YM)return e;const i=this.jgt(t.YM);return i&&i.YM===t.YM?i:void 0}Twt(t,e){const i=this.jht(t);if(!i||!this.Ght(i.xrt))return;const s=this.Awt(i.xrt,e);return s?s.Twt(t):void 0}jht(t){return this.twt(t.Swt)}Uot(t){const e=this.ywt(t);return!!e&&0===e.xrt}zgt(t,e){const i=this.Twt(t,e);return!!i&&0===i.Rrt}Uht(t){const e=this.ywt(t);if(!e)return!1;const i=this.ewt();return!!i&&e.xrt===i.xrt}Xgt(t,e){const i=this.Twt(t,e);if(!i)return!1;const s=this.ewt();if(!s||i.Swt!==s.xrt)return!1;const n=this.Awt(i.Swt,e);return i.Rrt+1===n.U}Wu(){}constructor(t,e){this.b_t=t,this.fwt=e,this.IA=e.Wx,this.lwt=e.avt,this.pwt=e.mvt}},MU=class extends fc{twt(t){if(t<0)return;const e=this.kwt.multiply(t),i=Ro(e,this.IA),s=this.b_t.ct;if(i>=s)return;const n=this.Ewt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.gwt(t,e,s-i)}return isFinite(s)&&i+this.Pwt>s?this.gwt(t,e,s-i):this.gwt(t,e,this.Pwt)}Ygt(){return 0}Jgt(t){const e=w.floor(t/this.Pwt),i=this.Ewt();return void 0!==i&&e>=i?this.twt(i):this.twt(e)}$gt(t){if(t>=this.b_t.ct){const t=w.ceil(this.b_t.ct/this.Pwt)-1,e=this.Ewt();return void 0!==e&&t>=e?this.twt(e):this.twt(t)}return this.Jgt(t)}Ewt(){const t=this.fwt.Tvt;var e;if(void 0!==t)return t-(null!=(e=this.fwt.bvt)?e:1);const i=this.fwt.Iwt;return void 0!==i&&i>0?i-1:void 0}rwt(){if(isFinite(this.b_t.ct))return this.ewt()}Cwt(t,e){return this.kwt.multiply(t.xrt+(e-1))}Zn(){}constructor(t,e){super(e,t);const i=t.Rwt,s=t.ct;if(void 0===i||void 0===s)throw new v("MultipleSegmentBase does not have a segment duration specified.");this.kwt=i,this.Pwt=s}};function LU(t,e,i){const s=e.length;if(0===s)return-1;let n=0,r=s-1,h=t.xwt(e[n]),o=t.Dwt(e[r]);for(;n<=r&&t.Nwt(h,i)<=0&&t.Nwt(i,o)<0;){const a=n+w.floor(t.Bwt(i,h,o)*(r-n)),u=e[a],c=t.xwt(u),l=a+1<s?t.xwt(e[a+1]):t.Dwt(u);if(t.Nwt(l,i)<=0)n=a+1,h=l;else{if(!(t.Nwt(i,c)<0))return a;r=a-1,o=c}}return-1}function OU(t,e){return LU(FU.Gg,t,e)}t(),t(),t();var FU=class t{static get Gg(){return null!=this.Met||(this.Met=new t),this.Met}xwt(t){return t.YM}Dwt(t){return t.ZM}Nwt(t,e){return t.compare(e)}Bwt(t,e,i){return t.subtract(e).toNumber()/i.subtract(e).toNumber()}},UU=.01,VU=class extends fc{twt(t){if(!(t<0))return t<this.Mwt.length?this.Mwt[t].Srt:this.Lwt(t-this.Mwt.length)}Ygt(){if(this.Mwt.length>0)return Ro(this.Mwt[0].YM,this.IA)}Jgt(t){if(this.Owt&&Ro(this.Owt.YM,this.IA)<=t){const e=Ro(this.Owt.YM,this.IA),i=Ro(this.Owt.ct,this.IA),s=w.floor((t-e)/i);return this.Lwt(s)}if(this.Mwt.length>0&&Uu(t,Ro(this.Mwt[0].YM,this.IA),1e-5))return this.Mwt[0].Srt;const e=OU(this.Mwt,Yc.fromNumber(t*this.IA));return e<0?void 0:this.Mwt[e].Srt}$gt(t){if(!this.Owt&&this.Mwt.length>0){const e=this.Mwt[this.Mwt.length-1];if(function(t,e,i){return ch(t,e,i)>=0}(t,Ro(e.ZM,this.IA),1e-5))return e.Srt}const e=this.Ygt();return e&&t<e?this.Mwt[0].Srt:this.Jgt(t)}rwt(){return isFinite(this.b_t.ct)?this.ewt():this.twt(this.Mwt.length-1)}Cwt(t){return this.Fwt(t)}Lwt(t){if(!this.Owt)return;const e=this.Owt.YM,i=this.Owt.ct,s=e.add(i.multiply(t)),n=Ro(s,this.IA),r=this.b_t.ct;if(n>=r)return;const h=this.Mwt.length+t,o=w.min(Ro(i,this.IA),n+r);return this.gwt(h,s,o)}Fwt(t){return t.wwt.add(this.pwt)}Zn(){const t=this.fwt.LS.Iit;if(!t)throw new v("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Uwt(t)}Uwt(t){const e=this.pwt;this.Vwt(t,e);const i=this.Hwt(t);this.Wwt(t,e,i.qwt,i.Swt)}Vwt(t,e){const i=this.Mwt;if(0===t.length)us(i);else{const s=t[0];let n=0;const r=Ro(s.YM?Yc.fromString(s.YM,!1).subtract(e):Yc.ZERO,this.IA);for(;n<i.length&&Ro(i[n].YM,this.IA)<r-UU;)n++;n>0&&i.splice(0,n)}}Hwt(t){const e=this.Mwt,i=this.Aft;let s=0,n=0;for(;s<t.length&&n<e.length;){const r=t[s].cvt||0;if(r<0)break;const h=n+r;if(h>=e.length)break;if(e[h].YM.greaterThanOrEqual(i))break;if(e[n].Srt.xrt===n)n=h+1;else for(;n<=h;)e[n].Srt.xrt=n,n++;0,s++}return{qwt:s,Swt:n}}Wwt(t,e,i,s){const n=this.Mwt;let r,h=i,o=s;for(;h<t.length;){const i=t[h],s=Yc.fromString(i.ct,!1),a=i.cvt||0;let u;if(i.YM){if(u=Yc.fromString(i.YM,!1).subtract(e),o>0){const t=n[o-1];t.ZM.greaterThan(u)&&(t.ct=u.subtract(t.YM),t.ZM=t.YM.add(t.ct))}}else u=o>0?n[o-1].ZM:Yc.ZERO;if(a<0){if(h+1===t.length){r={YM:u,ct:s};break}const i=Yc.fromString(t[h+1].YM,!1).subtract(e);for(;u.lessThan(i);){const t=u.add(s);this.zwt(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.zwt(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.Aft=n[n.length-1].YM),this.Owt=r}zwt(t,e,i,s,n){if(e<t.length){const r=t[e];0,r.ct.equals(s)?r.Srt.xrt=e:t[e]={YM:i,ct:s,ZM:n,Srt:this.gwt(e,i,Ro(s,this.IA))}}else t.push({YM:i,ct:s,ZM:n,Srt:this.gwt(e,i,Ro(s,this.IA))})}constructor(t,e){super(e,t),this.Mwt=[],this.Owt=void 0,this.Aft=Yc.ZERO,this.Zn()}};t();var HU=class{get LS(){return this.Bw}get avt(){return this.Bw&&void 0!==this.Bw.avt?this.Bw.avt:this.Xwt?this.Xwt.avt:0}get mvt(){return this.Bw&&void 0!==this.Bw.mvt?this.Bw.mvt:this.Xwt?this.Xwt.mvt:Yc.ZERO}get yvt(){return this.Bw&&void 0!==this.Bw.yvt?this.Bw.yvt:this.Xwt?this.Xwt.yvt:this.Vht.nwt.yvt}get Wx(){return this.Bw&&void 0!==this.Bw.Wx?this.Bw.Wx:this.Xwt&&this.Xwt.Wx?this.Xwt.Wx:1}get lvt(){return this.Bw&&void 0!==this.Bw.lvt?this.Bw.lvt:this.Xwt?this.Xwt.lvt:void 0}get wvt(){return this.Bw&&void 0!==this.Bw.wvt?this.Bw.wvt:this.Xwt?this.Xwt.wvt:void 0}get Iit(){return this.Gwt||(this.Gwt=this.Qwt()),this.Gwt}Qwt(){if(this.Kwt=this.jwt(),this.Kwt)return this.Kwt;if(this.Xwt)return this.Xwt.Iit;throw new v("Missing media segment information.")}Lgt(t){const e=this.wvt;if(e){return{qS:(void 0!==e.uvt?Gn.Ih(e.uvt,t.Uvt[0]):t.Uvt[0]).href,Knt:e.Knt}}const i=this.lvt;if(i)return{qS:t.Uvt[0].href,Knt:[0,i[0]-1]}}Zn(t){this.Bw=t,this.Kwt&&this.Kwt.Zn()}Wu(){this.Kwt&&(this.Kwt.Wu(),this.Kwt=void 0)}constructor(t,e,i){this.Gwt=void 0,this.Kwt=void 0,this.Vht=t,this.Xwt=e,this.Bw=i}},lr=class extends HU{get ct(){return void 0!==this.Bw.ct?this.Bw.ct/this.Wx:this.Xwt&&WU(this.Xwt)?this.Xwt.ct:void 0}get Rwt(){return void 0!==this.Bw.ct?Yc.fromNumber(this.Bw.ct):this.Xwt&&WU(this.Xwt)?this.Xwt.Rwt:void 0}get bvt(){return void 0!==this.Bw.bvt?this.Bw.bvt:this.Xwt&&WU(this.Xwt)?this.Xwt.bvt:void 0}get Tvt(){return void 0!==this.Bw.Tvt?this.Bw.Tvt:this.Xwt&&WU(this.Xwt)?this.Xwt.Tvt:void 0}jwt(){return void 0!==this.Bw.Iit?new VU(this,this.Vht):void 0!==this.Bw.ct?new MU(this,this.Vht):void 0}};function WU(t){return t instanceof lr}t();var qU=class{Xf(t){return this.Ywt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((e,i,s,n)=>{if("$$"===e)return"$";const r=t[i];if(void 0===r)return e;if(void 0===s)return r.toString();let h=function(t,e){switch(e){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?e:(h=ec(h,Number(s),"0"),h)}))}constructor(t){this.Ywt=t}};var zU=class t extends lr{get Ovt(){return this.Zwt?this.Zwt:this.Xwt&&this.Xwt instanceof t?this.Xwt.Ovt:void 0}get Fvt(){return this.Jwt?this.Jwt:this.Xwt&&this.Xwt instanceof t?this.Xwt.Fvt:void 0}Lgt(t){const e=this.Ovt;if(!e)return super.Lgt(t);const i=e.Xf({Bandwidth:t.LS.PV,RepresentationID:t.LS.o});return{qS:Gn.wm(i,t.Uvt[0])}}eot(t,e){var i;const s=null!=(i=e.Fgt.bvt)?i:1,n=this.Fvt.Xf({Bandwidth:e.LS.PV,Number:e.Iit.mwt(t,s),RepresentationID:e.LS.o,Time:e.Iit.Cwt(t,s)});return{qS:Gn.wm(n,e.Uvt[0])}}Hgt(t,e){}get Iwt(){}constructor(t,e,i){super(t,e,i),this.Zwt=i.Ovt?new qU(i.Ovt):void 0,this.Jwt=i.Fvt?new qU(i.Fvt):void 0}};t();var XU=class t extends lr{eot(t,e){const i=this.fvt[t.xrt],s=e.Uvt[0];let n;return n=i.Kx?Gn.Ih(i.Kx,s):s,{qS:n.href,Knt:i.dvt}}Hgt(t,e){}get fvt(){return void 0!==this.Bw.fvt?this.Bw.fvt:this.Xwt&&this.Xwt instanceof t?this.Xwt.fvt:void 0}get Iwt(){var t;return null==(t=this.fvt)?void 0:t.length}};t(),t(),t(),t();var GU=class{Twt(t){const e=this.Yht(t.Rrt);if(e&&e.YM===t.YM)return e;const i=this.$wt(t.YM);return i&&i.YM===t.YM?i:void 0}},QU=class extends GU{get U(){return this.tmt.length}Yht(t){if(t>=0&&t<this.U)return this.emt(this.tmt[t])}$wt(t){const e=this.imt(t);if(this.tmt.length>0){const t=this.tmt[0];if(e<=Ro(t.YM,this.Wx))return this.emt(t)}const i=OU(this.tmt,Yc.fromNumber(e*this.Wx));if(!(i<0))return this.emt(this.tmt[i])}Qht(t){const e=this.imt(t);if(this.tmt.length>0){const t=this.tmt[this.tmt.length-1];if(e>=Ro(t.ZM,this.Wx))return this.emt(t)}return this.$wt(t)}emt(t){const e=Ro(t.YM,this.Wx)-this.mvt,i=e+this.smt,s=Ro(t.ct,this.Wx);return{Swt:this.Swt,Rrt:t.xrt,YM:i,wwt:Yc.fromNumber(e*this.Wx),ct:s,ZM:i+s,nmt:[t.rmt,t.hmt]}}imt(t){return t-this.smt+this.mvt}constructor(t,e,i,s,n){super(),this.Swt=t,this.Wx=e,this.smt=i,this.mvt=s,this.tmt=n}};t(),t(),t();var KU=class t{qdt(){return this.qR.Fu<this.LS.byteLength}omt(){const e=this.amt(),i=this.umt(),s=this.qR.Fu,n=this.LS.byteLength;let r;r=t.cmt(i)?n-s:t.lmt(i);const h=s+r<=n?r:n-s,o=bn(this.LS,this.qR,h);return new YU(e,Nt(o))}amt(){const t=this.umt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let e=0;for(let i=0;i<t.length;i++)e=256*e+t[i];return e}umt(){const t=_e(this.LS,this.qR.Ty());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-Zv(t));return Gn.Jw(e<=8&&e>=1,"Incorrect log2 value"),bn(this.LS,this.qR,e)}static lmt(t){if(8===t.length&&224&t[1])throw new p("EBML variable sized integer is too large");let e=0;for(let i=0;i<t.length;i++){const s=t[i];if(0===i){e=s&(1<<8-t.length)-1}else e=256*e+s}return e}static cmt(t){for(const e of jU)if(Rg(t,new x(e)))return!0;return!1}constructor(t){this.LS=t,this.qR=new lh}},jU=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],YU=class{dmt(){return this.fmt.byteOffset}_mt(){return new KU(this.fmt)}vmt(){const t=this.fmt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.fmt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let e=0;for(let i=0;i<t;i++){e=256*e+this.fmt.getUint8(i)}return e}gQ(){if(4===this.fmt.byteLength)return this.fmt.getFloat32(0);if(8===this.fmt.byteLength)return this.fmt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,e){this.id=t,this.fmt=e}};function ZU(t,e){const i=function(t){const e=new KU(Nt(t)),i=e.omt();if(i.id!==$U)throw new p("Missing WebM EBML header");const s=e.omt();if(s.id!==tV)throw new p("Missing WebM SegmentElement");const n=s.dmt(),r=function(t){const e=t._mt();let i;for(;e.qdt();){const t=e.omt();if(t.id===eV){i=t;break}}if(!i)throw new p("Missing WebM InfoElement");return function(t){const e=t._mt();let i,s=1e6;for(;e.qdt();){const t=e.omt();t.id===iV?s=t.vmt():t.id===sV&&(i=t.gQ())}if(void 0===i)throw new p("Missing Duration in WebM InfoElement");const n=s/1e9,r=i*n;return{timecodeScale:n,duration:r}}(i)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(e),s=new KU(Nt(t)).omt();if(s.id!==nV)throw new p("Missing WebM CuesElement");const n=function(t,e,i,s){const n=[],r=t._mt();let h,o;for(;r.qdt();){const t=r.omt();if(t.id!==rV)continue;const i=JU(t);if(!i)continue;const s=i.unscaledTime,a=e+i.relativeOffset;void 0!==h&&n.push({xrt:n.length,YM:h,ct:s.subtract(h),ZM:s,rmt:o,hmt:a-1}),h=s,o=a}if(void 0!==h){0;const t=Yc.fromNumber(s/i);n.push({xrt:n.length,YM:h,ct:t.subtract(h),ZM:t,rmt:o,hmt:void 0})}return n}(s,i.segmentOffset,i.timecodeScale,i.duration);return{Wx:w.round(1/i.timecodeScale),gmt:n}}function JU(t){const e=t._mt(),i=e.omt();if(i.id!==hV)throw new p("Missing CueTime in WebM CuePointElement");const s=Yc.fromNumber(i.vmt()),n=e.omt();if(n.id!==oV)throw new p("Missing CueTrackPositions in WebM CuePointElement");const r=n._mt();let h=0;for(;r.qdt();){const t=r.omt();if(t.id===aV){h=t.vmt();break}}return{unscaledTime:s,relativeOffset:h}}var $U=440786851,tV=408125543,eV=357149030,iV=2807729,sV=17545,nV=475249515,rV=187,hV=179,oV=183,aV=241,uV=class extends fc{twt(t){if(0===t)return this.wmt}Ygt(){return 0}Jgt(t){return this.wmt}$gt(t){return this.Jgt(t)}rwt(){return this.wmt}Cwt(t,e){return Yc.ZERO}Wgt(t){const e=this.mmt(t);return e&&{hwt:t,owt:e,awt:e}}mmt(t){const e=this.wmt;return this.uat(e,t)?e:void 0}uwt(t){return this.mmt(t)}cwt(t){return this.mmt(t)}Zn(){}Ght(t){return 0===t&&void 0!==this.pmt}Awt(t,e){const i=e.Uvt[0].href;return this.ymt.get(i)}bwt(t,e,i,s){const n=e.Uvt[0].href;let r=this.Amt.get(n);if(void 0===r){const h=e.Oq,o=this.bmt.ap;if(Oe(h))r=this.Tmt(t,n,i,s,o);else{if(!Xm(h))throw new ke(X.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.Smt(t,n,e,i,s,o)}this.Amt.set(n,r)}return r}async Tmt(t,e,i,s,n){const r=this.pmt,h=await s.yot(e,r,i,n),o=this.kmt(t,h);return this.ymt.set(e,o),o}kmt(t,e){const i=this.pmt,s=z.lx(new DataView(e),new lh);if(s.Vm!==BA.LR)throw new v("Invalid segment index");const n=Kh.Bx(s.LS),r=function(t,e){const i=[];let s=t.rB,n=e+t.hB.toNumber(),r=0;for(const e of t.aB){const t=e.tB,h=Yc.fromNumber(e.ct),o=s.add(h);0===e.$N&&i.push({xrt:r++,YM:s,ct:h,ZM:o,rmt:n,hmt:n+t-1}),n+=t,s=o}return i}(n,i[1]+1);return new QU(t,n.Wx,this.b_t.Tn,Ro(this.pwt,this.IA),r)}async Smt(t,e,i,s,n,r){const h=i.Lgt(),o=this.pmt,a=n.yot(h.qS,h.Knt,s,r),u=n.yot(e,o,s,r),[c,l]=await Promise.all([a,u]),d=this.Emt(t,l,c);return this.ymt.set(e,d),d}Emt(t,e,i){const s=ZU(new x(e),new x(i));return new QU(t,s.Wx,this.b_t.Tn,Ro(this.pwt,this.IA),s.gmt)}Wu(){super.Wu(),this.bmt.tf()}constructor(t,e){super(e,t),this.ymt=sa(),this.Amt=sa(),this.bmt=new Mr,this.pmt=t.lvt,this.wmt=this.gwt(0,Yc.ZERO,this.b_t.ct)}},cV=class extends HU{get bvt(){}eot(t,e){return{qS:e.Uvt[0].href}}Hgt(t,e){return{qS:e.Uvt[0].href,Knt:t.nmt}}jwt(){return new uV(this,this.Vht)}};t();var lV=class extends o{constructor(){super(We.Kst)}};t();var dV=class extends Re{get LS(){return this.Bw}get Uvt(){return this.Pmt}Imt(){var t,e;return null!=(e=this.fwt)?e:null==(t=this.jk)?void 0:t.Imt()}Cmt(t){const e=this.Vht,i=this.jk&&this.jk.Imt();this.Bw.Wvt?this.fwt=new zU(e,i,this.Bw.Wvt):this.Bw.Hvt?this.fwt=new XU(e,i,this.Bw.Hvt[0]):this.Bw.Vvt?this.fwt=new cV(e,i,this.Bw.Vvt):t&&!i&&(this.fwt=new cV(e,i,void 0))}Rmt(t,e){this.Bw=t,this.Pmt=t.Uvt&&t.Uvt.length>0?BU(t.Uvt.map((t=>t.qS)),e):e.slice(),this.fwt&&(t.Wvt?this.fwt.Zn(t.Wvt):t.Hvt?this.fwt.Zn(t.Hvt[0]):t.Vvt&&this.fwt.Zn(t.Vvt))}Rgt(){var t;return null==(t=this.xmt)?void 0:t.Dmt}qgt(){var t;return null==(t=this.xmt)?void 0:t.Nmt}Bmt(t){const e=this.Mmt,i=this.Vht.ct,s=this.xmt,n=this.Lmt(t);s&&Uu(i,e,1e-5)&&gV(s,n)||(this.Mmt=i,this.xmt=n,this.wo(new lV))}Wu(){this.Bo(),this.fwt&&(this.fwt.Wu(),this.fwt=void 0)}constructor(t,e,i){super(),this.fwt=void 0,this.Mmt=1/0,this.xmt=void 0,this.jk=e,this.Rmt(t,i)}};function fV(t){let e,i;for(const i of t){const t=i.Rgt();if(t){e=t.Tn;break}}if(void 0!==e){for(let e=t.length-1;e>=0;e--){const s=t[e].Rgt();if(s){i=s.Pn;break}}return void 0!==i?{Tn:e,Pn:i}:void 0}}function _V(t){if(0===t.length)return;let e=0,i=1/0;for(const s of t){const t=s.Rgt();if(!t)return;if(e=w.max(e,t.Tn),i=w.min(i,t.Pn),e>=i)return}return{Tn:e,Pn:i}}function vV(t){let e;for(const i of t){const t=i.qgt();t&&(!e||t.getTime()<e.getTime())&&(e=t)}return e}function gV(t,e){return function(t,e){return t&&e?t.getTime()===e.getTime():t===e}(t.Nmt,e.Nmt)&&function(t,e){return t&&e?Uu(t.Tn,e.Tn,1e-5)&&Uu(t.Pn,e.Pn,1e-5):t===e}(t.Dmt,e.Dmt)}var wV=class extends As{get nut(){return this.Omt}get Let(){return this.nut.reduce(((t,e)=>{for(const i of e.Let)Qe(t,i)||t.push(i);return t}),[])}get Ew(){return this.Let.length>0?this.Let[0]:""}get Vm(){return this.Omt[0].Vm}get o(){return this.Wb}get Zot(){return this.b_t.Zot}get Oq(){return this.Omt[0].Oq}get Vht(){return this.b_t}get Nnt(){return fn(this.nut,(t=>t.Nnt))}Rgt(){return _V(this.Omt)}qgt(){let t;for(const e of this.Omt){const i=e.qgt();i&&(!t||i.getTime()<t.getTime())&&(t=i)}return t}bn(){this.Bo();for(const t of this.Omt)t.pn(We.Kst,this.Dgt)}constructor(t,e,i){super(),this.b_t=t,this.Wb=e,this.Omt=i.slice();for(const t of i)t.wn(We.Kst,this.Dgt)}};t();var mV=class extends o{constructor(){super(We.Yst)}};function pV(t){const e=[];for(const i of t){let t;const s=i.Tat;void 0===s||(t=bv(e,(t=>t.o===s))),t||(t={o:s,nut:[]},e.push(t)),t.nut.push(i)}return e}t();var yV=class extends As{get nut(){return this.Omt}get A_t(){return this.Fmt}get hgt(){return this.Ngt.LS.hgt}get ct(){return this.Ngt.ct}get Pn(){return this.Tn+this.ct}get ogt(){return this.Ngt.LS.ogt||[]}get o(){return this.Ngt.o}get Zst(){return this.Umt}get Zot(){return this.Vmt}get Y_t(){return this.Vmt.Hmt(this)}get Vht(){return this}get j_t(){return this.Vmt.Wmt(this)}get qmt(){return this.zmt(1/0,w.min)}get Xmt(){return this.zmt(0,w.max)}zmt(t,e){if(0===this.Fmt.length)return;let i=t;for(const t of this.Fmt)if(nt(t.Vm)){const s=t.xgt;if(void 0===s)return;i=e(i,s)}return i}get Tn(){return this.Ngt.Tn}get Ak(){return this.Zot.Ak}Gmt(){this.Umt||(this.Umt=!0,this.wo(new mV),this.bn())}async Zn(t,e){0===this.Omt.length?(await this.Qmt(this.Ngt.nut,t,e),this.Kmt(this.Omt),Bv(e)):await this.jmt(t,e)}async Qmt(t,e,i){for(const s of t){const t=new NU(this,s);try{await t.Zn(e,i),this.Omt.push(t)}catch(t){ta(t)}}}Kmt(t){const e=pV(t);for(const t of e){const e=new wV(this,t.o,t.nut);this.Fmt.push(e)}}async jmt(t,e){for(const i of this.Omt)await i.Zn(t,e)}Rgt(){return this.Ngt.Rgt()}qgt(){return this.Ngt.qgt()}bn(){this.Bo(),this.Ngt.pn(We.Kst,this.Dgt);for(const t of this.Fmt)t.bn();for(const t of this.Omt)t.bn();us(this.Omt),us(this.Fmt)}constructor(t,e){super(),this.Omt=[],this.Fmt=[],this.Umt=!1,this.Vmt=t,this.Ngt=e,this.Ngt.wn(We.Kst,this.Dgt)}};t();var AV=class extends o{constructor(){super(Uv.Wp)}};t(),t();var bV=function(t){return t.Ymt="Zmt",t}({}),TV=class extends o{constructor(){super(bV.Ymt)}};t(),t(),t(),t();var SV=class extends dV{get iht(){return this.Snt}get Vht(){return this.Snt.Vht}get nwt(){return this.Snt.nwt}get Oq(){return this.Bw.Oq||this.Snt.Oq}get Fgt(){return this.Imt()}get Iit(){return this.Fgt.Iit}Ght(t){const e=this.Oq;return!(!Oe(e)&&!Xm(e))&&this.Iit.Ght(t.xrt)}Kht(t,e,i,s){return this.Iit.Kht(t,this,e,i,s)}Lgt(){return this.Fgt.Lgt(this)}eot(t){return this.Fgt.eot(t,this)}Hgt(t){return this.Fgt.Hgt(t,this)}Wgt(){return this.Jmt}Lmt(t){const e=this.Iit,i=e.Wgt(t),s=i&&function(t,e){const{owt:i,awt:s,hwt:n}=t,r=i.YM;let h;const o=e.vwt(s);if(o.getTime()<=n.getTime())h=s.ZM;else{const t=(o.getTime()-n.getTime())/1e3,e=w.max(s.ct-t,0);h=s.YM+e}return{Tn:r,Pn:h}}(i,e),n=this.Iit.qgt(t,i);return this.Jmt=i,{hwt:t,Dmt:s,Nmt:n}}Zn(t){this.Rmt(t,this.Snt.Uvt)}constructor(t,e){super(t,e,e.Uvt),this.Jmt=void 0,this.Snt=e,this.Cmt(!0)}},kV=class extends dV{get Nnt(){return this.Cat}get Vht(){return this.b_t}get nwt(){return this.b_t.nwt}get Tat(){return this.Bw.Tat}get Oq(){var t;return this.Bw.Oq||(null==(t=this.Cat[0])?void 0:t.LS.Oq)||""}get Evt(){return this.LS.Evt}get Pvt(){return this.LS.Pvt}Zn(t){this.Rmt(t,this.b_t.Uvt);const e=t.Nnt||[];if(this.Cat.length!==e.length)throw new v("Expected "+this.Cat.length+' representations in adaptation set "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.Cat[t].Zn(e[t])}Bmt(t){for(const e of this.Cat)e.Bmt(t);super.Bmt(t)}Lmt(t){return{hwt:t,Dmt:_V(this.Cat),Nmt:vV(this.Cat)}}Wu(){for(const t of this.Cat)t.Wu();super.Wu()}constructor(t,e){super(t,e,e.Uvt),this.b_t=e,this.Cmt(!1),this.Cat=t.Nnt.map((t=>new SV(t,this)))}},EV=class extends dV{get nut(){return this.Omt}get A_t(){return this.Fmt}get Vht(){return this}get nwt(){return this.$mt}get o(){return this.Bw.o}get Tn(){return this.hF}get ct(){return this.nf}Zn(t,e){this.Rmt(t,this.$mt.Uvt),this.nf=e;const i=t.nut||[];if(this.Omt.length!==i.length)throw new v("Expected "+this.Omt.length+' adaptation sets in period "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.Omt[t].Zn(i[t])}Bmt(t){for(const e of this.Omt)e.Bmt(t);super.Bmt(t)}Lmt(t){return{hwt:t,Dmt:_V(this.Omt),Nmt:vV(this.Omt)}}Wu(){for(const t of this.Omt)t.Wu();super.Wu()}constructor(t,e,i,s){super(e,void 0,t.Uvt),this.Fmt=[],this.$mt=t,this.hF=i,this.nf=s,this.Cmt(!1),this.Omt=(e.nut||[]).map((t=>new kV(t,this))),this.Fmt=pV(this.Omt)}};t();var PV=class{get tpt(){return this.ept.ugt.yO}get ipt(){return this.ept.ugt.pO}get spt(){return this.ept.ugt.agt}get npt(){var t;return null==(t=this.ept.Hu)?void 0:t.yO}get rpt(){var t;return null==(t=this.ept.Hu)?void 0:t.yO}constructor(t){this.ept=t}},IV=new Date("2000-01-01"),CV=class extends Re{get LS(){return this.Bw}get Vm(){return this.Bw.Vm||Is.IF}get lgt(){return this.hpt||this.Bw.lgt||this.pgt}get cgt(){return this.Bw.cgt}get swt(){var t,e;return null!=(e=null==(t=this.opt)?void 0:t.ignoreAvailabilityWindow)&&e}get ggt(){return this.apt}get Uvt(){return this.Pmt}get dgt(){return this.upt}get D_t(){return this.cpt}get pgt(){return this.Bw.pgt||this.In}get yvt(){return this.Bw.yvt}get lpt(){return this.dpt}get fpt(){return this.In}get bgt(){return this.ept}Rgt(){var t;return null==(t=this.xmt)?void 0:t.Dmt}qgt(){var t;return null==(t=this.xmt)?void 0:t.Nmt}Zn(t,e,i,s){var n;const r=void 0!==this.Bw&&this.Bw.Vm===Is.CF;this.Bw=t,this.dpt=null!=s?s:i,this.In=i;const h=[hy(e)];this.Pmt=t.Uvt&&t.Uvt.length>0?BU(t.Uvt.map((t=>t.qS)),h):h,this.upt=t.dgt&&t.dgt.length>0?BU(t.dgt,this.Pmt):[];const o=this.upt.map((t=>t.href)),a=e.href;Qe(o,a)||(this.upt.push(e),o.push(a));const u=this._pt.href;Qe(o,u)||(this.upt.push(this._pt),o.push(u)),this.apt=null==(n=t.ggt)?void 0:n.tvt(),t.bgt&&(this.ept=new PV(t.bgt));const c=t.Vm===Is.CF,l=function(t,e,i){const s=[];for(let i=0;i<t.length;i++){const n=t[i];let r;if(n.Tn)r=n.Tn.tvt();else if(i>0&&t[i-1].ct){r=s[i-1]+t[i-1].ct.tvt()}else{if(0!==i||e)break;r=0}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++)n.push({LS:t[e],Tn:s[e],ct:s[e+1]-s[e]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;e||(a=h.ct?h.ct.tvt():i-o),n.push({LS:h,Tn:o,ct:a})}return n}(t.D_t,c,this.apt);this.vpt(l,r,c),this.Bmt(i)}vpt(t,e,i){const s=this.cpt;if(0===t.length)return void us(s);const n=t[0].LS.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.Wu();if(e&&!i&&s.length>0&&t.length>0){var o;const e=null!=(o=RV(s[0].LS))?o:_r.WL;var a;const i=null!=(a=RV(t[0].LS))?a:_r.WL;if(i.kL(e)){const n=i.ML(e);void 0!==this.apt&&(this.apt+=n.SL());for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];i.Tn=t.Tn,MV(i.LS,t.LS)}e===t.length-1&&(i.ct+=n.SL())}}}for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];0,t.Zn(i.LS,i.ct)}else s.push(new EV(this,i.LS,i.Tn,i.ct))}}Bmt(t){for(const e of this.cpt)e.Bmt(t);const e=this.xmt,i=this.Lmt(t);e&&gV(e,i)||(this.xmt=i,this.wo(new lV))}Lmt(t){return{hwt:t,Dmt:fV(this.cpt),Nmt:vV(this.cpt)}}rwt(){if(0===this.cpt.length)return;const t=this.cpt[this.cpt.length-1];if(isFinite(t.ct))return;if(0===t.nut.length)return;const e=t.nut[0];if(0===e.Nnt.length)return;const i=e.Nnt[0].Iit,s=i.rwt();return s?{Srt:s,cgt:i.Jot(s)}:void 0}Wu(){this.Bo();for(const t of this.cpt)t.Wu()}constructor(t,e,i,s,n){if(super(),this.xmt=void 0,this.apt=void 0,this.hpt=void 0,this.cpt=[],this._pt=e,this.opt=n,this.Zn(t,i,s),t.Vm===Is.CF){const t=this.rwt();t&&t.cgt&&t.cgt.getTime()<IV.getTime()&&(this.hpt=new Date(this.pgt.getTime()-1e3*(t.Srt.YM+t.Srt.ct)),this.Bmt(s))}}};function RV(t){let e=NV(t);var i,s;for(const s of null!=(i=t.nut)?i:[])e=HT(e,xV(s));for(const i of null!=(s=t.ogt)?s:[])e=HT(e,BV(i));return e}function xV(t){let e=NV(t);for(const i of t.Nnt)e=HT(e,DV(i));return e}function DV(t){return NV(t)}function NV(t){let e;if(void 0!==t.Wvt&&(e=HT(e,BV(t.Wvt))),void 0!==t.Vvt&&(e=HT(e,BV(t.Vvt))),void 0!==t.Hvt)for(const i of t.Hvt)e=HT(e,BV(i));return e}function BV(t){var e,i;return _r.UL(null!=(e=t.mvt)?e:Yc.ZERO,null!=(i=t.Wx)?i:1)}function MV(t,e){if(FV(t,e),t.Tn=e.Tn,void 0!==t.nut&&void 0!==e.nut&&t.nut.length===e.nut.length)for(let i=0;i<t.nut.length;i++)LV(t.nut[i],e.nut[i]);if(void 0!==t.ogt&&void 0!==e.ogt&&t.ogt.length===e.ogt.length)for(let i=0;i<t.ogt.length;i++)UV(t.ogt[i],e.ogt[i])}function LV(t,e){if(FV(t,e),void 0!==t.Nnt&&void 0!==e.Nnt&&t.Nnt.length===e.Nnt.length)for(let i=0;i<t.Nnt.length;i++)OV(t.Nnt[i],e.Nnt[i])}function OV(t,e){FV(t,e)}function FV(t,e){if(void 0!==t.Wvt&&void 0!==e.Wvt&&UV(t.Wvt,e.Wvt),void 0!==t.Vvt&&void 0!==e.Vvt&&UV(t.Vvt,e.Vvt),void 0!==t.Hvt&&void 0!==e.Hvt&&t.Hvt.length===e.Hvt.length)for(let i=0;i<t.Hvt.length;i++)UV(t.Hvt[i],e.Hvt[i])}function UV(t,e){t.Wx=e.Wx,t.mvt=e.mvt}t();var VV=class{async yG(t){await this.gpt(t,this.TF,this.wpt,this.mpt).catch(wi)}Yot(){return new Date(Oc()+this.ppt)}async gpt(t,e,i,s){let n;if(s&&(n=await this.ypt(e,s,i)),void 0===n){Bv(i);for(const s of t)if(n=await this.Apt(e,s,i),void 0!==n)break}this.ppt=void 0===n?0:n-Oc()}async Apt(t,e,i){switch(e.H2){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=e.yE;if(s)return await this.ypt(t,s,i);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=e.yE;if(t){const e=new Date(t).getTime();if(!j(e))return e}break}default:return}}async ypt(t,e,i){try{const s=await t.FS({qS:e,vk:Na.GET,OS:Gs.lS,ap:i}),n=await s.gS(),r=new Date(n).getTime();if(!j(r))return r}catch(t){ta(t)}}constructor(t,e,i){this.TF=t,this.wpt=e,this.mpt=i,this.ppt=0}},HV=class extends Re{get cgt(){return this.Ngt&&this.Ngt.cgt}get lgt(){return this.Ngt&&this.Ngt.lgt}get swt(){return this.Ngt&&this.Ngt.swt}get o(){return this.Ngt&&this.Ngt.LS.o}get lpt(){var t;return null==(t=this.Ngt)?void 0:t.lpt}get bpt(){var t;return null==(t=this.Ngt)?void 0:t.fpt}get dgt(){return this.Ngt?this.Ngt.dgt.map((t=>t.href)):[this.Tpt]}get Tpt(){return this.Spt.href}get _gt(){return this.Ngt&&this.Ngt.LS._gt}get vgt(){return this.Ngt&&this.Ngt.LS.vgt}get ggt(){return this.Ngt&&this.Ngt.LS.ggt}get wgt(){return this.Ngt&&this.Ngt.LS.wgt}get mgt(){var t,e;const i=(null==(e=this.Ngt)||null==(t=e.LS.mgt)?void 0:t.evt())||0;return w.max(i,qV)}get TP(){return this.kpt}Ept(t){const e=this.TP;this.kpt=t,e!==this.TP&&this.wo(new TV)}get D_t(){return this.cpt}get Ppt(){return this.Vm===Is.CF?this.Ggt:this.Ipt}get Cpt(){const t=this.Ppt;if(void 0!==t)for(const e of this.D_t)if(e.Tn<=t&&e.Pn>t)return e}get Rvt(){return this.Ngt&&this.Ngt.LS.Rvt}get pgt(){return this.Ngt&&this.Ngt.pgt}get qmt(){for(let t=this.cpt.length-1;t>=0;t-=1){const e=this.cpt[t].qmt;if(e)return e}}get Ggt(){const t=this.qmt;if(void 0===t)return;const e=t-this.Rpt;return w.max(e,this.Ipt)}get Ipt(){for(const t of this.cpt){const e=t.Cgt;if(void 0!==e)return e}}get Ak(){return Boolean(this.xpt.Ak)}get Rpt(){var t,e;if(this.xpt.Dpt&&this.Vm===Is.CF)return this.xpt.Dpt;const i=null==(e=this.Ngt)||null==(t=e.LS.ygt)?void 0:t.tvt();return void 0!==i?i:this.Vm===Is.CF?1.5*this.wgt.tvt():0}get yvt(){return this.Ngt&&this.Ngt.yvt}get Vm(){return this.Ngt?this.Ngt.Vm:void 0}get bgt(){var t;return null==(t=this.Ngt)?void 0:t.bgt}async Zn(t,e,i){const s=[],n=[],r=t.fgt?Gn.Ih(t.fgt,this.Spt):this.Spt;void 0===this.Ngt?(await this.Npt.yG(t.Agt),this.Ngt=new CV(t,this.Spt,r,this.Yot(),this.opt),this.Ngt.wn(We.Kst,this.Os)):this.Ngt.Zn(t,r,this.Yot(),e);const h=this.Ngt.D_t;let o;if(0===h.length)o=this.cpt.slice(),us(this.cpt);else{const t=h[0].o;let e=0;for(;e<this.cpt.length&&this.cpt[e].o!==t;)e++;o=this.cpt.splice(0,e);for(let t=0;t<h.length;t++){const e=h[t];let r;t<this.cpt.length?r=this.cpt[t]:(r=new yV(this,e),s.push(r)),n.push(r.Zn(this.Bpt,i))}}await Promise.all(n),this.cpt.push(...s);for(const t of o)t.Gmt();this.wo(new AV)}Yot(){return this.Npt.Yot()}Wmt(t){const e=this.cpt.indexOf(t);if(e>0)return this.cpt[e-1]}Hmt(t){const e=this.cpt.indexOf(t);if(e>=0&&e+1<this.cpt.length)return this.cpt[e+1]}Rgt(){return this.Ngt?this.Ngt.Rgt():void 0}qgt(){return this.Ngt&&this.Ngt.qgt()}Bmt(t){this.Ngt&&this.Ngt.Bmt(t)}bn(){this.Bo(),this.Mpt=void 0,this.Ept(!1);for(const t of this.cpt)t.bn();us(this.cpt),this.Ngt&&this.Ngt.Wu()}constructor(t,e,i,s,n){super(),this.Ngt=void 0,this.kpt=!0,this.cpt=[],this.Mpt=void 0,this.xpt=t,this.Spt=t.iC,this.Bpt=e,this.TF=i,this.Lpt=s,this.Npt=new VV(this.TF,this.Lpt,this.xpt.Opt),this.opt=n}},WV=class{get Zot(){return this.Vmt}constructor(t,e,i,s,n){this.Vmt=new HV(t,e,i,s,n)}},qV=1e3,zV=class{get Mr(){return this.Ngt}get q(){return this.Fpt||(this.Fpt=this.zk(this.Upt.ap),Ov(this.Fpt)),this.Fpt}async zk(t){this.Ngt.Zot.wo(new ji);try{await this.Vpt(t),this.Ngt.Zot.Ept(!0)}catch(t){throw ta(t),this.Fpt=void 0,this.Ngt.Zot.Ept(!1),new v("The provided MPEG-DASH document could not be loaded - "+t.message)}this.Hpt=this.Wpt(this.Upt.ap)}async Wpt(t){try{for(;this.Ngt.Zot.Vm===Is.CF;)await Dc(this.qpt,t)}catch(t){}}get qpt(){return this.Ngt.Zot.bpt&&this.Ngt.Zot.Vm===Is.CF?this.zpt(this.Upt.ap):this.q}async Xpt(t){Bv(t);const e=this.Gpt();if(e>0){const i=w.min(e,2147483647);await Rt(i,t)}try{await this.Vpt(t),this.Ngt.Zot.Ept(!0)}catch(t){throw new v("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.Qpt=void 0}}Gpt(){const t=this.Ngt.Zot.Yot().getTime()-this.Ngt.Zot.lpt.getTime();return this.Ngt.Zot.mgt-t}Kpt(t){const e=this.Ngt.Zot.qgt();if(e){const i=e.getTime()-t.getTime();if(i>0)return i}this.Ngt.Zot.Bmt(t);const i=this.Ngt.Zot.qgt();return i?i.getTime()-t.getTime():NaN}async zpt(t){const e={stack:[],error:void 0,hasError:!1};try{null!=this.Qpt||(this.Qpt=this.Xpt(t));const i=oe(e,Mr.fp([t]),!1),s=[this.Qpt,this.jpt(i.ap)].filter(Ee);await Promise.race(s).catch(wi)}catch(t){e.error=t,e.hasError=!0}finally{se(e)}}jpt(t){const e=this.Ngt.Zot.Yot(),i=this.Kpt(e);if(!j(i)&&!this.Mr.Zot.swt)return this.Ypt(i,t)}async Ypt(t,e){await Rt(t,e);const i=this.Ngt.Zot.Yot();this.Ngt.Zot.Bmt(i)}async Zpt(t,e){const i=await this.$pt.Jpt(t,{},e);return(new kU).Tgt(i.tyt,i.WS)}bn(){return this.Upt.tf(),this.Hpt=void 0,this.Fpt=void 0,this.Qpt=void 0,this.Ngt.Zot.bn(),Promise.resolve()}constructor(t,e,i,s,n){this.Upt=new Mr,this.Vpt=async t=>{try{const e=this.Ngt.Zot.Yot(),i=await this.Zpt(this.Ngt.Zot.dgt,t);await this.Ngt.Zot.Zn(i,e,t)}catch(t){throw za(t)&&this.Ngt.Zot.Ept(!1),t}},this.$pt=s,this.Ngt=new WV(t,e,i,this.Upt.ap,n)}};t(),t();var XV=class extends o{constructor(t,e){super("V_t"),this.Z_t=t,this.Oat=e}},GV=class extends Re{get Oat(){return this.Fat}get Vm(){return this.Dw}get Z(){return this.xI.slice()}wF(t){t&&this.Fat!==t&&this.eyt(t)}mF(t){this.Fat===t&&this.eyt(void 0)}eyt(t){this.Fat=t,this.wo(new XV(this,this.Fat))}bn(){this.Bo();for(const t of this.xI)t.Tat=void 0;us(this.xI)}constructor(t,e){super(),this.Fat=void 0,this.Dw=t,this.xI=e;for(const t of this.xI)t.Tat=this}};t(),t(),t();var QV=class extends o{constructor(t,e,i){super(Uv.Np),this.currentTime=t,this.initDataType=e,this.initData=i}};function KV(t,e,i,s,n){let r=[],h=[];for(const t of e)t.Vm===Be.hk?r=r.concat(t.Z):t.Vm===Be.wl&&(h=h.concat(t.Z));return[jV(t,r,i,s,null==n?void 0:n.preferredAudioCodecs),YV(t,h,i,s,null==n?void 0:n.preferredVideoCodecs)].filter(Ee)}function jV(t,e,i,s,n){const r=bv(s||[],(t=>t.cnt===Be.hk&&t.Rt)),h=[JV(r,i,t),$V(r),tH(r),eH(r,n),iH(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return ZV(e,h)}function YV(t,e,i,s,n){const r=bv(s||[],(t=>t.cnt===Be.wl&&t.Rt)),h=[JV(r,i,t),eH(r,n),iH(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return ZV(e,h)}function ZV(t,e){if(0===t.length)return;let i=t;for(const t of e){if(1===i.length)return i[0];i=t(i)}return i[0]}function JV(t,e,i){return s=>{const n=t?t.iht.o:void 0;if(!Ee(n))return s;const r=null==e?void 0:e.hgt,h=i.hgt,o=r&&h&&r.yE===h.yE,a=bv(s,(t=>t.iht.o===n));return o&&a?[a]:s}}function $V(t){return e=>{const i=t?t.gs:"",s=e.some((t=>""!==t.gs))?e.filter((t=>""!==t.gs)):e;if(""===i)return s;const n=s.filter((t=>t.gs===i));return n.length>0?n:s}}function tH(t){return e=>{const i=t?t.Lt:"";if(""===i)return e;const s=e.filter((t=>t.Lt===i));return s.length>0?s:e}}function eH(t,e){return t=>{if(e&&e.length>0)for(const i of e){const e=t.filter((t=>t.YI.RI.some((t=>qc(t.Let,i)))));if(e.length>0)return e}return t}}function iH(){return t=>{let e=[],i=-1/0;for(const s of t){const t=s.iht.zH;t>i?(i=t,e=[s]):t===i&&e.push(s)}return e}}t(),t();var jr=function(t){return t.iyt="api",t.syt="start",t}({});t();var sH={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},nH=class{nyt(t,e,i){const s=this.Oot.maxRetries===1/0?sH:this.Oot;return vt((()=>this.ryt(t,e,i)),i,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async ryt(t,e,i){let s;for(const n of t)try{const t=new Qi({qS:n,OS:Gs.lS,US:e,Ak:this.hyt,vk:Na.GET,Vm:Sa.XS,pk:Qn.zS,ap:i,gk:15e3,wk:5e3}),s=await this.TF.FS(t),r=await s.gS(i);return{tyt:r,oyt:n,WS:s.WS}}catch(t){s=t}throw s}constructor(t,e,i=sH){this.TF=t,this.hyt=e,this.Oot=i}};t();var rH=class{async Jpt(t,e,i){let s;for(const n of this.ayt)try{return await n.Jpt(t,e,i)}catch(t){ta(t),s=t}throw s}constructor(t){this.ayt=t}},hH=class{async Jpt(t,e,i){const s=await this.Ert.Qtt(t);if(s)return{tyt:s.data,oyt:s.locationURL,WS:s.responseURL};throw new v("Manifest fetch from cache unsuccesful")}constructor(t){this.Ert=t}},oH=class{async Jpt(t,e,i){return await this.uyt.nyt(t,e,i)}constructor(t){this.uyt=t}};function aH(t,e){return new rH([new hH(e),new oH(t)])}var uH=class{async Jpt(t,e,i){const s=await this.$pt.Jpt(t,e,i);return await this.cyt(s),s}async cyt(t){await this.lyt.iet({key:Ui(t.oyt),locationURL:Hn(t.oyt),responseURL:Hn(t.WS),data:t.tyt,references:[this.dyt.o]})}constructor(t,e,i){this.$pt=t,this.lyt=e,this.dyt=i}};t();var cH=class extends o{constructor(){super(Uv.Xp)}};t();var lH=class extends o{constructor(){super(Uv.zp)}};t(),t();var dH=class extends Vt{fyt(t){return t.Vc=Fi.LOADED,this.tt(t),t}_yt(t){for(const e of this.Z.RI)if(e.$I===t)return e}constructor(){super()}};function fH(t,e){return""===e?t:t+" "+e}t(),t(),t();var _H=class extends Hu{get ba(){return this.Zu||(this.Zu=function(t){return Xe(ce(t),{get attributes(){return t.xE},get eventID(){var e;return""+(null!=(e=t.vyt)?e:"")}})}(this)),this.Zu}_L(t){return this.O===t.O}constructor(t,e,i,s,n){super(t,e,i,!1,null==n?void 0:n.toString()),this.xE=s,this.vyt=n}},vH=class extends dH{gyt(t){const e=this.AF.iI(ns.lF,"","","",void 0,Zo.EVENT_STREAM);return e.$I=t,this.fyt(e),e}wyt(t,e,i){const s=t.H2;var n;const r=null!=(n=t.yE)?n:"";var h;const o=null!=(h=t.Wx)?h:1;var a;const u=null!=(a=t.mvt)?a:Yc.ZERO,c=fH(s,r);let l=this._yt(c);l||(l=this.gyt(c));for(const s of t.Fq)if(!gH(s,l)){const t=wH(s,o,u,e);t.ZM>i&&l.SF(t)}}async On(t){await this.sr(),this.$mt=t,this.$mt.wn(Uv.Wp,this.myt),this.myt()}async sr(){this.$mt&&(this.$mt.pn(Uv.Wp,this.myt),this.$mt=void 0);for(const t of this.Z.RI)this.AF.EF(t);await super.sr()}constructor(t){super(),this.$mt=void 0,this.myt=()=>{var t,e;const i=null!=(e=null==(t=this.$mt.Rgt())?void 0:t.Tn)?e:0;if(i>0)for(const t of this.Z.RI)Cr(t,i);for(const t of this.$mt.D_t)if(t.Pn>i)for(const e of t.ogt)this.wyt(e,t,i)},this.AF=t}};function gH(t,e){const i=t.o;if(void 0!==i){if(bv(e.L.RI,(e=>e.vyt===i&&e.O===t.LS)))return!0}return!1}function wH(t,e,i,s){const n=t.o,r=t.zN.toSigned().subtract(i),h=t.ct,o=t.LS,a=t.xE,u=r.toNumber()/e+s.Tn,c=h?h.toNumber()/e:void 0,l=void 0!==c?u+c:s.Xmt;return new _H(u,l,o,a,n)}function mH(t,e,i,s,n){const r=[],h=bv(i,(t=>t.H2===q_));if(void 0===h)return;const o=h.yE?function(t){const e=t.split(":",1)[0];switch(e){case"cbcs":case"cenc":return e;default:return}}(h.yE.toLowerCase()):"cenc";if(void 0!==o){for(const t of i)if(t.H2!==q_)for(const e of nv(t.H2)){const i=n&&t.W2?[t.W2]:[];r.push({rT:e,MV:i,LV:void 0,KU:void 0})}if(r.length)return{vU:t,e_t:{pyt:o,gU:h.gU},t_t:r,yyt:e===Be.hk?s.slice():[],Ayt:e===Be.wl?s.slice():[],X2:!1}}}function pH(t,e){if(!t)return e;if(!e)return t;const i=[],s=sa();var n;return yH(i,s,t.t_t),yH(i,s,e.t_t),{vU:t.vU,e_t:{pyt:t.e_t.pyt,gU:null!=(n=t.e_t.gU)?n:e.e_t.gU},t_t:i,yyt:AH(t.yyt,e.yyt,Qe),Ayt:AH(t.Ayt,e.Ayt,Qe),X2:t.X2||e.X2||!1}}function yH(t,e,i){for(const s of i){const i=s.rT.zm;let n;e.has(i)?(n=e.get(i),n.MV=AH(n.MV,s.MV,bH)):(n=yh({},s),t.push(n),e.set(i,n))}}function AH(t,e,i){const s=t.slice();for(const t of e)i(s,t)||s.push(t);return s}function bH(t,e){for(const i of t)if(In(i,e))return!0;return!1}function TH(t,e,i){let s;const n=t.xV;if(n){const r=t.Oq,h=[];for(const e of t.Let)h.push(r+'; codecs="'+e+'"');s=mH(e||{},t.Vm,n,h,i)}for(const n of t.Nnt)s=pH(s,SH(n,e,i));return s}function SH(t,e,i){return mH(e||{},t.Vm,t.xV||[],[t.yS],i)}function kH(t){return t?t.t_t.map((e=>{const i=EH(t.vU,e.rT),s=t.e_t.pyt;return{rT:e.rT,MV:e.MV,KU:e.KU,xH:[{initDataTypes:[e.rT.Wm],audioCapabilities:PH(t.yyt,s,null==i?void 0:i.audioRobustness),videoCapabilities:PH(t.Ayt,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]}})):[]}function EH(t,e){switch(e.Vm){case as.Lm:return t.widevine;case as.Mm:return t.playready;case as.Om:return t.fairplay;case as.Fm:return t.clearkey}}function PH(t,e,i){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:e,robustness:i})))}t(),t();var IH=class extends dH{gyt(t){const e=this.AF.iI(ns.lF,t.o,"thumbnails","",!1,Zo.DEFAULT);return e.Tk=Aa.Yn,this.fyt(e),e}async On(t){await this.sr(),this.$mt=t,this.$mt.wn(Uv.Wp,this.Zn),this.Zn()}byt(t){this.Tyt(t),this.Syt()}Syt(){const t=[];for(const e of this.Z.RI)this.kyt(e)||t.push(e);for(const e of t)this.it(e)}Tyt(t){const e=[];for(const i of this.Cat)-1===t.indexOf(i)&&e.push(i);for(const t of e)Ko(this.Cat,t)}async sr(){this.$mt&&(this.$mt.pn(Uv.Wp,this.Zn),this.$mt=void 0);for(const t of this.Cat)t.pn(We.Kst,this.Eyt);this.Cat.length=0;for(const t of this.Z.RI)this.AF.EF(t);await super.sr()}bn(){return this.Eyt=void 0,super.bn()}Pyt(){var t,e;const i=null!=(e=null==(t=this.$mt.Rgt())?void 0:t.Tn)?e:0;if(i>0)for(const t of this.Z.RI)Cr(t,i)}Iyt(t){return this.Z.RI.some((e=>e.o===t.o))}Cyt(t){return bv(this.Z.RI,(e=>e.o===t.o))}kyt(t){return this.Cat.some((e=>t.o===e.o))}constructor(t){super(),this.Cat=[],this.Zn=()=>{const t=[];for(const e of this.$mt.D_t)for(const i of e.nut)if(i.Vm===Be.ck&&i.Nnt.length>0){const e=i.Nnt[0];t.push(e),this.Iyt(e)||this.gyt(e),-1===this.Cat.indexOf(e)&&(this.Cat.push(e),e.wn(We.Kst,this.Eyt)),this.Ryt(e)}this.byt(t)},this.Ryt=t=>{const e=this.Cyt(t);e&&t&&e.Tk!==Aa.Th&&(this.Pyt(),function(t,e){const i=t.Iit,s=t.Wgt();if(!s)return;const n=s.owt,r=s.awt,h=t.Ti,o=t.Ci,[a,u]=function(t){for(const e of t)if(ys(e.H2,RH)||ys(e.H2,xH)){const t=e.yE.match(CH);if(t){const[,e,i]=t;return[Number(e),Number(i)]}}return[1,1]}(t.Evt);let c=n;for(;c&&c.xrt<=r.xrt;){const s=t.Fgt.ct||c.ct,n=DH(e,c,t.eot(c).qS,h,o,a,u,s);for(const t of n)e.SF(t);c=i.Jht(c)}}(t,e))},this.AF=t;const e=this;this.Eyt=function(){e.Ryt(this)}}},CH=/^(\d+)x(\d+)$/,RH="http://dashif.org/guidelines/thumbnail_tile",xH="http://dashif.org/thumbnail_tile";function DH(t,e,i,s,n,r,h,o){const a=[],u=e.YM,c=r*h,l=s/r,d=n/h,f=w.round(l),_=w.round(d),v=o/c;if(1===c){const e=u+v;return NH(t,u,e,i)?a:[new Hu(u,e,i,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*v,o=h+v,c=i+"#xywh="+w.round(n*l)+","+w.round(s*d)+","+f+","+_;if(NH(t,h,o,c)||a.push(new Hu(h,o,c,!1)),o>=e.ZM)return a}return a}function NH(t,e,i,s){return t.L.RI.some((t=>t.YM===e&&t.ZM===i&&t.O===s))}t(),t(),t(),t();var BH=class extends Hu{get qN(){return this.xyt}get yE(){return this.Dyt}get Nyt(){return this.Byt}get ba(){return this.Zu||(this.Zu=function(t){return Xe(ce(t),{get schemeIDURI(){return t.qN},get value(){return t.yE},get emsgID(){return t.Nyt}})}(this)),this.Zu}_L(t){return Rg(this.O,t.O)}constructor(t,e,i,s,n,r){super(t,e,r,!1),this.xyt=i,this.Dyt=s,this.Byt=n}},MH=class t extends dH{oat(e,i,s){const n=Kh.Sx(Nt(e));if(!n)return;const r=function(t,e){const i=[];for(const s of t)LA(s,e)&&i.push(s);return i}(n,BA.MR);if(r.length){const e=t.Myt(n,i,s);this.Lyt(r,e,s)}}Lyt(t,e,i){for(const s of t){let t;t=1===s.bx?s.zN.toNumber()/s.Wx+i:e+s.QN/s.Wx;const n=t+s.XN/s.Wx;"https://aomedia.org/emsg/ID3"===s.qN||"https://developer.apple.com/streaming/emsg-id3"===s.qN?this.Oyt(s,t):this.Fyt(s,t,n)}}Fyt(t,e,i){const s=fH(t.qN,t.yE);let n=this._yt(s);n||(n=this.Uyt(s),this.fyt(n)),n.SF(new BH(e,i,t.qN,t.yE,t.o,t.GN))}Oyt(t,e){const i=Kx(Nt(t.GN));if(!i)return;const s=fH(t.qN,t.yE);let n=this._yt(s);n||(n=this.Vyt(s),this.fyt(n));for(const t of i.t1){const i=new nD(e,t);Tx(i,n.L.RI),n.SF(i)}}static Myt(t,e,i){const s=yc(t,BA.LR);return s?Ro(s.rB,s.Wx)+i:e}Uyt(t){const e=this.AF.iI(ns.lF,"","","",void 0,Zo.EMSG);return e.$I=t,e.Tk=Aa.JI,e}Vyt(t){const e=this.AF.iI(ns.lF,"","","",void 0,Zo.ID3);return e.$I=t,e.Tk=Aa.JI,e}async sr(){for(const t of this.Z.RI)this.AF.EF(t);await super.sr()}constructor(t){super(),this.AF=t}},LH=class extends MH{async On(t){await this.sr(),this.$mt=t,this.$mt.wn(Uv.Wp,this.myt),this.myt()}async sr(){this.$mt&&(this.$mt.pn(Uv.Wp,this.myt),this.$mt=void 0),await super.sr()}constructor(...t){super(...t),this.myt=()=>{var t,e;const i=null!=(e=null==(t=this.$mt.Rgt())?void 0:t.Tn)?e:0;this._F(i)}}};t(),t();var OH=class{Ytt(t,e){return this.Hyt?this.Ert.Ytt(t,e):Promise.resolve(!1)}Jtt(t,e){return this.Hyt?this.Ert.Jtt(t,e):Promise.resolve(void 0)}async Qtt(t){const e=await this.Ert.Qtt(t);return this.Hyt=void 0!==e,e}AQ(t){return this.Ert.AQ(t)}constructor(t){this.Hyt=!1,this.Ert=t}};t();var FH=class extends wb{fM(){var t;return null!=(t=this.lM)?t:0}hC(){this.sa.Yu=1/0}_M(){return!0}constructor(t,e,i){super(t,e,i)}},UH=[Uv.zf,Uv.Gp,Uv.Kp,Uv.qp,Uv.jp],VH=[Uv.qu,Uv.Bl,Uv.Lp,Uv.Bp],HH=class t extends Re{Wyt(t){return!!this.iH&&this.iH.nK(t)}async Iw(t){this.iH=await this.rM.On(t),this.qyt(),this.zyt(),this.iH.F$(this.ct)}Xyt(t){return this.iH.hK(t)}Gyt(t){return this.iH.aK(t)}async Qyt(){this.Kyt=this.jyt,this.iH&&(await this.rM.sr(),this.iH=void 0)}WJ(){this.iH.WJ()}NJ(){const t=this.ct;this.iH.ct<t&&this.iH.F$(t),this.iH.NJ()}async Yyt(t){const e=this.iH,i=[];e.N$&&i.push(on(e.N$,t)),e.B$&&i.push(on(e.B$,t)),await Promise.all(i)}Zyt(t,e,i,s,n,r){const h=this.rM,o=this.iH;return new XF(h,o,t,e,i,s,n,r,this.Jyt,h,this.Kft,this.Oot,this.u_t,this.lH)}$yt(t,e,i){return t.hK(e,i,this.iH)}async tAt(t,e,i,s){const n=this.Zyt(this.TF,this.yW,this.Ert,this.ZV,t,s);return n.wn(We.Yst,this.eAt),n.wn(Uv.qp,this.Os),await n.yG(e,i),n}iAt(t){void 0===t&&(t=!1),this.sAt.tf(),this.U3.tf(),this.nAt.tf(),this.nAt=new Mr,this.rAt=qe(this.hAt(this.oAt,this.V3,this.rAt,t,this.nAt.ap),this.nAt).catch(this.X_t)}async hAt(t,e,i,s,n){await Promise.all([t,e,i]),Bv(n),await Dc(this.aAt.Pf,n);const r=this.uAt;await r.Ent(),this.NJ(),Bv(n);const h=r.iW,o=r.z_t,a=r.q_t;let u=this.cAt(h,a,h,o,!1),c=this.lAt(a,u);!s&&this.Wyt(c)?await this.dAt(a,u,c):(u=this.cAt(h,a,h,o,!0),c=this.lAt(a,u),await this.fAt(a,u,c,n)),Bv(n),this.Uc?this.jc(this.Yu):this._At(),this.vAt()}async dAt(t,e,i){const s=this.uAt;await this.Xyt(i),this.gAt=i,await this.$yt(s,t,e),await s.Int(Ri.cst)}async fAt(t,e,i,s){const n=this.uAt;this.G3(),this.wAt();const r=this.mAt;await this.Qyt(),await this.Iw(i),this.gAt=i,await this.$yt(n,t,e);try{const t=this.pAt(r,!1,!0,s);Ov(t),await n.Int(Ri.cst),await t}finally{this.Z3(),this.yAt()}}get ht(){return this.TM}get jV(){const t=this.mAt,e=this.AAt,i=e.TB(t);if(-1!==i)return{Tn:e.Tn(i),Pn:e.Pn(i)}}get AAt(){var t,e,i;const s=null!=(i=null==(t=this.uAt)?void 0:t.Sl)?i:r.Ol();var n;const h=null!=(n=null==(e=this.bAt)?void 0:e.Sl)?n:r.Ol();return s.Xl(h)}get Sl(){return this.AAt.ws()}get Ku(){var t;const e=null==(t=this.Ngt)?void 0:t.Zot,i=null==e?void 0:e.lgt;if(!e||!i)return;const s=i.getTime(),n=1e3*this.Yu;return new Date(n+s)}set Ku(t){var e;const i=null==(e=this.Ngt)?void 0:e.Zot,s=null==i?void 0:i.lgt;if(!t||!i||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.jc(r-n)}get bt(){return this.ZV}get mAt(){return void 0!==this.u3?this.u3:void 0!==this.TAt?this.TAt:this.rM.Yu}get Yu(){return this.mAt}set Yu(t){this.uP(t)}uP(t,e){this.jc(t,t===1/0)}get ct(){let t=NaN;return this.uAt&&this.uAt.x_t?t=this.uAt.Pn:this.Ngt&&void 0!==this.Ngt.Zot.Vm&&(t=this.Ngt.Zot.ggt?this.Ngt.Zot.ggt.tvt():1/0),t}get Pn(){return this.ct}get $c(){return this.Uc?this.d3():!(!this.uAt||!this.uAt.x_t)&&this.rM.$c}d3(){return!!this.Uc&&(!(!this.uAt||!this.uAt.x_t)&&this.mAt===this.uAt.Pn)}get lt(){return this.$V}get Rc(){return this.Wl}get vP(){}SAt(){var t;const e=this.kAt;if(0===e.U)return!0;var i;const s=null!=(i=null==(t=this.jV)?void 0:t.Pn)?i:this.mAt,n=e.Tn(0);return s>=n||Uu(s,n,.001)}EAt(){var t;if(!this.Ngt)return!1;if(this.Ngt.Zot.Vm!==Is.CF)return!1;const e=null==(t=this.uAt)?void 0:t.iW;if(e&&e.Zst)return!0;const i=[];for(const t of this.Ngt.Zot.D_t){const e=t.Cgt,s=t.Xmt;void 0!==e&&void 0!==s&&i.push(e,s)}const s=new r(i).yB();return function(t,e,i){if(!e.U||!i.U)return r.Ol();const s=e.Tn(0),n=e.Pn(e.U-1),h=t.Cn(i).wB().Cn(t).Xl(e);return r.OB(h.Tn(0),h.Pn(h.U-1)).AB(h).CB(((t,e)=>t<s&&e<=n&&e-t>dt))}(this.AAt,this.kAt,s).U>0}get pP(){return yh({},this.jyt,{RM:Ke.Gg.gV(),xM:this.PAt,DM:{amountOfBufferedAudioSegments:this.IAt,amountOfBufferedVideoSegments:this.CAt}})}get jyt(){return function(t,e){return{PM:t.PM+e.PM,IM:t.IM+e.IM,CM:t.CM+e.CM}}(this.Kyt,this.rM.yP())}get tc(){return this.rM.tc}set tc(t){this.rM.tc=t}get Oc(){return this._3?this.RAt:this.uAt&&this.uAt.x_t?this.xAt:this.RAt}get Hu(){return this.rM.Hu}set Hu(t){this.rM.Hu=t}get Tl(){let t=this.$o;return this.uAt&&(t=t.Xl(this.DAt)),t.yB(.1).ws()}get DAt(){return this.rM.Tl}NAt(t){this.$o=this.$o.Xl(t)}get IP(){return this.eH}set IP(t){this.eH=t,this.BAt()}get Vc(){let t=this.rM.Vc;return this.MAt&&(t=w.max(qb.Qn,t)),t}get kAt(){return this.LAt(!1)}get OAt(){return this.LAt(!0)}get Cl(){return this.kAt.ws()}get Uc(){return this.sf||this.FAt}get FAt(){return this.rM.Uc}get Lc(){return this.rM.Lc}get sH(){}get UAt(){var t,e;return null!=(e=null==(t=this.Ngt)?void 0:t.Zot.Vm)?e:Is.IF}get nt(){return this.Au}get rt(){return this.kM}get LP(){var t;return this.VAt||(null==(t=this.HAt())?void 0:t.Ci)||0}get UP(){var t;return this.WAt||(null==(t=this.HAt())?void 0:t.Ti)||0}get Pl(){return this.rM.Pl}set Pl(t){this.rM.Pl=ht(t,0,1)}get qP(){return this.nH}get XP(){return!1}set XP(t){}get rH(){return this.hH}qAt(t){t.wn(UH,this.Os),t.wn(Uv.Zp,this.zAt),t.wn(Uv.Ep,this.XAt),t.wn(Yo.la,this.GAt),t.wn(Uv.Ip,this.QAt),t.wn(Uv.Gp,this.KAt),t.wn("V_t",this.jAt),t.wn("m_t",this.jAt)}YAt(t){t.pn(UH,this.Os),t.pn(Uv.Zp,this.zAt),t.pn(Uv.Ep,this.XAt),t.pn(Yo.la,this.GAt),t.pn(Uv.Ip,this.QAt),t.pn(Uv.Gp,this.KAt),t.pn("V_t",this.jAt),t.pn("m_t",this.jAt)}ZAt(t){t.wn(Uv.zf,this.Os)}JAt(t){t.pn(Uv.zf,this.Os)}HAt(){if(!this.uAt)return;const t=bv(this.uAt.q_t,(t=>t.cnt===Be.wl));return t?t.QI:void 0}LAt(t){var e;const i=null==(e=this.Ngt)?void 0:e.Zot;if(!i)return r.Ol();const s=i.Ipt;let n=t?i.qmt:i.Ggt;if(void 0===s||void 0===n)return r.Ol();if(!t){const t=this.DAt;t.U>0&&t.Pn(t.U-1)>n&&(n=w.min(t.Pn(t.U-1),i.qmt))}const h=this.ct;return isFinite(h)&&h>n&&(n=h),r.OB(s,n).vB()}async On(t,e){let i,s;Bv(e);const n=this.Ngt.Zot;try{i=n.Cpt,s=n.Ppt}catch(t){throw new v("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!i)throw new v("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new v("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.$At(t.textTracks),this.G3();const r=this.tut(i),h=KV(i,r,void 0,void 0,this.k_t),o=this.cAt(i,h,i,h,!0);h.forEach((t=>t.Rt=!0));const a=this.lAt(h,o);await this.Iw(a),this.gAt=a,Bv(e);const u=await this.tAt(i,r,h,o);Bv(e),this.tbt(u),this.Z3(),Bv(e),await u.Int(),Bv(e),!this.ebt&&s>0&&this.jc(s,!0,jr.syt),this.sf||(this._At(),this.ibt())}_At(){this.sAt.tf(),this.sAt=new Mr,this.oAt=qe(this.sbt(this.oAt,this.rAt,this.sAt.ap),this.sAt).catch(this.X_t)}nbt(){this.sAt.tf()}async sbt(t,e,i){for(await Promise.all([t,e]),Bv(i);;){var s;const t=null==(s=this.uAt)?void 0:s.iW;if(!t){0;break}if(!await this.rbt(t,i)){0;break}}}async rbt(t,e){var i;Bv(e);const s=this.uAt;for(0;this.Ngt.Zot.Vm===Is.CF&&void 0===(null==(i=this.Hmt(t))?void 0:i.Cgt);)await Dc(this.hbt.qpt,e),await this.obt();for(Bv(e),await this.obt(),Bv(e);!s.E_t();)await s.Tp(dO.lut,e),await this.obt();Bv(e),await this.obt(),Bv(e);const n=this.Hmt(t);return n?(this.abt(n)?await this.ubt(n,e):await this.cbt(n,e),!0):(this.WJ(),!1)}abt(t){var e,i,s,n,r;const h=null!=(r=null==(e=this.ZV)?void 0:e.seamlessSwitchStrategy)?r:rr.vM;if(h===rr.gM)return!0;if(h===rr.wM)return!1;const o=this.uAt,a=null==o?void 0:o.iW,u=null==o?void 0:o.q_t,c=KV(t,this.tut(t),a,u,this.k_t),l=this.cAt(t,c,a,u,!1);if(h===rr.CLEAR_ONLY&&((null==(i=this.uAt)?void 0:i.$ft)||l)||h===rr.SAME_DRM_ONLY&&!((null==(s=this.uAt)?void 0:s.$ft)&&l||!(null==(n=this.uAt)?void 0:n.$ft)&&!l))return!1;const d=this.lAt(c,l);return this.Wyt(d)}lbt(){return!0}dbt(t){const e=this.fbt();for(const i of e)i!==t&&(i.Tk=Aa.Th)}vAt(){if(void 0!==this._bt){if(this._bt.eC){const t=bv(this.ht.RI,(t=>t.Rt));void 0!==t&&this._bt.gs===t.gs||(this._bt.Tk=Aa.Th)}}else this.vbt()}vbt(){if(this.fbt().length)return;const t=bv(this.ht.RI,(t=>t.Rt));if(void 0===t)return;const e=this.nt.RI.filter((t=>t.eC));for(const i of e)if(i.gs===t.gs)return i.Tk=Aa.Yn,void(this._bt=i)}fbt(){return this.nt.RI.filter((t=>t.Tk===Aa.Yn&&(t.Lt===ns.uF||t.Lt===ns.aF)))}gbt(t){if(t&&this._bt){const e=function(t,e){if(""===t.gs)return;return e.filter((e=>e.gs===t.gs))[0]}(this._bt,t.nt.RI);e&&(e.Tk=Aa.Yn)}}async ubt(t,e){var i,s;const n=this.uAt;let r=this.bAt;const h=this.gAt;try{Bv(e);const i=n.iW,s=n.q_t,h=this.tut(t),o=KV(t,h,i,s,this.k_t),a=this.cAt(t,o,i,s,!1);o.forEach((t=>t.Rt=!0));const u=this.lAt(o,a);for(0,await n.Ent(),this.NJ(),Bv(e),r&&r.iW===t?(this.Wyt(u)&&await this.Xyt(u),this.gAt=u):(r&&await r.bn(!0),this.Wyt(u)&&await this.Xyt(u),this.gAt=u,r=await this.tAt(t,h,o,a),this.bAt=r,this.ZAt(r),this.wbt.BI=r.nt,r.Cnt(n)),await r.Int(),Bv(e);this.mAt<t.Tn;)await this.rM.Tp(Uv.Xu,e);Bv(e),this.tbt(r)}catch(t){throw Eh(t)&&(r&&await r.Ent(),h&&this.gAt!==h&&(this.Wyt(h)&&await this.Xyt(h),this.gAt=h)),t}(null==(s=this.ZV)||null==(i=s.dash)?void 0:i.forceSeekToSynchronize)&&await this.mbt(t,e)}async mbt(t,e){const i=Date.now()/1e3;if(void 0===this.pbt)this.pbt=i;else if(i-this.pbt>900){this.pbt=i,this.wAt();const s=w.max(this.mAt,t.Tn);try{await this.pAt(s,!1,!0,e)}finally{this.yAt()}}}async cbt(t,e){for(Bv(e),await this.uAt.Ent(),this.NJ(),await this.Yyt(t.Tn),Bv(e),this.WJ();!this.rM.$c&&this.mAt<t.Tn;)await this.rM.Tp([Uv.Xu,Uv.Df],e);Bv(e);const i=this.uAt.iW,s=this.uAt.q_t,n=this.tut(t),r=KV(t,n,i,s,this.k_t),h=this.cAt(t,r,i,s,!0);r.forEach((t=>t.Rt=!0));const o=this.lAt(r,h);this.uAt&&(this.ybt.pn(Fe.ca,this.Abt),await this.uAt.bn(),this.ybt.wn(Fe.ca,this.Abt),this.uAt=void 0),this.bAt&&(await this.bAt.bn(),this.bAt=void 0),this.wAt(),this.G3();const a=w.max(this.mAt,t.Tn);await this.Qyt(),await this.Iw(o),this.gAt=o;const u=await this.tAt(t,n,r,h);this.tbt(u);try{const t={stack:[],error:void 0,hasError:!1};try{const i=this.pAt(a,!1,!0,e);Ov(i),await u.Int();const s=oe(t,Mr.fp([e]),!1);await Promise.race([i,u.Tp([dO.lut],s.ap)])}catch(e){t.error=e,t.hasError=!0}finally{se(t)}}finally{this.Z3(),this.yAt()}}async obt(){const t=this.bAt;t&&t.iW.Zst&&(await t.bn(!0),this.bAt=void 0)}static bbt(t,e){const i=[],s=[];let n=!e.some((t=>t.iut.some((t=>"main"===t.yE))));for(const t of e){if(-1!==i.indexOf(t))continue;const r=qH(t._at.concat(t.iut),n);n=!1;const h=t.Nnt.map((t=>t.$st)),o=new hO(t,h,r),a=zH(t,e);for(const t of a)o.Rat(t),i.push(t);s.push(o)}return new GV(t,s)}tut(e){const i=[],s=[];for(const t of e.A_t)nt(t.Vm)&&(0===t.Nnt.length?this.wo(new lO("No supported representation found in the AdaptationSet with mimetype : "+t.Vm)):t.Vm===Be.hk?i.push(...t.nut):s.push(...t.nut));const n=[];return i.length>0&&n.push(t.bbt(Be.hk,i)),s.length>0&&n.push(t.bbt(Be.wl,s)),n}lAt(t,e){var i,s,n,r,h,o,a,u;const c=t.map((t=>{var e;return DL.mot(null!=(e=t.Iat)?e:t.Nnt,ab(t.cnt,this.k_t))})).map((t=>({yS:t.yS}))),l=null==(s=this.ZV)||null==(i=s.dash)?void 0:i.desiredTimescale;var d;const f=(null==(n=this.ZV)?void 0:n.seamlessSwitchStrategy)!==rr.wM&&(null==(r=this.ZV)?void 0:r.seamlessSwitchStrategy)!==rr.CLEAR_ONLY&&(null==(h=this.ZV)?void 0:h.seamlessSwitchStrategy)!==rr.SAME_DRM_ONLY&&(null!=(d=null==(a=this.ZV)||null==(o=a.dash)?void 0:o.needsTimescaleShifting)?d:Gn.Zs.mw),_=null==(u=this.ZV)?void 0:u.useManagedMediaSource;return{Vm:A.CF,q$:c,oH:kH(e),X2:null==e?void 0:e.X2,mw:f,UJ:l,e0:_}}static Tbt(t,e){if(!t.length)return;let i;for(const s of t){const t=0===s.Nat.length;i=pH(i,TH(s.iht,e,t))}return(null==e?void 0:e.preferredKeySystems)&&i&&(i.t_t=function(t,e){const i=t=>{const i=e.indexOf(t.rT.zm);return i>=0?i:e.length};return ln(t,((t,e)=>i(t)-i(e)))}(i.t_t,e.preferredKeySystems)),i}cAt(e,i,s,n,r){var h,o;const a=this.ZV.contentProtection;let u=t.Tbt(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(h=this.ZV)?void 0:h.seamlessSwitchStrategy)?c:rr.vM;if(l===rr.wM||l===rr.CLEAR_ONLY||l===rr.SAME_DRM_ONLY)return;const d=null==(o=this.uAt)?void 0:o.$ft;if(!r&&void 0!==d){const t=!d.X2;if(l===rr.vM&&t&&!this.lbt())return;return d}const f=!r&&l===rr.vM;return u=this.Sbt(e,a,s,n,f),void 0!==u?(u.X2=!0,u):void 0}Sbt(e,i,s,n,r){let h=e,o=!1;for(;;){if(h=o?this.Wmt(h):this.Hmt(h),void 0===h){if(o)return;o=!0,h=e;continue}const a=KV(h,this.tut(h),s,n,this.k_t),u=t.Tbt(a,i);if(r){const t=this.lAt(a,u);if(!this.Wyt(t))return}if(void 0!==u)return u}}$At(t){for(const e of t)e.src&&this.gH.yF(e);dk(this.gH.Z)}Ml(){var t;const e=this.Oc;this.RAt=!0,e||(this._3||(this.kbt(new ti),this.Ebt()),(null==(t=this.KV)?void 0:t.FB)&&this.KV.Al(),this.Pbt())}bl(){this.Ibt||(this.Ibt=new ue),this.Cbt();const t=this.Ibt.Pf;return Ov(t),t}Cbt(){if(this.RAt=!1,this.P3=!0,this.Rbt=!1,this.BAt(),this.$c){const t=this.kAt;t.U>0&&this.jc(t.Tn(0))}this._3||this.C3().then(this.xbt,this.kbt),this.eAt(),this.Pbt()}get xAt(){return this.rM.Oc}C3(){return this.rM.bl()}Ebt(){this.rM.Ml()}G3(){this._3||(this.RAt=this.Oc,this._3=!0,this.Ebt())}Z3(){this._3&&(this._3=!1,this.RAt||this.C3().then(this.xbt,this.kbt),this.eAt(),this.Pbt())}Pbt(){const t=this.WF,e=this.Oc;t!==e&&(this.WF=e,e?this.wo(new ac(this.Yu)):this.wo(new ah(this.Yu)))}jc(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=jr.iyt),this.ebt=!0,this.sAt.tf(),this.U3.tf(),this.sf=!0,this.u3=t,this.Rbt=this.Rbt&&this.d3(),this.NAt(this.DAt),this.Gc(new lc(this.Yu)),this.U3=new Mr,this.V3=qe(this.H3(t,this.oAt,this.V3,this.rAt,this.U3.ap,e,i),this.U3).catch(this.X_t),this.V3}Dbt(){this.U3.tf()}async H3(t,e,i,s,n,r,h,o){var a;void 0===r&&(r=!1),void 0===h&&(h=jr.iyt),void 0===o&&(o=!1),null==(a=this.KV)||a.Al();try{var u,c;0,await Promise.all([e,i,s]),Bv(n),await Dc(this.aAt.Pf,n);const a=this.kAt.gB(t);this.u3=a;const l=o||(null==(c=this.ZV)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.Yu,d=this.Nbt(a),f=this.uAt;if(l||!f||!f.Cl.br(a)&&h!==jr.syt&&f.iW!==d){if(d){let t=this.bAt;if(this.G3(),f&&await f.Ent(),t&&t.iW===d&&!l){const e=this.lAt(t.z_t,t.$ft);this.NJ(),this.Wyt(e)&&await this.Xyt(e),this.gAt=e}else{t&&await t.bn(!0);const e=this.tut(d),i=null==f?void 0:f.iW,s=null==f?void 0:f.q_t,n=KV(d,e,i,s,this.k_t);let r=this.cAt(d,n,i,s,!1);n.forEach((t=>t.Rt=!0));let h=this.lAt(n,r);this.abt(d)&&!l?(this.NJ(),this.Wyt(h)&&await this.Xyt(h)):(r=this.cAt(d,n,i,s,!0),h=this.lAt(n,r),f&&(this.ybt.pn(Fe.ca,this.Abt),await f.bn(),this.ybt.wn(Fe.ca,this.Abt),this.uAt=void 0),await this.Qyt(),await this.Iw(h)),this.gAt=h,t=await this.tAt(d,e,n,r),this.bAt=t,this.wbt.BI=t.nt,this.ZAt(t),t.Cnt(this.uAt)}await t.Int(Ri.dst),this.tbt(t)}}else{0;const t=this.bAt;if(t&&!t.N_t){await t.Ent(),this.NJ();const e=this.lAt(f.z_t,f.$ft);this.Wyt(e)&&await this.Xyt(e),this.gAt=e}}0;const _=this.pAt(a,r,!1,n);Ov(_),this.u3=void 0,await this.uAt.Int(Ri.dst),Bv(n),this._At(),await _,Bv(n),this.Z3(),this.sf=!1,this.Xc(new qo(this.Yu)),this.ibt()}catch(t){if(Eh(t))return void 0;0}}ibt(){if(this.Oc||this.Uc||void 0===this.dM)return;const t=this.Yu;var e,i;this.Yu+this.dM-this.qP.aT.maximumOffset<t?null==(e=this.KV)||e.Tn():null==(i=this.KV)||i.Al()}async pAt(t,e,i,s){let n,r,h=!0,o=t;for(;;){const a={stack:[],error:void 0,hasError:!1};try{const u=this.OAt;if(u.U>0){const e=u.gB(t);o!==e&&(u.br(o)&&this.Ngt.Zot.Vm===Is.CF||(o=e,h=!0))}if(h)h=!1,null==r||r.tf(),r=new Mr,r.lp(s),n=qe(this.Bbt(o,e,i,r.ap),r),Ov(n);else if(!this.FAt&&!this.Lc)break;const c=oe(a,Mr.fp([s]),!1);await Promise.race([n,this.Tp([Uv.Kp,Uv.Vf],c.ap),this.Ngt.Zot.Tp(We.Kst,c.ap)])}catch(t){a.error=t,a.hasError=!0}finally{se(a)}}}async Bbt(t,e,i,s){for(this.rM.jc(t,e,i);this.FAt||this.Lc;)await this.rM.Tp([Uv.If,Uv.Vp],s)}wAt(){void 0===this.TAt&&(this.TAt=this.mAt,this.rM.pn(Uv.$f,this.Gc),this.rM.pn(Uv.If,this.Xc))}yAt(){if(void 0===this.TAt)return;const t=this.mAt;this.TAt=void 0,this.rM.wn(Uv.$f,this.Gc),this.rM.wn(Uv.If,this.Xc),this.mAt!==t&&this.PH()}Mbt(t){this.$o=this.$o.Xl(t)}Nbt(t){const e=this.Ngt.Zot,i=e.D_t.filter((t=>t.ct>=.2));if(0===i.length)return;const s=i[0];if(t<=s.Tn)return s;for(const e of i)if(e.Pn>t)return e;return e.Vm!==Is.CF?i[i.length-1]:void 0}Wmt(t){let e=t.j_t;for(;e&&e.ct<.2;)e=e.j_t;return e}Hmt(t){let e=t.Y_t;for(;e&&e.ct<.2;)e=e.Y_t;return e}async _a(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(this.lH.DV(t.contentProtection),this.Lbt(),this.ZV&&!Tc(this.ZV)&&await this.sr(),!t||Tc(t))return;const h=oe(s,Mr.fp([i]),!1);this.kF=Mr.fp([h.ap]),this.ZV=t,this.Obt=e,this.k_t=t.abr,this.u_t=t.ignoreEmbeddedTextTrackTypes;const o=aH(new nH(this.TF,Boolean(this.ZV.useCredentials),this.Oot),this.Ert);var r;if(this.Ept(!0),this.hbt=new zV({iC:Gn.Ih(this.ZV.src),Dpt:null!=(r=null==(n=this.ZV.latencyConfiguration)?void 0:n.targetOffset)?r:this.ZV.liveOffset,Opt:this.ZV.timeServer,Ak:this.ZV.useCredentials},this.Fbt(this.k_t),this.TF,o,this.ZV.dash),this.Ngt=this.hbt.Mr,this.Ngt.Zot.wn(Uv.Rf,this.Ubt),this.Ngt.Zot.wn(Uv.Wp,this.Vbt),this.Ngt.Zot.wn(bV.Ymt,this.Hbt),this.Ngt.Zot.wn(We.Kst,this.eAt),await this.Wbt.On(this.Ngt.Zot),await this.qbt.On(this.Ngt.Zot),Qe(this.u_t,Zo.EMSG)||(this.Kft=new LH(this.AF),this.Au.UV(this.Kft.Z),await this.Kft.On(this.Ngt.Zot)),t.latencyConfiguration){const e=t.latencyConfiguration;this.KV=new FH(this,this.rM,e),this.KV.Rt=!0,this.nH.Ca(this.KV)}this.BAt(),h.Wu()}catch(t){s.error=t,s.hasError=!0}finally{se(s)}}async zbt(){const t=this.Ngt.Zot.TP;var e,i;(this.Ept(t),t)?this.jAt():(await Promise.all([null==(e=this.uAt)?void 0:e.Ent(Ri.Pst),null==(i=this.bAt)?void 0:i.Ent(Ri.Pst)].filter(Ee)),this.nbt(),this.Dbt(),this.nAt.tf())}get TP(){return this.kpt}Ept(t){this.kpt!==t&&(this.kpt=t,this.wo(t?new cH:new lH))}BAt(){this.Ngt&&(this.Xbt=this.Gbt(this.Xbt,this.kF.ap).catch(this.X_t))}async Gbt(t,e){t&&(await t,Bv(e));try{this.IP===Ds.vM||this.P3?await this.Qbt(e):this.IP===Ds.lF&&await this.Kbt(e)}catch(t){throw ta(t),this.UH(new ke(X.MANIFEST_LOAD_ERROR,t.message,t)),t}}async Qbt(t){await this.Kbt(t),this.jbt||(this.jbt=!0,this.aAt.lp(this.On(this.Obt,t)));try{await this.aAt.Pf}catch(t){ta(t),this.UH(new ke(X.MEDIA_DECODE_ERROR,t.message,t))}}async Kbt(t){await Dc(this.hbt.q,t);const e=this.Ngt.Zot;if(void 0===this.KV&&e.Vm===Is.CF){const t=e.bgt,i=(null==t?void 0:t.spt)?(null==t?void 0:t.spt)/1e3:e.Rpt,s={minimumOffset:(null==t?void 0:t.tpt)?(null==t?void 0:t.tpt)/1e3:.5*i,maximumOffset:(null==t?void 0:t.ipt)?(null==t?void 0:t.ipt)/1e3:1.5*i,targetOffset:i,forceSeekOffset:2.5*i,minimumPlaybackRate:_b,maximumPlaybackRate:vb};this.KV=new FH(this,this.rM,s),this.nH.Ca(this.KV)}}tbt(e){const i=this.uAt;e!==i&&(this.uAt&&this.YAt(this.uAt),this.bAt&&this.JAt(this.bAt),i&&this.NAt(this.DAt),this.uAt=e,this.bAt=i,this.qAt(this.uAt),this.bAt&&this.ZAt(this.bAt),this.TM.BI=e.ht,this.kM.BI=e.rt,this.gbt(e),this.ybt.pn(Fe.ca,this.Abt),t.Ybt(this.ybt),this.ybt.wn(Fe.ca,this.Abt),this.ybt.BI=e.nt,this.wbt.BI=void 0,this.vbt())}static Ybt(t){for(const e of t.RI)e.Tk=Aa.Th}be(){this.rM.be()}ke(){this.rM.ke()}UH(t){this.$V||(Ov(this.sr()),this.$V=Bc(t),this.Wl=t,this.wo(new _n(t)))}Lbt(){this.$V=void 0,this.Wl=void 0}qyt(){const t=this.iH;t&&(t.B$&&(t.B$.vG=this.yW.kG),t.N$&&(t.N$.vG=this.yW.kG))}zyt(){const t=this.iH;t&&(t.B$&&(t.B$.pG=this.yW.pG),t.N$&&(t.N$.pG=this.yW.pG))}determineStallJumpTarget(){if(this.uAt)return this.uAt.E_t()&&this.Yu>this.uAt.Pn-BR&&!this.uAt.x_t?this.uAt.Pn:void 0}async sr(){if(this.Zbt)return this.Zbt;try{this.Zbt=this.Jbt(),await this.Zbt}finally{this.Zbt=void 0}}async Jbt(){this.Hu=1,this.kF.tf(),this.Dbt(),this.nbt(),this.nAt.tf(),this.aAt.tf(),this.ebt=!1,this.Ml(),this.P3=!1,this.Rbt=!1,this.TM.BI=void 0,this.kM.BI=void 0,this.ybt.BI=void 0,this.wbt.BI=void 0,this.Xbt&&(await this.Xbt.catch(De),this.Xbt=void 0),await Promise.all([this.oAt,this.V3,this.rAt,this.aAt.Pf.catch(De)]),this.uAt&&(await this.uAt.bn(!0),this.uAt=void 0),this.bAt&&(this.JAt(this.bAt),await this.bAt.bn(!0),this.bAt=void 0),await this.Qyt(),this.gAt=void 0,this._bt=void 0,this.yH.sr(),await this.Wbt.sr(),await this.qbt.sr(),void 0!==this.Kft&&(this.Au.WV(this.Kft.Z),await this.Kft.bn(),this.Kft=void 0),this.AF.sr(),this.Ngt&&(this.Ngt.Zot.pn(Uv.Rf,this.Ubt),this.Ngt.Zot.pn(Uv.Wp,this.Vbt),this.Ngt.Zot.pn(bV.Ymt,this.Hbt),await this.hbt.bn(),this.Ngt=void 0),this.MAt=!1,this.$bt=NaN,this.tTt=0,this.eTt=0,this.TAt=void 0,this._3=!1,this.$o=r.Ol(),this.WF=!0,this.u3=void 0,this.iTt=!1,this.sf=!1,this.jbt=!1,this.aAt=new ue,this.PAt=0,this.IAt=0,this.CAt=0,this.ZV=void 0,this.Obt=void 0,this.u_t=[],this.pbt=void 0,this.nH.sr(),this.KV=void 0,this.Kyt={PM:0,IM:0,CM:0},await this.gH.sr(),this.rM.pH(),this.sTt.sr()}async bn(){this.Bo(),this.Lbt(),await this.sr(),this.Bo(),this.TM.bn(),this.kM.bn(),this.ybt.bn(),this.wbt.bn(),this.Au.bn(),this.yH.bn(),this.nTt.Wu(),await this.Wbt.bn(),await this.qbt.bn(),this.AF.bn(),this.sTt.bn(),this.rM.pn(Uv.Vf,this.H4),this.rM.pn(ir.Np,this.Z2),this.rM.pn(Uv.Df,this.rTt),this.rM.pn(Uv.$f,this.Gc),this.rM.pn(Uv.If,this.Xc),this.rM.pn(Uv.Qp,this.KAt),this.rM.pn(Uv.Xu,this.PH),this.rM.pn([Uv.no,Uv.Ff],this.hTt),this.rM.pn(VH,this.Os),await this.gH.bn(),this.Au.bn(),this.yW.pn("_G",this.oTt),this.yW.pn("mG",this.aTt),this.rM.pn(Yo.la,this.uTt),this.rM.pn([Uv.Cp,Uv.Ip],this.Os),this.rM.pn(Uv.iy,this.J_t),this.rM.TH=void 0,this.lH.pn("contentProtectionsTracked",this.cTt),this.rM.n6=void 0}GP(){return this.rM.ja}xa(){return this.rM.wH}get wP(){return!1}jP(){return!1}YP(){}ZP(){}JP(){}$P(){this.iAt(!0)}get dM(){var t;const e=null==(t=this.Ngt)?void 0:t.Zot;if(e&&e.Vm===Is.CF&&e.lgt)return e.Yot().getTime()/1e3-e.lgt.getTime()/1e3-this.Yu}iI(t){const e=this.rM.mH(t);return this.sTt.tt(e),e}constructor(t,e,i,s,n,h,o){super(),this.uAt=void 0,this.bAt=void 0,this.P3=!1,this.$bt=NaN,this.$V=void 0,this.Wl=void 0,this._3=!1,this.TAt=void 0,this.u3=void 0,this.iTt=!1,this.tTt=0,this.eTt=0,this.MAt=!1,this.kF=new Mr,this.aAt=new ue,this.jbt=!1,this.Ngt=void 0,this.hbt=void 0,this.kpt=!0,this.RAt=!0,this.Ibt=void 0,this.$o=r.Ol(),this.eH=Ds.sW,this.Xbt=void 0,this.WF=!0,this.ZV=void 0,this.Obt=void 0,this.k_t=void 0,this.u_t=[],this.sf=!1,this.sAt=new Mr,this.oAt=Promise.resolve(),this.U3=new Mr,this.V3=Promise.resolve(),this.ebt=!1,this.Rbt=!1,this.nAt=new Mr,this.rAt=Promise.resolve(),this.gAt=void 0,this.Kft=void 0,this.PAt=0,this.IAt=0,this.CAt=0,this.hH=new hh,this.pbt=void 0,this.Kyt={PM:0,IM:0,CM:0},this.iH=void 0,this.KV=void 0,this.jAt=t=>{var e,i,s;let n;"V_t"===(null==t?void 0:t.type)&&(n=t.Oat),n&&(null==(e=n.Tat)?void 0:e.Vm)===Be.hk&&(null==(s=this.bt)||null==(i=s.dash)?void 0:i.forceRecreateMediaSourceOnAudioSwitch)?this.iAt(!0):this.iAt()},this.J_t=t=>{var e;null==(e=this.uAt)||e.J_t(t)},this.PH=()=>{this.wo(new Ph(this.Yu,this.Ku))},this.Z2=t=>{this.wo(new QV(this.Yu,t.Wm,t.Ay))},this.zAt=t=>{this.PAt+=t.xM,this.wo(t)},this.XAt=t=>{const e=t.segments.filter((t=>t.xht));t.track===Be.hk?this.IAt=e.length:t.track===Be.wl&&(this.CAt=e.length)},this.H4=()=>{const t=this.ct;j(t)||t===this.$bt||(this.$bt=t,this.wo(new de(this.$bt)))},this.hTt=()=>{this.eAt(),this.Pbt()},this.rTt=t=>{this.Rbt||!this.$c||this.Uc||(this.Rbt=!0,this.wo(null!=t?t:new Zu(this.Yu)))},this.Vbt=t=>{this.Os(t),this.MAt||(this.MAt=!0,this.nTt.lTt())},this.Ubt=()=>{this.Ngt.Zot.pn(Uv.Rf,this.Ubt),this.wo(new ji)},this.QAt=t=>{var e;if(t.errorObject.code===X.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(e=this.uAt)?void 0:e.z_t.every((t=>!t.Bat))))return;this.UH(t.errorObject),this.wo(t)},this.GAt=t=>{this.UH(t.errorObject)},this.X_t=t=>{Eh(t)||this.UH(new ke(X.MEDIA_DECODE_ERROR,t.message,t))},this.eAt=()=>{if(!this.Oc)if(this.SAt())if(this.EAt()){const t=this.Ngt.Zot.Ppt;this.jc(t,!0)}else;else{const t=this.Ngt.Zot.Ppt;this.jc(t,!0)}},this.Gc=t=>{this.iTt=this.Uc,this.wo(t)},this.Xc=t=>{const e=this.iTt,i=this.Uc;this.iTt=i,e&&!i&&this.wo(t),this.rTt()},this.KAt=()=>{const t=this.UP,e=this.LP;this.tTt===t&&this.eTt===e||(this.tTt=t,this.eTt=e,this.wo(new tu))},this.Abt=t=>{const e=t.Ht;e.Tk===Aa.Yn?(this.dbt(e),this._bt=e):e===this._bt&&e.Tk===Aa.Th&&(this._bt=void 0,this.vbt())},this.xbt=()=>{this._3||this.Ibt&&(this.Ibt.Xf(),this.Ibt=void 0)},this.kbt=t=>{this._3||this.Ibt&&(this.Ibt.My(t),this.Ibt=void 0)},this.Hbt=()=>{this.zbt().catch(this.X_t)},this.uTt=t=>{this.UH(Ia(t.lt))},this.oTt=()=>{this.qyt()},this.aTt=()=>{this.zyt()},this.cTt=t=>{this.Gyt(t.xV)},this.TF=t,this.Ert=new OH(n),this.rM=h,this.Jyt=o,this.yW=i,this.yW.wn("_G",this.oTt),this.yW.wn("mG",this.aTt),this.nH=s,this.Oot=e.retryConfiguration,this.TM=new Ic,this.kM=new Ic,this.lH=new Xa(t),this.lH.wn("contentProtectionsTracked",this.cTt),this.rM.wn(Uv.Vf,this.H4),this.rM.wn(ir.Np,this.Z2),this.rM.wn(Uv.Df,this.rTt),this.rM.wn(Uv.$f,this.Gc),this.rM.wn(Uv.If,this.Xc),this.rM.wn(Uv.Qp,this.KAt),this.rM.wn(Uv.Xu,this.PH),this.rM.wn([Uv.no,Uv.Ff],this.hTt),this.rM.wn(VH,this.Os),this.rM.wn(Yo.la,this.uTt),this.rM.TH=this.lH,this.rM.n6=this,this.rM.wn([Uv.Cp,Uv.Ip],this.Os),this.rM.wn(Uv.iy,this.J_t),this.nTt=new WH(this,this.rM),this.yH=new Ir(this.nTt,!0),this.yH.wn(cb.rd,this.eAt),this.yH.wn(lb,this.Os),this.ybt=new Qt,this.ybt.wn(Fe.ca,this.Abt),this.wbt=new Qt,this.AF=this.dTt(),this.Wbt=new vH(this.AF),this.qbt=new IH(this.AF),this.gH=new kn(this.rM,this.TF),this.sTt=new du,this.Au=new je([this.ybt,this.Wbt.Z,this.qbt.Z,this.gH.Z,this.sTt])}},WH=class extends _k{get Vc(){return this.sa.Vc}lTt(){this.wo(new xr(this.Yu,this.Vc))}constructor(t,e){super(e),this.sa=t}};function qH(t,e){const i=t.filter((t=>"urn:mpeg:dash:role:2011"===t.H2)).map((t=>t.yE)).filter(Ee);return e||Qe(i,"main")?Qe(i,"caption")?"captions":Qe(i,"subtitle")?"subtitles":Qe(i,"dub")?"translation":"main":Qe(i,"sign")?"sign":Qe(i,"description")?"descriptions":Qe(i,"commentary")?"commentary":"alternative"}function zH(t,e){var i;const s=bv([...t.Evt,...t.Pvt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.H2));var n;const r=null!=(n=null==s||null==(i=s.yE)?void 0:i.split(","))?n:[],h=[];for(const t of r){const i=Number(t),s=bv(e,(t=>t.o===i));s&&h.push(s)}return h}var mr=class extends HH{QP(){if(IM(this.rM))return this.rM.QP()}get VAt(){return IM(this.rM)?this.rM.LP:0}get WAt(){return IM(this.rM)?this.rM.UP:0}async bn(){var t;await super.bn(),null==(t=this.fTt)||t.bn()}abt(t){var e,i;return((null!=(i=null==(e=this.ZV)?void 0:e.seamlessSwitchStrategy)?i:rr.vM)!==rr.vM||!ds.xg)&&super.abt(t)}lbt(){return!(ds.Lv&&ds.Fv<3)&&super.lbt()}dTt(){return new Ju(this,new iD)}Fbt(t){return CM(t)}constructor(t,e,i,s,n,r,h){super(t,e,i,s,n,r,new RM(h)),this.Het=h,ds.fg&&(this.fTt=new UM(this))}},XH=class extends mr{async bn(){await super.bn(),await this.kH.SH(this.rM)}constructor(t,e,i,s,n,r,h,o){const a=new os(r);super(t,e,i,s,n,a.VH(h),o),this.kH=a}};t(),t(),t(),t(),t();var GH=class extends Wu{get _Tt(){return this.jk._Tt}nP(){return super.nP().by(this._Tt)}_it(){return super._it().by(this._Tt)}sJ(t,e,i){const s=this._Tt;return super.sJ(t,{j8:e.j8-s,ct:e.ct,QO:e.QO-s},i)}yJ(t,e){const i=this._Tt;return super.yJ(w.max(0,t-i),w.max(0,e-i))}sc(t,e,i){const s=this._Tt;return super.sc(w.max(0,t-s),w.max(0,e-s),i)}jJ(t,e){const i=this._Tt;super.jJ(w.max(0,t-i),w.max(0,e-i))}YJ(t,e){const i=this._Tt;super.YJ(w.max(0,t-i),w.max(0,e-i))}constructor(t,e){super(e),this.jk=t}},QH=class extends bs{get _Tt(){return this.jk._Tt}cP(){return super.cP()+this._Tt}F$(t){super.F$(t-this._Tt)}DP(){return super.DP().by(this._Tt)}W$(t,e,i,s){const n=this._Tt;super.W$(t-n,e-n,i,s)}hit(t){return new GH(this,t)}constructor(t,e){super(e),this.nit(e),this.jk=t}},KH=class extends qu{get Wet(){return this.rM}get _Tt(){return this.vTt}set _Tt(t){this.vTt=t}nP(){return super.nP().by(this.vTt)}rP(){return jH(super.rP(),this.vTt)}aP(){return super.aP()+this.vTt}cP(){return super.cP()+this.vTt}PP(){return super.PP().by(this.vTt)}DP(){return super.DP().by(this.vTt)}jc(t,e,i){const s=w.max(0,t-this.vTt);super.jc(s,e,i)}YV(t){super.YV(jH(t,-this.vTt))}MP(){return this.Au}iI(t,e,i,s,n,r,h,o){return this.AF.iI(t,e,i,s,n,r,h,o)}mH(t){return this.AF.mH(t)}EF(t){this.AF.EF(t)}pH(){this.AF.sr(),super.pH()}fH(){return!1}vH(t,e,i,s,n){throw new v("Not supported")}Wu(){return this.E8.bn(),this.k8.bn(),this.AF.bn(),this.Au.bn(),super.Wu()}tit(t){return new QH(this,t)}$et(t){return new pi(t)}tI(t){let e;switch(t.type){case Uv.no:e=new ah(t.currentTime+this.vTt);break;case Uv.Ff:e=new ac(t.currentTime+this.vTt);break;case cb.nd:e=new $n(t.currentTime+this.vTt);break;case Uv.Xu:e=new Ph(t.currentTime+this.vTt,jH(t.currentProgramDateTime,this.vTt));break;case Uv.zf:e=new xu(t.currentTime+this.vTt);break;case Uv.$f:e=new lc(t.currentTime+this.vTt);break;case Uv.If:e=new qo(t.currentTime+this.vTt);break;case Uv.Fp:e=new zR(t.currentTime+this.vTt);break;case Uv.Vp:e=new mD(t.currentTime+this.vTt);break;case Uv.Df:e=new Zu(t.currentTime+this.vTt);break;case Uv.qu:e=new Sr(t.currentTime+this.vTt,t.playbackRate);break;case Uv.Bl:e=new Wo(t.currentTime+this.vTt,t.volume);break;case Uv.Vf:e=new de(t.duration+this.vTt);break;case cb.Lf:e=new xr(t.currentTime+this.vTt,t.readyState);break;default:e=t}super.tI(e)}ke(){super.ke(),this.k8.ke()}be(){super.be(),this.k8.be()}constructor(t){super(t),this.vTt=0,this.AF=new Ju(this,new iD),this.Au=new je([this.AF.nt,super.MP()]),this.k8=new hi,this.k8.s6(this.tH.parentElement),this.E8=new Ei(this.k8.je,this.c3,this.Au,this.Du,this.ja,this.wH)}};function jH(t,e){return t?new Date(t.getTime()+1e3*e):void 0}var YH=class extends _s{VH(t){if(t===Be.wl)return new KH(super.VH(t))}async SH(t){const e=t;await e.Wu(),await super.SH(e.Wet)}},ZH=class extends mr{async Iw(t){await super.Iw(t),void 0===this.gTt&&(this.gTt=this.wTt(),this.rM._Tt=this.gTt)}wTt(){if(this.ct===1/0){const t=this.kAt;if(t.U>0)return w.max(0,t.Tn(0)-300)}return 0}H3(t,e,i,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=jr.iyt),void 0===o&&(o=!1),o||(o=this.ct===1/0&&ds.Lv&&ds.Fv<3&&t<=this.Yu),super.H3(t,e,i,s,n,r,h,o)}async sr(){await super.sr(),this.gTt=void 0,this.rM._Tt=0}async bn(){await super.bn(),await this.rM.Wu(),await this.kH.SH(this.rM)}static gT(t){var e;return(!t||"google-dai"!==(null==t||null==(e=t.ssai)?void 0:e.integration))&&(ds.Lv&&ds.Fv<4)}constructor(t,e,i,s,n,r,h,o){const a=new YH(new os(r));super(t,e,i,s,n,a.VH(h),o),this.kH=a,this.gTt=void 0}};t(),t(),t(),t(),t();var JH=class extends xM{get Wet(){return this.rM}get LP(){return this.rM.LP}get UP(){return this.rM.UP}constructor(t){super(t)}};t(),t(),t();var $H=class extends Wu{cit(){return this.mTt?this.PG:super.cit()}dit(t){this.mTt?this.PG=t:super.dit(t)}nP(){return this.mTt?this.pTt:super.nP()}dT(){return this.mTt?this.pl:super.dT()}_it(){return this.mTt?this.yTt:super._it()}vit(){return this.mTt?this.SG:super.vit()}git(t){this.mTt?this.SG=t:super.git(t)}sJ(t,e,i){return this.nJ((i=>this.ATt(t,e,i)),i)}ATt(t,e,i){return super.sJ(t,e,i)}ZJ(){return this.nJ((()=>this.bTt()))}bTt(){return super.ZJ()}hJ(t,e,i){return this.nJ((i=>this.TTt(t,e,i)),i)}TTt(t,e,i){return super.hJ(t,e,i)}yK(){return this.mTt?this.G8:super.yK()}WJ(){this.mTt?this.STt=!0:super.WJ()}jJ(t,e){this.mTt?(this.yTt=this.yTt.Xl(new r([t,e])),this.kTt.push({Vm:"pht",YM:t,ZM:e})):this.ETt(t,e)}ETt(t,e){super.jJ(t,e)}yJ(t,e){return this.nJ((()=>this.PTt(t,e)))}PTt(t,e){return super.yJ(t,e)}YJ(t,e){this.mTt?(this.yTt=this.yTt.bB(new r([t,e])),this.kTt.push({Vm:"sc",YM:t,ZM:e})):this.ITt(t,e)}ITt(t,e){super.YJ(t,e)}sc(t,e,i){return this.nJ((i=>this.CTt(t,e,i)),i)}CTt(t,e,i){return super.sc(t,e,i)}hK(t){return this.nJ((()=>this.RTt(t)))}RTt(t){return super.hK(t)}async nJ(t,e){this.IJ(),this.mTt&&(await Dc(this.mTt.Pf,e),this.IJ()),Bv(e);try{this.BJ=t(e),await this.BJ}finally{this.BJ=void 0}}IJ(){if(this.BJ)throw new v("Internal error")}async xTt(){if(this.mTt)throw new p("Already locked");this.mTt=new ue,this.DTt(),this.BJ&&(await this.BJ.catch(De),this.DTt())}NTt(){var t;null==(t=this.mTt)||t.Xf(),this.mTt=void 0,this.BTt()}DTt(){this.pl=super.dT(),this.PG=super.cit(),this.SG=super.vit(),this.pTt=super.nP(),this.yTt=super._it(),this.G8=super.yK(),this.STt=!1}BTt(){this.IJ(),super.dit(this.PG),super.git(this.SG);const t=this.kTt.slice();us(this.kTt);for(const e of t)"pht"===e.Vm?this.ETt(e.YM,e.ZM):this.ITt(e.YM,e.ZM);this.STt&&super.WJ(),this.pTt.IB(super.nP())||this.wo(new o(Xh.GQ))}Wu(){var t;null==(t=this.mTt)||t.tf(),this.mTt=void 0,super.Wu()}constructor(t){super(t),this.BJ=void 0,this.mTt=void 0,this.PG=0,this.pTt=r.Ol(),this.yTt=r.Ol(),this.kTt=[],this.G8=!1,this.STt=!1,this.SG=0,this.pl=t.aT}},tW=class extends $H{nP(){var t,e;return super.nP().Xl(null!=(e=null==(t=this.MTt)?void 0:t.Sl)?e:r.Ol())}_it(){var t,e;return super._it().Xl(null!=(e=null==(t=this.MTt)?void 0:t.GJ)?e:r.Ol())}dit(t){super.dit(t),this.MTt&&(this.MTt.pG=t)}git(t){super.git(t),this.MTt&&(this.MTt.vG=t)}ETt(t,e){super.ETt(t,e),this.MTt&&this.MTt.jJ(t,e)}ITt(t,e){super.ITt(t,e),this.MTt&&this.MTt.YJ(t,e)}async CTt(t,e,i){Bv(i);const s=[];s.push(super.CTt(t,e,i)),this.MTt&&s.push(this.MTt.sc(t,e,i)),await Promise.all(s)}nK(t){return!!super.nK(t)||this.jk.LTt(t)}RTt(t){return super.nK(t)?super.RTt(t):this.jk.OTt(t)}FTt(t){var e,i;null==(e=this.MTt)||e.pn(xo,this.wit),this.MTt=t,null==(i=this.MTt)||i.wn(xo,this.wit)}constructor(t,e){super(e),this.MTt=void 0,this.jk=t}},eW=class extends bs{nK(t){const e=void 0!==this.M$,i=void 0!==this.L$,s=t.q$.some((t=>Kc(t.yS,"audio"))),n=t.q$.some((t=>Kc(t.yS,"video")));return e===s&&i===n&&(!!super.nK(t)||(!(!this.UTt||!this.UTt.nK(t))||this.jk.VTt(t)))}async hK(t){return super.nK(t)?await super.hK(t):this.UTt&&this.UTt.nK(t)?(this.HTt(),await this.hK(t)):(await this.jk.WTt(t),await this.hK(t))}LTt(t){return this.nK(this.qTt(t))}OTt(t){return this.hK(this.qTt(t))}qTt(t){const e=this.aT,i=e.q$.map((e=>Kc(t.yS,"audio")&&Kc(e.yS,"audio")||Kc(t.yS,"video")&&Kc(e.yS,"video")?t:e));return yh({},e,{q$:i})}W$(t,e,i,s){super.W$(t,e,i,s),this.UTt&&this.UTt.W$(t,e,i,s)}zTt(){return!this.XTt&&this.GTt}cP(){return void 0!==this.QTt?this.QTt:this.zTt()?this.nf:super.cP()}F$(t){this.nf=t,this.QTt=void 0,this.zTt()||super.F$(t)}sit(){return!this.zTt()&&super.sit()}WJ(){this.QTt=w.max(iW(this.iH.N$),iW(this.iH.B$)),this.zTt()||super.WJ()}NJ(){this.QTt=void 0,this.zTt()||super.NJ()}hit(t){return new tW(this,t)}KTt(){this.XTt=!this.XTt}HTt(){const t=this.iH,e=this.UTt;e&&(this.XTt=!this.XTt,this.nit(e),this.jTt(t),this.zTt()&&this.YTt())}jTt(t){var e,i;this.UTt=t,null==(e=this.M$)||e.FTt(null==t?void 0:t.N$),null==(i=this.L$)||i.FTt(null==t?void 0:t.B$)}ZTt(t){const e=this.iH,i=this.UTt;if(!i)return;const s=this.XTt,n=s?e:i,r=(s?i:e).Sl.BB(t);if(!r)return;const h=zM(n.Sl,this._it()).BB(r.Pn(0),dt);return!h||r.Pn(0)+dt>=h.Pn(0)?void 0:w.max(r.Pn(0),h.Tn(0))}JTt(t,e){if(this.GTt)return Promise.resolve();const i=this.XTt?this.UTt:this.iH;return i?(this.GTt=!0,this.$Tt((e=>{if(Bv(e),this.GTt)return async function(t,e,i){Bv(i);const s=[];t.N$&&s.push(on(t.N$,e,i));t.B$&&s.push(on(t.B$,e,i));await Promise.all(s),t.WJ()}(i,t,e)}),e)):Promise.resolve()}YTt(){if(!this.GTt)return;const t=this.XTt?this.UTt:this.iH;if(!t)return;var e;this.GTt=!1;const i=null!=(e=this.QTt)?e:this.nf;t.ct<i&&t.F$(i),t.NJ()}tSt(t){var e;const i=null!=(e=this.QTt)?e:this.nf;t.F$(i),this.XTt?this.nit(t):this.jTt(t)}_it(){var t,e,i;const s=null!=(i=null==(t=this.M$)?void 0:t.GJ)?i:r.Ol();var n;const h=null!=(n=null==(e=this.L$)?void 0:e.GJ)?n:r.Ol();return s.Xl(h)}async $Tt(t,e){const i=[];this.M$&&i.push(this.M$.xTt()),this.L$&&i.push(this.L$.xTt());try{await Promise.all(i),await t(e)}finally{this.M$&&this.M$.NTt(),this.L$&&this.L$.NTt()}}ait(t){t.type===Xh.GQ&&this.jk.FJ(),super.ait(t)}constructor(t,e){super(e),this.UTt=void 0,this.nf=NaN,this.XTt=!1,this.GTt=!1,this.QTt=void 0,this.nit(e),this.jk=t}};function iW(t){if(!t)return 0;const e=t.Sl;return e.U>0?e.Pn(e.U-1):0}function Zt(t){return t.aT.Vm===A.CF}t();var sW=class extends JH{get eSt(){return this.iSt}nP(){return super.nP().Xl(this.iSt.Sl)}cP(){if(!this.sSt){const t=this.iH;if(t&&Zt(t))return t.ct}return super.cP()}zet(){return!!super.zet()&&!(!this.sSt&&!this.yK())}Xet(){return!!super.Xet()&&!(!this.sSt&&super.zet()&&!this.yK())}yK(){const t=this.iH;return!(!t||!Zt(t))&&t.yK}PP(){return this.$o.Xl(this.rM.Tl)}DP(){return super.DP().Xl(this.iSt.Cl)}xP(){return super.xP()}qet(){var t;return null!=(t=super.qet())?t:this.iSt.sH}bl(){return this.if=!1,super.bl()}Ml(){this.if=!0,super.Ml()}J4(){this.sSt=!0,super.J4(),this.iSt.J4()}t6(){this.sSt=!1,super.t6(),this.iSt.J4()}aP(){var t;return null!=(t=this.u3)?t:super.aP()}NP(){return void 0!==this.u3||super.NP()}jc(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.nSt.tf(),this.U3.tf(),this.U3=new Mr,this.rSt=qe(this.H3(t,e,i,this.rSt,this.U3.ap),this.U3).catch(De)}async H3(t,e,i,s,n){this.u3=t,this.W3=t,this.wo(new lc(t)),s&&await s.catch(De),Bv(n),this.iH&&Zt(this.iH)&&this.iH.YTt(),this.u3=void 0,super.jc(t,e,i),this.iSt.jc(t,e,i),this.hSt()}YV(t){const e=this.sH;if(!e||j(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.jc(i)}yl(){super.yl(),this.iSt.yl()}get LP(){return this.oSt.LP}get UP(){return this.oSt.UP}ke(){this.lW&&(this.lW=!1,this.oSt.ke())}be(){this.lW||(this.lW=!0,this.oSt.be())}async aSt(){var t;this.u3=void 0,this.W3=NaN,this.$o=r.Ol(),null==(t=this.uSt)||t.tf(),this.nSt.tf(),this.U3.tf(),this.rSt&&(await this.rSt.catch(De),this.rSt=void 0)}Yet(t){super.Yet(t),this.iSt.TH=t}Zet(t){super.Zet(t),this.iSt.n6=t}MP(){return this.Au}iI(t,e,i,s,n,r,h,o){return this.AF.iI(t,e,i,s,n,r,h,o)}mH(t){return this.AF.mH(t)}vH(t,e,i,s,n){throw new v("Not implemented yet")}fH(){return!1}EF(t){this.AF.EF(t)}pH(){this.AF.sr(),super.pH()}async On(t){const e=await super.On(t);return Zt(e)&&this.hSt(),e}async sr(){await this.aSt(),await super.sr(),await this.iSt.sr()}async Wu(){await this.aSt(),this.AF.bn(),this.Au.bn(),await super.Wu()}tit(t){return new eW(this,t)}$et(t){return new pi(t)}hSt(){this.nSt.tf(),this.nSt=new Mr,this.rSt=qe(this.cSt(this.rSt,this.nSt.ap),this.nSt).catch(De)}async cSt(t,e){if(t&&await t.catch(De),this.iH&&Zt(this.iH))for(;;){let t;for(Bv(e),this.lSt()&&this.KTt(),this.iH.YTt(),Bv(e);;){const i={stack:[],error:void 0,hasError:!1};try{if(Bv(e),this.lSt())break;if(t=this.iH.ZTt(this.aP()),void 0!==t){0,this.dSt(),await this.iH.JTt(t,e),Bv(e),this.iSt.jc(t);break}const s=oe(i,Mr.fp([e]),!1);await Promise.race([this.Tp(Uv.Xu,s.ap),this.fSt(s.ap)])}catch(t){i.error=t,i.hasError=!0}finally{se(i)}}for(Bv(e);!this.lSt();)await this.rM.Tp([Uv.Xu,Uv.Df,cb.Lf],e)}}lSt(){const t=this.iH;if(void 0===t||!Zt(t))return!1;const e=this.aP(),i=this.rM.Sl;if(!this.rM.$c&&i.br(e))return!1;return!!zM(this.iSt.Sl,t._it()).EB(e,e+dt)}KTt(){if(this._St)return;this._St=!0,this.$o=this.PP();const t=QR(this),e=this.NP(),i=this.xP(),s=this.rM,n=this.iSt,r=this.iH;r.YTt(),r.KTt(),KR(n,t),this.iit(n),this.iSt=s,s.Ml(),s.tc=!0,this._St=!1;const h=this.NP();e!==h&&(h?this.wo(new lc(this.Yu)):this.wo(new qo(this.Yu)));const o=this.xP();i!==o&&this.wo(new xr(this.Yu,o)),h||this.dSt()}dSt(){const t=this.rM,e=this.oSt;if(e===t)return;const i=this.UP,s=this.LP;this.oSt=t,this.lW&&(e.ke(),t.be());const n=this.UP,r=this.LP;n>0&&r>0&&(i!==n||s!==r)&&this.wo(new tu)}VTt(t){return void 0!==this.iSt.EK([t])}async WTt(t){this.dSt();const e=this.iH,i=this.iSt;await i.sr();const s=await i.On(t);e.tSt(s)}fSt(t){return this.uSt=new ue,Dc(this.uSt.Pf,t)}FJ(){var t;null==(t=this.uSt)||t.Xf()}tI(t){t.type===Uv.$f&&this.W3===t.currentTime||(t.type===Uv.If&&(this.W3=NaN,this.dSt()),t.type!==cb.Lf&&t.type!==Uv.Ff&&t.type!==Uv.Df||this._St||!this.lSt()?(t.type!==Uv.Df||this.$c)&&super.tI(t):this.hSt())}constructor(t,e,i){super(t),this.sSt=!1,this.u3=void 0,this.W3=NaN,this.$o=r.Ol(),this.if=!0,this._St=!1,this.lW=!0,this.uSt=void 0,this.rSt=void 0,this.nSt=new Mr,this.U3=new Mr,this.iSt=e,this.oSt=t,this.rM.be(),this.iSt.ke(),this.AF=new Ju(this,i),this.Au=new je([this.AF.nt,super.MP()])}},nW=class extends sW{get Wet(){return this.rM}get eSt(){return this.iSt}ke(){super.ke(),this.k8.ke()}be(){super.be(),this.k8.be()}get tH(){return this.rM.tH}get u0(){return this.rM.u0}get XP(){return this.rM.XP}set XP(t){this.rM.XP=t}s6(t){this.rM.s6(t),this.iSt.s6(t)}JP(){this.rM.JP(),this.iSt.JP()}QP(){return this.rM.QP()}xa(){return this.bM}iit(t){const e=this.GP(),i=this.QP();super.iit(t),this.bM.BI=t.wH,this.GP()!==e&&this.wo(new au),this.QP()!==i&&this.wo(new at)}Wu(){return this.bM.bn(),this.E8.bn(),this.k8.bn(),super.Wu()}constructor(t,e){super(t,e,new iD),this.bM=new Ar(t.wH),this.k8=new hi,this.k8.s6(t.tH.parentElement),this.E8=new Ei(this.k8.je,this.c3,this.nt,this.Du,this.ja,this.wH)}},rW=class extends _s{VH(t){if(t===Be.wl){const e=super.VH(t),i=super.VH(t);return new nW(e,i)}return super.VH(t)}async SH(t){t instanceof nW?(await t.Wu(),await super.SH(t.Wet),await super.SH(t.eSt)):await super.SH(t)}},hW=class extends mr{async bn(){await super.bn(),await this.kH.SH(this.rM)}static gT(t){var e;return!ds.Ks&&!ds.Eg&&!(t&&"google-dai"===(null==(e=t.ssai)?void 0:e.integration))}constructor(t,e,i,s,n,r,h,o){const a=new os(new rW(r));super(t,e,i,s,n,a.VH(h),o),this.kH=a}};t(),t(),t();var oW=class extends bs{hit(t){return new $H(t)}dT(){return this.vSt?this.pl:super.dT()}nP(){return this.vSt?this.pTt:super.nP()}cP(){return this.vSt?this.nf:super.cP()}F$(t){this.vSt?(this.nf=t,this.gSt=!0):super.F$(t)}DP(){return this.vSt?this.wSt?this.wSt.e$():this.H$:super.DP()}W$(t,e,i,s){this.vSt?this.wSt=new NR(t,e,i,s):super.W$(t,e,i,s)}sit(){return this.vSt?this.G8&&!1!==this.STt:super.sit()}WJ(){this.vSt?this.STt=!0:super.WJ()}NJ(){this.vSt?this.STt=!1:super.NJ()}nK(t){return!this.vSt&&super.nK(t)}hK(t){return this.vSt?Promise.reject(new p("Not supported")):super.hK(t)}async xTt(){if(this.vSt)throw new p("Already locked");this.vSt=!0,this.DTt();const t=[];this.M$&&t.push(this.M$.xTt()),this.L$&&t.push(this.L$.xTt()),await Promise.all(t)}NTt(){this.vSt=!1,this.M$&&this.M$.NTt(),this.L$&&this.L$.NTt(),this.BTt()}DTt(){this.pl=super.dT(),this.pTt=super.nP(),this.nf=super.cP(),this.H$=super.DP(),this.gSt=!1,this.STt=void 0,this.wSt=void 0}BTt(){if(this.gSt&&(super.F$(this.nf),this.gSt=!1),void 0!==this.wSt){const t=this.wSt;super.W$(t.Tn,t.Pn,t.i$,t.s$),this.wSt=void 0}void 0!==this.STt&&(this.STt?super.WJ():super.NJ(),this.STt=void 0)}constructor(t){super(t),this.vSt=!1,this.pTt=r.Ol(),this.nf=0,this.gSt=!1,this.G8=!1,this.STt=void 0,this.H$=r.Ol(),this.wSt=void 0,this.nit(t),this.pl=t.aT}},aW=class extends qu{get Wet(){return this.rM}bl(){return void 0!==this.iH&&Zt(this.iH)&&this.$c&&this.jc(0),super.bl()}jc(t,e,i){void 0!==this.iH&&Zt(this.iH)&&this.$c&&t<this.ct&&this.mSt(),super.jc(t,e,i)}J4(){this.pSt=!0,super.J4()}t6(){this.pSt=!1,this.ySt()||super.t6()}ySt(){return this.pSt||this.ASt}bSt(){this.ASt||(this.ASt=!0,super.J4())}TSt(){this.ASt&&(this.ASt=!1,this.ySt()||super.t6())}On(t){this.SSt.tf();const e=this.zk(t,this.kSt);return this.ESt=e,e}async zk(t,e){return e&&await e.catch(De),this.TSt(),await super.On(t)}tit(t){return new oW(t)}$et(t){return new pi(t)}sr(){this.SSt.tf();const t=this.Jbt(this.kSt);return this.ESt=t,t}async Jbt(t){return t&&await t.catch(De),this.TSt(),await super.sr()}mSt(){this.bSt(),this.SSt.tf(),this.SSt=new Mr,this.kSt=qe(this.PSt(this.ESt,this.kSt,this.SSt.ap),this.SSt).catch(wi)}async PSt(t,e,i){t&&await t.catch(De),e&&await e.catch(De),Bv(i);const s=this.iH;if(!s||!Zt(s))return;const n=s.aT;await s.xTt(),await this.rM.sr();const r=await this.rM.On(n);r.F$(s.ct),s.nit(r),s.NTt(),this.TSt()}async Wu(){this.SSt.tf(),this.kSt&&(await this.kSt.catch(De),this.kSt=void 0),this.ySt()&&super.t6(),await super.Wu()}constructor(...t){super(...t),this.pSt=!1,this.ASt=!1,this.ESt=void 0,this.kSt=void 0,this.SSt=new Mr}},uW=class extends _s{VH(t){if(t===Be.wl)return new aW(super.VH(t))}async SH(t){const e=t;await e.Wu(),await super.SH(e.Wet)}static gT(){return ds.Ig}};WE(new class extends pM{kC(t,e,i,s,n,r,h,o){const a=new AM(gi.Gg.pet,gi.Gg.met,gi.Gg.wet,gi.Gg.Aet);let u;u=ZH.gT(o)?ZH:hW.gT(o)?hW:XH;let c=e;return uW.gT()&&(c=new uW(c)),new u(i,s,n,r,a,c,Be.wl,t)}qH(){return!0}constructor(...t){super(...t),this.zH=hu.AV}}),t(),t(),t(),t();var ks=function(t){return t.ISt="currentbufferingrenditionchange",t.CSt="RSt",t.xSt="DSt",t.NSt="BSt",t}({});t(),t();var cW=class{constructor(t,e){var i,s;this.Let=void 0,this.KI=cT(),this.MSt=e,this.Vm=t.Vm,this.LSt=t.LSt,this.OSt=t.OSt,this.FSt=t.FSt,this.l=t.l,this.gs=t.gs,this.USt=t.USt,this.VSt=t.VSt,this.HSt=void 0===t.Igt,this.WSt=null!=(s=null==(i=t.WSt)?void 0:i.split(","))?s:[]}};function lW(t,e){return t.Vm===e.Vm&&(t.l===e.l||!(!t.LSt||!e.LSt))}function dW(t,e){return void 0!==t&&void 0!==e&&fW(t,e)}function fW(t,e){return t.MSt===e.MSt}function _W(t,e){return fW(t,e)&&t.USt===e.USt}function vW(t,e){for(const i of t)if(_W(i,e))return!0;return!1}t();var gW=function(t){return t.qSt="alternative",t.zSt="main",t.XSt="commentary",t.GSt="",t.cF="descriptions",t.QSt="main-desc",t.KSt="translation",t}({}),wW=function(t){return t.qSt="alternative",t.zSt="main",t.XSt="commentary",t.GSt="",t.uF="captions",t.qI="sign",t.aF="subtitles",t}({}),mW=class extends Re{get jI(){return this.jSt}get Rt(){const t=this.YSt();if(!t)return!1;for(const e of this.YI.RI)if(e.ZSt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var e;let t=null==(e=this.YI.DI(0))?void 0:e.ZSt;const i=this.sa.JSt;for(const e of this.YI.RI)if(e.$St===i){t=e.ZSt;break}this.tkt(t)}else this.tkt(void 0)}get QI(){if(!this.Rt)return;const t=this.sa.ekt;for(const e of this.YI.RI)if(vW(t,e.ZSt))return e}get ba(){return this.Zu||(this.Zu=Ji(this)),this.Zu}get o(){return this.HM.toString()}get KI(){return this.HM}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,this.wo(new Ba(this)))}get gs(){return this.CA}get Tk(){return this.Rt?"enabled":"disabled"}get ZI(){return this.Dht}set ZI(t){let e=[];if(t){e=t.filter((t=>{const e=this.QI?sO(this.QI):void 0;return Gn.Zs.Aw(e,sO(t))})).filter((e=>this.YI.FM(t)&&e.Ltt))}else e=this.YI.RI.filter((t=>t.Ltt));if(0!==e.length){if(!(t===this.Dht||this.Dht&&Pv(this.Dht,e))){if(this.Dht=t?e:void 0,this.sa.ikt(e.map((t=>t.$St))),1===e.length){const t=e[0].$St,i=this.Dw===Be.wl,s=this.yW.DG;Ov(this.sa.skt(t,{nkt:!0,rkt:s&&i,hkt:s&&!i}))}this.wo(new nc(e,this))}}else this.wo(new iO)}qM(t){this.Rt=t}bn(){this.Bo(),this.sa.pn(ks.ISt,this.okt),this.sa.pn(ks.CSt,this.akt);for(const t of this.YI.RI)t.bn();this.YI.sr()}constructor(t,e,i,s,n){var r;super(),this.Dw=t,this.sa=e,this.yW=i,this.mh=s,this.YI=n,this.Dht=void 0,this.ukt=void 0,this.ckt=()=>this.wo(new Ba(this)),this.okt=()=>{const t=this.QI;t&&this.ukt!==t&&(this.ukt=t,this.wo(new EF(t)))},this.akt=()=>{const t=this.Rt;this.lkt!==t&&(this.lkt=t,this.mh.wo(new no(this)),this.wo(new no(this)))},this.ukt=this.QI,this.lkt=this.Rt;const h=n.DI(0);var o,a;this.ec=null!=(o=null==h?void 0:h.ZSt.l)?o:"",this.CA=null!=(a=null==h?void 0:h.ZSt.gs)?a:"",this.jSt=null==h||null==(r=h.ZSt)?void 0:r.WSt.map(SW).filter(Ee),this.HM=xs(),this.sa.wn(ks.ISt,this.okt),this.sa.wn(ks.CSt,this.akt);for(let t=0;t<this.YI.U;t++){this.YI.DI(t).wn("update",this.ckt)}}},pW=class extends mW{get Lt(){return gW.zSt}YSt(){return this.sa.dkt}tkt(t){Ov(this.sa.fkt(t))}constructor(t,e,i,s){super(Be.hk,t,e,i,s)}},yW=class extends mW{get Lt(){return wW.zSt}YSt(){return this.sa._kt}tkt(t){Ov(this.sa.vkt(t))}constructor(t,e,i,s){super(Be.wl,t,e,i,s)}},AW=class extends Re{get o(){return String(this.$St.o)}get KI(){return this.$St.o}get PV(){return this.$St.PV}get Sgt(){return this.$St.Sgt}get _h(){var t;return null!=(t=this.ec)?t:this.ZSt.l}set _h(t){this._h!==t&&(this.ec=t,this.wo(new Rs(this.ba)))}get Igt(){return this.ZSt.MSt.gkt()}get kgt(){return this.$St.kgt}mF(){}wF(){}bn(){this.Bo()}constructor(t,e){super(),this.$St=t,this.ZSt=e,this.ec="",this.Ltt=!0}},bW=class extends AW{get Svt(){return 0}get Let(){var t;return(null==(t=this.$St.Let)?void 0:t.wkt)||""}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return IU(this)}constructor(t,e){super(t,e),this.Zu=void 0}},TW=class extends AW{get Let(){var t;return(null==(t=this.$St.Let)?void 0:t.mkt)||""}get Egt(){return this.pkt}set Egt(t){this.pkt!==t&&(this.pkt=t,this.wo(new Rs(this.ba)))}get Qat(){var t,e;return null!=(e=null!=(t=this.ykt)?t:this.$St.Qat)?e:0}set Qat(t){this.Qat!==t&&(this.ykt=t,this.wo(new Rs(this.ba)))}get Ci(){var t,e;return null!=(e=null==(t=this.$St.Akt)?void 0:t.Ci)?e:0}get Ti(){var t,e;return null!=(e=null==(t=this.$St.Akt)?void 0:t.Ti)?e:0}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){return PU(this)}constructor(t,e){super(t,e),this.Zu=void 0,this.pkt=0,this.ykt=void 0}};function SW(t){return"public.accessibility.describes-video"===t?An.GI:"public.accessibility.transcribes-spoken-dialog"===t?An.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?An.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?An.XI:void 0}t(),t();var vi=new class{bkt(t){if(!this.Rt())return!1;const e=[];return!(e.length>0)||e.some((e=>e.toLowerCase()===t.toLowerCase()))}Tkt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.bkt(t)&&Gn.jw("DEBUG "+t+" -",...i)}rD(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.bkt(t)&&Gn.jw("INFO "+t+" -",...i)}Skt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.bkt(t)&&Gn.Yw("WARNING "+t+" -",...i)}lt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.bkt(t)&&Gn.Zw("ERROR "+t+" -",...i)}kkt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.bkt(t)&&Gn.Zw("FATAL "+t+" -",...i)}constructor(){this.Rt=()=>!1}},Yn="HLSPlaylistParser",yr="Discontinuity",Gt="Buffering",kW=class{tut(){var t;const e=null==(t=this.sa.Mr)?void 0:t.Ekt;if(!e||0===e.length)return void vi.Skt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var i;const s=null!=(i=bv(e,(t=>0!==t.Pkt.length&&0!==t.Ikt.length)))?i:e[0],n=e.filter((t=>t!==s));for(const t of s.Pkt){const e=new Zh,i=[];e.OM(new bW(s,t)),i.push(t);for(const s of n)for(const n of s.Pkt)if(lW(n,t)&&!vW(i,n)){e.OM(new bW(s,n)),i.push(n);break}this.Ckt.tt(new pW(this.sa,this.yW,this.Ckt,e))}for(const t of s.Ikt){const e=new Zh,i=[];e.OM(new TW(s,t)),i.push(t);for(const s of n)for(const n of s.Ikt)if(lW(n,t)&&!vW(i,n)){e.OM(new TW(s,n)),i.push(n);break}this.Rkt.tt(new yW(this.sa,this.yW,this.Rkt,e))}}xkt(){this.Dkt(this.Ckt),this.Dkt(this.Rkt)}Dkt(t){const e=[];for(const i of t.RI){const t=[];for(const e of i.YI.RI)Qe(e.$St.Nkt,e.ZSt)||t.push(e);for(const e of t)i.YI.sc(e),e.bn();0===i.YI.U&&e.push(i)}for(const i of e)t.it(i),i.bn()}Bkt(t,e){const i=this.Mkt(t);void 0!==i&&(i.Qat=e)}Lkt(t,e){const i=this.Mkt(t);void 0!==i&&(i.Egt=e)}Mkt(t){for(const e of this.Rkt.RI){const i=bv(e.YI.RI,(e=>e.ZSt===t));if(void 0!==i)return i}}constructor(t,e,i,s){this.sa=t,this.yW=e,this.Ckt=i,this.Rkt=s}};t(),t(),t();var Ms=class{get W8(){const t=1-this.Okt**this.Fkt;return this.Ukt/t}Znt(t,e){const i=this.Okt**t,s=e*(1-i)+i*this.Ukt;j(s)||(this.Ukt=s,this.Fkt+=t)}hK(t){const e=w.exp(w.log(.5)/t);if(e===this.Okt)return;if(0===this.Fkt)return void(this.Okt=e);const i=this.W8,s=1-e**this.Fkt;this.Ukt=i*s,this.Okt=e}constructor(t){this.Ukt=0,this.Fkt=0,this.Okt=w.exp(w.log(.5)/t)}},Os=class t{get W8(){return this.rrt()?w.max(this.Vkt.W8,this.Hkt.W8):this.Wkt}Znt(t){const e=Gn.Qg(),i=t;this.qkt&&void 0!==this.zkt&&e-this.zkt>=this.Xkt&&this.sr(),this.Gkt+=1,this.Vkt.Znt(1,i),this.Hkt.Znt(1,i),this.Qkt.push(i),this.Qkt.length>this.Kkt&&this.Qkt.shift(),this.zkt=e}rrt(){return void 0!==this.zkt&&Gn.Qg()-this.zkt<=this.Xkt}sr(){this.Vkt=new Ms(this.jkt),this.Hkt=new Ms(this.Ykt),this.Gkt=0,this.Qkt=[],this.zkt=void 0}constructor(e=t.Zkt,i=t.Jkt,s=t.hrt,n=!1){this.Gkt=0,this.Qkt=[],this.zkt=void 0,this.Xkt=6e4,this.Kkt=10,this.jkt=e,this.Ykt=i,this.Wkt=s,this.qkt=n,this.Vkt=new Ms(e),this.Hkt=new Ms(i)}};Os.Zkt=2,Os.Jkt=5,Os.hrt=.1,t();var EW=class{oG(t){for(const e of this.$kt)e.oG(t)}aG(t){for(const e of this.$kt)e.aG(t)}uG(t,e){for(const i of this.$kt)i.uG(t,e)}cG(t){for(const e of this.$kt)e.cG(t)}constructor(t){this.$kt=t}};t();var PW=class{oG(t){this.tEt=t}aG(t){this.eEt.Znt(t-this.tEt)}uG(t){}cG(t){}constructor(t){this.tEt=0,this.eEt=t}};t();var IW=class{aG(t){this.iEt=t}uG(t,e){this.urt.Znt(t-this.iEt,e.byteLength),this.iEt=t}cG(t){}oG(t){}constructor(t){this.iEt=0,this.urt=t}};t();var CW=class{oG(t){}uG(t,e){const i=e.byteLength,s=this.sEt;this.sEt=i;const n=t-this.In;this.In=t,this.nEt.tj(e);const r=!this.nEt.rEt(),h=i>=this.hEt;s!==Gn.Zs.gw&&r&&h&&this.urt.Znt(n,i)}aG(t){this.In=t}cG(t){}constructor(t,e=0){this.nEt=new RW,this.In=0,this.sEt=0,this.urt=t,this.hEt=e}},RW=class extends ou{rEt(){return this.oEt}tj(t){this.oEt=!1,super.tj(t)}JK(t,e){this.aEt&&this.aEt!==BA.DR||(this.oEt=!0),super.JK(t,e),this.aEt=t}lj(t){return!1}_j(t){}gj(t){}constructor(...t){super(...t),this.aEt=void 0,this.oEt=!1}};t(),t();var xW=function(t){return t.uEt="sample",t}({}),DW=class extends Re{fV(){if(!this.rrt())return;const t=Gn.Qg();t-this.cEt>1e3&&(this.cEt=t,Ke.Gg.fV(this.W8))}constructor(...t){super(...t),this.cEt=0}},NW=class t extends DW{Znt(t,e){const i=8*e/t;this.Vkt.Znt(t,i),this.Hkt.Znt(t,i),this.lEt+=e,this.fV(),this.wo(new o(xW.uEt))}get W8(){return this.rrt()?w.min(this.Vkt.W8,this.Hkt.W8):this.Wkt}rrt(){return this.lEt>=this.dEt}constructor(e=t.Zkt,i=t.Jkt,s=t.fEt,n=t.hrt){super(),this.lEt=0,this.dEt=s,this.Vkt=new Ms(e),this.Hkt=new Ms(i),this.Wkt=n}};NW.fEt=128e3,NW.hrt=CE,NW.Zkt=.5,NW.Jkt=5;var BW=class{get PV(){return this.urt.W8}get CV(){return this._Et.W8}RV(t){if("segment"!==t.Vm&&"preload-hint"!==t.Vm)return;const e=[new PW(this._Et)];return"stream"!==t.OS||!function(t){return"segment"===t.Vm&&"initialization-segment"!==t.pk}(t)&&"preload-hint"!==t.Vm?e.push(new IW(this.urt)):e.push(new CW(this.urt,1e3)),new EW(e)}vEt(t){this.urt=new NW(NW.Zkt,NW.Jkt,1,t)}constructor(t){const e=t.PV>0?t.PV:NW.hrt,i=t.CV>0?t.CV:Os.hrt;this.urt=new NW(NW.Zkt,NW.Jkt,1,e),this._Et=new Os(Os.Zkt,Os.Jkt,i)}};t();var MW=class extends o{constructor(t){super(ks.NSt),this.lt=t}};t();var LW=class{EK(t,e){const i={Vm:A.CF,oH:[],q$:t.map((t=>({yS:t}))),e0:e};return Promise.resolve(void 0!==this.Btt.EK([i]))}constructor(t){this.Btt=t}};t(),t();var OW=(t,e,i,s,n)=>t.filter((t=>!!Qe(s,t)||1.1*t.PV<=i.PV)),FW=(t,e,i,s,n)=>t.filter((t=>{if(Qe(s,t))return!0;let r=1/0;for(const e of t.Nkt){var h,o;r=w.min(r,null!=(o=null!=(h=e.MSt.gEt)?h:e.MSt.wEt)?o:1/0)}r===1/0&&(r=1);const a=2*i.CV+t.PV*r/i.PV;return t.PV<=e.PV||n.mEt>a})),UW=(t,e,i,s,n)=>ln(t,((t,e)=>e.PV-t.PV)),VW=(t,e,i,s,n)=>t.every((t=>t.kgt&&!j(t.kgt)))?ln(t,((t,e)=>e.kgt-t.kgt)):t,HW=(t,e,i,s,n)=>0===s.length?t:ln(t,((t,e)=>{const i=Qe(s,t)?1:0;return(Qe(s,e)?1:0)-i})),WW=(t,e,i,s,n,r)=>t.filter((t=>!t.Let||!e.Let||!(void 0!==e.Let.mkt&&void 0!==t.Let.mkt&&!qc(e.Let.mkt,t.Let.mkt)&&!r.pEt({yS:'video/mp4; codecs="'+t.Let.mkt+'"'}))&&!(void 0!==e.Let.wkt&&void 0!==t.Let.wkt&&!qc(e.Let.wkt,t.Let.wkt)&&!r.yEt({yS:'audio/mp4; codecs="'+t.Let.wkt+'"'})))),qW=(t,e,i,s,n)=>{if(!1===n.fot)return t;if(Gn.Zs.ew)return t;const r=Gn.Zs.iw;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.Ti)*VL;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ci)*VL;for(let e=0;e<t.length;e++){const i=t[e];if(void 0===i.Akt)return t;const s=i.Akt.Ci,n=i.Akt.Ti;if(s<=u&&n<=o)return t.slice(e,t.length)}return[]},zW=(t,e,i,s,n)=>function(t,e){const i=e.fot;if(void 0===i&&!Gn.Zs.Ks)return t;if(!1===i)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.Akt)return t;const n=s.Akt.Ci,r=s.Akt.Ti;if(n===e.Ci&&r===e.Ti)return t.slice(i,t.length);if(n<e.Ci||r<e.Ti)return t.slice(0===i?i:i-1,t.length)}return[]}(t,n);var XW="AbrEvaluator",GW=class{get AEt(){return this.yW.rG}bEt(t){this.vot=t}async TEt(t,e,i,s,n){return(await this.SEt(t,e,i,s,n))[0]}async SEt(t,e,i,s,n){if(0===t.length)throw new v("AbrEvaluator - Unable to select optimal variant stream from an empty list.");vi.Tkt(XW,"Performing optimal variant stream selection.");const r=this.AEt;let h=t;for(const t of this.vot){const o=t(h,e,r,i,s,n);h=di(o)?o:await o}if(0===h.length){vi.Skt(XW,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[kh(t,(t=>t.PV))]}return h}constructor(t){this.yW=t,this.vot=[WW,OW,FW,UW,qW,zW,VW,HW]}};function vr(t,e){return[t,void 0!==e?t+e-1:fo]}function QW(t){return Boolean(t.Kx)}function KW(t){return Boolean(t.wet)}t(),t(),t(),t(),t();var ri=function(t){return t[t.hk=0]="hk",t[t.wl=1]="wl",t[t.aF=2]="aF",t[t.kEt=3]="kEt",t}({}),jW=function(t){return t[t.EEt=0]="EEt",t[t.PEt=1]="PEt",t}({}),gn=function(t){return t[t.sW=0]="sW",t[t.IEt=1]="IEt",t[t.CEt=2]="CEt",t}({}),re=function(t){return t[t.zS=0]="zS",t[t.REt=1]="REt",t[t.xEt=2]="xEt",t}({});function wh(t){return t?t.nmt?t.yE+"@"+t.nmt.Tn+"-"+(null!=(e=t.nmt.U)?e:""):""+t.yE:"";var e}function YW(t,e){if(e===t)return!0;if(e.yE!==t.yE)return!1;if(!t.nmt)return!0;if(e.nmt){const i=vr(t.nmt.Tn,t.nmt.U),s=vr(e.nmt.Tn,e.nmt.U);if(i[0]<=s[0])return void 0===i[1]||void 0!==s[1]&&i[1]>=s[1]}return!1}function ZW(t,e){return t===e||t.yE===e.yE&&(t.nmt&&e.nmt?t.nmt.Tn===e.nmt.Tn&&t.nmt.U===e.nmt.U:t.nmt===e.nmt)}function JW(t){const e=!!t.DEt||void 0;return{o:t.o,NEt:t.NEt,sH:t.sH,BEt:t.BEt,ct:t.ct,MEt:t.MEt,DEt:e,LEt:t.OEt,FEt:t.UEt,VEt:t.VEt,HEt:t.HEt}}function $W(t,e){var i,s,n;return{wkt:null!=(i=e.wkt)?i:null==t?void 0:t.wkt,mkt:null!=(s=e.mkt)?s:null==t?void 0:t.mkt,WEt:null!=(n=e.WEt)?n:null==t?void 0:t.WEt}}async function tq(t,e,i,s,n){const r=e.filter((t=>H(t,"audio"))),h=e.filter((t=>H(t,"video"))),o=[],a=i.map((t=>async function(t,e,i){if(!t.Igt)return;if(!t.qEt)return;if(t.vk!==gn.CEt)return;const s=eq(t.qEt);if(!s)return;if(s.zm===Hh)return{rT:s,MV:[],LV:void 0,KU:t.Igt};if(s.zm===j_&&t.qEt===$_)return{rT:s,MV:[],LV:t.Igt,KU:void 0};{vi.rD("HLSDrmUtils","Fetching key uri "+t.Igt+".");const n=await e.FS({qS:t.Igt,Ak:i});return{rT:s,MV:[await n.mS()],LV:void 0,KU:void 0}}}(t,s,n)));var u;const c=function(t,e){if(0===e.length)return t;const i=t=>{const i=e.indexOf(t.rT.zm);return i>=0?i:e.length};return ln(t,((t,e)=>i(t)-i(e)))}((await Promise.all(a)).filter(Ee),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const e of c){const i=EH(null!=t?t:{},e.rT),s="cbcs";o.push({rT:e.rT,MV:e.MV,LV:e.LV,KU:e.KU,xH:[{initDataTypes:[e.rT.Wm],audioCapabilities:PH(r,s,null==i?void 0:i.audioRobustness),videoCapabilities:PH(h,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]})}return o}function eq(t){return t===Pi?tv:t===O?U:t===J_?iv:t===$_?yo:void 0}function iq(t){if("#"!==t[0])throw new v("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function sq(t){return"#"!==t[0]?t:t.split(":",1)[0]}function nq(t){const e=t.indexOf(":");if(-1===e||t.length<e+1)throw new v("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(e+1)}function rq(t){const e=Mu(nq(t));if(void 0===e)throw new v("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return e}function Lt(t){const e={},i=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=i.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?e[n]=r:vi.Skt(Yn,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=i.exec(t)}return e}function hq(t,e){const i=Lt(t);let s,n;try{s=i.URI?Gn.wm(i.URI,e):void 0,n=function(t){switch(t){case"AUDIO":return ri.hk;case"VIDEO":return ri.wl;case"SUBTITLES":return ri.aF;case"CLOSED-CAPTIONS":return ri.kEt}throw new v("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(i.TYPE)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=i["GROUP-ID"],h=i.LANGUAGE,o=i["ASSOC-LANGUAGE"],a=i.NAME,u="YES"===i.DEFAULT;let c="YES"===i.AUTOSELECT;const l="YES"===i.FORCED,d=i["INSTREAM-ID"],f=i.CHARACTERISTICS,_=i.CHANNELS;if(r||vi.Skt(Yn,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||vi.Skt(Yn,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||vi.Skt(Yn,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===ri.kEt?(s&&vi.Skt(Yn,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||vi.Skt(Yn,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):vi.Skt(Yn,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&vi.Skt(Yn,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,i.AUTOSELECT&&vi.Skt(Yn,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),i.FORCED&&n!==ri.aF&&vi.Skt(Yn,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new v("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{zEt:o,XEt:_,WSt:f,USt:r,OSt:c,LSt:u,FSt:l,VSt:d,gs:h,l:a,Vm:n,Igt:s}}function oq(t,e,i){const s=Lt(t);let n,r,h;try{n=Gn.wm(i,e),h=function(t){if(void 0===t)return;const e=t.split("x"),i=Number(e[0]),s=Number(e[1]);if(j(i)||j(s))throw new v("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{Ti:i,Ci:s}}(s.RESOLUTION),r=function(t){if(!t)return;let e,i,s;const n=t.split(",");for(const t of n){const n=t.trim();Kc(n,"mp4a")?e="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?e=n:Kc(n,"avc")||Kc(n,"hvc1")||Kc(n,"hev1")||Kc(n,"dvh")||Kc(n,"vp09")||Kc(n,"av01")?i=n:s=s?s+","+n:n}return{wkt:e,mkt:i,WEt:s}}(s.CODECS)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=Mu(s.BANDWIDTH),a=Mu(s["AVERAGE-BANDWIDTH"]),u=Mu(s.SCORE),c=Mu(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const e=t.split(":");return{keysystem:e[0],label:e[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,g=s.VIDEO,w=s.SUBTITLES,m=s["CLOSED-CAPTIONS"];if(void 0===o?vi.Skt(Yn,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&vi.Skt(Yn,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||vi.rD(Yn,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.mkt&&void 0===h&&vi.rD(Yn,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||Qe(["TYPE-0","TYPE-1","NONE"],l)||vi.Skt(Yn,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||Qe(["SDR","PQ","HLG"],f)||vi.Skt(Yn,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new v("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{GEt:d,QEt:_,Sgt:a,PV:o,KEt:m,Let:r,Qat:c,jEt:l,Akt:h,kgt:u,YEt:w,Igt:n,ZEt:g,JEt:f}}function aq(t,e){const i=Lt(t);if(!i.URI)throw new v("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return oq(t,e,i.URI)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function Mu(t){const e=Number(t);return j(e)?void 0:e}function uq(t,e){const i=Lt(t);let s,n;try{s=function(t){switch(t){case"NONE":return gn.sW;case"AES-128":return gn.IEt;case"SAMPLE-AES":return gn.CEt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new v("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(i.METHOD),n=i.URI?wq(i.URI,e):void 0}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=i.KEYFORMAT,h=i.IV,o=i.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==gn.sW){if(c=r||$_,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(eq(c)!==tv)throw new v("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=gn.CEt}else a=s;u=n,l=h?Yh(h):void 0,d=o?o.split("/").map((t=>Number(t))):[1]}else a=gn.sW,(n||r||o||h)&&vi.Skt(Yn,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{vk:a,Igt:u,$Et:l,qEt:c,tPt:d}}function cq(t){const e=nq(t);if(!e)return[void 0,""];const[i,s]=e.split(",");return[Mu(i),s]}function lq(t,e){const i=t.split("@"),s=Mu(i[0]),n=i.length>1?Mu(i[1]):e;if(void 0===s||void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Tn:n,U:s}}function dq(t){if(void 0!==t)return lq(t,void 0)}function fq(t,e){return lq(nq(t),e)}function _q(t,e){const i=Lt(t);try{const t=wq(i.URI,e);return{yE:t,nmt:dq(i.BYTERANGE)}}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function vq(t){const e=nq(t);if(!e)throw new v("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const i=new Date(e);if(!Di(i))throw new v("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return i}function gq(t){const e=Lt(t),i=e["START-DATE"],s=e["END-DATE"],n=Mu(e["PLANNED-DURATION"]);let r,h,o,a=Mu(e.DURATION);void 0!==e["SCTE35-CMD"]&&(r=Yh(e["SCTE35-CMD"]).buffer),e["SCTE35-IN"]&&(h=Yh(e["SCTE35-IN"]).buffer),e["SCTE35-OUT"]&&(o=Yh(e["SCTE35-OUT"]).buffer);const u="YES"===e["END-ON-NEXT"],c=function(t){const e={};for(const i of g.keys(t)){const s=t[i];void 0!==s&&Kc(i,"X-")&&(e[i]=s)}return e}(e),l=e.ID,d=e.CLASS;let f,_;if(void 0===i)vi.Skt(Yn,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+i+".");else if(f=new Date(i),_=void 0!==s?new Date(s):void 0,Di(f)||vi.Skt(Yn,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const e=new Date(f.getTime()+1e3*a);_?_.getTime()!==e.getTime()&&(vi.Skt(Yn,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=e):_=e}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(e.CLASS||vi.Skt(Yn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),e.DURATION&&vi.Skt(Yn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&vi.Skt(Yn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&vi.Skt(Yn,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new v("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,NEt:d,sH:f,BEt:_,ct:a,MEt:n,UEt:r,HEt:h,VEt:o,DEt:u,OEt:c}}function wq(t,e){if(void 0===t)throw new v("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return Gn.wm(t,e)}function mq(t,e){const i=Lt(t),s=Mu(i.DURATION),n=wq(i.URI,e),r=dq(i.BYTERANGE),h="YES"===i.INDEPENDENT,o="YES"===i.GAP;if(void 0===s)throw new v("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Igt:{yE:n,nmt:r},ePt:h,iPt:o}}function pq(t){const e=Lt(t);return{sPt:"YES"===e["CAN-BLOCK-RELOAD"],nPt:Mu(e["CAN-SKIP-UNTIL"]),rPt:"YES"===e["CAN-SKIP-DATERANGES"],hPt:Mu(e["HOLD-BACK"]),oPt:Mu(e["PART-HOLD-BACK"])}}function yq(t,e){const i=Lt(t);if(void 0===i.URI)throw new v("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=wq(i.URI,e),n=Mu(i["LAST-MSN"]),r=Mu(i["LAST-PART"]);if(void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Igt:s,aPt:n,uPt:r}}function Aq(t,e){var i;const s=Lt(t),n=Mu(s["SKIPPED-SEGMENTS"]),r=null==(i=s["RECENTLY-REMOVED-DATERANGES"])?void 0:i.split("\t");if(void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{cPt:n,lPt:r,dPt:e}}function bq(t){const e=Mu(Lt(t)["PART-TARGET"]);if(void 0===e)throw new v("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return e}function Tq(t){switch(nq(t)){case"VOD":return re.REt;case"EVENT":return re.xEt;default:return vi.Skt(Yn,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),re.zS}}function Sq(t,e){const i=Lt(t);let s,n;try{s=function(t){if(void 0===t)throw new v("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return jW.EEt;if("PART"===t)return jW.PEt;throw new v("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(i.TYPE),n=wq(i.URI,e)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=Mu(i["BYTERANGE-START"]),h=Mu(i["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Tn:r||0,U:h}),{Vm:s,Igt:{yE:n,nmt:o}}}t(),t(),t();var kq=class t{fPt(){const t=this._Pt[this.vPt];return this.vPt+=1,t}gPt(){return this._Pt[this.vPt]}Ty(){const e=new t("");return e.vPt=0,e._Pt=this._Pt.slice(this.vPt),e}static wPt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(e){this.vPt=0,this._Pt=t.wPt(e)}};function Eq(t,e,i){const s=t.Igt;let n=t.bx,r=t.mPt,h=t.Tn;switch(i){case"#EXT-X-VERSION":n=function(t){const e=rq(t);return j(e)?(vi.Skt(Yn,"Playlist version is NaN: "+t+"."),1):e}(e);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const e=Lt(t),i=Mu(e["TIME-OFFSET"]);if(void 0===i)throw new v("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{pPt:i,yPt:"YES"===e.PRECISE}}(e);break;case"#EXT-X-DEFINE":vi.Skt(Yn,"Ignoring unsupported #EXT-X-DEFINE: "+e+".");break;default:vi.rD(Yn,"Ignoring unrecognized line or comment: "+e+".")}return{Igt:s,bx:n,mPt:r,Tn:h}}function Pq(t,e){return t.map((t=>t.vk===gn.sW||t.$Et?t:yh({},t,{$Et:Iq(e)})))}function Iq(t){const e=new DataView(new ArrayBuffer(16)),i=new lh;return i.by(8),cg(e,i,Yc.fromNumber(t)),new x(e.buffer)}function Cq(t,e,i){vi.rD(Yn,"Parsing M3U8 playlist at "+t+".");const s=new kq(i);if("#EXTM3U"!==s.fPt())throw new v("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(i)?function(t,e){let i;try{i=Gn.wm(t)}catch(e){throw vi.Skt(Yn,"The master playlist has no valid base URI: "+t+"."),new v("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Igt:i,mPt:void 0,Tn:void 0,bx:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=e.fPt();if(!t)break;try{const a=iq(t);switch(a){case"#EXT-X-MEDIA":{const e=hq(t,i);n.push(e);break}case"#EXT-X-STREAM-INF":{const s=oq(t,i,e.fPt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const e=aq(t,i);h.push(e);break}case"#EXT-X-SESSION-DATA":vi.Skt(Yn,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const e=uq(t,i);o.push(e);break}default:s=Eq(s,t,a)}}catch(e){vi.Skt(Yn,"Ignoring unparsable line: "+t,e)}}let a=s.bx;var u;const c=null!=(u=s.mPt)&&u,l=s.Tn;return void 0===a&&(vi.Skt(Yn,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.kgt))||h.some((t=>void 0!==t.kgt)))&&(r.some((t=>void 0===t.kgt))||h.some((t=>void 0===t.kgt)))&&vi.Skt(Yn,"If one master playlist variant stream has a SCORE, all variants should have it."),{Igt:i,bx:a,mPt:c,Tn:l,APt:h,bPt:o,Kx:n,TPt:r}}(t,s):function(t,e,i){let s={Igt:t,mPt:void 0,Tn:void 0,bx:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const l=[],d=sa();let f,_,g,w,m,p,y,A,b,T=[],S=[],k=!1,E=!1;const P=[],I=[];let C,R,x,D,N,B=0,M=!1,L=re.zS,O=!1,F=0;try{N=Gn.wm(t)}catch(e){throw vi.Skt(Yn,"The media playlist has no valid base URI: "+t+".",e),new v("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=i.Ty();for(;void 0===R||void 0===x;){const t=U.fPt();if(!t)break;try{switch(sq(t)){case"#EXT-X-MEDIA-SEQUENCE":R=rq(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":x=rq(t)}}catch(e){vi.Skt(Yn,"Ignoring unparsable line: "+t,e)}}void 0===R&&(vi.rD(Yn,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),R=0),void 0===x&&(vi.rD(Yn,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),x=0);let V=R,H=x;for(;;){const t=i.fPt();if(!t)break;let e=!1;try{const i=sq(t);switch(i){case"#EXTINF":e=!0,[f,_]=cq(t);break;case"#EXT-X-BYTERANGE":e=!0,g=fq(t,B),g&&(B=g.Tn+g.U);break;case"#EXT-X-DISCONTINUITY":e=!0,k=!0,H++;break;case"#EXT-X-KEY":{var W;e=!0;const i=uq(t,N);if(i.vk===gn.sW){d.clear(),b=void 0;break}var q;const s=null!=(q=null==(W=i.qEt)?void 0:W.toString())?q:"identity";d.set(s,i),i.vk===gn.IEt&&(b=i);break}case"#EXT-X-MAP":e=!0,m=_q(t,N),p=b;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=vq(t);break;case"#EXT-X-GAP":e=!0,E=!0;break;case"#EXT-X-BITRATE":e=!0,A=rq(t);break;case"#EXT-X-TARGETDURATION":r=rq(t);break;case"#EXT-X-DATERANGE":{const e=gq(t);n.push(e);break}case"#EXT-X-PART":{e=!0;const i=mq(t,N);S.push(i);break}case"#EXT-X-PRELOAD-HINT":{const e=Sq(t,N);P.push(e);break}case"#EXT-X-SKIP":{l.length>0&&vi.Skt(Yn,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=Aq(t,V);F=i.cPt,D=i.lPt,V+=i.cPt;break}case"#EXT-X-SERVER-CONTROL":{const e=pq(t);u=e.sPt,h=e.nPt,c=e.rPt,o=e.hPt,a=e.oPt;break}case"#EXT-X-RENDITION-REPORT":{const e=yq(t,N);I.push(e);break}case"#EXT-X-PART-INF":C=bq(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&vi.Skt(Yn,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&vi.Skt(Yn,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":M=!0;break;case"#EXT-X-PLAYLIST-TYPE":L=Tq(t);break;case"#EXT-X-I-FRAMES-ONLY":O=!0;break;default:if(Kc(i,"#"))s=Eq(s,t,i);else{w=Gn.wm(t,N);const e=m?{Igt:m,SPt:p}:void 0,i={bPt:Pq(U_(d),V),sF:T,kPt:S,ct:f,cH:_,EPt:k,Igt:{nmt:g,yE:w},PPt:e,IPt:y,iPt:E,CPt:A,dPt:V,RPt:H};l.push(i),V++,T=[],S=[],f=void 0,_=void 0,k=!1,g=void 0,w=void 0,y=void 0,E=!1,A=void 0}}}catch(e){vi.Skt(Yn,"Ignoring unparsable line: "+t,e)}}if(S.length){const t=m?{Igt:m,SPt:b}:void 0,e={bPt:Pq(U_(d),V),sF:T,kPt:S,ct:f,cH:_,EPt:k,Igt:void 0,PPt:t,IPt:y,iPt:E,CPt:A,dPt:V,RPt:H};l.push(e)}let z=s.bx;var X;const G=null!=(X=s.mPt)&&X,Q=s.Tn;void 0===z&&(vi.Skt(Yn,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),z=2),void 0===r&&vi.Skt(Yn,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const K=l.length,j=K>0;j||vi.Skt(Yn,"The HLS media playlist contains no segments.");const Y=j&&l[K-1].kPt.length>0;return Y&&void 0===C&&vi.Skt(Yn,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),Y&&void 0===a&&vi.Skt(Yn,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{sPt:u,nPt:h,rPt:c,xPt:n,RPt:x,DPt:M,mPt:G,hPt:o,NPt:O,dPt:R,cPt:F,oPt:a,gEt:C,BPt:L,MPt:P,lPt:D,LPt:I,OPt:r,wet:l,Tn:Q,Igt:N,FPt:e,bx:z}}(t,e,s)}t(),t();var Rq=class{get Igt(){return this.MSt.Igt}get Let(){return this.UPt}set Let(t){this.UPt=t?Dq(t):void 0,this.VPt=function(t,e){return!(void 0!==(null==t?void 0:t.wkt)&&void 0===(null==e?void 0:e.wkt)||void 0!==(null==t?void 0:t.mkt)&&void 0===(null==e?void 0:e.mkt))}(this.HPt,this.UPt)}get WPt(){return this.VPt}get Nkt(){return this.qPt}get Pkt(){return this.qPt.filter((t=>t.Vm===ri.hk))}get Ikt(){return this.qPt.filter((t=>t.Vm===ri.wl))}get zPt(){return this.qPt.filter((t=>t.Vm===ri.aF))}get XPt(){return this.qPt.filter((t=>t.Vm===ri.kEt))}GPt(t){for(const e of this.qPt){const i=e.MSt.GPt(t);if(void 0!==i)return i}}QPt(t){for(const e of this.qPt){const i=e.MSt.QPt(t);if(void 0!==i)return i}}KPt(t){Ko(this.qPt,t)}constructor(t,e,i){var s,n,r,h;this.o=xq++,this.kgt=void 0,this.Akt=void 0,this.Sgt=void 0,this.VPt=!1,this.qPt=[],this.MSt=e,this.PV=t.PV,this.Sgt=t.Sgt,this.kgt=t.kgt,this.HPt=t.Let?Dq(t.Let):void 0,this.UPt=this.HPt,this.Akt=t.Akt,this.Qat=t.Qat,this.QEt=null!=(s=t.QEt)?s:"jPt"+this.o,this.ZEt=null!=(n=t.ZEt)?n:"YPt"+this.o,this.YEt=null!=(r=t.YEt)?r:"ZPt"+this.o,this.KEt=null!=(h=t.KEt)?h:"JPt"+this.o,this.qPt=i}},xq=0;function Dq(t){return yh({},t,{mkt:t.mkt?Ym(t.mkt):void 0})}t(),t(),t();var Nq=class{get YM(){var t;return this.hL+(null!=(t=this.$Pt)?t:0)}get tIt(){return this.eIt}get iIt(){return this.sIt}get bPt(){return this.nIt.bPt}rIt(t,e,i){this.hL=t,this.eIt=e,this.sIt=i}constructor(t,e,i,s,n,r){this.j8=void 0,this.nIt=t,this.hIt=e,this.hL=i,this.eIt=s,this.sIt=n,this.ct=r.ct,this.Igt=r.Igt,this.ePt=r.ePt,this.iPt=r.iPt}},Bq=class{get YM(){var t;return this.hL+(null!=(t=this.oIt)?t:0)}get aIt(){return this.hL}get ct(){return this.nf}get Igt(){return this.uIt}get tIt(){return this.eIt}get iIt(){return this.sIt}get kPt(){return this.cIt}get lIt(){return this.dIt}get ZM(){var t;return this.YM+(null!=(t=this.nf)?t:this.dIt)}set $Pt(t){this.oIt=t;for(const e of this.cIt)e.$Pt=t}get $Pt(){return this.oIt}fIt(t){return this.cIt[t]}_It(t){for(let e=0;e<this.cIt.length;e++){const i=this.cIt[e],s=i.YM,n=s+i.ct;if(s<=t&&t<=n)return t===n&&e+1<this.cIt.length?this.cIt[e+1]:i}}vIt(t){for(let e=this.cIt.length-1;e>=0;e--){const i=this.cIt[e];if(i.YM<=t)return i}}gIt(t){let e=this.vIt(t);for(;e&&!e.ePt&&e.hIt>0;)e=this.fIt(e.hIt-1);return e}rIt(t,e,i){const s=t.kPt.length!==this.cIt.length||i!==this.sIt;this.eIt=e,this.sIt=i,this.nf=t.ct,null!=this.IPt||(this.IPt=t.IPt),void 0===this.uIt&&(this.uIt=t.Igt),s&&this.wIt(t.kPt)}wIt(t){this.cIt.length>t.length&&(this.cIt.length=t.length);let e=0;for(let i=0;i<t.length;i++){const s=t[i],n=this.eIt&&0===i,r=this.sIt&&i===t.length-1,h=this.hL+e;if(i<this.cIt.length)this.cIt[i].rIt(h,n,r);else{const t=new Nq(this,i,h,n,r,s);t.$Pt=this.oIt,this.cIt.push(t)}e+=s.ct}this.dIt=e}mIt(){us(this.cIt),this.dIt=0}constructor(t,e,i,s,n){this.j8=void 0,this.cIt=[],this.dIt=0,this.hL=t,this.PPt=n.PPt,this.eIt=i,this.sIt=s,this.nf=n.ct,this.IPt=n.IPt,this.uIt=n.Igt,this.iPt=n.iPt,this.dPt=n.dPt,this.EPt=n.EPt,this.RPt=e,this.bPt=n.bPt,this.wIt(n.kPt)}};t();var Mq=function(t){return t.pIt="YES",t.yIt="v2",t}({});t();var Lq=class extends Pa{};t(),t(),t();var Oq=class extends Hu{get ba(){return this.Zu||(this.Zu=function(t){return Xe(ce(t),{get content(){return t.O},get class(){return t.NEt},get startDate(){return t.sH},get endDate(){return t.BEt},get duration(){return t.ct},get plannedDuration(){return t.MEt},get endOnNext(){return t.DEt},get scte35Cmd(){return t.FEt},get scte35Out(){return t.VEt},get scte35In(){return t.HEt},get customAttributes(){return t.LEt}})}(this)),this.Zu}get NEt(){return this.AIt}get sH(){return this.bIt}get BEt(){return this.TIt}get ct(){return this.nf}get MEt(){return this.SIt}get DEt(){return this.kIt}get FEt(){return this.EIt}get VEt(){return this.PIt}get HEt(){return this.IIt}get LEt(){return this.CIt}Zn(t){let e=!1;var i;(void 0===this.AIt&&void 0!==t.NEt&&(e=!0,this.AIt=t.NEt),void 0===this.TIt&&void 0!==t.BEt&&(e=!0,this.TIt=t.BEt),void 0===this.nf&&void 0!==t.ct&&(e=!0,this.nf=t.ct),void 0===this.SIt&&void 0!==t.MEt&&(e=!0,this.SIt=t.MEt),!this.kIt&&t.DEt&&(e=!0,this.kIt=t.DEt),e=this.updateCustomAttributes(t,e),void 0===this.EIt&&void 0!==t.FEt&&(e=!0,this.EIt=t.FEt),void 0===this.PIt&&void 0!==t.VEt&&(e=!0,this.PIt=t.VEt),void 0===this.IIt&&void 0!==t.HEt&&(e=!0,this.IIt=t.HEt),this.RIt(),this.xIt(),this.DIt(),e)&&(this.wo(new Ua(this)),null==(i=this.oL)||i.wo(new Ha(this)))}updateCustomAttributes(t,e){let i=e;if(t.LEt)for(const e of g.keys(t.LEt))void 0===this.CIt[e]&&(i=!0,this.CIt[e]=t.LEt[e]);return i}RIt(){this.nf&&!this.TIt&&(this.TIt=new Date(this.bIt.getTime()+le(this.nf)))}xIt(){this.TIt&&!this.nf&&(this.nf=wd(this.TIt.getTime()-this.bIt.getTime()))}DIt(){this.uL===1/0&&(this.TIt||this.nf)&&(this.uL=Fq(this.hL,this.nf,this.bIt,this.TIt))}constructor(t,e){super(e,Fq(e,t.ct,t.sH,t.BEt),void 0,!1,t.o),this.AIt=t.NEt,this.bIt=t.sH,this.TIt=t.BEt,this.nf=t.ct,this.SIt=t.MEt,this.kIt=Boolean(t.DEt),this.CIt=t.LEt||{},this.EIt=t.FEt,this.PIt=t.VEt,this.IIt=t.HEt,this.RIt(),this.xIt()}};function Fq(t,e,i,s){return Ee(e)?t+e:s?t+(wd(s.getTime())-wd(i.getTime())):1/0}var Uq=class extends rD{Zn(t,e){Vq(this,Hq(t),e)}SF(t){Wq(this.L.RI,t),super.SF(t)}constructor(){super(void 0,void 0,Zo.DATE_RANGE)}};function Vq(t,e,i){const s=t.L.RI;for(let i=s.length-1;i>=0;i--){const n=s[i],r=bv(e,(t=>t.o===n.o));r?n.Zn(r):t.fF(n)}for(const s of e){const e=s.sH;if(void 0!==e&&!t.b0(s.o)){const n=i(e),r=new Oq(s,n);Wq(t.L.RI,r),t.SF(r)}}}function Hq(t){const e=sa(),i=[];for(const s of t)if(e.has(s.o)){const t=e.get(s.o),i=yh({},t,tA(s),{LEt:yh({},t.LEt,s.LEt)});e.set(s.o,i)}else e.set(s.o,s),i.push(s.o);return i.map((t=>e.get(t)))}function Wq(t,e){const i=En(t,(t=>t.NEt===e.NEt));i&&i.DEt&&i.Zn({o:i.o,BEt:e.sH})}var qq=String.fromCharCode(95),zq=qq+"HLS_msn",Xq=qq+"HLS_part",Gq=qq+"HLS_skip",Qq="HLSMediaPlaylist",Kq=class{get DPt(){if(0===this.Mwt.length)return!1;return this.Mwt[this.Mwt.length-1].iIt}get ct(){return this.nf}get Cl(){return this.H$}get NIt(){return this.BIt}get wEt(){return this.MIt}get gEt(){return this.LIt}get hPt(){return this.DPt?0:this.OIt?this.OIt:this.MIt?3*this.MIt:void 0}get oPt(){var t;return null!=(t=this.FIt)?t:this.LIt?3*this.LIt:void 0}get sPt(){return this.UIt}get nPt(){return this.VIt}get rPt(){return this.HIt}get BPt(){return this.WIt}get qIt(){return void 0!==this.gEt}get zIt(){if(this.DPt)return!0;const t=Gn.Qg()/1e3,e=this.XIt,i=this.GIt;return void 0!==e&&t-e<i}get XIt(){return this.QIt}get KIt(){if(this.jIt)return Gn.Qg()/1e3-this.jIt}get $Pt(){return this.oIt}get GIt(){var t;return null!=(t=this.MIt)?t:void 0===this.QIt?5:1}get wet(){return this.Mwt}get xPt(){return this.YIt}get ZIt(){return this.JIt}set ZIt(t){this.JIt=t}get Tn(){return this.hF}get $It(){return this.tCt}gkt(t){if(!t)return this.Igt;const e=Gn.Ih(this.Igt);return void 0!==t.dPt&&e.searchParams.append(zq,String(t.dPt)),void 0!==t.eCt&&e.searchParams.append(Xq,String(t.eCt)),void 0!==t.$R&&e.searchParams.append(Gq,t.$R),e.href}qnt(t){const e=this.Mwt;if(0===e.length)return;const i=t-e[0].dPt;return i<0||i>=e.length?void 0:e[i]}iCt(t){if(0===this.Mwt.length)return;const e=LU(jq.Gg,this.Mwt,t);if(!(e<0)){const i=this.Mwt[e];return t===i.ZM&&e+1<this.Mwt.length?this.Mwt[e+1]:i}{const e=this.Mwt[this.Mwt.length-1];if(t===e.ZM)return e}}sCt(t){if(0===this.Mwt.length)return;const e=this.Mwt[0];if(t<e.ZM)return e;const i=this.Mwt[this.Mwt.length-1];return t>=i.YM?i:this.iCt(t)}GPt(t){const e=this.sCt(t);if(void 0===e)return;for(let i=e.dPt-this.Mwt[0].dPt;i>=0;i--){const e=this.Mwt[i];if(void 0!==e.IPt)return new Date(e.IPt.getTime()+1e3*(t-e.YM))}}QPt(t){let e;for(const i of this.Mwt)if(Yq(i))if(void 0===e)e=i;else{if(!(i.IPt.getTime()<=t.getTime()))break;e=i}if(void 0!==e)return e.YM+(t.getTime()-e.IPt.getTime())/1e3}nCt(t){switch(t){case jW.EEt:return this.rCt;case jW.PEt:return this.hCt;default:return}}rIt(t){var e;void 0===this.MIt&&(this.MIt=null!=(e=t.OPt)?e:this.oCt(t));void 0===this.OIt&&void 0!==t.hPt&&(this.OIt=t.hPt),void 0===this.LIt&&void 0!==t.gEt&&(this.LIt=t.gEt),void 0===this.FIt&&void 0!==t.oPt&&(this.FIt=t.oPt),this.UIt=t.sPt,this.VIt=t.nPt,this.HIt=t.rPt,this.WIt=t.BPt,this.Uwt(t),this.aCt(t);const i=bv(t.MPt,(t=>t.Vm===jW.EEt)),s=bv(t.MPt,(t=>t.Vm===jW.PEt));this.rCt=i?{Igt:i.Igt,Vm:i.Vm,RPt:t.RPt}:void 0,this.hCt=s?{Igt:s.Igt,Vm:s.Vm,RPt:t.RPt}:void 0,this.QIt=Gn.Qg()/1e3;const n=this.H$.Pn(this.H$.U-1);this.uCt();const r=this.H$.Pn(this.H$.U-1);(!this.jIt||r-n>0)&&(this.jIt=this.QIt),null!=this.hF||(this.hF=t.Tn)}uCt(){this.BIt=this.cCt(),this.H$=this.lCt(this.BIt),this.nf=this.dCt()}cCt(){const t=this.wet;if(0===t.length)return r.Ol();const e=t[0].YM,i=t[t.length-1].ZM;return new r([e,i])}lCt(t){if(0===t.U||this.DPt)return t;const e=t.Tn(0),i=t.Pn(0)-this.Dpt;return i<e?r.LB(e):new r([e,i])}get Dpt(){return this.DPt?0:null!=(i=null!=(e=null!=(t=this.fCt)?t:this.oPt)?e:this.hPt)?i:0;var t,e,i}dCt(){return 0===this.Mwt.length?0:this.DPt?Ai(this.Mwt,(t=>{var e;return null!=(e=t.ct)?e:t.lIt})):1/0}oCt(t){let e;for(const i of t.wet)if(void 0!==i.ct){const t=w.max(1,w.round(i.ct));(void 0===e||e<t)&&(e=t)}if(void 0===e)throw new v("HLSModel - Could not determine required segment target duration.");return e}Uwt(t){if(0===t.wet.length)return us(this.Mwt),void this._Ct();const e=this.vCt(t);if(!e)return;let i,s,n;e.gCt>0&&this.Mwt.splice(0,e.gCt);const r=t.cPt;if(r>0){if(r>this.Mwt.length)throw new Lq("New playlist skips over missing segments.");const e=this.Mwt[r-1];if(void 0===e.ct)throw new Lq("New playlist skips over an incomplete segment.");i=e.aIt+e.ct,n=e.RPt-t.RPt,s=r;for(let t=0;t<r;t++)this.Mwt[t].mIt()}else i=e.wCt,n=0,s=0;for(let e=0;e<t.wet.length;e++,s++){const r=t.wet[e],h=0===e,o=t.DPt&&e===t.wet.length-1,a=r.ct,u=r.RPt+n;if(s<this.Mwt.length){const t=this.Mwt[s];0,t.rIt(r,h,o)}else{let t=r;if(this.Mwt.length>0&&void 0===t.PPt){t=yh({},t,{PPt:this.Mwt[this.Mwt.length-1].PPt})}const e=new Bq(i,u,h,o,t);e.$Pt=this.oIt,this.Mwt.push(e)}void 0!==a&&(i+=a)}}vCt(t){if(0===this.Mwt.length)return{gCt:0,wCt:0};const e=this.Mwt[0].dPt,i=this.Mwt[this.Mwt.length-1].dPt,s=t.wet[0].dPt-t.cPt,n=t.wet[t.wet.length-1].dPt;let r=0,h=0;if(s<e){const i=this.wet[0].IPt,n=t.wet[0].IPt;if(!(i&&n&&i<n))return void vi.Skt(Qq,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+e+")");r=this.Mwt.length,this._Ct()}else{if(n<i)return void vi.Skt(Qq,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+i+")");if(i<s){var o;h=null!=(o=function(t,e){const i=En(t,(t=>void 0!==t.IPt));if(void 0===i)return;const s=function(t){let e=0;for(const s of t){if(s.EPt)return;if(s.IPt)return[s,e];var i;e+=null!=(i=s.ct)?i:0}return}(e.wet);if(void 0===s)return;const[n,r]=s;if(i.RPt!==n.RPt)return;const h=(n.IPt.getTime()-i.IPt.getTime())/1e3;return i.aIt+h-r}(this.Mwt,t))?o:function(t,e,i){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:w.max(i,s.lIt),h=i*(e-s.dPt-1);return s.aIt+r+h}(this.Mwt,s,this.MIt),vi.Tkt(Qq,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+i+"), resetting playlist and restarting at "+h+"s"),r=this.Mwt.length,this._Ct()}else{0;const t=su(this.Mwt,(t=>t.dPt===s));0,h=this.Mwt[t].aIt,t>0&&(r=t)}}return{gCt:r,wCt:h}}aCt(t){let e=t.xPt.map(JW);if(t.rPt&&t.FPt.$R===Mq.yIt&&(e=this.YIt.concat(e)),this.YIt=Hq(e),t.lPt)for(const e of t.lPt){const t=su(this.YIt,(t=>t.o===e));t>=0&&Xt(this.YIt,t)}}mCt(t,e){if(this.oIt!==t){this.oIt=t;for(const t of this.Mwt)t.$Pt=this.oIt;this.uCt()}this.tCt=e}_Ct(){this.oIt=void 0,this.tCt=void 0}constructor(t,e,i){this.QIt=void 0,this.jIt=void 0,this.rCt=void 0,this.hCt=void 0,this.MIt=void 0,this.LIt=void 0,this.OIt=void 0,this.FIt=void 0,this.Mwt=[],this.YIt=[],this.UIt=!1,this.VIt=void 0,this.HIt=!1,this.WIt=re.zS,this.H$=r.Ol(),this.BIt=r.Ol(),this.nf=void 0,this.JIt=-1/0,this.tCt=void 0,this.Igt=t,this.hF=e,this.fCt=i}},jq=class t{static get Gg(){return null!=this.Met||(this.Met=new t),this.Met}xwt(t){return t.YM}Dwt(t){return t.ZM}Nwt(t,e){return G(t,e)}Bwt(t,e,i){return(t-e)/(i-e)}};function Yq(t){return void 0!==t.IPt}function Yi(t){return void 0!==t.kPt}function Zq(t){return Yi(t)?t.tIt:0===t.hIt&&t.nIt.tIt}function Jq(t,e){return Yi(t)?Yi(e)?t.dPt+1===e.dPt:0===e.hIt&&Jq(t,e.nIt):t.hIt===t.nIt.kPt.length-1?Jq(t.nIt,e):!Yi(e)&&t.nIt===e.nIt&&t.hIt+1===e.hIt}t(),t(),t();var $q=class extends Pa{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var tz=class{pCt(t){const e=this.yCt.get(t);return void 0!==e&&ez(e)}ACt(t){if(this.bCt()>t)return Promise.reject(new $q);const e=[];for(const s of this.TCt){var i;if(s<t)null==(i=this.yCt.get(s))||i.SCt.My(new $q),this.yCt.delete(s);else e.push(s)}return this.TCt=e,-1===this.TCt.indexOf(t)&&this.TCt.push(t),this.kCt(t).SCt.Pf}ECt(t){const e=this.yCt.get(t);if(!e||!ez(e))throw new v("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return e}PCt(t){return this.ECt(t).QO}ICt(t,e){const i=Yi(e)?e:e.nIt,s=this.ECt(i.RPt);let n=t.OM(s.QO);if(s.CCt){const t=_r.EO(e.YM).ML(n);if(t.DL().kL(qT())){const e=w.round(t.SL()/Lu().SL());n=n.OM(Lu().uO(e))}}return n}RCt(t,e){return this.ICt(t,e).ML(t)}xCt(t,e,i,s,n,r){this.DCt<t&&(this.DCt=t);const h=this.kCt(t);void 0===h.QO&&(h.NCt.some((t=>t.cnt===e))||(h.NCt.push({cnt:e,BCt:i,MCt:s.AO(i.Wx),LCt:n,CCt:r}),this.OCt(h,t)))}OCt(t,e){if(t.QO||!this.FCt(t))return;const i=function(t){return Rv(t,iz)}(t.NCt);t.QO=i.MCt.ML(i.BCt),t.CCt=t.NCt.some((t=>t.CCt)),t.SCt.Xf(),us(t.NCt),Ko(this.TCt,e)}FCt(t){return this.UCt.length>0&&this.UCt.every((e=>t.NCt.some((t=>t.cnt===e))))}kCt(t){if(this.yCt.has(t))return this.yCt.get(t);{const e={QO:void 0,CCt:!1,SCt:new ue,NCt:[]};return this.yCt.set(t,e),e}}VCt(t){this.UCt=t,this.yCt.forEach(((t,e)=>this.OCt(t,e)))}HCt(){this.DCt=-1}bCt(){return this.DCt}Wu(){this.yCt.forEach((t=>t.SCt.tf())),this.yCt.clear()}constructor(){this.UCt=[],this.yCt=C(),this.TCt=[],this.DCt=-1}};function ez(t){return void 0!==t.QO}function iz(t,e){return-function(t,e){if(t.CCt||e.CCt)return function(t,e){let i=t.ML(e);return t.OL()||e.OL()||(i.PL(qT())?i=i.ML(Lu()):i.xL(qT().BL())&&(i=i.OM(Lu()))),i}(t.BCt,e.BCt).EL(_r.WL);return t.BCt.EL(e.BCt)}(t,e)||function(t,e){return t.LCt===e.LCt?L.ih:t.LCt?L.Zm:L.Jm}(t,e)||function(t,e){return t.MCt.EL(e.MCt)}(t,e)}var sz=class{get WCt(){return this.qCt}get Ekt(){return this.zCt}get aB(){return this.XCt}rIt(t,e){if(KW(t))if(0===this.zCt.length)this.GCt(t);else{if(!e)return void vi.Skt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");e.MSt.rIt(t)}else{if(0!==this.zCt.length)return void vi.Skt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.QCt(t)}}GCt(t){const e=this.KCt(t.Igt);e.rIt(t);const i=this.jCt(ri.hk,e),s=this.jCt(ri.wl,e),n=new Rq({Igt:e.Igt,PV:0,Sgt:0,kgt:NaN,Let:void 0,Akt:void 0,Qat:0,GEt:[],jEt:void 0,JEt:void 0,QEt:void 0,ZEt:void 0,YEt:void 0,KEt:void 0},e,[i,s]);this.zCt.push(n)}QCt(t){this.qCt.push(...t.bPt);const e=this.YCt(t);for(const i of t.TPt){const s=e.filter((t=>rz(t,i)));this.ZCt(i,s);const n=new Rq(i,this.KCt(i.Igt,t.Tn),s);this.zCt.push(n)}}KCt(t,e){let i=this.JCt.get(t);return void 0===i&&(i=new Kq(t,e,this.fCt),this.JCt.set(t,i)),i}YCt(t){const e=[];for(const i of t.Kx)if(void 0===i.Igt){for(const s of t.TPt)if(nz(i.Vm,i.USt,s)){const t=new cW(i,this.KCt(s.Igt));e.push(t)}}else{const t=new cW(i,this.KCt(i.Igt));e.push(t)}return e}jCt(t,e){return new cW({Vm:t,Igt:void 0,USt:"",gs:void 0,zEt:void 0,l:"",LSt:!0,OSt:!1,FSt:!1,WSt:void 0,VSt:void 0,XEt:void 0},e)}ZCt(t,e){const i=e.filter((t=>t.Vm===ri.hk)),s=e.filter((t=>t.Vm===ri.wl)),n=t.Let&&(t.Let.mkt||t.Let.wkt);if((!n||t.Let.mkt)&&0===s.length){const i=this.jCt(ri.wl,this.KCt(t.Igt));e.push(i)}if((!n||t.Let.wkt)&&0===i.length){const i=this.jCt(ri.hk,this.KCt(t.Igt));e.push(i)}t.Let&&t.Let.WEt}$Ct(t){for(const e of this.zCt)for(const i of e.Nkt)if(i===t)return i}tRt(t){for(const e of this.zCt)if(e===t)return e}eRt(t){for(const e of this.zCt)if(Qe(e.Nkt,t))return e}Wu(){us(this.zCt),us(this.qCt),this.JCt.clear(),this.XCt.Wu()}constructor(t,e){this.zCt=[],this.qCt=[],this.JCt=sa(),this.XCt=new tz,this.iRt=t,this.fCt=e}};function nz(t,e,i){switch(t){case ri.hk:return i.QEt===e;case ri.wl:return i.ZEt===e;case ri.aF:return i.YEt===e;case ri.kEt:return i.KEt===e}return!1}function rz(t,e){return nz(t.Vm,t.USt,e)&&(!t.HSt||t.MSt.Igt===e.Igt)}t();var hz=class extends o{constructor(t){super(uz.sRt),this.ZSt=t}};t();var oz=class extends o{constructor(t){super(uz.nRt),this.ZSt=t}},az="HlsModelUpdater",uz=function(t){return t.sRt="rRt",t.nRt="hRt",t}({}),cz=class extends Re{get oRt(){return this.aRt}get uRt(){return this.cRt}get Mr(){return this.Ngt}get lRt(){return this.dRt}async fRt(t){const e=this.Ngt.iRt;if(!e)throw new v("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.wo(new ji);const i=await this._Rt(e,{},2,!0,t),s=i.MSt;if(!QW(s)&&!KW(s))throw new v("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");QW(s)||vi.rD(az,"Detected media playlist only HLS stream."),this.vRt(s),i.gRt&&(this.cRt=!0,await this.wRt(t)),this.aRt=!0}async mRt(t,e,i,s){const n=this.Ngt.$Ct(t);if(!n)throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={dPt:e,eCt:i,$R:_z(n)},h=le(w.max(1,3*t.MSt.GIt));try{await this.pRt(n,r,s,h)}catch(t){throw ta(t),this.yRt(n),t}}ARt(t,e){const i=this.Ngt.$Ct(t);if(!i)throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={dPt:void 0,eCt:void 0,$R:_z(i)},n=le(w.max(1,3*t.MSt.GIt));return this.pRt(i,s,e,n)}bRt(t,e){return this.TRt.has(t.KI)||this.TRt.set(t.KI,new ue),Dc(this.TRt.get(t.KI).Pf,e)}yRt(t){this.wo(new oz(t))}async pRt(t,e,i,s){const n=t.MSt.gkt(e);let r;try{r=(await this._Rt(n,e,0,this.cRt,i,s)).MSt}catch(e){throw ta(e),t.MSt.ZIt=Gn.Qg(),e}if(!KW(r))throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.SRt&&t!==this.SRt&&!this.SRt.MSt.zIt)try{await this.ARt(this.SRt,i)}catch(e){ta(e),this.SRt=t,this.kRt()}try{this.vRt(r,t)}catch(n){if(n instanceof Lq&&void 0!==e.$R){const n=yh({},e,{$R:void 0});return this.pRt(t,n,i,s)}throw n}this.ERt(t),this.SRt=t}async _Rt(t,e,i,s,n,r){if(vi.rD(az,"Loading HLS playlist at "+t+"."),s){const e=await this.PRt(t,n);if(void 0!==e)return{MSt:e,gRt:!0}}return{MSt:await this.IRt(t,e,i,n,r),gRt:!1}}async PRt(t,e){try{const i=await this.Ert.Qtt([t]);if(Bv(e),void 0!==i)return Cq(i.responseURL,{},i.data)}catch(t){ta(t)}}async IRt(t,e,i,s,n){const r={qS:t,OS:Gs.lS,Ak:this.hyt,vk:Na.GET,Vm:Sa.XS,ap:s,gk:n},h=await vt((()=>this.CRt(r)),s,i);return Cq(h.WS,e,h.LS)}async CRt(t){const e=await this.TF.FS(t);return{LS:await e.gS(),WS:e.WS}}async wRt(t){Bv(t);const e=[];for(const i of this.Ngt.Ekt)for(const s of i.Nkt)e.push(this.RRt(s,t));await Promise.all(e)}async RRt(t,e){try{const i=await this.Ert.Qtt([t.MSt.Igt]);Bv(e),void 0===i||t.MSt.zIt||await this.ARt(t,e)}catch(t){ta(t)}}kRt(){for(const t of this.Ngt.Ekt)for(const e of t.Nkt)e!==this.SRt&&void 0!==e.MSt.$Pt&&(e.MSt.zIt?this.ERt(e):e.MSt._Ct())}ERt(t){if(0!==t.MSt.wet.length){if(!this.SRt)return this.SRt=t,void this.SRt.MSt.mCt(0,void 0);if(this.xRt(this.SRt),!this.xRt(t)&&void 0===t.MSt.$Pt){const e=this.DRt(t,this.SRt);vi.Tkt(az,"Assuming global timeline offset of "+e+"s for rendition "+t.MSt.Igt+"."),t.MSt.mCt(e,void 0)}}}DRt(t,e){if(lz(t)){const i=t.MSt.wet[0],s=e.MSt.wet[0];return vi.Tkt(az,"Synchronizing by start of VOD: "+s.YM+" vs "+i.YM),s.YM-i.aIt}const i=function(t,e){let i=t.length-1,s=e.length-1;for(;i>=0&&s>=0;){const n=t[i],r=e[s];if(n.RPt>r.RPt)i--;else if(n.RPt<r.RPt)s--;else if(n.EPt){if(r.EPt)return{segment:n,referenceSegment:r};s--}else i--}return}(t.MSt.wet,e.MSt.wet);if(void 0!==i){const{segment:t,referenceSegment:e}=i;return vi.Tkt(az,"Synchronizing by start of discontinuity #"+e.RPt+": "+e.YM+" vs "+t.YM),e.YM-t.aIt}const s=fz(t.MSt.wet);if(void 0!==s){const t=fz(e.MSt.wet);if(void 0!==t){vi.Tkt(az,"Synchronizing by PDT:",t.IPt.toISOString()+" vs "+s.IPt.getTime());return t.YM-s.aIt-(t.IPt.getTime()-s.IPt.getTime())/1e3}}const n=dz(e),r=dz(t);var h;const o=null!=(h=t.MSt.$Pt)?h:0;return vi.Tkt(az,"Synchronizing by last segment:",n+" vs "+r),n-r+o}xRt(t){const e=this.Ngt.$Ct(t);if(!e)return!1;if(lz(e))return!1;const i=function(t,e){return En(t,(t=>void 0!==t.j8&&e.pCt(t.RPt)))}(e.MSt.wet,this.Ngt.aB);if(void 0===i)return!1;if(e.MSt.$It===i.RPt)return!0;const s=this.Ngt.aB.ICt(i.j8,i).SL()-i.aIt;return vi.Tkt(az,"Synchronize by media timestamp: "+s+"s for rendition "+t.MSt.Igt+"."),e.MSt.mCt(s,i.RPt),(void 0===this.SRt||void 0===this.SRt.MSt.$It||this.SRt.MSt.$It<i.RPt)&&(this.SRt=e),!0}vRt(t,e){var i;(this.Ngt.rIt(t,e),KW(t)&&e)&&(this.dRt=e,this.wo(new hz(e)),null==(i=this.TRt.get(e.KI))||i.Xf(),this.TRt.delete(e.KI));this.wo(new AV)}NRt(t,e){for(const i of this.Ngt.Ekt){const s=bv(i.Ikt,(t=>t.MSt===e));void 0!==s&&void 0!==t.mkt&&(s.Let=$W(s.Let,t));const n=bv(i.Pkt,(t=>t.MSt===e));void 0!==n&&void 0!==t.wkt&&(n.Let=$W(n.Let,t)),i.WPt||void 0===s&&void 0===n||(i.Let=$W(i.Let,t))}}BRt(t,e){for(const i of this.Ngt.Ekt){const s=bv(i.Ikt,(t=>t.MSt===e));void 0!==s&&void 0===t.mkt&&i.KPt(s);const n=bv(i.Pkt,(t=>t.MSt===e));void 0!==n&&void 0===t.wkt&&i.KPt(n)}}Wu(){this.Bo(),this.Ngt.Wu(),this.TRt.forEach((t=>t.tf())),this.TRt.clear()}constructor(t,e,i,s,n){super(),this.TF=t,this.Ert=e,this.hyt=i,this.aRt=!1,this.cRt=!1,this.SRt=void 0,this.dRt=void 0,this.TRt=C(),this.Ngt=new sz(s,n)}};function lz(t){return t.MSt.DPt||t.MSt.BPt===re.xEt}function dz(t){const e=t.MSt.wet;return e[e.length-1].ZM}function fz(t){return En(t,(t=>void 0!==t.IPt))}function _z(t){if(void 0!==t.MSt.nPt&&!t.MSt.DPt&&!(void 0===t.MSt.XIt||Gn.Qg()/1e3-t.MSt.XIt>=t.MSt.nPt/2))return t.MSt.rPt?Mq.yIt:Mq.pIt}var vz=class{get nt(){return this.Oft}aCt(t){if(0===t.MSt.xPt.length)return;this.MRt||(this.MRt=this.rM.iI(ns.lF,void 0,void 0,void 0,void 0,Zo.DATE_RANGE),this.Oft.tt(this.MRt));Vq(this.MRt,t.MSt.xPt,(e=>{var i;return null!=(i=t.MSt.QPt(e))?i:NaN}))}constructor(t,e){this.LRt=t=>{this.aCt(t.ZSt)},this.hbt=t,this.rM=e,this.Oft=new du,this.hbt.wn(uz.sRt,this.LRt)}};t();var gz=class extends o{constructor(){super(ks.ISt)}};t(),t(),t();var wz=class{get ORt(){return this.dJ}get Sl(){return qM(this.fit.Sl,this.fit.GJ)}get wet(){return this.Mwt}get zft(){return this.Vft}FRt(t){var e;return null==(e=this.URt(t))?void 0:e.ZSt}VRt(t){this.dJ=t,this.HRt()}oat(t,e,i,s,n,h){this.Mwt.push({ZSt:t,Srt:e,WRt:r.OB(n,h),qRt:r.OB(i,s)}),this.HRt()}URt(t){return bv(this.Mwt,(e=>e.qRt.br(t)))}qnt(t){return bv(this.Mwt,(e=>e.Srt===t))}Zht(t,e){return bv(this.Mwt,(i=>i.ZSt===t&&Jq(i.Srt,e)))}WJ(){const t=this.Sl;t.U>0&&(this.Vft=t.Pn(t.U-1))}HRt(){const t=this.fit.Sl;this.Mwt=this.Mwt.filter((e=>0!==t.Cn(e.qRt).U))}constructor(t){this.fit=t,this.Mwt=[],this.dJ=void 0,this.Vft=void 0}},mz=class{get Vm(){return this.Dw}get zRt(){return nt(this.Dw)}get XRt(){return this.hnt}get GRt(){return this.QRt}get KRt(){return void 0!==this.jRt}YRt(){if(this.KRt)throw new v("Cannot perform new operation while BufferAppender is still busy")}rit(t){this.fit!==t&&(this.YRt(),this.fit=t,this.hnt=new wz(t))}ZRt(){return this.jRt?this.jRt.Pf:Promise.resolve()}JRt(t){const e=this.hnt.zft;return void 0!==e&&this.$Rt(t,e)}$Rt(t,e){var i;const s=w.min(t,e);var n;return null!=(n=null==(i=this.hnt.Sl.vB().bB(this.GRt).BB(s))?void 0:i.br(e))&&n}txt(t){return this.hnt.FRt(t)}tf(){this.LT.tf(),this.LT=new Mr}hJ(t){this.YRt(),this.jRt=new ue;const e=e=>{this.ixt.ext(t),this.sxt(e)};this.oJ(t,this.LT.ap).then(e,e)}async oJ(t,e){vi.Tkt(Gt,"Appending initializer",wh(t.nxt.Igt)),await this.fit.hJ(t,e),vi.Tkt(Gt,"Appended initializer",wh(t.nxt.Igt)),this.hnt.VRt(t)}Dot(t){this.YRt(),this.jRt=new ue;const e=e=>{this.ixt.ext(t),this.sxt(e)};this.rxt(t,this.LT.ap).then(e,e)}async rxt(t,e){const i=t.ZSt;if(void 0===i.MSt.wEt)throw new v("MediaBufferWrapper - Cannot append HLSAsset to "+this.Dw+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.hnt.Sl.uB,n=this.fit.Sl;vi.Tkt(Gt,"Appending",wh(t.nxt.Igt)),await this.fit.sJ(t,e),vi.Tkt(Gt,"Appended",wh(t.nxt.Igt),s,this.hnt.Sl.uB);const h=t.YM,o=h+t.ct,a=t.nxt,u=a.YM;var c;const l=a.YM+(null!=(c=a.ct)?c:0);this.hnt.oat(i,a,h,o,u,l);const d=this.fit.Sl.bB(n),f=this.hnt.Zht(i,a);if(this.Vm===Be.wl)if(f)if(this.hxt(f))if(0===d.U){if(void 0===this.hnt.qnt(a)){const t=this.fit.GJ.Cn(new r([h,o]));this.QRt=this.QRt.Xl(t)}}else{const t=d.Tn(0),e=new r([t,o]);if(this.QRt=this.QRt.bB(e),t>h){const e=this.fit.GJ.Cn(new r([h,t]));this.QRt=this.QRt.Xl(e)}}else{const t=d.U>0&&d.Tn(0)<h?d.Tn(0):h;this.QRt=this.QRt.bB(new r([t,o]))}else if(0===d.U){const t=this.fit.GJ.Cn(new r([h,o]));this.QRt=this.QRt.Xl(t)}else{var _;if(t.nxt.tIt)return;const e=d.Tn(0),i=null==(_=n.BB(h))?void 0:_.Pn(0),s=i&&i>h?i:h;if(e>s){const t=this.fit.GJ.Cn(new r([s,d.Tn(0)]));this.QRt=this.QRt.Xl(t)}}t.nxt.iIt&&this.hnt.WJ()}hxt(t){const e=t.qRt,i=e.Tn(0),s=e.Pn(e.U-1),n=e.lB(0),r=e.fB(e.U-1);return this.QRt.SB(i,s,n,r)}constructor(t,e,i,s,n){this.jRt=void 0,this.LT=new Mr,this.QRt=r.Ol(),this.sxt=t=>{this.jRt&&(t?ZI(t)&&this.zRt?this.oxt.xG(this.fit.Sl.MB)?this.jRt.Xf():this.jRt.My(t):Eh(t)?this.jRt.Xf():this.jRt.My(t):this.jRt.Xf(),this.jRt=void 0)},this.Dw=t,this.ixt=i,this.fit=e,this.hnt=s,this.oxt=n}};t(),t();var pz=class{async axt(t,e,i,s){const n=await this.uxt(e,s);return await this.cxt.axt(t,n,i)}async uxt(t,e){var i;if((null==(i=this.lxt)?void 0:i.qS)!==t){vi.Tkt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const i=await this.TF.FS({qS:t,OS:Gs.aS,vk:Na.GET,ap:e,Vm:Sa.KS,pk:Qn.rk,Ak:this.hyt}),s=await i.mS(),n=new x(s);this.lxt={qS:t,LS:n}}return this.lxt.LS}constructor(t,e,i){this.cxt=t,this.TF=e,this.hyt=i,this.lxt=void 0}};t();var yz=class{async FS(t,e,i,s,n){const r=await this.dxt(t,e,i,Gs.aS,s,n),h=await r.mS(n);return{httpStatusCode:r.MS,response:new x(h)}}async fxt(t,e,i,s,n){return(await this.dxt(t,e,i,Gs.cS,s,n)).pS(n)}async dxt(t,e,i,s,n,r){let h;t.nmt&&(h=vr(t.nmt.Tn,t.nmt.U),0===h[0]&&h[1]===fo&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new Qi({qS:t.yE,OS:s,US:o,Ak:this.hyt,vk:Na.GET,Vm:e,pk:i,yk:this.jnt,Sk:s===Gs.cS,bk:n,ap:r});try{const e=await this.Ert.Jtt(t.yE,h);if(Bv(r),void 0!==e)return null==n||n(e.buffer.byteLength,e.buffer.byteLength),new Gu({FS:a,OS:a.OS,LS:e.buffer})}catch(t){ta(t)}return await vt((()=>Dc(this.TF.FS(a),a.ap)),r,this.Ttt)}constructor(t,e,i,s,n=2){this.TF=t,this.Ert=e,this.jnt=i,this.hyt=s,this.Ttt=n}};t();var Az=class{_xt(){return this.vxt.MSt.sPt}async gxt(t,e,i){if(!this._xt())throw new v("Could not perform blocking playlist update.");const s=this.wxt,n={dPt:t,eCt:e};return void 0!==s&&function(t,e,i){if(t.dPt===e.dPt){if(t.eCt===e.eCt)return!0;if(0===t.eCt&&void 0===e.eCt)return!0}if(t.dPt===e.dPt+1&&0===t.eCt&&void 0!==e.eCt){const t=i.qnt(e.dPt);if(t&&t.Igt&&e.eCt>=t.kPt.length)return!0}return!1}(s,n,this.vxt.MSt)||(await this.mxt(),this.pxt(n)),this.hbt.bRt(this.vxt,i)}yxt(t){return this.pxt(),this.hbt.bRt(this.vxt,t)}pxt(t){if(!this.Axt&&!this.bxt){const e=()=>{this.Axt=void 0};this.Axt=this.Txt(t,this.Sxt.ap).then(e,e)}}async mxt(){this.Axt&&(this.Sxt.tf(),this.Sxt=new Mr,await this.Axt.catch(De),this.Axt=void 0)}async Txt(t,e){let i=t;for(;;){if(Bv(e),this.vxt.MSt.DPt&&this.vxt.MSt.zIt)return;null!=i||(i=this.kxt()),this.wxt=i;try{if(i)await this.hbt.mRt(this.vxt,i.dPt,i.eCt,e);else{const t=Gn.Qg()-this.In,i=1e3*this.vxt.MSt.GIt;t<i&&await Rt(i-t,e),await this.hbt.ARt(this.vxt,e)}}catch(t){throw this.wxt=void 0,ta(t),this.hbt.yRt(this.vxt),t}i=void 0,this.In=Gn.Qg()}}kxt(){const t=this.vxt.MSt;if(!t.sPt||t.DPt||0===t.wet.length)return;const e=t.wet[t.wet.length-1];return e.Igt?{dPt:e.dPt+1,eCt:t.qIt?0:void 0}:{dPt:e.dPt,eCt:e.kPt.length}}Wu(){this.bxt=!0,Ov(this.mxt())}constructor(t,e){this.Axt=void 0,this.Sxt=new Mr,this.In=-1/0,this.wxt=void 0,this.bxt=!1,this.hbt=t,this.vxt=e,this.pxt()}};t();var bz=function(t){return t[t.EEt=0]="EEt",t[t.PEt=1]="PEt",t[t.GS=2]="GS",t[t.QS=3]="QS",t}({});t(),t();var $s="AssetExtractor",Tz=class{Ext(t,e,i){let s=e;for(const e of this.Pxt){if(s>=t)return!0;if(s<e.Tn)return!1;if(s<e.Pn){if(i<=e.Pn)return!0;s=e.Pn}}return s>=t}Ixt(t,e){const i=[];for(let s=0;s<this.Pxt.length;s+=1){const n=this.Pxt[s],r=t-n.Tn,h=n.LS.length,o=w.min(h,w.max(r,0)),a=w.max(0,e+r),u=Nc(n.LS,o,a);u.length&&(s=this.Cxt(s,n,t,o,a),i.push(u))}return i}Rxt(t,e){this.Pxt.push({Tn:t,Pn:t+e.length,LS:e})}Cxt(t,e,i,s,n){let r=t;this.Pxt.splice(r,1),r-=1,e.Tn<i&&(r+=1,this.Pxt.splice(r,0,{Tn:e.Tn,Pn:i,LS:Nc(e.LS,0,s)}));const h=i+n-s;return h<e.Pn&&(r+=1,this.Pxt.splice(r,0,{Tn:h,Pn:e.Pn,LS:Nc(e.LS,n)})),r}constructor(){this.Pxt=[]}},Sz=class{get xxt(){return this.Dxt}async Nxt(){const t=await this.Ed.read();if(t.done)throw this.Dxt=1/0,new v("No more data can be read from the given stream.");return this.Dxt+=t.value.length,t.value}async Bxt(t){await this.Ed.cancel(t)}constructor(t,e){this.Dxt=e,this.Ed=t.getReader()}},kz=class{Mxt(){this.Lxt.Xf(),this.Lxt=new ue}Oxt(t){const{rmt:e,hmt:i}=Pz(this.uIt.nmt),s=this.Fxt.Ixt(e,i-e);vi.Tkt($s,"Collected "+s.length+" chunks.");for(const e of s)t.enqueue(e)}async readAndSliceOutAssetBytes(t){await this.Uxt.Pf;const{rmt:e,hmt:i}=Pz(this.uIt.nmt);try{for(;;){const s=this.Ed.xxt,n=await this.Ed.Nxt(),r=n.length;vi.Tkt($s,"Read "+r+" at "+s+" for extraction of "+wh(this.uIt));const h=w.min(s+r,e)-s;if(!(h>0)){if(s+r<=i)return vi.Tkt($s,"Extracting the read data range for extraction of "+wh(this.uIt)),t.enqueue(n),this.Mxt(),Ov(this.readAndSliceOutAssetBytes(t));{const e=i-s,h=Nc(n,0,e),o=Nc(n,e);return h.length>0&&(vi.Tkt($s,"Extracting "+h.length+" bytes for extraction of "+wh(this.uIt)),t.enqueue(h)),vi.Tkt($s,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+wh(this.uIt)),this.Fxt.Rxt(s+e,o),vi.Tkt($s,"Extraction of "+wh(this.uIt)+" completed as the entire request has been fulfilled."),this.Vxt(t),void(this.Hxt&&(vi.Tkt($s,"Aborting stream upstream as no more bytes are needed from "+wh(this.uIt)+"."),await this.Ed.Bxt("AssetExtraction - AbortOnEnd")))}}{const e=Nc(n,0,h),i=Nc(n,h);if(vi.Tkt($s,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+wh(this.uIt)),this.Fxt.Rxt(s,e),i.length>0)return vi.Tkt($s,"Extracting "+i.length+" bytes for extraction of "+wh(this.uIt)),t.enqueue(i),this.Mxt(),Ov(this.readAndSliceOutAssetBytes(t))}}}catch(e){vi.Tkt($s,"Extraction of "+wh(this.uIt)+" completed as the entire source stream has been read."),this.Vxt(t)}}Vxt(t){t.close(),this.Mxt(),this.Wxt.Xf()}start(t){vi.Tkt($s,"Preparing to push all collected data to controller for extraction of "+wh(this.uIt)),this.Oxt(t),vi.Tkt($s,"Collected data pushed to controller for extraction of "+wh(this.uIt));const{hmt:e}=Pz(this.uIt.nmt);this.Ed.xxt>=e?(vi.Tkt($s,"Extraction of "+wh(this.uIt)+" completed as the entire request has been fulfilled."),this.Vxt(t)):(vi.Tkt($s,"Continuing read from original stream for extraction of "+wh(this.uIt)),Ov(this.readAndSliceOutAssetBytes(t)))}get qxt(){return this.Wxt.Pf}pull(){return this.Uxt.Xf(),this.Uxt=new ue,this.Lxt.Pf}constructor(t,e,i,s){this.Wxt=new ue,this.uIt=t,this.Ed=e,this.Fxt=i,this.Hxt=s,this.Uxt=new ue,this.Lxt=new ue}},Ez=class{FM(t){if(!YW(this.uIt,t))return!1;const{rmt:e,hmt:i}=Pz(t.nmt);return this.Fxt.Ext(this.zxt.xxt,e,i)}async eft(t,e){void 0===e&&(e=!1);const i=this.zxt,s=this.Fxt;if(vi.rD($s,"Extracting data from "+wh(t)+" out of "+wh(this.uIt)),this.Xxt&&(vi.Tkt($s,"Awaiting previous extraction before extracting "+wh(t)+" out of "+wh(this.uIt)),await this.Xxt),!this.FM(t))throw new v("The extractor does not contain the data requested");const n=new kz(t,i,s,e);return this.Xxt=n.qxt,new zn(n)}constructor(t,e){this.uIt=e;const{rmt:i}=Pz(this.uIt.nmt);this.zxt=new Sz(t,i),this.Fxt=new Tz}};function Pz(t){if(t){const e=t.Tn;return{rmt:e,hmt:void 0!==t.U?e+t.U:fo}}return{rmt:0,hmt:fo}}var Iz=class{async On(){const t=await this.Gxt.fxt(this.uIt,Sa.QS,Qn.zS,void 0,this.LT.ap);return new Ez(t,this.uIt)}FM(t){return YW(this.uIt,t)}async eft(t,e){void 0===e&&(e=!1);const i=await this.o_t;return await Dc(i.eft(t,e),this.LT.ap)}tf(){this.o_t.catch(De),this.LT.tf()}constructor(t,e){this.uIt=t,this.Gxt=e,this.LT=new Mr,this.o_t=this.On()}};t();var Cz=class extends o{constructor(t){super(Lz.Qxt),this.yk=t}};t();var Rz=class extends o{constructor(t,e,i,s,n,r,h){super(Lz.Kxt),this.uri=t,this.jxt=e,this.yk=i,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.Yxt=r,this.httpStatusCode=h}};function xz(t,e,i){const s=Yi(i)?i:i.nIt;if(e.pCt(s.RPt)){if(void 0!==i.j8)return e.ICt(i.j8,i).SL();if(i!==s&&void 0!==s.j8){const t=e.ICt(s.j8,s).SL();return i.YM+(t-s.YM)}}const n=t.MSt.qnt(s.dPt-1);if(void 0!==n&&e.pCt(n.RPt)){if(n.kPt.length>0){const t=n.fIt(n.kPt.length-1);if(void 0!==t.j8){const s=e.ICt(t.j8,t).SL();return i.YM+(s-t.YM)}}if(void 0!==n.j8){const t=e.ICt(n.j8,n).SL();return i.YM+(t-n.YM)}}const r=t.MSt.qnt(s.dPt+1);if(void 0!==r&&e.pCt(r.RPt)){if(r.kPt.length>0){const t=r.fIt(0);if(void 0!==t.j8){const s=e.ICt(t.j8,t).SL();return i.YM+(s-t.YM)}}if(void 0!==r.j8){const t=e.ICt(r.j8,r).SL();return i.YM+(t-r.YM)}}return i.YM}function Dz(t){return void 0!==t.j8}function Nz(t,e,i,s){for(let n=e;n<t.length;n++){const e=t[n];if(e.RPt!==i)break;if(Dz(e)){if(s(e,n))break}}}function Bz(t,e,i,s){for(let n=e;n>=0;n--){const e=t[n];if(e.RPt!==i)break;if(Dz(e)){if(s(e,n))break}}}t();var Mz="HlsPlaylistDownloader",Lz=function(t){return t.Qxt="segmentdownloadprogress",t.Kxt="segmentdownloaded",t}({}),Oz=class extends Re{Zxt(t){this.Jxt.Wu(),this.Jxt=new Az(this.hbt,t),this.KRt?this.$xt=t:(this.vxt=t,this.tDt=0,this.eDt=void 0,this.iDt=void 0)}get KRt(){return void 0!==this.sDt}ZRt(){return this.sDt?this.sDt.Pf:Promise.resolve()}nDt(){return this.ixt.nDt()}rDt(t){this.ixt.rDt(t)}tf(){var t,e,i;this.hDt.tf(),this.hDt=new Mr,null==(t=this.oDt)||t.tf(),this.oDt=void 0,null==(e=this.aDt)||e.tf(),null==(i=this.uDt)||i.tf(),this.aDt=void 0,this.uDt=void 0,this.tDt=0,this.eDt=void 0,this.iDt=void 0}Wu(){this.Jxt.Wu()}get ZSt(){var t;return null!=(t=this.$xt)?t:this.vxt}get cDt(){if(!this.vxt.MSt.DPt||void 0===this.eDt)return!1;const t=this.vxt.MSt.qnt(this.eDt);if(!t.iIt)return!1;if(void 0!==this.iDt){if(!t.fIt(this.iDt).iIt)return!1}return!0}lDt(t){const e=this.vxt.MSt.iCt(t);if(!e)return!1;if(void 0!==this.eDt){const i=e.dPt===this.eDt;return void 0!==this.iDt?e._It(t)===e.fIt(this.iDt)&&i:i}return!1}dDt(t){let e;if(void 0===this.eDt||t<this.tDt-1e-6)e=this.fDt(t);else if(e=this._Dt(this.eDt,this.iDt),void 0!==e){const[i,s]=e,n=xz(this.vxt,this.hbt.Mr.aB,null!=s?s:i),r=3*this.vxt.MSt.wEt;w.abs(n-t)>=r&&(e=this.fDt(t))}else if(this.vxt.MSt.DPt){if(this.vxt.MSt.qnt(this.eDt).iIt&&(e=this.fDt(t),void 0!==e&&e[0].dPt===this.eDt))return}if(e){this.tDt=t;const[i,s]=e;return 0===(null==s?void 0:s.hIt)&&void 0!==i.ct?[i,void 0]:[i,s]}}fDt(t){let e,i;const s=this.vxt.MSt.wet;if(0===s.length)return;const n=this.hbt.Mr.aB,r=_r.EO(t),h=function(t,e,i){const s=t.MSt.wet;if(0===s.length)return;const n=t.MSt.sCt(i.SL());if(!e.pCt(n.RPt))return;const r=n.dPt-s[0].dPt,h=n.RPt;let o,a,u,c=0;if(Bz(s,r,h,((t,e)=>(o=t,c=e,!0))),void 0===o&&(Nz(s,r+1,h,((t,e)=>(o=t,c=e,!0))),void 0===o))return;return e.ICt(o.j8,o).CL(i)?(a=o,Nz(s,c+1,h,(t=>e.ICt(t.j8,t).kL(i)?(u=t,!0):(a=t,!1)))):(u=o,Bz(s,c-1,h,(t=>e.ICt(t.j8,t).CL(i)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.vxt,n,r);let o;if(void 0!==h){const[t,e]=h,i=n.ICt(t.j8,t),s=n.ICt(e.j8,e),a=r.ML(i).SL()/s.ML(i).SL()*(e.YM-t.YM);o=t.YM+a}else o=t;const a=s[s.length-1];return a.ZM<=o?(e=a,i=a.gIt(o)):s[0].YM>o?(e=s[0],i=e.fIt(0)):(e=this.vxt.MSt.iCt(o),i=null==e?void 0:e.gIt(o)),e?[e,i]:void 0}_Dt(t,e){let i,s;if(i=this.vxt.MSt.qnt(t),i&&void 0!==e){if(0===i.kPt.length)return[i,void 0];s=i.fIt(e+1)}return void 0!==i&&void 0!==s||(i=this.vxt.MSt.qnt(t+1),s=null==i?void 0:i.fIt(0)),i?[i,s]:void 0}YRt(){if(this.KRt)throw new v("Cannot perform new operation while PlaylistDownloader is still busy")}vDt(t){this.YRt(),this.sDt=new ue,this.gDt(t,this.hDt.ap).then(this.wDt,this.wDt)}mDt(){this.Jxt.pxt()}async gDt(t,e){if(this.vxt.MSt.DPt)return;let i=this.dDt(t);for(!i&&this.Jxt._xt()&&void 0!==this.eDt&&(await this.Jxt.gxt(void 0===this.iDt?this.eDt+1:this.eDt,void 0!==this.iDt?this.iDt+1:void 0,e),i=this.dDt(t)),!i&&this.Jxt._xt()&&void 0!==this.eDt&&(await this.Jxt.gxt(this.eDt+1,0,e),i=this.dDt(t));!i;){vi.rD(Mz,"No next segment / part available, need to update playlist before continuing."),await this.Jxt.yxt(e);const s=this.ZSt.MSt.wet;s[0].YM>t&&(this.iDt=void 0,this.eDt=void 0);s[s.length-1].dPt<this.eDt&&(this.iDt=void 0,this.eDt=void 0),i=this.dDt(t)}}pDt(){return this.ixt.yDt()}ADt(){this.YRt();try{const t=this.vxt.MSt.nCt(jW.EEt);t&&this.bDt(t);const e=this.vxt.MSt.nCt(jW.PEt);e&&this.TDt(e)}catch(t){throw ta(t),this.vxt.MSt.ZIt=Gn.Qg(),this.hbt.yRt(this.vxt),t}}bDt(t){this.uDt&&!this.uDt.FM(t.Igt)&&(this.uDt.tf(),this.uDt=void 0),this.uDt||(this.uDt=new Iz(t.Igt,this.Gxt))}TDt(t){this.aDt&&!this.aDt.FM(t.Igt)&&(this.aDt.tf(),this.aDt=void 0),this.aDt||(this.aDt=new Iz(t.Igt,this.Gxt))}Wnt(t,e,i){this.YRt(),vi.rD(Mz,"Starting download of segment "+wh(t.Igt)+" and part "+(null==e?void 0:e.hIt)),this.sDt=new ue,this.SDt(t,e,i,this.hDt.ap).catch((t=>{throw ta(t),this.vxt.MSt.ZIt=Gn.Qg(),this.hbt.yRt(this.vxt),t})).then(this.wDt,this.wDt)}async SDt(t,e,i,s){let n;if(t.PPt){var r,h;if(!i||!ZW(i.nxt.Igt,null==(r=t.PPt)?void 0:r.Igt)||t.RPt!==i.RPt){var o;null==(o=this.oDt)||o.tf(),this.oDt=new ue;const e=this.kDt(t.PPt,t,s).then((()=>{this.oDt=void 0}));this.oDt.lp(e)}n=null==(h=this.oDt)?void 0:h.Pf}await this.EDt(t,e,n,s)}async kDt(t,e,i){const s=await this.PDt(t,e,i),n=s.PPt.LS.LS.byteLength;this.ixt.IDt(s),this.wo(new Rz(s.PPt.nxt.Igt,s.Vm,this.Dw,e.dPt,s.ZSt.KI,n,s.PPt.Zrt)),vi.Tkt(Gt,"Download initializer complete",wh(t.Igt))}async EDt(t,e,i,s){const n=await this.CDt(t,e,s),r=n.Srt.LS.LS.byteLength;var h;i&&await Dc(i,s),this.ixt.IDt(n),this.wo(new Rz(n.Srt.nxt.Igt,n.Vm,this.Dw,t.dPt,n.ZSt.KI,r,n.Srt.Zrt)),vi.Tkt(Gt,"Download complete",wh(null!=(h=null==e?void 0:e.Igt)?h:t.Igt))}async CDt(t,e,i){let s;if(e){if(this.aDt)if(this.aDt.FM(e.Igt)){const t=await this.aDt.eft(e.Igt),n=await jt(t,i),r=new x(n);s=Uz(e,await this.axt(r,e.bPt,i),200)}else this.aDt.tf(),this.aDt=void 0;s||(vi.Tkt(Gt,"Start download",wh(e.Igt)),s=await this.RDt(e,i))}else vi.Tkt(Gt,"Start download",wh(t.Igt)),s=await this.Xnt(t,i);return this.eDt=t.dPt,this.iDt=null==e?void 0:e.hIt,{Vm:"Srt",Srt:s,ZSt:this.vxt,RPt:t.RPt}}async PDt(t,e,i){let s;if(this.uDt){var n;if(this.uDt.FM(t.Igt)){const n=await Dc(this.uDt.eft(t.Igt),i),r=await jt(n,i),h=new x(r);s=Fz(t,e,await this.axt(h,t.SPt?[t.SPt]:[],i),200)}vi.rD(Mz,"MAP is required for segment, downloading MAP data."),null==(n=this.uDt)||n.tf(),this.uDt=void 0}return s||(vi.Tkt(Gt,"Start download",wh(t.Igt)),s=await this.xDt(t,e,i)),{Vm:"PPt",PPt:s,ZSt:this.vxt,YM:e.YM,RPt:e.RPt,bPt:e.bPt}}async xDt(t,e,i){const{response:s,httpStatusCode:n}=await this.Gxt.FS(t.Igt,Sa.GS,Qn.jS,void 0,i),r=t.SPt?[t.SPt]:[];return Fz(t,e,await this.axt(s,r,i),n)}async Xnt(t,e){if(!t.Igt)throw new v("Internal error: attempted to download an incomplete segment");let i,s;try{this.DDt(t);const n=await this.Gxt.FS(t.Igt,Sa.GS,Qn.zS,this.NDt,e);i=n.response,s=n.httpStatusCode}finally{this.BDt()}return function(t,e,i){return{LS:{LS:e,Vm:lt.KQ},Vm:bz.GS,Zrt:i,nxt:t,RPt:t.RPt}}(t,await this.axt(i,t.bPt,e),s)}async RDt(t,e){let i,s;try{this.DDt(t);const n=await this.Gxt.FS(t.Igt,Sa.GS,Qn.zS,this.NDt,e);i=n.response,s=n.httpStatusCode}finally{this.BDt()}return Uz(t,await this.axt(i,t.bPt,e),s)}async axt(t,e,i){const s=bv(e,(t=>t.vk===gn.IEt));return s?s.Igt&&s.$Et?await this.MDt.axt(t,s.Igt,s.$Et,i):(vi.lt(Mz,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}DDt(t){var e,i,s;this.LDt=t,this.ODt=0,this.FDt=Gn.Qg(),this.UDt=0,this.VDt=null!=(s=null==(i=t.Igt)||null==(e=i.nmt)?void 0:e.U)?s:0}BDt(){this.LDt=void 0,this.ODt=0,this.FDt=0,this.UDt=0,this.VDt=0}HDt(){if(void 0!==this.LDt)return{Srt:this.LDt,WDt:this.UDt,qDt:this.VDt,zDt:Gn.Qg()-this.FDt}}XDt(t){return void 0!==this.LDt&&(0!==this.ODt&&(!(this.VDt>0&&this.UDt>=this.VDt)&&!(t-this.ODt<500)))}constructor(t,e,i,s,n,r,h,o){super(),this.$xt=void 0,this.sDt=void 0,this.LDt=void 0,this.ODt=0,this.FDt=0,this.UDt=0,this.VDt=0,this.hDt=new Mr,this.oDt=void 0,this.tDt=0,this.eDt=void 0,this.iDt=void 0,this.uDt=void 0,this.aDt=void 0,this.wDt=t=>{this.$xt&&(this.vxt=this.$xt,this.$xt=void 0,this.tDt=0,this.eDt=void 0,this.iDt=void 0),this.sDt&&(t&&!Eh(t)?this.sDt.My(t):this.sDt.Xf(),this.sDt=void 0)},this.NDt=(t,e)=>{this.UDt=t,t>0&&0===this.ODt&&(this.ODt=Gn.Qg()),void 0!==e&&(this.VDt=e),this.wo(new Cz(this.Dw))},this.Dw=t,this.hbt=i,this.ixt=s,this.vxt=e,this.Jxt=new Az(i,e),this.MDt=new pz(h,n,o),this.Gxt=new yz(n,r,function(t){switch(t){case ri.wl:return Ec.wl;case ri.hk:return Ec.hk;case ri.aF:case ri.kEt:return Ec.lS;default:return Ec.zS}}(e.Vm),o)}};function Fz(t,e,i,s){return{LS:{LS:i,Vm:lt.KQ},Vm:bz.EEt,Zrt:s,nxt:t,RPt:e.RPt}}function Uz(t,e,i){return{LS:{LS:e,Vm:lt.KQ},Zrt:i,Vm:bz.PEt,nxt:t,RPt:t.nIt.RPt}}t();var Vz=class{get ORt(){return this.GDt}get QDt(){const t=[];for(const i of this.KDt)if("Srt"===i.Vm){const s=i.Srt.nxt,n=xz(i.ZSt,this.XCt,s);var e;t.push({Srt:s,ZSt:i.ZSt,YM:n,ZM:n+(null!=(e=s.ct)?e:0)})}return t}get jDt(){const t=[];return this.YDt.forEach((e=>{for(const i of e.ZDt)"Srt"===i.Vm&&t.push({Srt:i.nxt,ZSt:i.ZSt,YM:i.YM,ZM:i.YM+i.ct})})),t}IDt(t){"PPt"===t.Vm&&(this.GDt=t.PPt),this.KDt.push(t),this.JDt&&(this.JDt.Xf(),this.JDt=void 0)}nDt(){return this.KDt[0]}rDt(t){Ko(this.KDt,t)}yDt(){return null!=this.JDt||(this.JDt=new ue),this.JDt.Pf}$Dt(t){this.tNt(t.cnt).$Dt(t)}eNt(t){return this.tNt(t).eNt()}ext(t){this.tNt(t.cnt).ext(t)}iNt(t){var e;null==(e=this.YDt.get(t))||e.Wu()}sNt(t){return this.tNt(t).sNt()}tNt(t){if(this.YDt.has(t))return this.YDt.get(t);{const e=new Hz;return this.YDt.set(t,e),e}}By(){this.nNt(),this.rNt()}nNt(){this.GDt=void 0,us(this.KDt)}rNt(){this.YDt.forEach((t=>t.By()))}Wu(){this.YDt.forEach((t=>t.Wu())),this.YDt.clear(),this.By(),this.JDt&&(this.JDt.tf(),this.JDt=void 0)}constructor(t){this.KDt=[],this.YDt=sa(),this.JDt=void 0,this.GDt=void 0,this.XCt=t}},Hz=class{get ZDt(){return this.hNt}$Dt(t){this.hNt.push(t),this.oNt&&(this.oNt.Xf(),this.oNt=void 0)}eNt(){return this.hNt[0]}ext(t){Ko(this.hNt,t)}sNt(){return null!=this.oNt||(this.oNt=new ue),this.oNt.Pf}By(){us(this.hNt)}Wu(){this.By(),this.oNt&&(this.oNt.tf(),this.oNt=void 0)}constructor(){this.hNt=[],this.oNt=void 0}};t();var Wz=1e-6,qz=class{get Sl(){return this.pTt}get GJ(){return this.yTt}async hJ(t,e){const i=t.LS.LS;if(this.aNt(i),this.uNt.Vm===Zo.TTML){this.XCt.pCt(t.RPt)||await Dc(this.XCt.ACt(t.RPt),e);const s=this.cNt(i,t.RPt);for(const t of s)this.uNt.SF(t)}}async sJ(t,e){if(void 0===t.LS)return;const i=t.YM,s=i+t.ct;this.pTt=this.pTt.Xl(r.OB(i,s)).yB(Wz),this.jJ(t.lNt,t.dNt),this.YJ(i,s),this.XCt.pCt(t.RPt)||await Dc(this.XCt.ACt(t.RPt),e),this.rJ(t.LS.LS,t.RPt,t.nxt)}rJ(t,e,i){let s;this.aNt(t),s=this.uNt.Vm===Zo.WEBVTT?this.fNt(t,i):this.cNt(t,e);for(const t of s)this.uNt.SF(t)}fNt(t,e){const i=$T(t),s=i.L;var n;const r=null!=(n=i.YO)?n:{ZO:_r.WL,dh:_r.WL};for(const t of s){const i=_r.EO(t.YM).ML(r.dh).OM(r.ZO),s=this.XCt.ICt(i,e).SL(),n=s+(t.ZM-t.YM);t.vL(s,n)}return s}cNt(t,e){const i=this.XCt.PCt(e).SL();return BS(t,this.uNt,{XO:0,GO:1/0,QO:i},Pt.APPLICATION_MP4)}aNt(t){this.uNt.Vm===Zo.DEFAULT&&(this.uNt.Vm=this._Nt(t)?Zo.WEBVTT:Zo.TTML)}_Nt(t){return cS(Fh(it(Nt(t),0,w.min(t.byteLength,16)),new lh))}jJ(t,e){this.yTt=this.yTt.Xl(r.OB(t,e)).yB(Wz)}YJ(t,e){this.yTt=this.yTt.bB(r.OB(t,e))}constructor(t,e){this.pTt=r.Ol(),this.yTt=r.Ol(),this.uNt=t,this.XCt=e}};t(),t(),t();var zz=class extends o{constructor(t,e){super(Hs.vNt),this.ZSt=t,this.Let=e}};t();var Xz=class extends o{constructor(t){super(Hs.gNt),this.ZSt=t}};t();var Gz=class extends o{constructor(t,e){super(Hs.wNt),this.ZSt=t,this.Qat=e}};t();var Qz=class extends o{constructor(t,e){super(Hs.mNt),this.ZSt=t,this.pNt=e}},Hs=function(t){return t.vNt="yNt",t.wNt="ANt",t.mNt="bNt",t.gNt="TNt",t}({}),Kz=class extends Re{get SNt(){return this.kNt}ENt(t){for(const e of this.kNt)Qe(t,e)||this.ixt.iNt(e);this.kNt=t}get KRt(){return void 0!==this.PNt}ZRt(){var t,e;return null!=(e=null==(t=this.PNt)?void 0:t.Pf)?e:Promise.resolve()}YRt(){if(this.KRt)throw new v("Cannot perform new operation while transmuxer is still busy")}INt(t,e){}CNt(t){this.YRt(),this.PNt=new ue;const e=e=>{this.RNt(t,e)};this.xNt(t,this.LT.ap).then(e,e)}DNt(t){this.YRt(),this.PNt=new ue;const e=e=>{this.RNt(t,e)};this.NNt(t,this.LT.ap).then(e,e)}RNt(t,e){this.PNt&&(!e||Eh(e)||function(t){return t instanceof $q}(e)?(Eh(e)||this.ixt.rDt(t),this.PNt.Xf(),this.PNt=void 0):this.PNt.My(e))}BNt(t,e){this.wo(new zz(t,e))}MNt(t,e){this.wo(new Gz(t,e))}LNt(t,e,i){Zq(e)&&this.wo(new Qz(t,i))}ONt(t){this.wo(new Xz(t))}$Dt(t){Qe(this.kNt,t.cnt)&&this.ixt.$Dt(t)}FNt(t){return this.ixt.eNt(t)}ext(t){this.ixt.ext(t)}UNt(t){return this.ixt.sNt(t)}tf(){this.LT.tf(),this.LT=new Mr}constructor(t,e,i){super(),this.PNt=void 0,this.LT=new Mr,this.ixt=t,this.XCt=e,this.kNt=i}};function jz(t,e){return Zq(t)?0:w.min(t.YM,e)}function Yz(t,e){var i;return w.max(t.YM,e)+(null!=(i=t.ct)?i:0)}var Zz=class extends Kz{xNt(t,e){Bv(e);const i={Vm:"VNt",LS:t.PPt.LS,cnt:this.SNt[0],RPt:t.RPt,HNt:{Let:"",bPt:t.bPt},YM:t.YM,ZSt:t.ZSt,nxt:t.PPt.nxt};return this.$Dt(i),Promise.resolve()}async NNt(t,e){Bv(e);const i=t.Srt.nxt;let s;void 0!==i.j8?(this.XCt.pCt(t.RPt)||await Dc(this.XCt.ACt(t.RPt),e),s=this.XCt.ICt(i.j8,i).SL()):s=i.YM;const n=jz(i,s),r=Yz(i,n);var h;const o={Vm:"Srt",LS:t.Srt.LS,cnt:this.SNt[0],lNt:n,dNt:r,YM:s,ct:null!=(h=i.ct)?h:0,QO:0,RPt:t.RPt,ZSt:t.ZSt,nxt:t.Srt.nxt};this.$Dt(o)}constructor(t,e,i){super(t,e,[i])}};function Jz(t,e){let i=r.Ol();for(const s of t){let n=s.YM;if(s.ZSt.MSt.DPt&&Zq(s.Srt))n=0;else{const i=t=>s.ZSt===t.ZSt&&Jq(t.Srt,s.Srt),r=bv(t,i);if(void 0!==r)n=w.min(n,r.ZM);else{const t=bv(e,i);void 0!==t&&(n=w.min(n,t.qRt.Pn(0)))}}i=i.Xl(r.OB(n,s.ZM))}return i}t();var $z=.001,tX=class{get WNt(){return this.qNt}get ZSt(){return this.zNt.ZSt}Zxt(t){this.zNt.Zxt(t)}get KRt(){return this.zNt.KRt||this.XNt.KRt||this.qNt.some((t=>t.KRt))}GNt(t){const e=t.slice();for(let t=this.qNt.length-1;t>=0;t--){const i=this.qNt[t];if(!i.zRt)throw new v("Invalid state");const s=su(e,(t=>t.Vm===i.Vm));s>=0?(i.rit(e[s]),Xt(e,s)):Xt(this.qNt,t)}for(const t of e){const e=new wz(t);this.qNt.push(new mz(t.Vm,t,this.QNt,e,this))}e.length>0&&this.QNt.By();const i=t.map((t=>t.Vm));this.XNt.ENt(i)}xG(t){var e;const i=(null==(e=this.yW)?void 0:e.xG(t))||!1;return i&&(this.tf(),this.QNt.By()),i}KNt(t){for(const t of this.qNt)if(t.Vm!==Be.lS||t.KRt)throw new v("Invalid state");const e=new wz(t),i=new mz(Be.lS,t,this.QNt,e,this);this.qNt=[i]}get ORt(){const t=this.QNt.ORt;if(t)return t;if(this.qNt.length>0){const t=this.qNt[0].XRt.ORt;if(t&&this.qNt.every((e=>e.XRt.ORt===t)))return t}}Vnt(){for(const t of this.qNt)t.XRt.HRt()}get jNt(){if(0===this.qNt.length)return r.Ol();const t=Jz(this.QNt.QDt.concat(this.QNt.jDt),fn(this.qNt,(t=>t.XRt.wet))).vB();let e=new r([0,1/0]);for(const t of this.qNt)e=e.Cn(t.XRt.Sl);for(const t of this.qNt)e=e.bB(t.GRt);return e=e.Xl(t),e.yB($z)}get YNt(){if(0===this.qNt.length)return r.Ol();const t=Jz(this.QNt.jDt,fn(this.qNt,(t=>t.XRt.wet))).vB();let e=new r([0,1/0]);for(const t of this.qNt)e=e.Cn(t.XRt.Sl);return e=e.Xl(t),e}Iot(t){const e=this.jNt.BB(t,$z);return e?e.Pn(e.U-1):t}lDt(t){return!!this.jNt.BB(t,$z)||this.zNt.lDt(t)}ZNt(t){return this.YNt.br(t,$z)}JNt(t,e,i){for(const t of this.qNt){const i=t.XRt,s=i.zft;if(void 0!==s&&e>=s&&!i.Sl.vB().br(s))return!0}return e-t<i}tf(){this.$Nt(),this.tBt()}$Nt(){this.zNt.tf()}tBt(){this.XNt.tf(),this.WNt.forEach((t=>t.tf()))}Wu(){this.tf(),this.zNt.Wu()}constructor(t,e,i,s){this.zNt=t,this.QNt=e,this.XNt=i,this.yW=s,this.qNt=[]}};t();var eX=class extends o{constructor(){super(ks.xSt)}};t();var iX=class extends o{constructor(){super(ks.CSt)}};t(),t();var sX="LazyMediaBuffer",nX=class extends Re{get yS(){return this.ST}get zJ(){return this.Dw}get aT(){if(!this.fit)throw new ke(X.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.fit.aT}get vG(){return this.SG}set vG(t){this.SG=t,this.fit&&(this.fit.vG=t)}yK(){return this.fit?this.fit.yK():this.eBt}get Sl(){return this.fit?this.fit.Sl:r.Ol()}get GJ(){return this.fit?this.fit.GJ:this.QJ.RK}get pG(){return this.PG}set pG(t){this.PG=t,this.fit&&(this.fit.pG=t)}jJ(t,e){vi.Tkt(sX,"Marking gap from "+t+" to "+e+"."),this.QJ.DK(t,e),this.fit&&this.fit.jJ(t,e)}YJ(t,e){vi.Tkt(sX,"Removing gap from "+t+" to "+e+"."),this.QJ.NK(t,e),this.fit&&this.fit.YJ(t,e)}iBt(t){this.fit=t,this.fit.pG=this.PG,this.fit.vG=this.SG;const e=this.QJ.RK;for(let t=0;t<e.U;t++)this.fit.jJ(e.Tn(t),e.Pn(t));var i;this.eBt&&(vi.Tkt(sX,"End of stream"),null==(i=this.fit)||i.WJ());this.fit.wn(Xh.GQ,this.Os),this.sBt.Xf(t)}nBt(t){return Dc(this.sBt.Pf,t)}async sJ(t,e,i){const s=await this.nBt(i);await s.sJ(t,e,i)}async ZJ(){const t=await this.nBt();await t.ZJ()}async hJ(t,e,i){const s=await this.nBt(i);await s.hJ(t,e,i)}async sc(t,e,i){const s=await this.nBt(i);await s.sc(t,e,i)}async yJ(t,e){const i=await this.nBt();await i.yJ(t,e)}WJ(){this.eBt=!0,this.fit&&this.fit.WJ()}nK(t){return!!this.fit&&this.fit.nK(t)}async hK(t){const e=await this.nBt();await e.hK(t)}async bn(){var t;this.Bo(),null==(t=this.fit)||t.pn(Xh.GQ,this.Os)}constructor(t,e){super(),this.Dw=t,this.rBt=e,this.ST=void 0,this.fit=void 0,this.sBt=new ue,this.SG=20,this.eBt=!1,this.PG=30,this.QJ=new ar}},rX="LazyMediaSource",hX=class{get aT(){return{Vm:A.CF,q$:[],oH:[]}}get N$(){return this.hBt}get B$(){return this.oBt}get Sl(){return this.iH?this.iH.Sl:r.Ol()}get ct(){return this.iH?this.iH.ct:this.nf}get yK(){return!!this.iH&&this.iH.yK}get Cl(){return this.iH?this.iH.Cl:new r([0,1/0])}F$(t){this.nf=t,this.iH&&this.iH.F$(t)}WJ(){this.G8=!0,this.iH&&this.iH.WJ()}NJ(){this.G8=!1,this.iH&&this.iH.NJ()}W$(t,e,i,s){this.aBt=t,this.uBt=e,this.cBt=Boolean(i),this.lBt=Boolean(s),this.iH&&this.iH.W$(t,e,i,s)}nK(t){return!this.iH||this.iH.nK(t)}async hK(t){if(!this.nK(t))throw new v("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.iH)await this.iH.hK(t);else{var e,i;this.rM.J4();const s=await this.rM.On(t);j(this.nf)||s.F$(this.nf),this.G8&&s.WJ(),s.W$(this.aBt,this.uBt,this.cBt,this.lBt),vi.Tkt(rX,"The MediaSource has been loaded."),this.dBt=!0,this.iH=s,null==(e=this.hBt)||e.iBt(this.iH.N$),null==(i=this.oBt)||i.iBt(this.iH.B$),this.fBt.Xf(s),this.rM.t6()}}aK(t){this.iH.aK(t)}async Wu(){this.iH&&await this.iH.Wu()}constructor(t,e,i){this.rM=t,this.hBt=void 0,this.oBt=void 0,this.fBt=new ue,this.iH=void 0,this.dBt=!1,this.nf=NaN,this.G8=!1,this.aBt=0,this.uBt=1/0,this.cBt=!1,this.lBt=!1,e&&(vi.Tkt(rX,"Created lazy media buffer for audio."),this.hBt=new nX(Be.hk,this)),i&&(vi.Tkt(rX,"Created lazy media buffer for video."),this.oBt=new nX(Be.wl,this))}};function oX(t,e){return void 0===e&&(e=!1),function(i,s){void 0===s&&(s="*");let n=uX(i,"tag");const r=uX(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),e||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!e)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return e?h:void 0}}t();oX(((t,e)=>"*"===e||t===e||H(t,e+"-")),!0),oX(((t,e)=>{const i=t.split("-"),s=e.split("-");let n=0,r=0;if("*"!==s[r]&&i[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!i[n])return!1;if(i[n]!==s[r]){if(1===i[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var aX=oX(((t,e)=>{let i,s=e;for(;;){if("*"===s||t===s)return!0;if(i=s.lastIndexOf("-"),i<0)return!1;"-"===s.charAt(i-2)&&(i-=2),s=s.slice(0,i)}}));function uX(t,e){const i=t&&"string"==typeof t?[t]:t;if(!i||"object"!=typeof i||!("length"in i))throw new v("Invalid "+e+" `"+i+"`, expected non-empty string");return i}t(),t();var cX=16384,lX=71,dX=188,fX=2,_X=3,vX=function(t){return t[t.zS=0]="zS",t[t.dC=1]="dC",t[t._Bt=2]="_Bt",t[t.vBt=3]="vBt",t}({});function gX(t){return wX(t)?1:function(t){return function(t){if(t.length<fX*dX)return-1;const e=t.length<_X*dX?fX:_X,i=w.min(1e3,t.length-e*dX);for(let s=0;s<=i;s++){let i=!0;for(let n=0;n<e;n++)if(t[s+n*dX]!==lX){i=!1;break}if(i)return s}return-1}(t)>=0}(t)?2:function(t){return null!==Xx(Nt(t),new lh)}(t)?3:0}function wX(t){const e=uc(t,0,w.min(t.length,cX));return Kh.Ex(Nt(e))}var Pr=class{get Vm(){return this.Dw}get Sl(){return this.fit.Sl}get GJ(){return this.fit.GJ}gBt(t){return this.fit===t}async hJ(t,e){if(this.fit.aT.yS!==t.HNt.Let){const i={yS:t.HNt.Let};this.fit.nK(i)&&(await this.fit.hK(i),Bv(e))}await this.fit.hJ(t.LS,{CZ:t.ZSt.KI},e),void 0!==this.wBt&&this.Dw===Be.wl&&wX(t.LS.LS)&&this.wBt.Eit(t.LS.LS)}async sJ(t,e){Bv(e),vi.rD("HlsMediaBuffer","Got media data, appending to "+this.Dw+" MediaBuffer: "+wh(t.nxt.Igt));const i=t.lNt,s=t.dNt,n={j8:t.YM,ct:t.ct,QO:t.QO,CZ:t.ZSt.KI};void 0!==t.LS&&(await this.fit.sJ(t.LS,n,e),this.mBt(t.LS,t)),this.pBt(i,s)}mBt(t,e){var i;if(!wX(t.LS))return;const s=e.YM,n=s+e.ct,r=e.QO;if(null==(i=this.Kft)||i.oat(t.LS,s,r),void 0!==this.wBt&&this.Dw===Be.wl){const i=e.nxt.iIt;this.wBt.oat(t.LS,s,n,r,e.ZSt,i)}const h=[];void 0!==this.Kft&&h.push(this.Kft),void 0!==this.wBt&&h.push(this.wBt),hk(this.Sl,h)}pBt(t,e){const i=this.fit.Sl,s=new r([t,e]).bB(i);for(let t=0;t<s.U;t++)this.fit.jJ(s.Tn(t),s.Pn(t));for(let t=0;t<i.U;t++)this.fit.YJ(i.Tn(t),i.Pn(t))}jJ(t,e){this.fit.jJ(t,e)}YJ(t,e){this.fit.YJ(t,e)}constructor(t,e,i,s){this.Dw=t,this.fit=e,this.Kft=i,this.wBt=s}};t();function mX(t){if(t.Vm!==ri.kEt||void 0===t.VSt)return;const e=t.VSt.match(/^CC([1-4])$/);if(e)return Number(e[1]);const i=t.VSt.match(/^SERVICE([\d+])$/);return i?Number(i[1]):void 0}t(),t(),t();var pX=class{pEt(t){var e,i,s;return null==(s=null==(i=this.iH)||null==(e=i.B$)?void 0:e.nK(t))||s}yEt(t){var e,i,s;return null==(s=null==(i=this.iH)||null==(e=i.N$)?void 0:e.nK(t))||s}constructor(t){this.iH=t}},xa="LLHLSPlayer",yX=[cb._l,cb.jl,cb.xl,cb.Lf],AX=[Uv.qu,Uv.Cp,Uv.Lp,Uv.Bp],bX=2e3,TX=class extends Re{get dM(){var t;const e=[this.yBt,this.ABt].filter(Ee);if(0===e.length||this.ct!==1/0)return;const i=null==(t=this.Ku)?void 0:t.getTime();if(i){return(Date.now()-i)/1e3}let s;for(const t of e){const e=t.MSt.Cl;if(0===e.U)continue;const i=e.Pn(e.U-1)+t.MSt.Dpt,n=t.MSt.KIt,r=i+(null!=n?n:0)-this.Yu;(!s||s<r)&&(s=r)}return s}bBt(){if(void 0===this.TBt)return!1;const t=Gn.Qg();if(!this.TBt.zNt.XDt(t))return!1;const e=this.TBt.zNt.HDt();if(void 0===e||void 0===e.Srt.ct)return!1;const i=this.Yu,s=this.Hu,n=this.TBt.jNt.BB(i);if((void 0!==n?n.Pn(0)-i:0)>=2*e.Srt.ct*s)return!1;if(e.WDt>0&&0===e.qDt)return e.zDt>1e3*e.Srt.ct*.8;return 8*e.qDt/this.yW.rG.PV>=1.8*e.Srt.ct}async SBt(){var t;const e=await this.TEt();if(void 0===e)return;const i=null==(t=this.TBt)?void 0:t.zNt.HDt();if(void 0===i)return;const s=this.kBt;if(i.qDt>0){if(w.max(0,i.qDt-i.WDt)<=i.qDt*(e.PV/s.PV))return}const n=e.PV<s.PV;await this.skt(e,{nkt:n})}EBt(t){return kh(t,(t=>t.PV))}async PBt(){let t=await this.IBt();if(0===t.length)return;const e=await this.CBt(t);e.length>0&&(t=e);const i=this.EBt(t);void 0!==i&&(await this.skt(i,{nkt:!0}),this.hH.vEt(i.PV))}get RBt(){const t=[this.ABt,this.yBt].filter(Ee);for(const e of t){if(!e.MSt.DPt)return!1;const t=e.MSt.wet,i=t[t.length-1];if(i&&i.RPt!==this.xBt)return!1}return!0}get JSt(){return this.kBt}get dkt(){return this.ABt}get _kt(){return this.yBt}get DBt(){return this.NBt}get ht(){return this.TM}get Sl(){return this.rM.Sl.ws()}get ekt(){const t=[];if(this.kBt){const e=this.rM.Yu;for(const i of this.BBt)for(const s of i.WNt){const i=s.txt(e);i&&!Qe(t,i)&&t.push(i)}}return t}get Ku(){if(this.kBt){const t=this.rM.Yu;return this.kBt.GPt(t)}}set Ku(t){if(!t||!this.kBt)return;const e=this.kBt.QPt(t);void 0!==e&&this.uP(e,{MBt:!1,LBt:!0})}get bt(){return this.OBt}get Yu(){var t;return null!=(t=this.FBt)?t:this.rM.Yu}set Yu(t){this.uP(t)}uP(t,e){var i,s,n,r;vi.rD(xa,"Seeking to "+t+" s.");const h={MBt:null!=(s=null==e?void 0:e.MBt)?s:t===1/0,LBt:null==(n=null==e?void 0:e.LBt)||n,yPt:null!=(r=null==e?void 0:e.yPt)&&r};this.FBt=t,this.UBt=h,this.VBt=!0,this.ebt=!0,null==(i=this.KV)||i.Al(),this.wo(new lc(t)),this.U3.tf(),this.HBt&&(Gn.Kg(this.WBt),h.LBt?this.WBt=Gn.jg((()=>this.qBt(t,h)),50):this.qBt(t,h))}qBt(t,e){Gn.Kg(this.WBt);const i=[this.o_t,this.zBt,this.V3].filter(Ee);this.U3=new Mr,this.U3.lp(this.kF.ap),this.V3=qe(this.H3(i,t,e,this.U3.ap),this.U3).catch(this.XBt)}get ct(){var t,e,i,s,n,r,h;if(!this.RBt)return null!=(h=null!=(r=null!=(n=null==(t=this.ABt)?void 0:t.MSt.ct)?n:null==(e=this.yBt)?void 0:e.MSt.ct)?r:null==(s=this.hbt)||null==(i=s.lRt)?void 0:i.MSt.ct)?h:[this.ABt,this.yBt].filter(Ee).every((t=>function(t){if(void 0===t)return!1;return t.MSt.wet.length>0&&!t.MSt.DPt}(t)))?1/0:NaN;const o=this.rM.ct;if(j(o)){var a,u;const t=null==(u=this.hbt)||null==(a=u.lRt)?void 0:a.MSt.ct;if(void 0!==t)return t}return o}get $c(){if(!this.RBt)return!1;if(this.Uc&&this.HBt){var t,e;const i=this.Yu,s=null==(t=this.ABt)?void 0:t.MSt.ct,n=null==(e=this.yBt)?void 0:e.MSt.ct;return!(void 0!==s&&i<s)&&!(void 0!==n&&i<n)}return this.rM.$c}get lt(){return this.$V}get Rc(){return this.Wl}get vP(){}get wP(){return!1}get pP(){return yh({},{PM:0,IM:0,CM:0,RM:0,xM:0,DM:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.rM.yP(),{xM:this.PAt,RM:this.yW.rG.PV})}get Mr(){var t;return null==(t=this.hbt)?void 0:t.Mr}get tc(){return this.rM.tc}set tc(t){this.rM.tc=t}get TP(){return this.kpt}set TP(t){this.kpt!==t&&(this.kpt=t,this.wo(t?new cH:new lH))}get Oc(){return this.rM.Oc}get Hu(){return this.rM.Hu}set Hu(t){vi.rD(xa,"Setting playback rate to "+t+"."),this.rM.Hu=t}get Tl(){return this.DAt.ws()}get DAt(){return this.rM.Tl}get IP(){return this.eH}set IP(t){this.eH!==t&&(this.eH=t,this.GBt())}get Vc(){let t=this.rM.Vc;return this.MAt&&(t=w.max(qb.Qn,t)),t}get Cl(){return this.kAt.ws()}get kAt(){let t=this.H$;const e=[this.ABt,this.yBt].filter(Ee);if(t.U>0&&e.some((t=>!t.MSt.DPt))){const i=this.DAt,s=t.Pn(t.U-1);if(i.U>0&&i.Pn(i.U-1)>s){let n=i.Pn(i.U-1);const h=EX(e);h.U>0&&(n=w.min(n,h.Pn(h.U-1))),t=t.Xl(new r([s,n]))}}return t}uCt(){let t=function(t){if(0===t.length)return r.Ol();let e=new r([0,1/0]),i=0;for(const s of t){const t=s.MSt.Cl;t.U>0&&(e=e.Cn(t),i=w.max(i,t.Tn(0)))}if(e.U>0)return e;return r.LB(i)}([this.ABt,this.yBt].filter(Ee));0!==t.U&&(this.iH&&this.RBt&&this.iH.ct!==1/0&&(t=new r([t.Tn(0),this.iH.ct])),this.H$=t,this.QBt&&this.Kft._F(t.Tn(0)),this.KBt&&this.wBt._F(t.Tn(0)))}get Uc(){var t;return null!=(t=this.VBt)?t:this.rM.Uc}get sH(){}get nt(){return this.Au}get rt(){return this.kM}get LP(){var t,e;return this.rM.LP||(null==(e=this.kBt)||null==(t=e.Akt)?void 0:t.Ci)||0}get UP(){var t,e;return this.rM.UP||(null==(e=this.kBt)||null==(t=e.Akt)?void 0:t.Ti)||0}get Pl(){return this.rM.Pl}set Pl(t){vi.rD(xa,"Setting volume to "+t+"."),this.rM.Pl=t}get qP(){return this.AW}get XP(){return!1}set XP(t){}get rH(){return this.hH}jP(){return!1}GP(){return this.rM.ja}xa(){return this.rM.wH}iI(t){return this.rM.mH(t)}ke(){vi.rD(xa,"Hiding the player."),this.rM.ke()}Ml(){var t;vi.rD(xa,"Pausing the player."),this.rM.Ml(),(null==(t=this.KV)?void 0:t.FB)&&this.KV.Al()}async bl(){this.P3=!0;const t=this.rM.bl();if(this.$c){const t=this.kAt;t.U>0&&this.uP(t.Tn(0),{LBt:!1})}this.HBt||await this.GBt(),this.eAt(),await t,this.ibt()}eAt(){var t;if(!this.SAt())if(null==(t=this.JSt)?void 0:t.MSt.DPt){var e;let t=!0,i=0;const s=null==(e=this.kBt)?void 0:e.MSt.Tn;if(!this.ebt&&s&&(t=!s.yPt,i=s.pPt,i<0)){const t=this.JSt.MSt.NIt;i+=t.Pn(t.U-1)}this.qBt(i,{MBt:t})}else this.qBt(1/0,{MBt:!0});this.jBt()&&this.qBt(1/0,{MBt:!0})}SAt(){var t;const e=this.kAt;if(0===e.U)return!0;const i=null==(t=this.YBt)?void 0:t.TB(this.Yu);return(i&&i>0?this.YBt.Pn(i):this.Yu)>=e.Tn(0)}get YBt(){var t,e;const i=null==(t=this.ZBt)?void 0:t.jNt,s=null==(e=this.TBt)?void 0:e.jNt;return i?s?s.Cn(i):i:s}jBt(){return DX(this.Yu,this.ABt)||DX(this.Yu,this.yBt)}Lbt(){this.$V=void 0,this.Wl=void 0}UH(t){this.$V||(Ov(this.sr()),this.$V=Bc(t),this.Wl=t,this.wo(new _n(t)))}be(){vi.rD(xa,"Showing the player."),this.rM.be()}YP(){throw new v("Not implemented")}ZP(){throw new v("Not implemented")}JP(){}$P(){this.HBt&&Ov(this.JBt(this.ABt,this.yBt,this.NBt,{$P:!0}))}async _a(t,e,i){const s={stack:[],error:void 0,hasError:!1};try{var n;if(vi.rD(xa,"Setting the player source to "+t.src+"."),this.Lbt(),this.OBt&&!Tc(this.OBt)&&(await this.sr(),Bv(i)),!t.src||Tc(t))return;const h=oe(s,Mr.fp([i]),!1);var r;this.kF=Mr.fp([h.ap]),this.lH.DV(t.contentProtection),this.OBt=t,this.$Bt=t.seamlessSwitchStrategy,this.KBt=!Qe(t.ignoreEmbeddedTextTrackTypes,Zo.CEA608),this.QBt=!Qe(t.ignoreEmbeddedTextTrackTypes,Zo.EMSG),this.wn(ks.NSt,this.handleBufferingErrorEvent);const o=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.hbt=new cz(this.TF,this.Ert,t.useCredentials,Gn.wm(t.src),o),this.hbt.wn(uz.sRt,this.LRt),this.hbt.wn(uz.nRt,this.tMt),this.hbt.wn(Uv.Rf,this.Os),this.hbt.wn(Uv.Wp,this.Os),t.hlsDateRange&&(this.eMt=new vz(this.hbt,this.rM),this.Au.UV(this.eMt.nt)),null!=this.iMt||(this.iMt=this.sMt.Z8()),e.textTracks&&this.dH(e.textTracks),t.latencyConfiguration){const e=t.latencyConfiguration;this.KV=new FH(this,this.rM,e),this.KV.Rt=!0,this.qP.Ca(this.KV)}dk(this.Au),this.GBt(),h.Wu()}catch(t){s.error=t,s.hasError=!0}finally{se(s)}}GBt(){return this.o_t=this.nMt(this.o_t,this.kF.ap).catch(this.X_t),this.o_t}async nMt(t,e){if(t&&(await t,Bv(e)),!this.hbt)return;const i=this.eH;i===Ds.vM||this.P3?await this.zk(e):i===Ds.lF&&await this.rMt(e)}async rMt(t){if(void 0===this.hbt||this.MAt)return;if(!this.hbt.oRt){try{await this.hbt.fRt(t)}catch(t){throw ta(t),this.TP=!1,new ke(X.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.hMt.tut()}const e=await this.oMt();this.aMt(e);const i=this.uMt(e.Pkt),s=this.cMt(e.Ikt),n=this.lMt(e.zPt);if(!n){const t=PX(e.XPt);t&&(vi.rD(xa,"Detected initial closed caption rendition."),this.dMt(e,t))}await this.JBt(i,s,n,{fMt:!0}),this.MAt=!0,this.nTt.lTt(),this._Mt()}_Mt(){const t=[this.ABt,this.yBt].filter(Ee);if(t.some((t=>t.MSt.DPt)))return;if(this.KV)return;const e=w.max(...t.map((t=>{var e;return null!=(e=t.MSt.Dpt)?e:0}))),i={minimumOffset:.66*e,maximumOffset:2*e,targetOffset:1*e,forceSeekOffset:3*e,minimumPlaybackRate:_b,maximumPlaybackRate:vb};this.KV=new FH(this,this.rM,i),this.AW.Ca(this.KV)}async oMt(){if(this.vMt=this.hbt.Mr.Ekt,!this.vMt.length)throw new ke(X.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.gMt(this.vMt);if(0===t.length)throw new ke(X.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const e=await this.CBt(t);return e.length>0&&(t=e),vi.rD(xa,"Selecting initial active variant stream."),function(t,e,i,s){void 0===s&&(s=Qb.maximumBackoff);const n=function(t,e){if(void 0===e)return t;const i=e.preferredVideoCodecs,s=e.preferredAudioCodecs;if(void 0!==i){let e;for(const n of i){const i=t.filter((t=>t.Let&&t.Let.mkt&&qc(t.Let.mkt,n)));if(0===i.length)continue;if(void 0===s)return i;void 0===e&&(e=i);const r=IX(i,s);if(void 0!==r)return r}if(void 0!==e)return e}if(void 0!==s){const e=IX(t,s);if(void 0!==e)return e}return t}(t,e),r=RX(n,s);switch(i.wG.type){case dh.BANDWIDTH:{const t=i.bG,e=r.filter((e=>e.PV<=t));if(e.length>0)return Iv(e,(t=>t.PV))}case dh.PERFORMANCE:return kh(r,(t=>t.PV));case dh.QUALITY:return Iv(r,(t=>t.PV))}}(t,this.OBt.abr,this.yW,this.Oot.maximumBackoff)}uMt(t){if(this.wMt){const t=this.mMt(this.wMt);if(t)return t}return CX(t)}cMt(t){if(this.pMt){const t=this.mMt(this.pMt);if(t)return t}return CX(t)}lMt(t){for(const t of this.Au.RI)t.Tk===Aa.Yn&&(this.yMt=this.AMt(t));if(this.yMt){const t=this.mMt(this.yMt);if(t)return t}return PX(t)}AMt(t){return bv(this.kBt.zPt,(e=>t===this.bMt.get(e.KI)))}async zk(t){this.HBt||(await this.rMt(t),Bv(t),this.HBt=!0,await this.JBt(this.ABt,this.yBt,this.NBt,{fMt:!0}))}dH(t){for(const e of t)e.src&&this.gH.yF(e)}dMt(t,e){if(!this.KBt)return;const i=function(t){const e=[];for(const i of t){const t=mX(i);void 0!==t&&e.push({I5:t,C5:i.gs||"",_h:i.l})}return e}(t.XPt);for(const t of i)this.wBt.gft(t);if(void 0!==e){const t=mX(e);this.wBt._ft(t).Tk=Aa.Yn}}get BBt(){return[this.ZBt,this.TBt,this.TMt].filter(Ee)}ikt(t){for(const e of t)if(!this.SMt(e))throw new v("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.vMt=t}SMt(t){const e=this.Mr;return!!e&&Qe(e.Ekt,t)}mMt(t){if(t&&this.kBt)return bv(this.kBt.Nkt,(e=>e===t))}aMt(t){var e;if(vi.rD(xa,"Setting active variant stream."),this.kBt===t)return;const i=(null==(e=this.kBt)?void 0:e.YEt)!==(null==t?void 0:t.YEt);if(this.kBt&&i)for(const t of this.kBt.zPt)this.EF(t);if(this.kBt=t,this.wo(new eX),this.KAt(),t&&i)for(const e of t.zPt)this.kMt(e)}kMt(t){const e=this.rM.iI(ns.aF,void 0,t.l,t.gs,t.LSt,void 0,void 0,t.WSt.map(SW).filter(Ee));e.wn(Fe.ca,this.onTextTrackChange),this.bMt.set(t.KI,e),this.EMt.tt(e)}EF(t){const e=this.bMt.get(t.KI);e&&(e.pn(Fe.ca,this.onTextTrackChange),this.EMt.it(e),this.bMt.delete(t.KI),this.rM.EF(e))}async IBt(){var t;const e=null!=(t=this.vMt)?t:this.Mr.Ekt;if(0===e.length&&!this.vMt)return vi.rD(xa,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===e.length&&!this.vMt)return vi.rD(xa,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const i=await this.gMt(e);if(0===i.length)return vi.Skt(xa,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=RX(i,this.Oot.maximumBackoff);return 0===s.length?(this.PMt||(vi.Skt(xa,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.IMt++,await this.CMt(i)),[]):s}async RMt(){const t=await this.TEt();if(void 0===t)return;const e=!!this.kBt&&t.PV<this.kBt.PV;await this.skt(t,{nkt:e})}async TEt(){var t,e;const i=await this.IBt();if(0===i.length)return;const s=function(t){const e=t.Yu,i=t.Sl.BB(e);return i?i.Pn(0)-e:0}(this.rM),n=await this.CBt(i),r={Ti:this.rM.Ti,Ci:this.rM.Ci,mEt:s,fot:null==(e=this.OBt)||null==(t=e.abr)?void 0:t.restrictToPlayerSize},h=await this.xMt.TEt(i,this.kBt,n,r,new pX(this.iH));return!!this.kBt&&h.PV<this.kBt.PV||this.DMt(h,s)?h:void 0}DMt(t,e){var i;if(t===this.JSt)return!1;const s=this.JSt&&xX(this.JSt,this.Oot.maximumBackoff),n=xX(t,this.Oot.maximumBackoff);if(!s&&n)return!0;(!this.NMt||this.NMt.$St.PV>t.PV)&&(this.NMt={$St:t,Nut:Gn.Qg()});const r=Gn.Qg()-this.NMt.Nut;var h;const o=null!=(h=null==(i=this._kt)?void 0:i.MSt.wEt)?h:1/0;return e>=w.max(o-1,5)||r>1e3}async CMt(t){this.PMt=!0;let e=!1;for(const i of t)try{const t=this.yBt?bv(i.Ikt,(t=>lW(t,this.yBt))):void 0;if(void 0===t)continue;await this.ARt(t),t.MSt.ZIt=-1/0,e=!0}catch(t){}if(e)this.IMt=0,await this.BMt();else{if(this.IMt>=this.Oot.maxRetries)return void this.UH(new ke(X.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=w.min(this.Oot.minimumBackoff*2**(this.IMt-1),this.Oot.maximumBackoff);await Rt(t)}this.PMt=!1,await this.RMt()}async gMt(t){let e=await xv(t,(async t=>{var e,i,s;const n=[(null==(e=t.Let)?void 0:e.wkt)?'audio/mp4; codecs="'+t.Let.wkt+'"':void 0,(null==(i=t.Let)?void 0:i.mkt)?'video/mp4; codecs="'+t.Let.mkt+'"':void 0].filter(Ee);return 0===n.length||await this.MMt.EK(n,null==(s=this.OBt)?void 0:s.useManagedMediaSource)}));return e.some((t=>{var e;return null==(e=t.Let)?void 0:e.mkt}))&&(e=e.filter((t=>!t.Let||t.Let.mkt||0!==t.Ikt.length))),e.some((t=>{var e;return null==(e=t.Let)?void 0:e.wkt}))&&(e=e.filter((t=>!t.Let||t.Let.wkt||0!==t.Pkt.length))),e}CBt(t){return this.hbt.uRt?xv(t,(t=>async function(t,e){for(const i of t)if(!await e(i))return!1;return!0}([CX(t.Pkt),CX(t.Ikt),PX(t.zPt),PX(t.XPt)].filter(Ee),(t=>this.LMt(t))))):Promise.resolve([])}async LMt(t){if(0===t.MSt.wet.length)return!1;const e=t.MSt.wet[0];if(!e.Igt)return!1;const i=e.Igt,s=i.nmt?vr(i.nmt.Tn,i.nmt.U):void 0;try{return await this.Ert.Ytt(i.yE,s)}catch(t){return!1}}async skt(t,e){if(!this.HBt)throw new v("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.SMt(t))throw new v("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.kBt)return void vi.rD(xa,"Trying to set the already active variant stream, ignoring.");const i=this.ABt?bv(t.Pkt,(t=>lW(t,this.ABt))):void 0,s=this.yBt?bv(t.Ikt,(t=>lW(t,this.yBt))):void 0,n=this.NBt?bv(t.zPt,(t=>lW(t,this.NBt))):void 0;this.aMt(t),this.NMt=void 0,await this.JBt(i,s,n,e)}async fkt(t){if(!this.kBt)return void(this.wMt=t);const e=this.mMt(t);if(t&&!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.dkt!==e&&(vi.rD(xa,"Switching audio rendition"),await this.JBt(e,this.yBt,this.NBt,{hkt:!0}))}async vkt(t){if(!this.kBt)return void(this.pMt=t);const e=this.mMt(t);if(t&&!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this._kt!==e&&(vi.rD(xa,"Switching video rendition"),await this.JBt(this.ABt,e,this.NBt,{rkt:!0}))}async OMt(t){if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.MAt)return void(this.yMt=t);const e=this.mMt(t);if(!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");vi.rD(xa,"Switching subtitle rendition"),await this.JBt(this.ABt,this.yBt,e)}async FMt(t,e){if(this.PMt)return;const i=0===this.rt.U;t.Vm===ri.wl||t.Vm===ri.hk&&i?this.vMt&&this.vMt.length<=1?(t.Vm===ri.wl&&this.yBt!==t?await this.JBt(this.ABt,t,this.NBt):t.Vm===ri.hk&&i&&this.ABt!==t&&await this.JBt(t,this.yBt,this.NBt),await this.UMt(t,e)):await this.RMt():await this.UMt(t,e)}async ARt(t,e){try{await this.hbt.ARt(t,e)}catch(i){throw ta(i),(za(i)||yy(i))&&await this.FMt(t,e),i}}async UMt(t,e){if(!Qe(this.VMt,t)){this.VMt.push(t);try{const i=t.Vm===ri.aF||t.Vm===ri.kEt?1/0:this.Oot.maxRetries;await vt((()=>this.retryOfflineRenditionsCallback(t,e)),e,i,this.Oot.minimumBackoff,this.Oot.maximumBackoff)}catch(t){this.UH(new ke(X.MEDIA_LOAD_ERROR,t.message,t))}finally{Ko(this.VMt,t),t.MSt.ZIt===-1/0&&await this.BMt()}}}JBt(t,e,i,s){void 0===s&&(s={});const n={nkt:s.nkt||!1,hkt:s.hkt||!1,rkt:s.rkt||!1,$P:s.$P||!1,fMt:s.fMt||!1};return n.fMt||n.$P||this.ABt!==t||this.yBt!==e||this.NBt!==i?void 0===t&&void 0===e?Promise.reject(new v("Trying to buffer no media renditions.")):(this.ABt=t,this.yBt=e,this.NBt=i,this.uCt(),this.wo(new iX),this.U3.tf(),this.U3=new Mr,this.U3.lp(this.kF.ap),this.HMt.tf(),this.HMt=new Mr,this.HMt.lp(this.kF.ap),this.zBt=qe(this.WMt([this.zBt,this.V3].filter(Ee),t,e,i,n,this.HMt.ap),this.HMt).catch(this.XBt),this.zBt):Promise.resolve()}async qMt(t,e,i,s){var n,r;const h=[];if(h.push(this.zMt(e,s)),dW(t,e)||h.push(this.zMt(t,s)),null==(r=this.OBt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(h).then((()=>this.zMt(i,s)));const o=this.zMt(i,s);return Promise.all([...h,o])}async zMt(t,e){if(t)try{await this.hbt.ARt(t,e)}catch(i){ta(i),(za(i)||yy(i))&&await this.XMt(t,e)}}async XMt(t,e){if(this.PMt)return;const i=0===this.rt.U;if(t.Vm===ri.wl||t.Vm===ri.hk&&i)if(this.vMt&&this.vMt.length<=1)await this.UMt(t,e);else{const t=await this.oMt();this.aMt(t);const e=this.uMt(t.Pkt),i=this.cMt(t.Ikt),s=this.lMt(t.zPt);await this.JBt(e,i,s)}else await this.UMt(t,e)}async WMt(t,e,i,s,n,r){var h;if(!this.HBt)return void await this.qMt(e,i,s,r);await Promise.all(t.map((t=>t.catch(De)))),this.GMt(),await this.QMt(r),await this.KMt();const o=[];n.hkt&&this.iH&&this.iH.N$&&o.push(this.iH.N$.sc(0,1/0)),n.rkt&&this.iH&&this.iH.B$&&o.push(this.iH.B$.sc(0,1/0)),await Promise.all(o),Bv(r);const a=await this.jMt(e,i,n.$P,r);this.YMt(e,i,n.nkt||a),this.ZMt(s,n.nkt),Bv(r);const u=[i,dW(e,i)?void 0:e,s].filter(Ee);try{await Promise.all(u.filter((t=>!t.MSt.zIt)).map((t=>{var e;return null==(e=this.hbt)?void 0:e.bRt(t,r)})))}catch(t){ta(t)}if(Bv(r),this.V$(),this.uCt(),void 0!==this.FBt)this.qBt(this.FBt,this.UBt);else if(!this.ebt&&(null==(h=this.kBt)?void 0:h.MSt.Tn)){const t=this.kBt.MSt,e=t.Tn;let i=e.pPt;if(e.pPt<0){const e=t.NIt;i+=e.Pn(e.U-1)}this.qBt(i,{MBt:!e.yPt})}else!this.ebt&&u.every((t=>!t.MSt.DPt))?this.qBt(1/0,{MBt:!0}):this.BBt.length>0&&this.JMt()}async jMt(t,e,i,s){var n,r;const h=void 0!==t&&t!==e,o=void 0!==e,a=await this.$Mt(t,e,this.kBt);if(Bv(s),!i&&this.iH&&!a)return!1;const u=void 0!==(null==(n=this.iH)?void 0:n.N$),c=void 0!==(null==(r=this.iH)?void 0:r.B$);if(!i&&!(h!==u||o!==c)&&a&&this.iH&&this.iH.nK(a))return await this.QMt(s),await this.iH.hK(a),!0;for(const t of this.BBt)t.WNt.forEach((t=>t.tf()));this.rM.J4();try{this.iH&&await this.rM.sr(),this.iH=await this.tLt(a,h,o)}finally{this.rM.t6()}return!0}async $Mt(t,e,i){var s,n;const r=i.Let,h=[];if(void 0!==t){var o,a;const e=null!=(a=null==(o=t.Let)?void 0:o.wkt)?a:null==r?void 0:r.wkt;if(!e)return;{const t='audio/mp4; codecs="'+e+'"';vi.rD(xa,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==e){var u,c;const t=null!=(c=null==(u=e.Let)?void 0:u.mkt)?c:null==r?void 0:r.mkt;if(!t)return;{const e='video/mp4; codecs="'+t+'"';vi.rD(xa,"Configuring MediaSource for initial video rendition with codec: "+e+"."),h.push(e)}}if(0===h.length)return void vi.Skt(xa,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==e||null==(s=e.MSt.wet[0])?void 0:s.bPt)?l:[];var f;const _=null!=(f=null==t||null==(n=t.MSt.wet[0])?void 0:n.bPt)?f:[],v=this.hbt.Mr,g=await tq(this.OBt.contentProtection,h,v.WCt.concat(_).concat(d),this.TF,this.OBt.useCredentials);return{Vm:A.CF,q$:h.map((t=>({yS:t}))),oH:g,e0:this.OBt.useManagedMediaSource}}async tLt(t,e,i){let s;return s=t?await this.rM.On(t):new hX(this.rM,e,i),this.iH=s,this.V$(),this.qyt(),this.zyt(),s}V$(){const t=this.iH;if(t&&j(t.ct)){var e,i,s;const n=null!=(s=null==(e=this.ABt)?void 0:e.MSt.ct)?s:null==(i=this.yBt)?void 0:i.MSt.ct;void 0!==n&&n>0&&t.F$(n)}this.uCt()}qyt(){const t=this.iH;t&&(t.B$&&(t.B$.vG=this.yW.kG),t.N$&&(t.N$.vG=this.yW.kG))}zyt(){const t=this.iH;t&&(t.B$&&(t.B$.pG=this.yW.pG),t.N$&&(t.N$.pG=this.yW.pG))}YMt(t,e,i){if(!this.iH)throw new v("Invalid state");this.iH.N$?this.M$&&this.M$.gBt(this.iH.N$)||(this.M$=new Pr(Be.hk,this.iH.N$,this.QBt?this.Kft:void 0,this.KBt?this.wBt:void 0)):this.M$=void 0,this.iH.B$?this.L$&&this.L$.gBt(this.iH.B$)||(this.L$=new Pr(Be.wl,this.iH.B$,this.QBt?this.Kft:void 0,this.KBt?this.wBt:void 0)):this.L$=void 0;const s=dW(t,e);if(this.L$&&e){const t=s&&this.M$?[this.L$,this.M$]:[this.L$];this.TBt?this.TBt.ZSt!==e&&(i&&(this.TBt.tf(),this.TBt.QNt.By()),this.TBt.Zxt(e)):(this.TBt=function(t,e,i,s,n,r,h,o,a,u){const c=s.Mr.aB,l=new Vz(c),d=new Oz(Be.wl,t,s,l,n,r,h,u),f=e.map((t=>t.Vm)),_=o.gyt(l,s.Mr.aB,f),v=new tX(d,l,_,a);return v.GNt(e),v}(e,t,this.rM,this.hbt,this.TF,this.Ert,this.cxt,this.iMt,this.yW,this.OBt.useCredentials),this.TBt.zNt.wn(Lz.Qxt,this.eLt),this.TBt.zNt.wn(Lz.Kxt,this.iLt),this.TBt.XNt.wn(Hs.vNt,this.sLt),this.TBt.XNt.wn(Hs.wNt,this.nLt),this.TBt.XNt.wn(Hs.mNt,this.rLt),this.TBt.XNt.wn(Hs.gNt,this.hLt)),this.TBt.GNt(t)}else{var n;null==(n=this.TBt)||n.Wu(),this.TBt=void 0}var r;this.M$&&t&&!s?(this.ZBt?this.ZBt.ZSt!==t&&(i&&(this.ZBt.tf(),this.ZBt.QNt.By()),this.ZBt.Zxt(t)):(this.ZBt=function(t,e,i,s,n,r,h,o,a,u){const c=s.Mr.aB,l=new Vz(c),d=new Oz(Be.hk,t,s,l,n,r,h,u),f=o.gyt(l,s.Mr.aB,[e.Vm]),_=new tX(d,l,f,a);return _.GNt([e]),_}(t,this.M$,this.rM,this.hbt,this.TF,this.Ert,this.cxt,this.iMt,this.yW,this.OBt.useCredentials),this.ZBt.zNt.wn(Lz.Kxt,this.iLt),this.ZBt.XNt.wn(Hs.vNt,this.sLt),this.ZBt.XNt.wn(Hs.gNt,this.hLt)),this.ZBt.GNt([this.M$])):(null==(r=this.ZBt)||r.Wu(),this.ZBt=void 0);this.oLt()}ZMt(t,e){if(this.TMt){this.TMt.zNt.ZSt===t?e&&(this.TMt.tf(),this.TMt.QNt.By()):(this.TMt.Wu(),this.TMt=void 0)}if(!this.TMt&&t){const e=this.bMt.get(t.KI);e.Tk=Aa.Yn,this.TMt=function(t,e,i,s,n,r,h){const o=i.Mr.aB,a=new qz(e,o),u=new Vz(o),c=new Oz(Be.lS,t,i,u,s,n,r,h),l=new Zz(u,o,Be.lS),d=new tX(c,u,l);return d.KNt(a),d}(t,e,this.hbt,this.TF,this.Ert,this.cxt,this.OBt.useCredentials)}}oLt(){const t=[this.M$,this.L$].filter(Ee).map((t=>t.Vm));this.hbt.Mr.aB.VCt(t)}async H3(t,e,i,s){let n;if(await Promise.all(t.map((t=>t.catch(De)))),Bv(s),await this.KMt(),Bv(s),this.FBt=void 0,this.VBt=void 0,this.ebt=!0,i.yPt){n=EX([this.ABt,this.yBt].filter(Ee))}else n=this.kAt;const r=n.gB(e),h=this.rM.Tp(Uv.If,s);this.rM.jc(r,i.MBt),this.HBt&&this.BBt.length>0&&(this.hbt.Mr.aB.HCt(),this.aLt(this.rM.Yu),this.JMt()),await h,this.ibt()}ibt(){const t=this.dM;if(this.Oc||this.Uc||void 0===t)return;const e=this.Yu;var i,s;t+this.Yu-this.qP.aT.maximumOffset<e?null==(i=this.KV)||i.Tn():null==(s=this.KV)||s.Al()}aLt(t){for(const e of this.BBt)e.lDt(t)||(e.$Nt(),e.QNt.nNt()),e.ZNt(t)||(e.tBt(),e.QNt.rNt())}GMt(){for(const t of this.BBt)t.tf()}KMt(){return Promise.all([this.uLt(),this.cLt(),this.lLt()])}JMt(){this.dLt(),this.fLt(),this._Lt()}async BMt(){this.HBt&&this.BBt.length>0&&(this.BBt.forEach((t=>t.$Nt())),await this.uLt(),this.dLt(),this.BBt.forEach((t=>t.zNt.mDt())))}dLt(){if(this.vLt)return;const t=()=>{this.vLt=void 0};this.gLt=new Mr,this.gLt.lp(this.kF.ap),this.vLt=qe(this.wLt(this.gLt.ap),this.gLt).catch(this.XBt).then(t,t)}async uLt(){var t;null==(t=this.gLt)||t.tf();const e=this.vLt;this.vLt=void 0,e&&await e}async wLt(t){Bv(t);const e=this.BBt;for(;;){const i={stack:[],error:void 0,hasError:!1};try{const s=[],n=this.rM.Yu;for(const t of e){const e=t.zNt,i=t.Iot(n);if(e.KRt)s.push(e.ZRt());else if(t.JNt(n,i,this.yW.kG)){const n=e.dDt(i);if(void 0===n){if(e.ZSt.MSt.DPt)continue;const t=e.ZSt.MSt.wet;t.length&&t[0].YM>i&&(this.Yu=1/0),e.ADt(),e.vDt(i)}else{const[i,s]=n;e.Wnt(i,s,t.ORt),t.XNt.INt(i,s)}s.push(e.ZRt())}}const r=oe(i,Mr.fp([t]),!1);if(0===s.length){e.every((t=>t.zNt.cDt))||s.push(this.rM.Tp(Uv.Xu,r.ap));for(const t of e)s.push(t.XNt.Tp(Hs.gNt,r.ap))}await Dc(Promise.race(s),r.ap)}catch(t){i.error=t,i.hasError=!0}finally{se(i)}}}fLt(){if(this.mLt)return;const t=()=>{this.mLt=void 0};this.pLt=new Mr,this.pLt.lp(this.kF.ap),this.mLt=qe(this.yLt(this.pLt.ap),this.pLt).catch(this.XBt).then(t,t)}async cLt(){var t;null==(t=this.pLt)||t.tf();const e=this.mLt;this.mLt=void 0,e&&await e}async yLt(t){Bv(t);const e=this.BBt;for(;;){const i=[];for(const t of e){const e=t.zNt,s=t.XNt;if(s.KRt)i.push(s.ZRt());else{const t=e.nDt();t?"Srt"===t.Vm?(s.DNt(t),i.push(s.ZRt())):"PPt"===t.Vm&&(s.CNt(t),i.push(s.ZRt())):i.push(e.pDt())}}if(0===i.length)break;await Dc(Promise.race(i),t)}}_Lt(){if(this.ALt)return;this.bLt=new Mr,this.bLt.lp(this.kF.ap);const t=()=>{this.ALt=void 0};this.ALt=qe(this.TLt(this.bLt.ap),this.bLt).catch(this.XBt).then(t,t)}async lLt(){var t;null==(t=this.bLt)||t.tf();const e=this.ALt;this.ALt=void 0,e&&await e}async TLt(t){for(;;){const e=this.BBt;e.forEach((t=>t.Vnt()));const i=this.rM.Yu,s=[],n=[];for(const t of e){const e=t.XNt;for(const r of t.WNt){const t=r.zRt?s:n;if(r.KRt)t.push(r.ZRt());else if(!r.JRt(i)){const i=e.FNt(r.Vm);i?"Srt"===i.Vm&&i.RPt===this.xBt?(r.Dot(i),t.push(r.ZRt())):"VNt"===i.Vm&&i.RPt===this.xBt&&(r.hJ(i),t.push(r.ZRt())):n.push(e.UNt(r.Vm))}}}if(0===s.length){if(await this.SLt(e,i,t))continue}if(0===s.length&&0===n.length){e.every((t=>t.WNt.length>0&&t.WNt.every((t=>t.JRt(i)))))&&this.iH.WJ();break}await Dc(Promise.race([...s,...n]),t)}}async SLt(t,e,i){const s=[],n=[];for(const i of t){const t=i.Iot(e);for(const r of i.WNt){if(!r.zRt)continue;const h=i.XNt.FNt(r.Vm);if(void 0!==h){if(h.RPt===this.xBt)return!1;s.push(h)}else{if(i.KRt||i.JNt(e,t,this.yW.kG)||!r.$Rt(e,t))return!1;{const t=r.XRt.ORt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=Iv(s,(t=>t.RPt)).RPt;if(s.every((t=>"VNt"===t.Vm&&t.RPt===r))){const t=kh(s,(t=>t.YM)).YM,e=[...s,...n],r=await this.kLt(e);this.ELt(r)?(vi.Tkt(yr,"Seamless switch from",this.iH.aT,"to",r),await this.iH.hK(r),vi.Tkt(yr,"Seamless switch complete.")):await this.PLt(t,r,i),this.xBt=s[0].RPt}else for(const e of t)for(const t of e.WNt){let i=e.XNt.FNt(t.Vm);for(;void 0!==i&&("VNt"!==i.Vm||i.RPt!==r);)vi.Tkt(yr,"Removing append for other discontinuity, expecting "+r,i),e.XNt.ext(i),i=e.XNt.FNt(t.Vm)}return!0}ELt(t){return this.$Bt===rr.gM||this.$Bt!==rr.wM&&this.iH.nK(t)}async kLt(t){const e=t.map((t=>t.HNt.Let)),i=e.map((t=>({yS:t}))),s=fn(t,(t=>t.HNt.bPt));s.push(...this.hbt.Mr.WCt);let n=await tq(this.OBt.contentProtection,e,s,this.TF,this.OBt.useCredentials);return 0===n.length&&this.iH&&this.iH.aT.oH.length>0&&(n=this.iH.aT.oH),{Vm:A.CF,q$:i,oH:n,e0:this.OBt.useManagedMediaSource}}async PLt(t,e,i){var s;const n=this.iH,r=n.ct,h=this.Sl.length>0&&this.Yu<t;if(h)try{for(vi.Tkt(yr,"Marking end of stream and waiting for ended to switch discontinuity."),n.WJ();!this.rM.$c&&this.rM.Yu<t;)await this.rM.Tp([Uv.Xu,Uv.Df],i)}catch(t){throw n.NJ(),n.F$(r),t}vi.Tkt(yr,"Perform hard switch from",null==(s=this.iH)?void 0:s.aT,"to",e);try{this.rM.J4(),this.Yu<t&&this.rM.jc(t,!0,!0),this.L$=void 0,this.M$=void 0,this.oLt(),await this.rM.sr(),this.iH=await this.rM.On(e),this.V$(),this.qyt(),this.zyt(),this.iH.B$&&(this.L$=new Pr(Be.wl,this.iH.B$,this.QBt?this.Kft:void 0,this.KBt?this.wBt:void 0),this.L$.jJ(t-1,t)),this.iH.N$&&(this.M$=new Pr(Be.hk,this.iH.N$,this.QBt?this.Kft:void 0,this.KBt?this.wBt:void 0),this.M$.jJ(t-1,t)),this.oLt()}finally{h&&Ov(this.rM.bl()),this.rM.t6()}if(this.TBt){const t=void 0!==this.M$&&void 0===this.ZBt?[this.L$,this.M$]:[this.L$];this.TBt.GNt(t)}this.ZBt&&this.ZBt.GNt([this.M$]),vi.Tkt(yr,"Hard switch complete.")}QMt(t){return Dc(Xu(fn(this.BBt,(t=>t.WNt.map((t=>t.ZRt()))))),t)}KAt(){const t=this.UP,e=this.LP;this.tTt===t&&this.eTt===e||(this.tTt=t,this.eTt=e,this.wo(new tu))}async bn(){vi.rD(xa,"Unloading the player."),this.ILt(),this.Lbt(),await this.sr(),this.rM.TH=void 0,this.EMt.bn(),await this.gH.bn(),await this.Kft.bn(),await this.wBt.bn(),this.TM.bn(),this.kM.bn(),this.Au.bn(),this.ff.bn(),this.nTt.Wu(),this.cxt.Wu(),this.iMt&&(this.iMt.Wu(),this.iMt=void 0)}async sr(){vi.rD(xa,"Resetting the player."),this.pn(ks.NSt,this.handleBufferingErrorEvent),this.xBt=-1,this.kF.tf(),this.U3.tf(),this.U3=new Mr,this.U3.lp(this.kF.ap),this.HMt.tf(),this.HMt=new Mr,this.HMt.lp(this.kF.ap);const t=[this.o_t,this.V3,this.zBt].filter(Ee);await Promise.all(t.map((t=>t.catch(De)))),this.o_t=void 0,this.V3=void 0,this.zBt=void 0,this.ABt=void 0,this.yBt=void 0,this.NBt=void 0,this.vMt=void 0,this.wMt=void 0,this.pMt=void 0,this.yMt=void 0,this.wMt=void 0,this.pMt=void 0,this.yMt=void 0,this.KV=void 0,this.AW.sr(),this.VMt=[],this.aMt(void 0),this.GMt(),await this.KMt(),this.ZBt&&(this.ZBt.Wu(),this.ZBt=void 0),this.TBt&&(this.TBt.Wu(),this.TBt=void 0),this.TMt&&(this.TMt.Wu(),this.TMt=void 0),this.M$=void 0,this.L$=void 0,this.iH=void 0,this.hbt&&(this.hbt.Wu(),this.hbt=void 0),this.eMt&&(this.Au.WV(this.eMt.nt),this.eMt=void 0),await this.gH.sr(),await this.Kft.sr(),await this.wBt.sr(),this.rM.pH(),await this.rM.sr(),this.OBt=void 0,this.HBt=!1,this.H$=r.Ol(),this.FBt=void 0,this.$bt=void 0,this.tTt=0,this.eTt=0,this.VBt=void 0,this.ebt=!1,this.P3=!1,Gn.Kg(this.WBt),this.MAt=!1,this.CLt=!1,this.PAt=0,this.$Bt=rr.vM,this.ff.sr(),this.RLt(),this.wo(new zb(this.Yu,this.Vc))}RLt(){for(const t of this.TM.RI)t.bn();for(const t of this.kM.RI)t.bn();for(const t of this.Au.RI)t.bn();this.TM.sr(),this.kM.sr(),this.Au.sr(),this.bMt.clear()}xLt(){this.ff.wn(yX,this.Os),this.ff.wn(cb.nd,this.qf),this.ff.wn(cb.rd,this.DLt),this.ff.wn(cb.kl,this.NLt),this.yW.wn("_G",this.oTt),this.yW.wn("mG",this.aTt),this.rM.wn(AX,this.Os),this.rM.wn(Yo.la,this.uTt),this.rM.wn(Uv.Ip,this.handleContentProtectionErrorEvent),this.rM.wn(Uv.Vf,this.BLt),this.rM.wn(Uv.Df,this.Ch),this.rM.wn(Uv.Ff,this.Bf),this.rM.wn(Uv.no,this.Nf),this.rM.wn(Uv.zf,this.MLt),this.rM.wn(cb.Lf,this.GF),this.rM.wn(Uv.Xu,this.K1),this.rM.wn(Uv.$f,this.Xe),this.rM.wn(Uv.If,this.Ef),this.rM.wn(Uv.Qp,this.LLt),this.rM.wn(Uv.Bl,this.OLt)}ILt(){this.ff.pn(yX,this.Os),this.ff.pn(cb.nd,this.qf),this.ff.pn(cb.rd,this.DLt),this.ff.pn(cb.kl,this.NLt),this.yW.pn("_G",this.oTt),this.yW.pn("mG",this.aTt),this.rM.pn(AX,this.Os),this.rM.pn(Yo.la,this.uTt),this.rM.pn(Uv.Ip,this.handleContentProtectionErrorEvent),this.rM.pn(Uv.Vf,this.BLt),this.rM.pn(Uv.Df,this.Ch),this.rM.pn(Uv.Ff,this.Bf),this.rM.pn(Uv.no,this.Nf),this.rM.pn(Uv.zf,this.MLt),this.rM.pn(cb.Lf,this.GF),this.rM.pn(Uv.Xu,this.K1),this.rM.pn(Uv.$f,this.Xe),this.rM.pn(Uv.If,this.Ef),this.rM.pn(Uv.Qp,this.LLt),this.rM.pn(Uv.Bl,this.OLt)}constructor(t,e,i,s,n,h,o,a){super(),this.yW=i,this.AW=s,this.cxt=n,this.sMt=h,this.bMt=C(),this.KBt=!0,this.QBt=!0,this.HBt=!1,this.OBt=void 0,this.iH=void 0,this.o_t=void 0,this.kF=new Mr,this.hbt=void 0,this.wMt=void 0,this.pMt=void 0,this.yMt=void 0,this.kBt=void 0,this.ABt=void 0,this.yBt=void 0,this.NBt=void 0,this.vMt=void 0,this.VMt=[],this.M$=void 0,this.L$=void 0,this.ZBt=void 0,this.TBt=void 0,this.TMt=void 0,this.iMt=void 0,this.HMt=new Mr,this.zBt=void 0,this.U3=new Mr,this.V3=void 0,this.xBt=-1,this.gLt=void 0,this.pLt=void 0,this.bLt=void 0,this.vLt=void 0,this.mLt=void 0,this.ALt=void 0,this.kpt=!0,this.IMt=0,this.PMt=!1,this.eH=Ds.sW,this.$V=void 0,this.Wl=void 0,this.H$=r.Ol(),this.FLt=[],this.FBt=void 0,this.UBt=void 0,this.ebt=!1,this.P3=!1,this.$bt=void 0,this.tTt=0,this.eTt=0,this.VBt=void 0,this.WBt=0,this.MAt=!1,this.CLt=!1,this.$Bt=rr.vM,this.NMt=void 0,this.ULt=void 0,this.PAt=0,this.handleContentProtectionErrorEvent=t=>{this.$V=Bc(t.errorObject),this.Wl=t.errorObject,this.Os(t)},this.handleBufferingErrorEvent=t=>{this.UH(new ke(X.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.uTt=t=>{this.UH(Ia(t.lt))},this.BLt=()=>{this.uCt();const t=this.ct;t!==this.$bt&&(this.$bt=t,this.wo(new de(this.$bt)))},this.Ch=()=>{this.$c&&this.wo(new Zu(this.Yu))},this.Bf=()=>{this.wo(new ac(this.Yu))},this.Nf=()=>{this.eAt(),this.wo(new ah(this.Yu))},this.qf=()=>{void 0!==this.ULt&&(Gn.Kg(this.ULt),this.ULt=void 0),this.wo(new $n(this.Yu))},this.MLt=()=>{this.wo(new xu(this.Yu))},this.GF=()=>{this.wo(new xr(this.Yu,this.Vc))},this.K1=()=>{const t=this.ekt;Pv(this.FLt,t)||(this.wo(new gz),this.FLt=t),this.wo(new Ph(this.Yu,this.Ku))},this.eLt=Zi((t=>{t.yk===Be.wl&&this.bBt()&&Ov(this.SBt())}),200),this.iLt=t=>{var e;this.PAt+=t.Yxt;const i=this.rt.U>0?t.yk===Be.wl:t.yk===Be.hk;"Srt"===t.jxt&&i&&Ov(this.RMt()),this.wo(new _L(function(t){if(t){if(void 0!==t.nmt){var e,i;const s=t.nmt.Tn+(null!=(i=t.nmt.U)?i:0);return{qS:t.yE,Knt:[null==(e=t.nmt)?void 0:e.Tn,s],Ak:!0}}return{qS:t.yE.toString()||"",Ak:!0}}return{qS:"",Ak:!0}}(t.uri),(null==(e=this.JSt)?void 0:e.PV)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.yk,t.httpStatusCode,t.Yxt))},this.Xe=()=>{this.wo(new lc(this.Yu))},this.Ef=()=>{this.wo(new qo(this.Yu))},this.LLt=()=>{this.KAt()},this.OLt=()=>{this.wo(new Wo(this.Yu,this.Pl))},this.DLt=()=>{this.rM.Uc?this.wo(new zt(this.Yu)):(null!=this.ULt||(this.ULt=Gn.jg((()=>{this.CLt&&(this.NMt=void 0,Ov(this.PBt()))}),2500)),this.eAt(),this.wo(new zt(this.Yu)))},this.NLt=()=>{this.CLt=!0,this.wo(new Tt(this.Yu,this.Vc))},this.XBt=t=>{Eh(t)||za(t)||yy(t)||(this.GMt(),Ov(this.KMt()),this.wo(new MW(t)))},this.LRt=()=>{this.uCt()},this.tMt=t=>{Ov(this.FMt(t.ZSt,this.kF.ap))},this.X_t=t=>{if(Eh(t))return;const e=t instanceof ke?t:new ke(X.MEDIA_DECODE_ERROR,t.message,t);this.UH(e)},this.onTextTrackChange=t=>{if(!this.kBt)return;const e=t.Ht,i=this.AMt(e);i&&(e.Tk===Aa.JI||e.Tk===Aa.Yn?(Ov(this.OMt(i)),this.bMt.forEach((t=>{t!==e&&(t.Tk=Aa.Th)}))):this.NBt&&this.NBt===i&&Ov(this.JBt(this.ABt,this.yBt,void 0)))},this.retryOfflineRenditionsCallback=async(t,e)=>{this.DBt!==t&&this.dkt!==t&&this._kt!==t||(await this.hbt.ARt(t,e),t.MSt.ZIt=-1/0)},this.oTt=()=>{this.qyt()},this.aTt=()=>{this.zyt()},this.sLt=t=>{const e=this.kBt,i=null==e?void 0:e.WPt;if(this.hbt.NRt(t.Let,t.ZSt.MSt),!i&&(this.hbt.BRt(t.Let,t.ZSt.MSt),this.hMt.xkt(),e)){const t=void 0!==this.ABt&&!Qe(e.Pkt,this.ABt),i=void 0!==this.yBt&&!Qe(e.Ikt,this.yBt);(t||i)&&this.JBt(t?void 0:this.ABt,i?void 0:this.yBt,this.NBt).catch(De)}},this.nLt=t=>{this.hMt.Bkt(t.ZSt,t.Qat)},this.rLt=t=>{this.hMt.Lkt(t.ZSt,t.pNt.SL())},this.hLt=t=>{this.hbt.xRt(t.ZSt)},this.Ert=new OH(o),this.rM=t,this.TF=e,this.hH=new BW(this.yW.rG),this.MMt=new LW(this.rM),this.xMt=new GW(this.yW),this.Oot=a.retryConfiguration,this.TM=new mn,this.kM=new mn,this.hMt=new kW(this,this.yW,this.TM,this.kM),this.EMt=new du,this.gH=new kn(this.rM,this.TF),this.Kft=new MH(this.rM),this.wBt=new pF(this.rM),this.Au=new je([this.EMt,this.gH.Z,this.Kft.Z,this.wBt.Z,this.rM.nt]),this.lH=new Xa(this.TF),this.rM.TH=this.lH,this.nTt=new kX(this,this.rM),this.ff=new Ir(this.nTt,!0),this.xLt()}},SX=class{async HH(t,e){return!!Ib(t.type)&&!t.useNativePlayback}async WH(t){return!!t.aes128||await $A(t,!0)}},kX=class extends _k{get Vc(){return this.sa.Vc}lTt(){this.wo(new xr(this.Yu,this.Vc))}constructor(t,e){super(e),this.sa=t}};function EX(t){return t.reduce(((t,e)=>t.Cn(e.MSt.NIt)),new r([0,1/0]))}function PX(t){const e=bv(t,(t=>t.LSt)),i=t.filter((t=>t.OSt)),s=Gn.Pm,n=i.map((t=>t.gs)).filter(Ee),r=aX(n,s);return r?bv(i,(t=>t.gs===r)):e}function IX(t,e){for(const i of e){const e=t.filter((t=>t.Let&&t.Let.wkt&&qc(t.Let.wkt,i)));if(0!==e.length)return e}}function CX(t){var e;return null!=(e=PX(t))?e:t[0]}function RX(t,e){return t.filter((t=>xX(t,e)))}function xX(t,e){const i=e+bX,s=0===t.Ikt.length||t.Ikt.some((t=>t.MSt.ZIt<Gn.Qg()-i)),n=0===t.Pkt.length||t.Pkt.some((t=>t.MSt.ZIt<Gn.Qg()-i));return s&&n}function DX(t,e){if(!e||e.MSt.DPt)return!1;const i=e.MSt.wet;return 0!==i.length&&i[0].YM>t}t(),t();var NX=class{async axt(t,e,i){try{const s=await crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},s,t);return new x(n)}catch(t){throw new ke(X.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Wu(){}static gT(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};t(),t(),t(),t();var BX=class extends o{constructor(t,e){super(t),this.data=e}},MX=["message","messageerror","error"];t();var zs=class extends o{constructor(t){super(Yo.la),this.error=t}},LX=class extends Re{get VLt(){return this.HLt.ap.$m}WLt(t,e){this.VLt||(void 0!==this.qLt?this.qLt.WLt(t,e):this.zLt.push({ly:t,XLt:e}))}GLt(){this.VLt||(this.HLt.tf(),us(this.zLt),void 0!==this.qLt&&this.qLt.GLt())}constructor(t){super(),this.qLt=void 0,this.zLt=[],this.QLt=t=>{if(this.VLt)t.GLt();else{this.qLt=t,this.qLt.wn(MX,this.Os);for(const e of this.zLt)t.WLt(e.ly,e.XLt);us(this.zLt)}},this.KLt=t=>{if(this.VLt)return;const e=t instanceof v?t:new v("Could not create Worker.");this.wo(new zs(e)),this.GLt()},this.HLt=new Mr,t(this.HLt.ap).then(this.QLt,this.KLt)}};t(),t();var OX=class extends Re{WLt(t,e){e?this.qLt.postMessage(t,e):this.qLt.postMessage(t)}GLt(){this.Bo(),this.qLt.removeEventListener("message",this.jLt),this.qLt.removeEventListener("messageerror",this.YLt),this.qLt.removeEventListener("error",this.q4),this.qLt.terminate()}constructor(t,e){super(),this.jLt=t=>{this.wo(new BX("message",t.data))},this.YLt=t=>{this.wo(new BX("messageerror",t.data))},this.q4=t=>{null==t.preventDefault||t.preventDefault.call(t);const e=t.error instanceof v?t.error:new v(t.message);this.wo(new zs(e)),this.GLt()},this.qLt=new dl(t,e),this.qLt.addEventListener("message",this.jLt),this.qLt.addEventListener("messageerror",this.YLt),this.qLt.addEventListener("error",this.q4)}};t();var FX=0,UX=class extends Re{WLt(t,e){e?this.ZLt.contentWindow.postMessage({type:"message",data:t},"*",e):this.ZLt.contentWindow.postMessage({type:"message",data:t},"*")}GLt(){var t;this.ZLt.removeEventListener("load",this.JLt),self.removeEventListener("message",this.$Lt),null==(t=this.ZLt.contentWindow)||t.postMessage({type:"terminate"},"*"),Es(this.ZLt)}constructor(t,e){super(),this.JLt=()=>{this.ZLt.removeEventListener("load",this.JLt),this.ZLt.contentWindow.postMessage({type:"initialize",id:this.Wb,script:this.tOt},"*")},this.$Lt=t=>{t.origin===this.eOt&&t.data.id===this.Wb&&("initialized"===t.data.type||("error"===t.data.type?(this.wo(new zs(new v(t.data.data.message))),this.GLt()):this.wo(new BX("message",t.data.data))))},this.Wb=FX++,this.tOt=t;const i=Gn.Ih("iframe.html",e);this.ZLt=function(t){const e=h.createElement("iframe");return e.width="0",e.height="0",e.style.display="none",e.role="",e.src=t,h.body.appendChild(e),e}(i.href),this.eOt=i.origin,this.ZLt.addEventListener("load",this.JLt),self.addEventListener("message",this.$Lt)}};function VX(t,e,i){const s=Gn.wm(t,e);return new LX((t=>async function(t,e,i,s){let n;try{return n=new OX(t,i),await WX(n,s),n}catch(t){null==n||n.GLt(),ta(t)}if(HX&&Ip){let e;try{const i=await Gn.td.FS({qS:t,vk:Na.GET,OS:Gs.lS,ap:s});e=await i.gS(s)}catch(t){ta(t)}if(e){let t;try{const r=Ip([e],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new OX(t,i),await WX(n,s),n}catch(t){null==n||n.GLt(),ta(t),HX=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new UX(t,e),await WX(n,s),n}catch(t){throw null==n||n.GLt(),t}}(s,e,i,t)))}var HX=!0;async function WX(t,e){const i=await t.Tp(["message","error"],e);if("error"===i.type)throw function(t){return new ke(X.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(i.error);if(!function(t){return Ml(t)&&"9.0.0"===t.iOt}(i.data))throw new ke(X.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (9.0.0).");return i}t();var qX=function(t){return t.sOt="axt",t.nOt="Bxt",t}({}),zX=function(t){return t.rOt="hOt",t.oOt="aOt",t}({}),XX=class{uOt(){const t=VX(this.cOt,this.lOt,{name:"THEOplayer decrypt worker"});return t.wn("message",this.dOt),t.wn("error",this.fOt),t}axt(t,e,i){const s=""+ ++this._Ot,n={vOt:qX.sOt,gOt:s,wOt:t,mOt:e,pOt:i},r=new ue;return this.yOt.set(s,r),null!=this.qLt||(this.qLt=this.uOt()),this.qLt.WLt(n),r.Pf}Wu(t){void 0===t&&(t=new ti),this.yOt.forEach((e=>e.My(t))),this.yOt.clear(),this.qLt&&(this.qLt.GLt(),this.qLt=void 0)}constructor(t){this.qLt=void 0,this._Ot=0,this.yOt=sa(),this.dOt=t=>{const e=t.data,i=e.AOt,s=this.yOt.get(i);if(s)if(this.yOt.delete(i),e.bOt===zX.rOt)s.Xf(e.TOt);else if(e.bOt===zX.oOt){const t=e.SOt,i=e.kOt?new v(e.kOt):void 0,n=new ke(X.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",i);s.My(n)}},this.fOt=t=>{const e=new ke(X.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Wu(e)},this.lOt=t;try{this.cOt=Gn.wm("theoplayer.d.js",t)}catch(t){throw new ke(X.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function GX(t){const e=bv(t.boxes,zC);if(!e)return;const i=bv(e.boxes,XC);return i?i.handlerType:void 0}function QX(t){const e=new Bm;return e.boxes.push(...t.boxes),e}function KX(t){const e=new im;return e.boxes.push(...t.boxes),e}t(),t(),t(),t();var jX=8;function YX(t,e){const i=function(t){const e=new $o;return e.boxes.push(...t.boxes),e}(t),s=JX(e);for(let t=0;t<i.boxes.length;t++){const n=i.boxes[t];if(n===e)i.boxes[t]=new xw(new x(e.getSize()-jX));else if(GC(n)){const e=n,r=su(e.boxes,(t=>t instanceof tm&&t.trackId===s));if(r>=0){const s=e.boxes[r],n=KX(e);n.boxes[r]=new xw(new x(s.getSize()-jX)),i.boxes[t]=n}}}return i}function ZX(t,e){const i=function(t){const e=new Gh;return e.boxes.push(...t.boxes),e}(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];if(jC(s)){const n=bv(s.boxes,YC);n&&n.trackId===e&&(i.boxes[t]=new xw(new x(s.getSize()-jX)))}}return i}function JX(t){return bv(t.boxes,qC).trackId}function $X(t,e,i,s){const n=bv(t.boxes,YC),r=i.AO(e).JL();let h=Yc.ZERO;for(const e of t.boxes){if(e instanceof _m){h=dd(e.baseMediaDecodeTime,r),e.baseMediaDecodeTime=e.baseMediaDecodeTime.subtract(h);break}if(e instanceof go){h=dd(Yc.fromNumber(e.baseMediaDecodeTime),r),e.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=bv(t.boxes,ZC);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const e=null!=s?s:n.defaultSampleDuration;for(const i of t)i.duration=e}t[0].duration+=h.toNumber(),o.samples=t}}t();var tG="Mp4Transmuxer",eG=class extends Kz{xNt(t,e){Bv(e);const i=t.ZSt,s=Dn(Nt(t.PPt.LS.LS));if(!s)throw new v("Mp4Transmuxer - Unable to parse "+i.Vm+" MP4 initializer.");this.uJ=s;const n=function(t){let e,i;for(const s of t.Z)e||(e=s.eZ),i||(i=s.tZ);if(e||i)return{wkt:e,mkt:i,WEt:void 0};return}(s);n&&this.BNt(i,n);const r=function(t){for(const e of t.Z)if(void 0!==e.iZ)return e.iZ;return}(s);void 0!==r&&this.MNt(i,r);const h=function(t){var e;const i=Vm(t),s=bv(i.boxes,HC),n=s.boxes.filter(WC),r=bv(n,(t=>GX(t)===Vw.AUDIO)),h=bv(n,(t=>GX(t)===Vw.VIDEO)),o={wkt:{Jx:r?JX(r):void 0},mkt:{Jx:h?JX(h):void 0}},a=null==(e=bv(s.boxes,GC))?void 0:e.boxes.filter(QC);var u,c;const l=a?{wkt:null!=(u=bv(a,(t=>t.trackId===o.wkt.Jx)))?u:void 0,mkt:null!=(c=bv(a,(t=>t.trackId===o.mkt.Jx)))?c:void 0}:void 0;var d,f;if(l&&(o.wkt.SN=null==(d=l.wkt)?void 0:d.defaultSampleDuration,o.mkt.SN=null==(f=l.mkt)?void 0:f.defaultSampleDuration),!r||!h)return{wkt:r?t:void 0,mkt:h?t:void 0,sF:o};const _=QX(i),v=QX(i),g=i.boxes.indexOf(s);_.boxes[g]=YX(s,h),v.boxes[g]=YX(s,r);const w=_.serialize().join(),m=v.serialize().join();return{wkt:w,mkt:m,sF:o}}(t.PPt.LS.LS);if(this.EOt=h.sF,h.mkt){const e=bv(s.Z,(t=>t.Jx===h.sF.mkt.Jx)),i={Vm:"VNt",LS:{Vm:lt.KQ,LS:h.mkt},cnt:Be.wl,RPt:t.RPt,HNt:{Let:'video/mp4; codecs="'+e.tZ+'"',bPt:t.bPt},YM:t.YM,ZSt:t.ZSt,nxt:t.PPt.nxt};this.$Dt(i)}if(h.wkt){const e=bv(s.Z,(t=>t.Jx===h.sF.wkt.Jx)),i={Vm:"VNt",LS:{Vm:lt.KQ,LS:h.wkt},cnt:Be.hk,RPt:t.RPt,HNt:{Let:'audio/mp4; codecs="'+e.eZ+'"',bPt:t.bPt},YM:t.YM,ZSt:t.ZSt,nxt:t.PPt.nxt};this.$Dt(i)}return Promise.resolve()}async NNt(t,e){Bv(e);const i=t.Srt.nxt;vi.rD(tG,"Transmuxing fMP4: "+wh(i.Igt));const s=t.Srt.LS,n=iG(s.LS,this.uJ),r=Cv(n.map((t=>t.K8)),VT);if(void 0!==r&&(i.j8=r,this.ONt(t.ZSt)),!this.XCt.pCt(t.RPt)){const s=_r.EO(i.YM);if(n.length>0){const e=Cv(n.map((t=>t.POt)),VT);for(const n of this.SNt)this.XCt.xCt(t.RPt,n,e,s,sG(i),!1);this.ONt(t.ZSt)}this.XCt.pCt(t.RPt)||await Dc(this.XCt.ACt(t.RPt),e)}const h=this.XCt.PCt(t.RPt),o=i.j8?this.XCt.ICt(i.j8,i).SL():i.YM,a=jz(i,o);var u;const c={lNt:a,dNt:Yz(i,a),YM:o,ct:null!=(u=i.ct)?u:0,QO:h.SL(),RPt:t.RPt,ZSt:t.ZSt,nxt:t.Srt.nxt},l=function(t,e){if(void 0===e.wkt.Jx)return{wkt:void 0,mkt:t};if(void 0===e.mkt.Jx)return{wkt:t,mkt:void 0};const i=Vm(t),s=QX(i),n=QX(i);for(let t=0;t<i.boxes.length;t++){const r=i.boxes[t];KC(r)&&(s.boxes[t]=ZX(r,e.mkt.Jx),n.boxes[t]=ZX(r,e.wkt.Jx))}const r=s.serialize().join(),h=n.serialize().join();return{wkt:r,mkt:h}}(s.LS,this.EOt);if(l.mkt){var d;const e=this.EOt.mkt.Jx,s=bv(this.uJ.Z,(t=>t.Jx===e)),h=bv(n,(t=>t.Jx===e)),o=this.IOt(l.mkt,s,h,null==(d=this.EOt)?void 0:d.mkt.SN,i);this.COt=s,this.LNt(t.ZSt,i,h.K8.ML(r));const a=yh({Vm:"Srt",LS:{Vm:lt.KQ,LS:o},cnt:Be.wl},c);this.$Dt(a)}if(l.wkt){const t=yh({Vm:"Srt",LS:{Vm:lt.KQ,LS:l.wkt},cnt:Be.hk},c);this.$Dt(t)}this.ROt=i,this.xOt=n}IOt(t,e,i,s,n){if(!sG(n))return t;if(!this.ROt||!this.COt||!this.xOt)return t;const r=this.COt.Jx,h=bv(this.xOt,(t=>t.Jx===r)),o=this.XCt.ICt(h.DOt,this.ROt),a=this.XCt.ICt(i.K8,n).ML(o).AO(e.Wx);if(a.CL(_r.WL))return t;if(a.kL(_r.EO(.5)))return t;const u=Yi(n)?n:n.nIt;return vi.Tkt(tG,"Stretching first video frame of segment #"+u.dPt+" to fill gap of "+a.SL()+"s"),function(t,e,i,s){const n=Vm(t),r=bv(n.boxes,KC);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof nn&&$X(t,e,i,s);const n=r.getSize();if(n!==t){const e=n-t;for(const t of r.boxes)t instanceof nn&&JC(t,e)}}return n.serialize().join()}(t,e.Wx,a,s)}constructor(...t){super(...t),this.uJ=void 0,this.EOt=void 0,this.ROt=void 0,this.xOt=void 0,this.COt=void 0}};function iG(t,e){const i=yc(Kh.Sx(Nt(t)),BA.SR);if(!i)throw new v("Mp4Transmuxer - Unable to parse segment or part.");return function(t,e){const i=[];for(const n of t.Z){if(!n.MN||0===n.BN.length||0===n.BN[0].HN.length)continue;const t=n.gx.Jx,r=bv(e.Z,(e=>e.Jx===t));let h=0,o=1/0,a=0;const u=n.gx.SN||0;for(const t of n.BN)for(const e of t.HN){const t=e.WN||0,i=h+t;var s;h+=null!=(s=e.ct)?s:u;const n=h+t;i<o&&(o=i),n>a&&(a=n)}const c=_r.UL(n.MN.MN,r.Wx);i.push({Jx:t,POt:c,K8:c.OM(_r.VL(o,r.Wx)),NOt:c.OM(_r.VL(h,r.Wx)),DOt:c.OM(_r.VL(a,r.Wx))})}return i}(i,e)}function sG(t){return Yi(t)?t.EPt:0===t.hIt&&t.nIt.EPt}var nG="MpegtsTransmuxer",rG=class extends eG{xNt(t,e){return super.xNt(t,e)}INt(t,e){if(super.INt(t,e),this.jk.BOt())return;var i;const s=null!=(i=null==e?void 0:e.Igt)?i:t.Igt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.yE)&&this.jk.MOt()}LOt(t){let e;return t.ZSt===this.OOt&&this.FOt.has(t.RPt)?e=this.FOt.get(t.RPt):(e=gX(t.Srt.LS.LS),this.OOt=t.ZSt,this.FOt.set(t.RPt,e)),e}async NNt(t,e){Bv(e);const i=this.LOt(t),s=t.Srt;if(i!==vX._Bt&&i!==vX.vBt)return super.NNt(t,e);if(s.nxt.bPt.some(oG))throw new ke(X.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.jk.MOt();let r;i===vX._Bt?(vi.rD(nG,"Transmuxing MPEG-TS: "+wh(s.nxt.Igt)),r=await n.UOt({data:s.LS.LS,metadata:this.VOt})):(vi.rD(nG,"Transmuxing raw audio: "+wh(s.nxt.Igt)),r=await n.HOt({data:s.LS.LS,metadata:this.VOt})),Bv(e),this.BNt(t.ZSt,{wkt:r.metadata.audio_codec,mkt:r.metadata.video_codec,WEt:void 0}),r.metadata.video_frame_rate&&this.MNt(t.ZSt,r.metadata.video_frame_rate);const h=aG(r.metadata.first_decode_timestamp),o=aG(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?aG(r.metadata.first_video_presentation_timestamp):void 0;if(s.nxt.j8=o,this.ONt(t.ZSt),void 0!==a&&this.LNt(t.ZSt,s.nxt,function(t,e){let i=t.ML(e);return i.xL(_r.WL)&&(i=i.OM(Lu())),i}(a,o)),!this.XCt.pCt(t.RPt)){const i=_r.EO(s.nxt.YM);for(const e of this.SNt)this.XCt.xCt(t.RPt,e,h,i,sG(s.nxt),!0);this.ONt(t.ZSt),this.XCt.pCt(t.RPt)||await Dc(this.XCt.ACt(t.RPt),e)}const u=this.XCt.RCt(h,s.nxt);this.VOt=r.metadata;const c=this.XCt.ICt(o,s.nxt).SL(),l=jz(s.nxt,c);var d;const f={lNt:l,dNt:Yz(s.nxt,l),YM:c,ct:null!=(d=s.nxt.ct)?d:0,QO:u.SL(),RPt:t.RPt,ZSt:t.ZSt,nxt:s.nxt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.SNt){const e=yh({Vm:"Srt",LS:void 0,cnt:t},f);this.$Dt(e)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.WOt||this.qOt!==t.RPt||!Rg(this.WOt,r.data.audio_init))){const e=this.XCt.ICt(s.nxt.j8,s.nxt).SL(),i={Vm:"VNt",LS:{Vm:lt.KQ,LS:r.data.audio_init},cnt:Be.hk,RPt:t.RPt,HNt:{Let:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',bPt:s.nxt.bPt},YM:e,ZSt:t.ZSt,nxt:s.nxt};this.WOt=r.data.audio_init,this.qOt=t.RPt,this.$Dt(i)}const e=yh({Vm:"Srt",LS:{Vm:lt.KQ,LS:r.data.audio_media},cnt:Be.hk},f);this.$Dt(e)}else if(t.Srt.nxt.iIt&&Qe(this.SNt,Be.hk)){const t=yh({Vm:"Srt",LS:void 0,cnt:Be.hk},f);this.$Dt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.zOt||this.XOt!==t.RPt||!Rg(this.zOt,r.data.video_init))){const e=this.XCt.ICt(s.nxt.j8,s.nxt).SL(),i={Vm:"VNt",LS:{Vm:lt.KQ,LS:r.data.video_init},cnt:Be.wl,RPt:t.RPt,HNt:{Let:'video/mp4; codecs="'+r.metadata.video_codec+'"',bPt:s.nxt.bPt},YM:e,ZSt:t.ZSt,nxt:s.nxt};this.zOt=r.data.video_init,this.XOt=t.RPt,this.GOt=Dn(Nt(r.data.video_init)),this.$Dt(i)}const e=this.GOt.Z[0],i=iG(r.data.video_media,this.GOt)[0],n=this.IOt(r.data.video_media,e,i,void 0,s.nxt);this.COt=e;const h=yh({Vm:"Srt",LS:{Vm:lt.KQ,LS:n},cnt:Be.wl},f);this.$Dt(h),_.push(i)}else if(t.Srt.nxt.iIt&&Qe(this.SNt,Be.wl)){const t=yh({Vm:"Srt",LS:void 0,cnt:Be.wl},f);this.$Dt(t)}this.ROt=s.nxt,this.xOt=_}tf(){this.WOt=void 0,this.zOt=void 0,this.qOt=-1,this.XOt=-1,super.tf()}constructor(t,e,i,s){super(e,i,s),this.VOt=void 0,this.WOt=void 0,this.zOt=void 0,this.GOt=void 0,this.qOt=-1,this.XOt=-1,this.OOt=void 0,this.FOt=C(),this.jk=t}},hG=class{gyt(t,e,i){return new rG(this,t,e,i)}};function oG(t){return t.vk===gn.CEt}function aG(t){return _r.UL(Yc.fromBits(t.low,t.high),t.base)}t(),t();var uG=function(t){return t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4",t}({}),cG=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=ds.Iv;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(yi("AGFzbQEAAAA="))}catch(t){return!1}}();return cG=()=>t,t};var lG=class{UOt(t){return this.QOt(uG.MPEGTS_TO_FMP4,t)}HOt(t){return this.QOt(uG.RAW_AUDIO_TO_FMP4,t)}uOt(){const t=VX(this.cOt,this.lOt,{name:"THEOplayer transmux worker"});return t.wn("message",this.dOt),t.wn("error",this.fOt),t}QOt(t,e){const i=++this._Ot,s={type:t,id:i,input:e},n=new ue;return this.yOt.set(i,n),this.qLt.WLt(s),n.Pf}Wu(t){void 0===t&&(t=new ti),this.yOt.forEach((e=>e.My(t))),this.yOt.clear(),this.qLt.GLt()}constructor(t){this._Ot=0,this.yOt=C(),this.dOt=t=>{const e=t.data;if(void 0!==e.requestId){const t=this.yOt.get(e.requestId);if(!t)return;this.yOt.delete(e.requestId),e.success?t.Xf(e.output):t.My(new ke(e.errorCode,e.error))}else e.success||this.Wu(new ke(e.errorCode,e.error))},this.fOt=t=>{const e=new ke(X.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Wu(e)},this.lOt=t;const e=cG()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.cOt=Gn.wm(e,t)}catch(t){throw new ke(X.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.qLt=this.uOt()}},dG=class extends hG{BOt(){return void 0!==this.qLt}MOt(){var t;return null!=(t=this.qLt)?t:this.qLt=new lG(this.KOt)}Wu(){this.qLt&&(this.qLt.Wu(),this.qLt=void 0)}constructor(t){super(),this.KOt=t,this.qLt=void 0}},fG=class{Z8(){return new dG(this.KOt)}constructor(t){this.KOt=t}},_G=class extends TX{QP(){return this.rM.QP()}get XP(){return this.rM.XP}set XP(t){this.rM.XP=t}async bn(){var t;await super.bn(),null==(t=this.fTt)||t.bn()}constructor(t,e,i,s,n,r,h,o){super(t,e,i,s,n,r,h,o),ds.fg&&(this.fTt=new UM(this))}},vG=class extends _G{async bn(){await super.bn(),await this.kH.SH(this.rM)}constructor(t,e,i,s,n,r,h,o){const a=new os(t);super(a.VH(Be.wl),e,i,s,n,r,h,o),this.kH=a}},gG=class extends SX{async HH(t,e){return!!pn(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(ds.uv||ds.Og))&&super.HH(t,e))}async WH(t){return!(t.clearkey&&!t.fairplay&&ds.fg)&&super.WH(t)}};WE(new class extends gG{kC(t,e,i,s,n,r,h){return new vG(e,i,n,r,function(t){return NX.gT()?new NX:new XX(t)}(s.libraryLocation),new fG(s.libraryLocation),new AM(gi.Gg.pet,gi.Gg.met,gi.Gg.wet,gi.Gg.Aet),s)}qH(){return!0}constructor(...t){super(...t),this.zH=hu.cC}}),vi.Rt=()=>{var t;return Boolean(null==(t=a)?void 0:t.THEOplayerDebugLogsEnabled)},t(),t(),t(),t();var wG=class{Ytt(t,e){return Promise.resolve(!1)}Jtt(t,e){return Promise.resolve(void 0)}Qtt(t){return Promise.resolve(void 0)}AQ(t){return Promise.resolve(void 0)}},mG=class extends Re{jOt(){var t;return null==(t=this.YOt)?void 0:t.MSt}Tn(){Ov(vt((()=>this.ZOt(this.LT.ap)),this.LT.ap))}async ZOt(t){await this.hbt.fRt(t),this.JOt&&(this.$Ot(this.JOt.Ti,this.JOt.Ci),this.JOt=void 0),this.c2=!0}tFt(t,e){this.c2?this.$Ot(t,e):this.JOt={Ti:t,Ci:e}}$Ot(t,e){const i=this.eFt(t,e),s=null==i?void 0:i.Ikt[0];s!==this.YOt&&(this.iFt(),void 0!==s&&(this.YOt=s,this.sFt=new Az(this.hbt,s),this.sFt.pxt()))}iFt(){this.YOt=void 0,this.sFt&&(this.sFt.Wu(),this.sFt=void 0)}eFt(t,e){const i=bv(this.hbt.Mr.Ekt,(i=>void 0!==i.Akt&&i.Akt.Ti===t&&i.Akt.Ci===e));return null!=i?i:this.hbt.Mr.Ekt[0]}bn(){this.Bo(),this.LT.tf(),this.LT.Wu(),this.iFt(),this.hbt.Wu()}constructor(t,e,i){super(),this.YOt=void 0,this.sFt=void 0,this.JOt=void 0,this.LT=new Mr,this.nFt=()=>{this.wo(new AV)},this.ZV=t,this.hbt=new cz(i,new wG,t.useCredentials,t.src,t.liveOffset),this.hbt.wn(Uv.Wp,this.Os),this.c2=!1}};t();var pG=class extends S{get ht(){return this.J2.ht}get Sl(){return this.J2.Sl}get Ku(){return this.J2.Ku}set Ku(t){this.J2.Ku=t}get bt(){return this.J2.bt}get Yu(){return this.J2.Yu}set Yu(t){this.J2.Yu=t}uP(t,e){this.Yu=t}get ct(){return this.J2.ct}get $c(){return this.J2.$c}get Rc(){return this.J2.Rc}get vP(){return this.J2.vP}get lt(){return this.J2.lt}get wP(){return this.J2.wP}get pP(){return this.J2.pP}get tc(){return this.J2.tc}set tc(t){this.J2.tc=t}get TP(){return this.J2.TP}get Oc(){return this.J2.Oc}get Hu(){return this.J2.Hu}set Hu(t){this.J2.Hu=t}get Tl(){return this.J2.Tl}get IP(){return this.J2.IP}set IP(t){this.J2.IP=t}get Vc(){return this.J2.Vc}get Cl(){return this.J2.Cl}get Uc(){return this.J2.Uc}get sH(){return this.J2.sH}get nt(){return this.J2.nt}get LP(){return this.J2.LP}get rt(){return this.J2.rt}get UP(){return this.J2.UP}get Pl(){return this.J2.Pl}set Pl(t){this.J2.Pl=t}get qP(){return this.J2.qP}get XP(){return this.J2.XP}set XP(t){this.J2.XP=t}get rH(){return this.J2.rH}get dM(){}jP(){return this.J2.jP()}GP(){return this.J2.GP()}xa(){return this.J2.xa()}iI(t){return this.J2.iI(t)}QP(){return this.J2.QP()}ke(){return this.J2.ke()}JP(){return this.J2.JP()}$P(){return this.J2.$P()}Ml(){return this.J2.Ml()}bl(){return this.J2.bl()}sr(){return this.J2.sr()}_a(t,e,i){return this.J2._a(t,e,i)}be(){return this.J2.be()}YP(){return this.J2.YP()}ZP(){return this.J2.ZP()}bn(){this.Bo();for(const t of QE)this.J2.pn(t,this.Os);return this.J2.bn()}constructor(t){super(),this.J2=t;for(const t of QE)this.J2.wn(t,this.Os)}},yG=class extends pG{async _a(t,e,i){await super._a(t,e,i),t.hlsDateRange&&this.Tgt(t,e)}Tgt(t,e){this.rFt=new mG(t,e,this.hFt),this.rFt.wn(Uv.Wp,this.handleManifestUpdate),this.rFt.Tn()}sr(){return this.MRt&&(this.nt.it(this.MRt),this.i4.it(this.MRt),this.MRt.bn(),this.MRt=void 0,this.oFt=!1),this.rFt&&(this.rFt.bn(),this.rFt=void 0),this.i4.sr(),super.sr()}bn(){return this.pn(Uv.Qp,this.LLt),this.rFt&&(this.rFt.bn(),this.rFt=void 0),this.i4.bn(),super.bn()}constructor(t,e,i){super(t),this.rFt=void 0,this.oFt=!1,this.MRt=void 0,this.handleManifestUpdate=()=>{const t=this.rFt.jOt();if(t){const e=this.sH;if(e){const i=e.getTime();let s=this.MRt;s||(s=new Uq,this.MRt=s),s.Zn(t.xPt,(t=>(t.getTime()-i)/1e3)),!this.oFt&&s.L.U>0&&(this.nt.tt(s),this.i4.tt(s),this.oFt=!0)}}},this.LLt=()=>{this.rFt&&this.rFt.tFt(this.UP,this.LP)},this.hFt=e,this.i4=new Co(this),this.wn(Uv.Qp,this.LLt)}};!function(t){$a.XH().GH(t)}((function(t,e,i){return new yG(t,e,i)})),t(),t(),t(),t();var Qs=class extends Pa{get name(){return"CastError"}constructor(t,e=""){super("An error occurred while casting."),this.errorCode=t,this.description=e}};async function AG(t){SG()||await async function(t){if(null==t?void 0:t.$m)return Promise.reject(new ti);const{Pf:e,Xf:i,My:s}=function(){let t,e;return{Pf:new Promise(((i,s)=>{t=i,e=s})),Xf:t,My:e}}(),n=a.__onGCastApiAvailable,r=()=>{a.__onGCastApiAvailable=n,s(new ti)};return a.__onGCastApiAvailable=(e,h)=>{e?i():s(new v(h)),null==t||t.tp(r),a.__onGCastApiAvailable=n,n&&n(e,h)},null==t||t.ep(r),e}(t),TG()||await Rt(100,t),TG()||(Gn.Yw('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await bG())}var bG=Ut((()=>function(t){return new Promise(((e,i)=>{const s=h.createElement("script");s.onload=()=>e(),s.onerror=t=>i((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new Qs("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function TG(){return Boolean("undefined"!=typeof cast&&cast.framework)}function SG(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function kG(t,e,i,s){if(Ee(e))for(const i of g.keys(e)){if("type"===i||"images"===i)continue;const s=e[i];Ee(s)&&(t[i]=s)}!function(t,e,i,s){if(!Ee(i)&&!Ee(null==e?void 0:e.images))return;t.images=[],i&&t.images.push(new s.Image(i));if(null==e?void 0:e.images)if(Sc(e.images))t.images.push(new s.Image(e.images));else if(di(e.images))for(const i of e.images){let e;var n,r;if(Sc(i))e=new s.Image(i);else e=new s.Image(i.src),e.height=null!=(n=i.height)?n:null,e.width=null!=(r=i.width)?r:null;t.images.push(e)}}(t,e,i,s)}function EG(t,e,i){return void 0===i&&(i=chrome),function(t,e,i){switch(null==t?void 0:t.type){case"movie":{const s=new i.MovieMediaMetadata;return kG(s,t,e,i),s}case"audio":{const s=new i.MusicTrackMediaMetadata;return kG(s,t,e,i),!Ee(s.artist)&&Ee(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new i.TvShowMediaMetadata;return kG(s,t,e,i),!Ee(s.title)&&Ee(t.episodeTitle)&&(s.title=t.episodeTitle),!Ee(s.season)&&Ee(t.seasonNumber)&&(s.season=t.seasonNumber),!Ee(s.episode)&&Ee(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new i.GenericMediaMetadata;return kG(s,t,e,i),s}}}(t,e,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(i))}function Ns(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function PG(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return bv(t.items,(e=>e.itemId===t.currentItemId))}t(),t(),t(),t(),t();var Vs="urn:x-cast:com.theoplayer.cast";t(),t();var IG=function(t){return t.aFt="theoplayer_receiver_info",t.uFt="theoplayer_trackpropertychange",t.cFt="theoplayer_propertychange",t}({});t();var CG=function(t){return t.SKIP_AD="SKIP_AD",t}({});t();function ae(t){h.createElement("img").src=t}t(),t(),t();var RG=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function xG(t){if(!Sc(t))return;const e=t.match(RG);return e?3600*k(e[1],10)+60*k(e[2],10)+Number(e[3])+(Number(e[4])||0)/1e3:void 0}function DG(t){if(void 0===t)return;const e=t.match(/^([1-9]?\d|100)%$/);return e?k(e[1])/100:void 0}function NG(t,e){return"vmap"===t.type||!Ee(t.type)&&!Ee(e)}function BG(t,e){return"vast"===t.type||!Ee(t.type)&&Ee(e)}t(),t(),t();var MG=class{},LG=class extends MG{get lFt(){return this.V7}dFt(){return null!=this.fFt||(this.fFt=fn(this.V7,(t=>t.dFt()))),this.fFt}constructor(t){super(),this.V7=t.sort(((t,e)=>t.RN-e.RN))}};t(),t();var OG=class extends MG{get o(){return this._Ft}get RN(){return this.vFt}get gFt(){return this.wFt}constructor(t,e){super(),this._Ft=t,this.vFt=e,this.wFt=!1}},FG=class extends OG{get mFt(){return this.pFt}get yFt(){return this.AFt}get bFt(){return this.TFt}get SFt(){return this.kFt}get lt(){return this.$V}dFt(){if(void 0===this.EFt){let t,e,i,s=[];for(const n of this.pFt)n.PFt&&(t=n.PFt),n.IFt&&(e=n.IFt),n.CFt&&(i=n.CFt),s=s.concat(n.universalAdIds);this.EFt={SFt:this.SFt,PFt:t,RFt:e,CFt:i,lt:this.lt,xFt:s}}return[this.EFt]}constructor(t,e,i,s,n,r,h){super(t,e),this.AFt=i,this.TFt=s,this.kFt=n,this.pFt=r,this.$V=h}};t(),t();var UG=class{get DFt(){return this.NFt}get BFt(){return this.MFt}constructor(t,e){this.NFt=t,this.MFt=e}},VG=class{get LFt(){return this.OFt}get FFt(){return this.UFt}get VFt(){return this.HFt}get WFt(){return this.qFt}get q7(){return this.zFt}set q7(t){this.zFt=t}get XFt(){return this.GFt}get QFt(){return this.KFt}jFt(){this.KFt=!0}get yFt(){return this.AFt}constructor(t,e,i,s,n,r){this.OFt=t,this.UFt=e,this.HFt=i,this.qFt=s,this.KFt=!1,this.GFt=n,this.AFt=r}};t();var HG=function(t){return t.YFt="all",t.ZFt="any",t.sW="none",t}({});var WG=class{get JFt(){return this.$Ft}get tUt(){return this.eUt}constructor(t,e){this.$Ft=t,this.eUt=e}},qG=class{get o(){return this.Wb}get Ti(){return this.dc}get Ci(){return this.mc}get iUt(){return this.sUt}get nUt(){return this.rUt}get hUt(){return this.oUt}get aUt(){return this.uUt}get cUt(){return this.lUt}get dUt(){return this.fUt}get _Ut(){return this.vUt}get LFt(){return this.OFt}get FFt(){return this.UFt}get VFt(){return this.HFt}get gUt(){return this.wUt}get BFt(){return this.mUt}get pUt(){return this.yUt}constructor(t,e,i,s,n,r,h,o,a,u,c,l,d,f,_,v){this.dc=t,this.mc=e,this.Wb=i,this.sUt=s,this.rUt=n,this.oUt=r,this.uUt=h,this.lUt=o,this.fUt=a,this.vUt=u,this.OFt=c,this.UFt=l,this.HFt=d,this.wUt=f,this.mUt=_,this.yUt=v}};t();var zG=class{get id(){return this.Wb}get uri(){return this.uIt}constructor(t,e){this.Wb=t,this.uIt=e}},fe=class{get AUt(){return this.bUt}get TUt(){return this.SUt}get kUt(){return this.EUt}get PUt(){return this.IUt}constructor(t,e,i,s){this.bUt=t,this.SUt=e,this.EUt=i,this.IUt=s}},XG=class extends OG{get SFt(){return this.kFt}get CUt(){return this.RUt}get xUt(){return this.DUt}get mFt(){return this.pFt}get NUt(){return this.BUt}get MUt(){return this.LUt}get lt(){return this.$V}dFt(){return void 0===this.RUt?[]:(null!=this.fFt||(this.fFt=this.RUt.dFt().map((t=>this.OUt(t)))),this.fFt)}OUt(t){let e,i,s;for(const t of this.mFt)t.PFt&&(e=t.PFt),t.IFt&&(i=t.IFt),t.CFt&&(s=t.CFt);const n=t.SFt.concat(this.SFt);let r=t.PFt;if(e&&t.PFt){const i=new fe(t.PFt.FUt.AUt,t.PFt.FUt.TUt,t.PFt.FUt.kUt.concat(e.FUt.kUt),t.PFt.FUt.PUt.concat(e.FUt.PUt));r=t.PFt,r.FUt=i,r.BFt=r.BFt.concat(e.BFt)}let h=t.RFt;if(i&&i.DFt){var o,a;const s=[];for(const t of i.DFt)s.concat(t.WFt.kUt);const n=[];var u,c;for(const i of null!=(u=null==(o=t.RFt)?void 0:o.DFt)?u:[]){var l,d,f;const r=new fe(i.WFt.AUt,i.WFt.TUt,i.WFt.kUt.concat(s),(null!=(d=null==(l=t.PFt)?void 0:l.FUt.PUt)?d:[]).concat(null!=(f=null==e?void 0:e.FUt.PUt)?f:[]));n.push(new VG(i.LFt,i.FFt,i.VFt,r,i.XFt,i.yFt))}h=new UG(n,(null!=(c=null==(a=t.RFt)?void 0:a.BFt)?c:[]).concat(i.BFt))}let _=t.CFt;if(_){var v;let e=_.JFt;var g,w;s&&s.JFt&&(e=s.JFt),_=new WG(e,(null!=(g=null==(v=t.CFt)?void 0:v.tUt)?g:[]).concat(null!=(w=null==s?void 0:s.tUt)?w:[]))}let m=t.lt;return this.lt&&(m=this.lt),{SFt:n,PFt:r,RFt:h,CFt:_,lt:m,xFt:t.xFt}}constructor(t,e,i,s,n,r,h,o,a){super(t,e),this.kFt=i,this.RUt=s,this.DUt=n,this.pFt=r,this.BUt=h,this.LUt=o,this.$V=a}};t();var GG=class{get o(){return this.Wb}get UUt(){return this.VUt}get HUt(){return this.WUt}get cUt(){return this.lUt}get PFt(){return this.qUt}get IFt(){return this.zUt}get CFt(){return this.XUt}get universalAdIds(){return this.GUt}constructor(t,e,i,s,n,r,h,o){this.Wb=t,this.VUt=e,this.WUt=i,this.lUt=s,this.qUt=n,this.zUt=r,this.XUt=h,this.GUt=o}};t();var QG=class{get ct(){return this.QUt}get KUt(){return this.jUt}get BFt(){return this.MFt}set BFt(t){this.MFt=t}set FUt(t){this.YUt=t}get FUt(){return this.YUt}get ZUt(){return this.JUt}set ZUt(t){this.JUt=t}get $Ut(){return this.KFt}get q7(){return this.zFt}set q7(t){this.zFt=t}get XFt(){return this.GFt}get yFt(){return this.AFt}jFt(){this.KFt=!0}get tVt(){return this.eVt}set tVt(t){this.eVt=t}get iVt(){return this.sVt}constructor(t,e,i,s,n,r,h,o){this.QUt=t,this.jUt=e,this.MFt=i,this.YUt=s,this.JUt=n,this.KFt=!1,this.GFt=r,this.AFt=h,this.sVt=o}};function Wt(t,e){return jG(t)&&t.getAttribute(e)||void 0}function kr(t,e){return KG(t,e,void 0,!1)}function KG(t,e,i,s){return e===(t.localName?t.localName:t.nodeName)&&(s&&i?i===t.namespaceURI:!i||!t.namespaceURI||i===t.namespaceURI)}function ma(t,e){const i=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);jG(n)&&kr(n,e)&&i.push(n)}return i}function jG(t){return t&&1===t.nodeType}function YG(t,e){const i=(new DOMParser).parseFromString(t,e);if(!i||i.getElementsByTagName("parsererror").length>0)throw new v('Invalid document for MIME type "'+e+'"');return i}function ZG(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function JG(t){return"data:application/xml,"+encodeURIComponent(t)}t(),t();var Pu=function(t){return t.nVt="mute",t.rVt="unmute",t.Ff="pause",t.hVt="resume",t.oVt="rewind",t.aVt="skip",t.uVt="playerExpand",t.cVt="playerCollapse",t.lVt="fullscreen",t.dVt="exitFullscreen",t.fVt="expand",t.COLLAPSE="collapse",t.syt="start",t._Vt="firstQuartile",t.vVt="thirdQuartile",t.gVt="midpoint",t.wVt="complete",t.mVt="acceptInvitationLinear",t.pVt="acceptInvitation",t.yVt="timeSpentViewing",t.AVt="otherAdInteraction",t.zf="progress",t.bVt="creativeView",t.TVt="adExpand",t.SVt="adCollapse",t.kVt="minimize",t.EVt="close",t.PVt="closeLinear",t.IVt="overlayViewDuration",t.CVt="breakStart",t.RVt="breakEnd",t.la="error",t}({});function $G(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}var tQ=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function eQ(t){return void 0!==t&&-1!==tQ.indexOf(t)}var iQ=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function sQ(t){return void 0!==t&&-1!==iQ.indexOf(t)}var nQ=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function rQ(t){return void 0!==t&&-1!==nQ.indexOf(t)}function hQ(t,e){if(void 0===t||""===t||void 0===e)return;let i=t.match(/^(\d+):(\d+):(\d+)$/);return i?_(i[1]||"0")+60*_(i[2]||"0")+_(i[3]||"0"):(i=t.match(/^(100|[1-9]\d|\d)%$/),i?_(i[1]||"0")*e/100:void 0)}var oQ=class{get xVt(){return this.DVt}get Fu(){return this.NVt}get eventURL(){return this.BVt}constructor(t,e,i){this.DVt=t,this.NVt=e,this.BVt=i}};t();var aQ=class{get MVt(){return this.LVt}constructor(t){this.LVt=t}},uQ=class extends aQ{get AUt(){return this.bUt}get pUt(){return this.yUt}get OVt(){return this.FVt}constructor(t,e,i,s){super(t),this.FVt=e,this.bUt=i,this.yUt=s}},cQ=class extends aQ{constructor(t){super(t)}},lQ=class extends aQ{constructor(t){super(t)}};t();var M={UVt:{Ly:100,ly:"XML parsing error."},VVt:{Ly:303,ly:"Empty or invalid VAST error."},HVt:{Ly:400,ly:"General linear error"},WVt:{Ly:403,ly:"Unsupported MIME-type or missing mediafiles error"},qVt:{Ly:500,ly:"General nonlinear error"},zVt:{Ly:900,ly:"Network error"}},Dr=class{get XVt(){return this.GVt}QVt(t){if(!this.XVt)return;const e=this.XVt.replace(/\[ERRORCODE]/,""+t.Ly);ae(e)}constructor(t){this.GVt=t}};t();var Ka=class extends Pa{get KVt(){return this.jVt}get YVt(){var t;return null!=(t=this.ZVt)?t:900}constructor(t,e,i,s){super(i||e&&dQ[e]||t,s),this.jVt=t,this.ZVt=e,this.JVt=i}},bt=function(t){return t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general",t}({}),oh=function(t){return t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED",t}({}),dQ={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function fQ(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case Ot.cC:case Ot.lC:case Ot.uC:return!0;default:return!1}}function _Q(t){const e=Zl();return!!(fQ(t)||t&&e&&(null==e?void 0:e.canPlayType)&&e.canPlayType(t))||(I("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function vQ(t,e){for(const i of e){new Dr(i).QVt(t)}}function I(t){0}t(),t();var gQ=class{get $Vt(){return this.tHt}get eHt(){return this.iHt}constructor(t,e){this.tHt=t,this.iHt=e}},wQ=class t{async sHt(e,i){if(NG(e.sources,e.timeOffset)){const s=await t.nHt(e.sources.src,i),n=s&&s.documentElement;if(!n)throw new Ka(bt.NETWORK,oh.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(kr(n,"VMAP"))return await this.rHt(n,e,i);if(kr(n,"VAST")){const t=await this.hHt(n,i,!1);if(t){const i=new AQ("",!0,!0,t);return[new pQ("start",i,mQ.oHt,"",[],!1,!0,e)]}return[]}throw new Ka(bt.GENERAL,oh.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(BG(e.sources,e.timeOffset))return[new yQ(String(e.timeOffset),e,i)];throw new Ka(bt.GENERAL,oh.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async aHt(e,i,s,n){let r;void 0===n&&(n=[]);try{r=await t.nHt(e,i)}catch(t){throw vQ(t instanceof Ka&&t.YVt===oh.VAST_MALFORMED_RESPONSE?M.VVt:M.zVt,n),t}const h=r&&r.documentElement;if(h&&kr(h,"VAST"))return await this.hHt(h,i,s,n);h&&kr(h,"VMAP")&&un("Received VMAP ad when expecting VAST. Please set the type of your ad source in the configuration, or make sure to not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included.")}async uHt(t,e,i,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new Ka(bt.GENERAL,oh.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.aHt(t.sources.src,s,!1),h=new AQ("",!0,!0,r),o=new pQ(e,h,mQ.oHt,"",[],!1,!0,t);return o.cHt=i,o}static async requestSuccessOnly(t,e){let i;try{i=await e.FS(t)}catch(t){throw new Ka(bt.NETWORK,oh.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!Fo(i))throw new Ka(bt.NETWORK,oh.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return i}static async nHt(t,e){const i=new Qi({qS:t,OS:Gs.lS,vk:Na.GET}),s=await this.requestSuccessOnly(i,e);try{return function(t){return YG(t,"text/xml")}(await s.LS())}catch(t){throw new Ka(bt.NETWORK,oh.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async hHt(t,e,i,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(!t||!kr(t,"VAST")){if(vQ(M.VVt,s),i)throw new Ka(bt.PARSING,oh.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ka(bt.PARSING,oh.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}if(0!==ma(t,"Ad").length){for(const i of ma(t,"Ad"))try{const t=await this.lHt(i,e,s);0===t.RN?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];if(1===n.length&&0===r.length)return n[0];if(0===n.length&&0!==r.length)return new LG(r);if(n.length>0||r.length>0)return new LG(r.concat(n))}if(0!==ma(t,"Error").length)for(const e of ma(t,"Error")){I(M.VVt.ly);const t=e.textContent;t&&s.push(t.trim())}if(vQ(M.VVt,s),i)throw new Ka(bt.PARSING,oh.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.");throw new Ka(bt.PARSING,oh.VAST_EMPTY_RESPONSE,"The VAST element was empty.")}async rHt(t,e,i){const s=[],n=ma(t,"AdBreak");for(const t of n)try{const n=await this.dHt(t,e,i);n&&s.push(n)}catch(t){Gn.jw(t)}return s}async lHt(e,i,s){const n=Wt(e,"id")||"";let r=cs(Wt(e,"sequence"));r||(r=0);const h=ma(e,"InLine"),o=ma(e,"Wrapper");if(0!==o.length)return await this.fHt(o[0],n,r,i,s);if(0!==h.length)return t._Ht(h[0],n,r,s);throw new Ka(bt.PARSING,oh.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static _Ht(e,i,s,n){const r=ma(e,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=ma(e,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=ma(e,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of ma(e,"Impression"))t.textContent&&l.push(t.textContent);const d=t.vHt(ma(e,"Creatives")[0],u,n);return new FG(i,s,u,a,l,d,new Dr(h))}async fHt(e,i,s,n,r){const h=ma(e,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=ma(e,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of ma(e,"Impression"))t.textContent&&c.push(t.textContent);const l=ma(e,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.aHt(d,n,!0,r),_=ma(e,"Creatives")[0];let v=[];_&&(v=t.gHt(_,u,r));let g=ao(Wt(e,"followAdditionalWrappers"));g||(g=!0);let w=ao(Wt(e,"allowMultipleAds"));w||(w=!0);let m=ao(Wt(e,"fallbackOnNoAd"));return m||(m=!1),new XG(i,s,c,f,g,v,w,m,new Dr(o))}static gHt(e,i,s){const n=[];for(const r of ma(e,"Creative")){let e=Wt(r,"id");e||(e="");let h=cs(Wt(r,"sequence"));h||(h=0);let o=Wt(r,"adId");o||(o="");const a=ma(r,"Linear")[0];let u;a&&(u=t.wHt(a,"wrapper",e,i,s));const c=ma(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.mHt(c,e,i),l=d}catch(t){}const f=ma(r,"CompanionAds")[0];let _;f&&(_=t.pHt(f)),n.push(new GG(e,o,h,"",u,l,_,[]))}return n}static vHt(e,i,s){const n=[];for(const r of ma(e,"Creative")){let e=Wt(r,"id");e||(e="");let h=cs(Wt(r,"sequence"));h||(h=0);let o=Wt(r,"adId");o||(o="");let a=Wt(r,"apiFramework");a||(a="");const u=ma(r,"Linear")[0];let c;if(u)try{c=t.wHt(u,"inline",e,i,s)}catch(t){}if(0===(null==c?void 0:c.ct))throw new Ka(bt.PARSING,oh.VAST_UNEXPECTED_DURATION_ERROR,"The VAST response had a duration of 0 seconds, so skipping the ad(s).");const l=ma(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.mHt(l,e,i),d=f}catch(t){}const _=ma(r,"CompanionAds")[0];let v;_&&(v=t.pHt(_));const g=ma(r,"UniversalAdId"),w=t.parseUniversalAdIds(g);n.push(new GG(e,o,h,a,c,d,v,w))}return n}static wHt(e,i,s,n,r){const h=ma(e,"Duration")[0];let o=0;if(h)o=xG(h.textContent)||0;else if(!h&&"inline"===i)throw new Ka(bt.PARSING,oh.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=Wt(e,"skipoffset");let u=-1;if(a){let t=xG(a);if(void 0===t&&a.indexOf("%")>-1){const e=w.abs(Number(a.replace(/(?![0-9])./g,"")))/100;j(e)||(t=o*e)}void 0!==t&&(u=t)}const c=ma(e,"MediaFiles")[0];let l=[],d=[];if(c&&(l=function(t,e){const i=[];for(const s of ma(t,"MediaFile")){const t=Wt(s,"delivery"),n=Wt(s,"type");if(!n){I();continue}if(!e(n))continue;let r=cs(Wt(s,"width")),h=cs(Wt(s,"height"));r||(I(),r=0),h||(I(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};i.push(o)}return i}(c,_Q),d=function(t){const e=ma(t,"ClosedCaptionFiles");if(0===e.length)return[];const i=e[0],s=[];for(const t of ma(i,"ClosedCaptionFile")){const e=Wt(t,"type");e||I();const i=Wt(t,"language");i||I();const n={type:null!=e?e:"",language:null!=i?i:"",contentURL:(""+t.textContent).trim()};s.push(n)}return s}(c)),"inline"===i&&(!c||0===l.length))throw vQ(M.WVt,r),new Ka(bt.PARSING,oh.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const f=ma(e,"TrackingEvents")[0];let _=[];f&&(_=t.yHt(f,eQ,"linear"));const v=ma(e,"VideoClicks")[0],g=t.AHt(v);return new QG(o,l,_,g,u,s,n,d)}static AHt(e){if(!e)return new fe("","",[],[]);const i=ma(e,"ClickThrough")[0];let s,n="";i&&(s=i.textContent||void 0,n=Wt(i,"id")||"");const r=t.bHt(ma(e,"ClickTracking")),h=t.bHt(ma(e,"CustomClick"));return new fe(s,n,r,h)}static bHt(t){const e=[];for(const i of t){const t=i.textContent;if(!t)continue;const s=Wt(i,"id")||"";e.push(new zG(s,t))}return e}static yHt(t,e,i){const s=[];for(const n of ma(t,"Tracking")){const r=Wt(n,"event");if(!e(r)){I();continue}let h="";"linear"===i&&(h=Wt(t,"offset")||"0");const o=n.textContent;o&&s.push(new oQ(r,h,o))}return s}static mHt(e,i,s){const n=[];for(const r of ma(e,"NonLinear")){const e=ma(r,"NonLinearClickThrough")[0];let h;e&&(h=e.textContent||void 0);const o=t.bHt(ma(r,"NonLinearClickTracking")),a=ma(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=Wt(a,"creativeType"),e=a.textContent||"",i=ma(a.parentNode,"NonLinearClickThrough")[0];let s="";i&&(s=i.textContent||""),u=new uQ(e,t,s,"")}const c=t.THt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){I();continue}const d=new fe(h,"",o,[]);n.push(new VG(u,c,l,d,i,s))}if(0===n.length)throw new Ka(bt.PARSING,oh.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=ma(e,"TrackingEvents")[0];let h=[];return r&&(h=t.yHt(r,sQ,"nonlinear")),new UG(n,h)}static parseUniversalAdIds(t){const e=[];for(const r of t){var i;const t=null!=(i=Wt(r,"idRegistry"))?i:"";var s,n;const h=null!=(n=null!=(s=Wt(r,"idValue"))?s:r.textContent)?n:"";e.push(new gQ(t,h))}return e}static pHt(e){let i=Wt(e,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(i)||(i=HG.sW);const s=[];for(const i of ma(e,"Companion")){let e=cs(Wt(i,"width")),n=cs(Wt(i,"height")),r=Wt(i,"id"),h=cs(Wt(i,"assetWidth")),o=cs(Wt(i,"assetHeight")),a=cs(Wt(i,"expandedWidth")),u=cs(Wt(i,"rxpandedHeight")),c=Wt(i,"apiFramework"),l=Wt(i,"adSlotId"),d=cs(Wt(i,"pxratio"));const f=ma(i,"AltText")[0];let _=f?f.textContent:"";e||(I(),e=0),n||(I(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const v=t.SHt(i),g=t.THt(i),w=t.parseHtmlResource(i),m=ma(i,"TrackingEvents")[0];let p=[];m&&(p=t.yHt(m,rQ,"companion"));const y=ma(i,"CompanionClickThrough")[0];let A;y&&(A=y.textContent||void 0);const b=t.bHt(ma(i,"CompanionClickTracking"));(v||g||w)&&s.push(new qG(e,n,r,h,o,a,u,c,l,d,v,g,w,new fe(A,"",b,[]),p,_))}return new WG(i,s)}static SHt(t){const e=ma(t,"StaticResource")[0];let i;if(e&&e.parentNode){let t=Wt(e,"creativeType");t||(t="");const s=e.textContent,n=ma(e.parentNode,"AltText")[0],r=ma(e.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(i=new uQ(s,t,h,o))}return i}static THt(t){const e=ma(t,"IFrameResource")[0];let i;if(e){const t=e.textContent||"";i=new cQ(t)}return i}static parseHtmlResource(t){const e=ma(t,"HTMLResource")[0];let i;if(e){const t=e.textContent||"";i=new lQ(t)}return i}async dHt(e,i,s){const n=Wt(e,"timeOffset")||"0",r=Wt(e,"breakType")||mQ.zS;let h=Wt(e,"breakId"),o=ao(Wt(e,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==Va.kHt(n)))throw new Ka(bt.PARSING,oh.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=ma(e,"AdSource")[0],u=ma(e,"TrackingEvents")[0];let c=[];u&&(c=t.yHt(u,$G,"vmap"));let l=Wt(a,"id");l||(l="");let d=ao(Wt(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=ao(Wt(a,"followRedirects"));f||(f=!0);const _=ma(a,"AdTagURI")[0];let v="";const g=ma(a,"VASTAdData")[0];if(!_||!_.textContent){if(g){if(g.firstElementChild&&KG(g.firstElementChild,"VAST")){const t=await this.hHt(g.firstElementChild,s,!1);if(t){const e=new AQ(l,d,f,t);return new pQ(n,e,r,h,c,o,!1,i)}return}throw new Ka(bt.PARSING,oh.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new Ka(bt.PARSING,oh.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{v=_.textContent;const t=pr(i);return t.sources.src=v,new yQ(n,t,s)}catch(t){return}}},mQ=function(t){return t.zS="",t.oHt="linear",t.EHt="nonlinear",t.PHt="display",t}({}),Va=class{static IHt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static CHt(t){}static RHt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static xHt(t){const e=t.split(":");let i=0;return i+=3600*Number(e[0]),i+=60*Number(e[1]),i+=Number(e[2]),i}static DHt(t){if(t<=0)return"00:00:00.000";const e=w.floor(t),i=t-e;return this.NHt(e/3600,2)+":"+this.NHt(e/60%60,2)+":"+this.NHt(e%60,2)+"."+this.NHt(1e3*i,3)}static NHt(t,e){return("00"+w.floor(t)).slice(-e)}static BHt(t,e){const i=this.kHt(t);if(0===i)switch(t){case"start":return 0;case"end":return-1}else{if(2===i)return DG(t)*e;if(1===i)return xG(t);if(3===i)return this.RHt(t);if(4===i){const e=Number(t);if(!j(e)&&e>=-1)return e}}}static kHt(t){return"start"===t||"end"===t?0:void 0!==xG(t.toString())?1:void 0!==DG(t.toString())?2:void 0!==this.CHt(t.toString())?3:j(Number(t))?void 0:4}},pQ=class{get MHt(){return this.LHt.integration}get OHt(){return this.FHt}get pPt(){return this.UHt}get ZUt(){return this.JUt}set ZUt(t){this.JUt=t}get BFt(){return this.mUt}get VHt(){return this.HHt}get WHt(){return this.qHt}get ett(){return this.LHt}get zHt(){return this.cHt.gO}get q(){return!0}On(){return Promise.resolve()}get cHt(){return this.XHt}set cHt(t){this.XHt=t}constructor(t,e,i,s,n,r,h,o){this.JUt=-1,this.FHt=e,this.UHt=t,this.GHt=i,this.HHt=s,this.qHt=r,this.mUt=n,this.QHt=h,this.LHt=o}},yQ=class{get MHt(){return this.zFt.MHt}get OHt(){return this.zFt.OHt}get pPt(){return this.zFt.pPt}get ZUt(){return this.zFt.ZUt}set ZUt(t){this.zFt.ZUt=t}get BFt(){return this.zFt.BFt}get VHt(){return this.zFt.VHt}get WHt(){return this.zFt.WHt}get ett(){return this.zFt.ett}get zHt(){return this.zFt.zHt}get q(){return this.Hk}On(){var t;return null!=(t=this.KHt)?t:this.KHt=this.zk()}async zk(){const t=new wQ;this.zFt=await t.uHt(this.ett,this.pPt,this.cHt,this.TF),this.Hk=!0}get cHt(){return this.zFt.cHt}set cHt(t){this.zFt.cHt=t}constructor(t,e,i){this.Hk=!1,this.TF=i,this.zFt=new pQ(t,void 0,"","",[],!1,!1,e)}},AQ=class{get o(){return this.Wb}get NUt(){return this.jHt}get YHt(){return this.ZHt}get lFt(){return this.JHt}constructor(t,e,i,s){this.Wb=t,this.jHt=e,this.JHt=s,this.ZHt=i}};function bQ(t,e){let i;if(t.vastAdsRequest&&(i=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return JG(t.adsResponse);return}(t.vastAdsRequest)),!i){const e=function(t){const e=t.contentUrl||t.contentId;if(!e)return;const i=t.contentType||"video/mp4",s=Eb(i)||Ib(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Va.DHt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Va.DHt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+i+'">'+ZG(e)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+ZG(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+ZG(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);e&&(i=JG(e))}const s=t.customData;if(i){const n={integration:null==s?void 0:s.integration,sources:{src:i,type:"vast"},timeOffset:e};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}var TQ=function(t){return t.$Ht="error",t.tWt="sourceupdate",t}({}),SQ=class extends o{constructor(t){super("error"),this.lt=t}},kQ=class extends o{constructor(t,e){super("sourceupdate"),this.bt=t,this.iW=e}},EQ=class extends Re{get Kx(){return this.eWt}iWt(t){this.sWt.iWt(t)}nWt(t){this.sWt.nWt(t)}rWt(t){this.sWt.rWt(t)}hWt(t){this.sWt.hWt(t)}oWt(t){this.eWt.addUpdateListener(t)}aWt(t){this.eWt.removeUpdateListener(t)}uWt(){const t=new ue,e=new chrome.cast.media.GetStatusRequest;return this.eWt.getStatus(e,(()=>{t.Xf({bt:this.oP(),iW:this.BP()})}),(e=>t.My(e))),t.Pf}oP(){var t;return null==(t=this.eWt.customData)?void 0:t.currentSource}BP(){var t;let e;if(null==(t=this.lWt.cWt())?void 0:t.version){var i;e=null==(i=this.eWt.customData)?void 0:i.sourceDescription}else{var s;const t=null==(s=PG(this.eWt))?void 0:s.customData;(function(t){return nh(t)&&t.theoplayer_version>=1&&Ee(t.streamStart)&&Ee(t.isLive)&&Ee(t.sourceDescription)})(t)&&(e=t.sourceDescription),e||(e=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:PQ(t)}}(this.eWt.media))}return e}Ml(){const t=new chrome.cast.media.PauseRequest;this.eWt.pause(t,De,this.dWt)}Al(){const t=new chrome.cast.media.StopRequest;this.eWt.stop(t,De,this.dWt)}bl(){const t=new chrome.cast.media.PlayRequest;this.eWt.play(t,De,this.dWt)}jc(t,e){const i=new chrome.cast.media.SeekRequest;return i.currentTime=t,i.resumeState=e?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,e)=>{this.eWt.seek(i,t,(t=>{var i;e(new Qs(Ns(t.code),null!=(i=t.description)?i:void 0))}))}))}$u(t){this.sWt.F8(Vs,function(t){return{type:IG.cFt,properties:{playbackRate:t}}}(t)).catch(this.fWt)}_Wt(t){const e=new chrome.cast.media.EditTracksInfoRequest(t);this.eWt.editTracksInfo(e,De,this.dWt)}vWt(){return this.eWt.getEstimatedTime()}gWt(){return this.eWt.getEstimatedBreakClipTime()}wWt(){return this.eWt.getEstimatedBreakTime()}mWt(){this.sWt.F8("urn:x-cast:com.google.cast.media",{type:CG.SKIP_AD,requestId:this.pWt++,mediaSessionId:this.eWt.mediaSessionId}).catch(this.fWt)}bn(){this.Bo()}constructor(t,e,i){super(e),this.pWt=0,this.fWt=t=>{this.wo(new SQ(t))},this.dWt=t=>{var e;const i=new Qs(Ns(t.code),null!=(e=t.description)?e:void 0);this.fWt(i)},this.lWt=t,this.sWt=e,this.eWt=i}};function PQ(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?fn(t.breaks,(e=>function(t,e){const i=[];if(t.isWatched)return i;for(const s of t.breakClipIds){const n=bv(e,(t=>t.id===s));if(n){const e=bQ(n,t.position);e&&i.push(e)}}return i}(e,t.breakClips))):[]}t();var IQ=class{yWt(t,e){this.lWt.addMessageListener(t,e)}AWt(t,e){this.lWt.removeMessageListener(t,e)}F8(t,e){return new Promise(((i,s)=>{this.lWt.sendMessage(t,e,i,(t=>{var e;s(new Qs(Ns(t.code),null!=(e=t.description)?e:void 0))}))}))}bn(){}constructor(t){this.lWt=t}};function CQ(t){return"vmap"===t||"adrule"===t}function RQ(t){if(t)return Sc(t)&&""!==t?{src:ci(t),type:void 0}:function(t){return nh(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:ci(t.src),type:xQ(t.type)}:void 0}function xQ(t){if(Sc(t)){const e=t.toLowerCase();switch(e){case"vast":case"vmap":case"adrule":return e;default:return void un("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||un("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function DQ(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return RG.test(t)}(t))return Va.xHt(t);if(NQ(t))return t}return Number(t)>=0?Number(t):void 0}}function NQ(t){return new RegExp(/^\d{1,2}%$/).test(t)}t(),t(),t();var BQ=function(t){return t.aFt="receiver_info",t.xEt="event",t.bWt="propertychange",t.uFt="trackevent",t}({}),MQ=class{TWt(t){let e;try{e=JSON.parse(t)}catch(t){0}return e}iWt(t){this.SWt.push(t)}nWt(t){Ko(this.SWt,t)}rWt(t){this.kWt.push(t)}hWt(t){Ko(this.kWt,t)}EWt(t){this.PWt=t}F8(t,e){return this.IWt.F8(t,e)}bn(){this.IWt.AWt(Vs,this.CWt),us(this.kWt),us(this.SWt),this.PWt=void 0}constructor(t){this.SWt=[],this.kWt=[],this.CWt=(t,e)=>{const i=this.TWt(e);if(i)if(i.type===BQ.bWt)for(const t of this.SWt)for(const e of g.keys(i.properties))t(e,i.properties[e]);else if(i.type===BQ.xEt)for(const t of this.kWt)t(i.event);else i.type===BQ.uFt&&this.PWt&&i.event.trackState&&this.PWt(i.event.trackId,i.event.trackState.targetQualityIds)},this.IWt=t,this.IWt.yWt(Vs,this.CWt)}};t(),t();var Wi=function(t){return t.RWt="medialoadedchange",t.Bl="volumechange",t.$Ht="casterror",t.xWt="playererror",t.DWt="targetqualitychanged",t.NWt="receiverinfochanged",t}({}),LQ=class extends o{constructor(){super("medialoadedchange")}},OQ=class extends o{constructor(t,e){super("volumechange"),this.Pl=t,this.tc=e}},FQ=class extends o{constructor(t){super("casterror"),this.lt=t}},UQ=class extends o{constructor(t){super("playererror"),this.lt=t}},VQ=class extends o{constructor(t,e){super("targetqualitychanged"),this.Jx=t,this.BWt=e}},HQ=class extends o{constructor(){super("receiverinfochanged")}},WQ=class extends Re{MWt(t,e,i){this.sWt.F8(Vs,function(t,e,i){return{type:IG.uFt,trackID:t,trackType:e,properties:{targetQuality:i}}}(t,e,i)).catch(this.fWt)}LWt(){this.IWt.yWt(Vs,this.OWt),this.sWt.F8(Vs,{type:IG.aFt}).catch(De)}cWt(){return this.FWt}UWt(){return this.lWt.getSessionObj()}VWt(t){!this.HWt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.HWt=new EQ(this,this.sWt,t),this.WWt(),this.wo(new LQ),this.HWt.oWt(this.qWt))}zWt(){return this.HWt}async XWt(t){const e=function(t){const e=function(t,e,i,s){const[n,r]=function(t){for(const i of t.sources)if(kc(i)){const t=i.src;if(t){var e;const s=null!=(e=i.type)?e:kt(t);if(qQ(s))return[t,s]}}var i,s;return[null!=(i=bP(t))?i:"",null!=(s=yP(t))?s:""]}(t),h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=EG(t.metadata,t.poster),h.streamType=s,function(t,e,i){const s=[],n=[];let r,h=0,o=0;for(const t of e){const e=RQ(t.sources);if(e)if(NG(e,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=e.src;else if(BG(e,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=Va.BHt(r,i))?u:0,d=void 0!==c?Va.BHt(c,i):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=e.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=bv(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+h++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,e,i),h}(t.GWt,t.l7,t.ct,t.sY),i=new chrome.cast.media.LoadRequest(e);return i.autoplay=!0,i.currentTime=t.Yu,i.customData=t.QWt,i}(t);let i;try{i=await this.lWt.loadMedia(e)}catch(t){i=t}if(i)throw new Qs(Ns(i))}bP(t){this.UWt().setReceiverMuted(t,De,this.KWt)}WP(t){this.UWt().setReceiverVolumeLevel(t,De,this.KWt)}jWt(){return this.UWt().receiver.friendlyName}bn(){this.Bo(),this.lWt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.YWt),this.UWt().removeUpdateListener(this.WWt),this.IWt.AWt(Vs,this.OWt),this.sWt.bn(),this.IWt.bn()}constructor(t){super(),this.FWt=void 0,this.fWt=t=>{this.wo(new FQ(t))},this.ZWt=(t,e)=>{"error"===t&&this.wo(new UQ(e))},this.JWt=(t,e)=>{this.wo(new VQ(t,e))},this.OWt=(t,e)=>{const i=JSON.parse(e);i.type===BQ.aFt&&(this.FWt=i.info,this.wo(new HQ))},this.WWt=()=>{const t=this.UWt(),{level:e,muted:i}=t.receiver.volume;this.wo(new OQ(null!=e?e:void 0,null!=i?i:void 0))},this.YWt=()=>this.VWt(this.lWt.getMediaSession()),this.qWt=t=>{var e;t||(null==(e=this.HWt)||e.aWt(this.qWt),this.HWt=void 0,this.wo(new LQ))},this.KWt=t=>{var e;const i=new Qs(Ns(t.code),null!=(e=t.description)?e:void 0);this.fWt(i)},this.lWt=t,this.lWt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.YWt),this.IWt=new IQ(t.getSessionObj()),this.sWt=new MQ(this.IWt),this.sWt.iWt(this.ZWt),this.sWt.EWt(this.JWt),this.UWt().addUpdateListener(this.WWt),this.WWt(),this.LWt();const e=this.lWt.getMediaSession();e&&this.VWt(e)}};function qQ(t){switch(t){case Ot.cC:case Ot.uC:case Ot.lC:case Ot.dC:return!0}return!1}var zQ=function(t){return t.$Wt="statechange",t}({}),XQ=class extends o{constructor(t){super("statechange"),this.Iut=t}};t(),t(),t(),t();var GQ=class extends Re{d7(){return this.V7}nP(){return r.Ol()}aP(){return this.fW+this.tqt}t7(){return this.aP()}rP(){}cP(){return this.nf}dP(){return this.ef}fP(){}kP(){return this.if}eqt(){}EP(){return this.vW}$u(t){this.vW!==t&&(this.vW=t,this.wo(new Sr(this.sa.Yu,t)))}xP(){return qb.Jl}PP(){return r.Ol()}DP(){return r.Ol()}NP(){return!1}eP(){return this.TM}FP(){return this.kM}MP(){return this.Au}_Wt(t){}VP(){return this.iqt}OP(){return this.sqt}bl(){this.if=!1}Ml(){this.if=!0}jc(t){this.fW=t-this.tqt}nqt(){return this.tqt}rqt(t){this.tqt=t}H7(t){this.V7.H7(t)}Al(){}bn(){this.Bo(),this.TM.bn(),this.kM.bn(),this.Au.bn(),this.V7.bn()}constructor(t,e,i,s,n,r,h,o,a){super(),this.sa=t,this.tqt=0,this.TM=new mn,this.kM=new mn,this.Au=new du,this.V7=new Eu,this.tqt=e,this.fW=i-e,this.nf=s,this.ef=n,this.if=r,this.vW=h,this.iqt=o,this.sqt=a}};t(),t(),t(),t();var Gi=function(t){return t.hqt="ccmodechangerequest",t.oqt="cctargetqualitychangerequest",t.aqt="cctrackchangerequest",t}({}),QQ=class extends o{constructor(t,e,i){super(Gi.hqt),this.track=t,this.trackId=e,this.mode=i}};t();var KQ=function(t){return t.lS="TEXT",t.hk="AUDIO",t.wl="VIDEO",t}({}),jQ=function(t){return t.aF="SUBTITLES",t.uF="CAPTIONS",t.cF="DESCRIPTIONS",t.$n="CHAPTERS",t.lF="METADATA",t}({});function YQ(t){return"AUDIO"===t.type}function ZQ(t){return"VIDEO"===t.type}function JQ(t){return"TEXT"===t.type}var $Q=class extends Re{get ba(){return this.Zu||(this.Zu=wn(this)),this.Zu}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,this.wo(new Ba(this)))}get W(){return this.y0}get L(){return this.A0}get Tk(){return this.qo}set Tk(t){const e=pt(t);this.qo!==e&&(this.qo=e,this.uqt!==e&&this.wo(new QQ(this,this.KI,e)),this.wo(new no(this)))}get cqt(){return this.uqt}set cqt(t){const e=pt(t),i=this.qo!==e;this.qo=e,this.uqt=e,i&&this.wo(new no(this))}b0(t){return bv(this.A0.RI,(e=>e.o===t))}tC(t){this.Tk=t}lqt(t){}bn(){}sr(){}constructor(t){super(),this.Zu=void 0;const e=t.customData;this.KI=Number(t.trackId)||0,this.o=""+(e&&e.id||this.KI),this.ec=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.$I=e&&e.inBandMetadataTrackDispatchType||"",this.Lt=e&&e.kind||function(t){switch(t){case jQ.aF:return ns.aF;case jQ.uF:return ns.uF;case jQ.cF:return ns.cF;case jQ.$n:return ns.$n;case jQ.lF:return ns.lF}return}(t.subtype)||"subtitles",this.Vc=Fi.NONE,this.Vm=e&&void 0!==e.type?function(t){return bc(t)?t:Zo.DEFAULT}(e.type):Zo.WEBVTT,this.p0=[],this.A0=new St(this.p0),this.C0=[],this.y0=new St(this.C0),this.qo=pt(e&&e.mode||Aa.Th),this.uqt=this.qo}};t(),t();var tK=class extends o{constructor(t,e){super(Gi.aqt),this.trackId=t,this.enabled=e}};t();var eK=class extends o{constructor(t,e){super(Gi.oqt),this.track=t,this.targetQuality=e}};t();var iK=function(t){return t.hk="audio",t.wl="video",t.lS="text",t}({}),sK=class extends Re{get QI(){return this.Aat}get ZI(){return this.pat}set ZI(t){this.dqt(t),this.wo(new eK(this,t))}get YI(){return this.LM}get _h(){return this.ec}set _h(t){t!==this.ec&&(this.ec=t,this.wo(new Ba(this)))}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.fqt!==t&&this.wo(new tK(this.KI,t)),this.wo(new no(this)))}get _qt(){return this.fqt}set _qt(t){const e=this.We!==t;this.We=t,this.fqt=t,e&&this.wo(new no(this))}get ba(){return this.Zu||(this.Zu=Ji(this)),this.Zu}get Tk(){return this.Rt?"enabled":"disabled"}qM(t){this.Rt=t}lqt(t){if(t.targetQualityIds){const e=[];for(const i of this.LM.RI)t.targetQualityIds.indexOf(i.o)>-1&&e.push(i);const i=e.length?e:void 0;this.dqt(i)}}dqt(t){(function(t,e){return!t&&e||t&&!e||t&&e&&!Pv(t,e)})(this.pat,t)&&(this.pat=t&&this.LM.FM(t)?t:void 0,this.wo(new nc(this.pat,this)))}unload(){for(const t of this.LM.RI)t.pn("update",this.ckt);this.LM.sr()}constructor(t){super(),this.Aat=void 0,this.LM=new Zh,this.pat=void 0,this.Zu=void 0,this.ckt=()=>this.wo(new Ba(this));const e=t.customData;if(this.KI=Number(t.trackId)||0,this.o=""+(e&&e.id||this.KI),this.ec=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Lt=e&&e.kind||"main",this.We=e&&e.enabled,this.fqt=this.We,YQ(t)){this.zJ=iK.hk;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new xU(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);e.wn("update",this.ckt),this.LM.OM(e)}}else{this.zJ=iK.wl;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new RU(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);e.wn("update",this.ckt),this.LM.OM(e)}}}};t();var nK=function(t){return t.vqt="legacy",t.gqt="caf",t}({});t(),t(),t(),t();var rK=class{wqt(){if(this.mqt>=this.V7.length)return;const t=this.V7[this.mqt];return this.mqt+=1,t}lt(){return this.wqt()}constructor(t){this.mqt=0,this.V7=t}};function ee(t){var e,i,s;return null!=(s=null==(i=t.OHt)||null==(e=i.lFt)?void 0:e.dFt())?s:[]}var hK=class{},oK=class{M7(){var t;return null!=(t=this.Zu)?t:this.Zu=function(t){return{get ads(){return t.l7.map((t=>t.M7()))},get integration(){return t.MHt},get maxDuration(){return t.pqt},get maxRemainingDuration(){return t.yqt},get timeOffset(){return t.pPt},get customData(){return t.QWt}}}(this)}constructor(){this.Zu=void 0}},aK=class{get Aqt(){return this.bqt}get t(){return this.sa}constructor(t,e){this.bqt=t,this.sa=e}},uK=class extends oK{get cHt(){return this.XHt}get l7(){const t=[];for(const s of this.XHt.Tqt)for(const n of ee(s)){var e,i;const r=null!=(i=null==(e=n.CFt)?void 0:e.tUt)?i:[];if(n.PFt&&t.push(this.Sqt(n.PFt,r,n.xFt,s.ett)),n.RFt)for(const e of n.RFt.DFt)t.push(this.kqt(e,r,n.RFt,n.xFt,s.ett))}return t}Sqt(t,e,i,s){const n=bv(this.Eqt,(e=>e.PFt===t));if(void 0!==n)return n;const r=new fK(t,e,this,this.Pqt,i,s);return this.Eqt.push(r),r}kqt(t,e,i,s,n){const r=bv(this.Iqt,(e=>e.RFt===t));if(void 0!==r)return r;const h=new dK(t,e,i,this,this.Pqt,s,n);return this.Iqt.push(h),h}get MHt(){return Kt.CSAI}get pPt(){const t=this.XHt.gO;return t>=0?t:this.Pqt.t.cP()}get yqt(){let t=0;for(const e of this.XHt.Tqt)for(const i of ee(e))i.PFt&&!i.PFt.$Ut&&(t+=i.PFt.ct);return this.Pqt&&this.Pqt.Aqt&&(t+=this.Pqt.Aqt.ct-this.Pqt.Aqt.Yu),t}get pqt(){let t=0;for(const e of this.XHt.Tqt)for(const i of ee(e))i.PFt&&(t+=i.PFt.ct);return t}get QWt(){}constructor(t,e){super(),this.Eqt=[],this.Iqt=[],this.XHt=t,this.Pqt=e}},cK={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},lK=class extends hK{get q7(){return this.zFt}get ett(){return this.LHt}get xFt(){return this.GUt}Cqt(){return this.Rqt}xqt(){this.Rqt=!0}Dqt(t){return yh({},cK,{resourceURI:t.MVt||""})}Nqt(t){return yh({},cK,{contentHTML:t.MVt.trim(),type:"HTMLResource"})}Bqt(t){var e,i;return yh({},cK,{clickThrough:(null==(e=t.AUt)?void 0:e.trim())||"",resourceURI:(null==(i=t.MVt)?void 0:i.trim())||"",altText:t.pUt||"",type:"StaticResource"})}Mqt(t,e,i){if(!t||!e)return;const s="<img "+(i?"title='"+i+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(e)+"' target='_blank' rel='noopener'>"+s+"</a>"}CFt(t){return t?t.map((t=>{let e;const i={adSlotId:t.dUt||"",height:t.Ci||0,width:t.Ti||0};if(t.LFt){var s;const i=this.Bqt(t.LFt),n=i.clickThrough||(null==(s=t.gUt)?void 0:s.AUt);e=yh({},i,{contentHTML:this.Mqt(i.resourceURI,n,i.altText)||""})}else if(t.VFt)e=this.Nqt(t.VFt);else{if(!t.FFt)return;e=this.Dqt(t.FFt)}return Xe(e,i)})).filter((t=>void 0!==t)):[]}Lqt(){return this.Oqt.yFt}constructor(t,e,i,s,n,r){super(),this.Rqt=!1,this.Oqt=t,this.eUt=e,this.zFt=i,this.Pqt=s,this.GUt=n,this.LHt=r}},dK=class extends lK{get RFt(){return this.Oqt}get IFt(){return this.Fqt}ya(){const t=this.zFt,e={companions:this.CFt(this.eUt),type:"nonlinear",id:this.Oqt.XFt,skipOffset:this.ZUt,integration:this.LHt.integration,adSystem:this.Oqt.yFt,get adBreak(){return t.M7()},creativeId:this.Oqt.XFt,universalAdIds:this.GUt.map((t=>({adIdRegistry:t.$Vt,adIdValue:t.eHt})))};return this.Oqt.FFt?Xe(this.Dqt(this.Oqt.FFt),e):this.Oqt.VFt?Xe(this.Nqt(this.Oqt.VFt),e):this.Oqt.LFt?Xe(this.Bqt(this.Oqt.LFt),e):e}M7(){var t;return null!=(t=this.Zu)?t:this.Zu=this.ya()}Uqt(){var t,e;return null!=(e=null==(t=this.Oqt.LFt)?void 0:t.MVt)?e:""}Vqt(){var t,e,i;return null!=(i=null==(e=this.Oqt)||null==(t=e.LFt)?void 0:t.OVt)?i:""}get ZUt(){const t=this.Oqt.q7;return t&&t.ett&&void 0!==t.ett.skipOffset?Va.BHt(t.ett.skipOffset,this.Pqt.Aqt.ct):(null==(e=this.Oqt.q7)?void 0:e.ZUt)||-1;var e}constructor(t,e,i,s,n,r,h){super(t,e,s,n,r,h),this.Fqt=i}},fK=class extends lK{get PFt(){return this.Oqt}ya(){var t;const e=this.zFt,i=this.Oqt;return{companions:this.CFt(this.eUt),duration:i.ct,id:i.XFt,mediaFiles:i.KUt,get mediaUrl(){return i.tVt},skipOffset:this.ZUt,type:"linear",integration:this.LHt.integration,adSystem:i.yFt,width:void 0,height:void 0,get adBreak(){return e.M7()},clickThrough:null==(t=i.FUt)?void 0:t.AUt,creativeId:i.XFt,universalAdIds:this.GUt.map((t=>({adIdRegistry:t.$Vt,adIdValue:t.eHt}))),closedCaptionFiles:i.iVt}}M7(){var t;return null!=(t=this.Zu)?t:this.Zu=this.ya()}Uqt(){return this.Oqt.KUt.length>0?this.Oqt.KUt[0].contentURL:""}Vqt(){return this.Oqt.KUt.length>0?this.Oqt.KUt[0].type:""}get ZUt(){const t=this.Oqt.q7;return t&&t.ett&&void 0!==t.ett.skipOffset?Va.BHt(t.ett.skipOffset,this.Pqt.Aqt.ct):this.Oqt.ZUt||-1}constructor(t,e,i,s,n,r){super(t,e,i,s,n,r)}};function _K(t){return t instanceof fK}t();var Ac=function(t){return t.Hqt="csai",t.Wqt="google-ima",t.Qh="google-dai",t.qqt="freewheel",t.zqt="mediatailor",t.M_="chromecast",t.A7="theoads",t}({});t();var vK=class extends Tu{ya(){return new gK(this.G7.M7())}constructor(t){super("Xqt",t)}},gK=class extends Ra{constructor(t){super("updatead",t)}};t();var wK=class extends Tu{ya(){return new mK(this.G7.M7())}constructor(t){super("Gqt",t)}},mK=class extends Ra{constructor(t){super("adloaded",t)}},pK=class extends S{get N7(){return void 0!==this.Qqt}get B7(){return this.Oqt?[this.Oqt]:[]}get L7(){var t;return null!=(t=this.Qqt)?t:null}get O7(){return fn(this.Kqt,(t=>{const e=t.l7;if(t===this.Qqt&&void 0!==this.Oqt){const t=e.indexOf(this.Oqt);if(t>=0)return e.slice(t+1)}return t.jqt()?[]:e}))}get F7(){return this.Kqt.filter((t=>t===this.Qqt||!t.jqt()))}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=XB(this)}W1(t,e,i){throw new p("Scheduling ads while casting is not supported.")}$R(){this.eWt.mWt()}W7(t){var e;null==(e=this.Yqt)||e.W7(t)}U7(t,e){var i;null==(i=this.Yqt)||i.U7(t,e)}Zqt(t){return bv(this.Kqt,(e=>e.o===t))}Jqt(t,e,i,s){const n=this.Kqt,r=[];let h=!1;for(const n of t){let t=this.Zqt(n.id);void 0===t&&(t=new yK(n),s.push(new Bo(t))),!Ee(t.$qt)&&Ee(i)&&(t.$qt=this.tzt(t.ezt,i));const o=t.l7;t.Zn(n,e,i,s);const a=t.l7;for(const t of a)Qe(o,t)||(s.push(new Mo(t)),h=!0);r.push(t)}this.Kqt=r,h&&s.push(new eM);for(const t of n)Qe(r,t)||s.push(new Do(t))}izt(t,e){const i=this.Qqt,s=this.Oqt;let n,r;if(t){var h;const{breakId:e,breakClipId:i}=t;n=e?this.Zqt(e):void 0,r=i?null==(h=this.Qqt)?void 0:h.szt(i):void 0}if(this.Qqt=n,this.Oqt=r,n!==i&&(void 0!==i&&(i.nzt=void 0,e.push(new Li(i))),void 0!==n&&(n.nzt=this.eWt,e.push(new ZB(n)))),r!==s){const t=this.sa.aP();void 0!==s&&e.push(new Ls(s,t)),void 0!==r&&e.push(new Pe(r,t))}}tzt(t,e){if(!e||!e.breaks)return;const i=bv(e.breaks,(e=>e.id===t.id));return i}H7(t){const e=[];for(const t of this.Kqt){let i=t.l7;if(t===this.Qqt&&void 0!==this.Oqt){const t=i.indexOf(this.Oqt);t>=0&&(i=i.slice(t))}else if(t.jqt())continue;for(const t of i){const i=t.rzt();i&&e.push(i)}}for(const i of e)t.W1(i,_c.x7,!1)}bn(){return this.Bo(),this.eWt.aWt(this.Zr),void 0!==this.Qqt&&(this.Qqt.nzt=void 0,this.Qqt=void 0),this.Oqt=void 0,us(this.Kqt),Promise.resolve(void 0)}constructor(t,e,i){super(),this.Kqt=[],this.Qqt=void 0,this.Oqt=void 0,this.Zu=void 0,this.Zr=t=>{var e;if(!t)return;const i=this.eWt.Kx,{breakStatus:s}=i,{breakClips:n,breaks:r}=i.media,h=null==(e=PG(i))?void 0:e.media,o=[];r&&n&&this.Jqt(r,n,h,o),this.izt(s,o);for(const t of o)this.wo(t)},this.sa=t,this.eWt=e,this.Yqt=i,this.eWt.oWt(this.Zr)}},yK=class extends oK{get ezt(){return this.hzt}get o(){return this.hzt.id}get l7(){return this.V7}get MHt(){return Ac.M_}get pqt(){let t=this.hzt.duration;return void 0===t&&this.V7.length>0&&(t=Ai(this.V7,(t=>t.ct)),j(t)&&(t=void 0)),t}get yqt(){const t=this.pqt;if(void 0!==t&&void 0!==this.nzt){const e=this.nzt.wWt();if(void 0!==e)return w.max(0,t-e)}return t}get pPt(){return this.hzt.position}get QWt(){}jqt(){return this.hzt.isWatched}szt(t){return bv(this.V7,(e=>e.o===t))}Zn(t,e,i,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=bv(e,(t=>t.id===h));if(void 0===o)continue;const a=r<this.V7.length?this.V7[r]:new AK(o,this);!Ee(a.ozt)&&Ee(i)&&(a.ozt=this.azt(i,h,r)),a.Zn(o,s),n.push(a)}this.hzt=t,this.V7=n}azt(t,e,i){if(!t||!t.breakClips)return;let s=bv(t.breakClips,(t=>t.id===e));if(!s){var n;const e=null==(n=this.$qt)?void 0:n.breakClipIds[i];e&&(s=bv(t.breakClips,(t=>t.id===e)))}return s}constructor(t){super(),this.$qt=void 0,this.V7=[],this.nzt=void 0,this.hzt=t}},AK=class{get uzt(){return this.czt}get o(){return this.czt.id}get tUt(){return[]}get ct(){var t;return null!=(t=this.czt.duration)?t:NaN}get KUt(){const t=this.Uqt();return t?[{contentURL:t,delivery:"progressive",type:this.Vqt(),width:0,height:0}]:[]}get tVt(){return this.Uqt()}get ZUt(){const{whenSkippable:t}=this.czt;return void 0===t?void 0:t<0?-1:t}get AUt(){return this.czt.clickThroughUrl}get XFt(){}get xFt(){return[]}get QWt(){}Lqt(){return""}Vqt(){var t;return null!=(t=this.czt.contentType)?t:""}Uqt(){var t,e;return null!=(e=null!=(t=this.czt.contentUrl)?t:this.czt.contentId)?e:""}Zn(t,e){const i=this.o,s=this.ct,n=this.czt.contentUrl;this.czt=t;const r=this.o,h=this.ct,o=this.czt.contentUrl;i===r&&(s===h||j(s)&&j(h))&&n===o||e.push(new vK(this)),j(s)&&!j(h)&&e.push(new wK(this))}rzt(){let t;return this.ozt&&(t=bQ(this.ozt,this.q7.pPt)),t||(t=bQ(this.czt,this.q7.pPt)),t}M7(){var t;return null!=(t=this.Zu)?t:this.Zu=this.ya()}ya(){const t=this;return{get companions(){return t.tUt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.KUt},get mediaUrl(){return t.tVt},get closedCaptionFiles(){return[]},get skipOffset(){return t.ZUt},type:"linear",integration:Ac.M_,get adSystem(){return t.Lqt()},width:void 0,height:void 0,get adBreak(){return t.q7.M7()},get resourceURI(){return t.Uqt()},get clickThrough(){return t.AUt},get creativeId(){return t.XFt},get customData(){return t.QWt},get isSlate(){return!1},get universalAdIds(){return t.xFt.map((t=>({adIdRegistry:t.$Vt,adIdValue:t.eHt})))}}}constructor(t,e){this.Zu=void 0,this.czt=t,this.q7=e}};t();var bK=class extends Re{get lzt(){return this.dzt}set lzt(t){this.dzt!==t&&(this.dzt=t,this.Hs.href=null!=t?t:"",t?this.wF():this.mF())}wF(){if(this.We)return;this.We=!0,this.Hs.style.display="",this.fzt||(this.jk.style.cursor="pointer");const t=this.fzt?this.Hs:this.jk;Gn.Zs.Ye?(t.addEventListener("touchstart",this._zt),t.addEventListener("touchend",this.vzt)):(t.addEventListener("mousedown",this._zt),t.addEventListener("click",this.vzt))}mF(){if(!this.We)return;this.We=!1,this.Hs.style.display="none",this.fzt||(this.jk.style.cursor="");const t=this.fzt?this.Hs:this.jk;Gn.Zs.Ye?(t.removeEventListener("touchstart",this._zt),t.removeEventListener("touchend",this.vzt)):(t.removeEventListener("mousedown",this._zt),t.removeEventListener("click",this.vzt))}Wu(){this.Bo(),this.mF(),this.jk.removeChild(this.Hs)}constructor(t,e=Gn.Zs.Ye){super(),this.We=!1,this._zt=t=>{t.stopPropagation(),this.wo(new o("clickstart"))},this.vzt=t=>{t.stopPropagation(),this.wo(new o("click"))},this.jk=t,this.fzt=e,this.Hs=h.createElement("a"),this.Hs.style.position="absolute",this.Hs.style.zIndex="11",this.Hs.target="gzt",this.fzt?(ui(this.Hs,"learn more"),this.Hs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Hs.setAttribute("rel","noopener")):Gl(this.Hs),this.jk.appendChild(this.Hs),this.mF()}};t(),t();var TK=[1200,992,768,576],SK={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},kK=class{wzt(t){let e=EK(t);e!==this.mzt&&(mh(this.Hs,e),Hl(this.Hs,this.mzt),this.mzt=e)}bn(){this.l3.pn(to.gn,this.yn)}constructor(t,e){this.Hs=t,this.l3=e,this.yn=t=>{this.wzt(t.width)},this.mzt=EK(e.Dz),mh(this.Hs,this.mzt),e.wn(to.gn,this.yn)}};function EK(t){for(let e of TK)if(t>e)return SK[e];return"theo-size-xs"}var PK=class extends Re{get je(){return this.Hs}get Tk(){return this.qo}get gS(){return this.pzt.textContent||""}set gS(t){ui(this.pzt,t)}yzt(t){"countdown"!==this.qo&&(this.qo="countdown",this.Azt(),this.je.classList.remove("theoplayer-ad-skip-button"),this.je.classList.add("theoplayer-ad-skip-countdown")),this.gS="You can skip in "+w.round(t)+" seconds"}bzt(){"skip"!==this.qo&&(this.qo="skip",this.gS="Skip Ad",this.Tzt(),this.je.classList.remove("theoplayer-ad-skip-countdown"),this.je.classList.add("theoplayer-ad-skip-button"))}Tzt(){this.je.addEventListener("mouseup",this.Szt),this.je.addEventListener("touchend",this.Szt)}Azt(){this.je.removeEventListener("mouseup",this.Szt),this.je.removeEventListener("touchend",this.Szt)}bn(){this.Bo(),this.Azt(),this.kzt.bn(),Es(this.Hs),Es(this.pzt),this.Ezt&&Es(this.Ezt)}constructor(t,e){super(),this.Szt=()=>{this.wo(new o("$R"))},this.Hs=h.createElement("div"),this.je.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.je.style.position="absolute",this.pzt=h.createElement("span"),this.je.appendChild(this.pzt),e&&(this.Ezt=h.createElement("div"),this.Ezt.className="theoplayer-ad-skip-poster",this.Ezt.style.backgroundImage='url("'+lv(e)+'")',this.je.appendChild(this.Ezt)),this.qo="countdown",this.kzt=new kK(this.je,t)}},IK=class extends Re{Pzt(){const t=this.eWt.Kx.activeTrackIds;if(t){if(this.Izt()){const e=this.kM.RI.map((t=>t.o)),i=this.TM.RI.map((t=>t.o));Qe(e.concat(i),"0")&&t.push(0)}NK(t,this.TM),NK(t,this.kM),function(t,e){const i=!1;for(const i of e.RI)i.cqt=Qe(t,i.KI)?Aa.Yn:Aa.Th}(t,this.Au)}}Czt(){var t;const e=null==(t=this.eWt.Kx.media)?void 0:t.tracks;if(!e)return;const i=e.filter(YQ),s=e.filter(ZQ),n=e.filter(JQ);if(this.Izt()&&0===s.length&&0!==this.VP()){const t=this.Rzt();s.push(t)}if(this.Izt()&&0===i.length){const t=this.xzt();i.push(t)}xK(this.TM,i.map((t=>t.trackId))),xK(this.kM,s.map((t=>t.trackId))),xK(this.Au,n.map((t=>t.trackId))),DK(i,this.TM),DK(s,this.kM),function(t,e){let i=!1;for(const s of t){let t=RK(e,s.trackId);t||(t=new $Q(s),e.tt(t),i=!0)}}(n,this.Au)}Dzt(){this.if||(this.Nzt=cl(this.Tnt,250))}Bzt(){ll(this.Nzt)}Mzt(){this.Bzt(),this.Dzt()}Lzt(){var t;const e=this.eWt.Kx,i=e.media;var s;const n=null!=(s=null==i?void 0:i.duration)?s:NaN,r=(null==i?void 0:i.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.nf=h,this.Ozt();const o=e.getEstimatedLiveSeekableRange(),a=null==(t=e.customData)?void 0:t.buffers;if(Ee(o)){const{start:t,end:e,isMovingWindow:i=r,isLiveDone:s=!1}=o;this.uCt(t,e,i,s)}else if(Ee(a)){const[t,e]=a.seekable;this.uCt(t,e,r,!1)}else r?this.uCt(void 0,void 0,!0,!1):this.uCt(0,h,!1,!1)}Fzt(){const t=this.eWt.Kx,e=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||CK(t);this.Uzt=e,this.if!==e&&(this.if=e,this.if?this.wo(new ac(this.aP())):this.wo(new ah(this.aP())))}sh(){const{playbackRate:t}=this.eWt.Kx;this.Vzt!==t&&(this.Vzt=void 0,this.vW!==t&&(this.vW=t,this.wo(new Sr(this.aP(),t))))}Hzt(){const{playerState:t}=this.eWt.Kx;let e;switch(t){case chrome.cast.media.PlayerState.IDLE:e=qb.Jl;break;case chrome.cast.media.PlayerState.BUFFERING:e=qb.Qn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:e=qb.Cf}this.o0(e),this.Wzt()}uCt(t,e,i,s){Ee(t)&&Ee(e)?this.H$=new NR(t,e,i,i&&!s):this.H$=void 0}qzt(t,e){this.sqt=null!=e?e:this.sqt,this.iqt=null!=t?t:this.iqt,this.wo(new tu)}Xe(t){this.zzt!==t?(this.sf=!0,this.wo(new lc(this.aP()))):this.zzt=void 0}Ef(){if(!this.sf)return;this.sf=!1;const t=this.aP();this.wo(new Ph(t,this.rP())),this.wo(new qo(t))}Ch(){this.ef=!0,this.dP()&&this.wo(new Zu(this.aP()))}Ozt(){const t=this.$bt,e=this.cP();t===e||j(t)&&j(e)||(this.$bt=e,this.wo(new de(e)))}Xzt(){const t=this.aP();this.sf||this.Gzt===t||(this.Gzt=t,this.wo(new Ph(t,this.rP())))}eqt(){this.if&&(this.if=!1,this.wo(new ah(this.aP())),this.o0(qb.Jl))}d7(){return this.V7}nP(){return this.pTt.by(this.tqt)}aP(){if(this.V7.N7){const t=this.eWt.gWt();if(void 0!==t)return t}return this.t7()}t7(){return void 0!==this.Qzt?this.tqt+this.Qzt:this.ef?this.cP():this.tqt+this.eWt.vWt()}rP(){if(this.Kzt)return new Date(this.t7()+this.Kzt)}cP(){if(this.V7.N7){var t;const e=null==(t=this.V7.B7[0])?void 0:t.ct;if(void 0!==e&&!j(e))return e}return this.tqt+this.nf}fP(){return this.$V}dP(){return!this.V7.N7&&this.ef}kP(){return this.if}EP(){return this.vW}$u(t){this.vW!==t&&(this.Vzt=this.vW,this.vW=t,this.wo(new Sr(this.aP(),t)),this.eWt.$u(t))}xP(){return this.rf}PP(){return this.V7.N7?r.OB(0,this.aP()):this.$o.by(this.tqt)}DP(){var t,e;if(this.V7.N7)return r.Ol();let i=null!=(e=null==(t=this.H$)?void 0:t.e$().by(this.tqt))?e:r.Ol();if(i.U>0){const t=i.Pn(i.U-1);i=i.Xl(r.OB(t,this.aP()))}return i}NP(){return this.sf}eP(){return this.TM}FP(){return this.kM}MP(){return this.Au}Rzt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.OP(),id:"0",name:"",width:this.VP()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:KQ.wl}}xzt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:KQ.hk}}Izt(){var t,e;return!(void 0!==(null==(t=this.lWt.cWt())?void 0:t.version))||(null==(e=this.lWt.cWt())?void 0:e.sdkType)===nK.gqt}_Wt(t){this.Izt()&&Ko(t,0),this.eWt._Wt(t)}VP(){return this.iqt}OP(){return this.sqt}bl(){this.if&&(this.if=!1,this.Uzt=!1,this.wo(new ah(this.aP()))),this.eWt.bl()}Ml(){this.if||(this.if=!0,this.Uzt=!0,this.wo(new ac(this.aP()))),this.eWt.Ml()}jc(t){if(this.V7.N7)return;let e=w.max(0,t-this.tqt);e=w.round(1e6*e)/1e6;const i=this.Qzt;this.Qzt=e,this.Uzt=this.kP(),this.zzt=e,this.sf=!0,this.wo(new lc(this.aP())),void 0===i&&(this.Izt()?this.jzt(e):this.H3(e))}H3(t){this.eWt.jc(t,this.Uzt).then(this.Yzt(t)).catch(this.fWt)}Yzt(t){return()=>{void 0!==this.Qzt&&(this.Qzt===t?this.Qzt=void 0:this.H3(this.Qzt))}}o0(t){this.rf!==t&&(this.rf=t,this.wo(new xr(this.aP(),t))),void 0===this.Qzt&&this.sf&&t>=qb.Jf&&this.Ef(),this.Wzt()}Wzt(){if(this.if)return void(this.Zzt=!1);const t=this.rf>=qb.Cf;this.Zzt!==t&&(this.Zzt=t,t?this.wo(new $n(this.aP())):this.wo(new zt(this.aP())))}Jzt(){this.$zt||(this.$zt=h.createElement("div"),this.sa.je.appendChild(this.$zt),this.$zt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.$zt.style.zIndex="10",Gl(this.$zt)),this.$zt.style.display=this.V7.N7?"":"none"}tXt(){var t;const e=null==(t=this.V7.B7[0])?void 0:t.AUt;e&&!this.eXt?(this.eXt=new bK(this.$zt,!0),this.eXt.lzt=e,this.eXt.wn("clickstart",this.iXt)):this.eXt&&(this.eXt.lzt=e)}sXt(){var t;const e=null==(t=this.V7.B7[0])?void 0:t.ZUt;if(void 0===e||e<0)return void(this.nXt&&(this.nXt.bn(),this.nXt=void 0));if(!this.nXt){var i;const t=null==(i=this.sa.Ta)?void 0:i.mi;this.nXt=new PK(this.sa.c3,t),this.$zt.appendChild(this.nXt.je),this.nXt.wn("$R",this.rXt)}const s=this.eWt.gWt();void 0!==s&&(s<e?this.nXt.yzt(e-s):this.nXt.bzt())}nqt(){return this.tqt}rqt(t){this.tqt=t}H7(t){}Al(){this.eWt.Al()}bn(){this.Bo(),this.V7.bn(),this.eXt&&(this.eXt.Wu(),this.eXt=void 0),this.nXt&&(this.nXt.bn(),this.nXt=void 0),this.$zt&&(Es(this.$zt),this.$zt=void 0),this.eWt.hWt(this.c$),this.eWt.nWt(this.hXt),this.eWt.aWt(this.qWt),this.eWt.pn(TQ.$Ht,this.oXt),this.eWt.bn()}constructor(t,e,i,s,n){super(),this.pTt=r.Ol(),this.Kzt=void 0,this.ef=!1,this.$V=void 0,this.Vzt=void 0,this.rf=qb.Jl,this.Zzt=!1,this.$o=r.Ol(),this.H$=void 0,this.sf=!1,this.TM=new mn,this.kM=new mn,this.Au=new du,this.$bt=NaN,this.Qzt=void 0,this.Uzt=!1,this.Gzt=NaN,this.zzt=void 0,this.Nzt=0,this.hXt=(t,e)=>{switch(t){case"buffered":this.pTt=new r(e),this.wo(new xu(this.aP()));break;case"currentProgramDateTime":this.Kzt=new Date(e).getTime()-this.aP();break;case"played":this.$o=new r(e);break;case"seekable":this.Lzt();break;case"videoHeight":this.qzt(void 0,e);break;case"videoWidth":this.qzt(e,void 0)}},this.c$=t=>{switch(t.type){case Uv.$f:this.Xe(t.currentTime);break;case Uv.If:this.Ef();break;case Uv.Gp:this.wo(new _O(t.representation,t.previousRepresentation));break;case Uv.Kp:this.wo(new qL(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Uv.Np:this.wo(new QV(t.currentTime,t.initDataType,t.initData));break;case Uv.Ip:this.wo(new Jc(new ga(X.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Uv.Cp:this.wo(new vu)}},this.qWt=t=>{this.Lzt(),this.Fzt(),this.sh(),this.Hzt(),this.Xzt(),this.Mzt(),this.Czt(),this.Pzt(),this.Jzt(),this.tXt(),this.sXt(),t||CK(this.eWt.Kx)&&this.Ch()},this.Tnt=()=>{this.Xzt(),this.sXt()},this.oXt=t=>{this.wo(t)},this.jzt=Mh((t=>this.H3(t)),50),this.fWt=t=>{this.Qzt=void 0,this.wo(new SQ(t))},this.iXt=()=>{this.Ml()},this.rXt=()=>{this.V7.$R()},this.sa=t,this.lWt=i,this.eWt=s,this.V7=new pK(t,s,e.l7),this.tqt=n.nqt(),this.nf=n.cP()-this.tqt,this.if=n.kP(),this.vW=n.EP(),this.iqt=n.VP(),this.sqt=n.OP(),this.eWt.rWt(this.c$),this.eWt.iWt(this.hXt),this.eWt.oWt(this.qWt),this.eWt.wn(TQ.$Ht,this.oXt),this.eWt.uWt().then((t=>{this.wo(new kQ(t.bt,t.iW))}),this.fWt)}};function CK(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function RK(t,e){for(const i of t.RI)if(i.KI===e)return i}function xK(t,e){let i=!1;for(let s=0;s<t.U;s++){const n=t.DI(s);-1===e.indexOf(n.KI)&&(t.it(n),s--,i=!0)}return i}function DK(t,e){let i=!1;for(const s of t){let t=RK(e,s.trackId);t||(t=new sK(s),e.tt(t),i=!0)}return i}function NK(t,e){for(const i of e.RI)i._qt=Qe(t,i.KI);return!1}t();var BK=class{ml(t){return Promise.resolve("all")}KP(){}bn(){}};t();function MK(t,e,i){if(j(t))return i;if(t===1/0){if("live"===i||"dvr"===i)return i;if(e&&e.length>0){if(e.end(e.length-1)-e.start(0)>60)return"dvr"}return"live"}return"vod"}var LK=[Uv.Df,Uv.Vf,Uv.qu,Uv.Qp,Uv.Ff,Uv.no,Uv.zf,Uv.Xu,Uv.$f,Uv.If,cb.rd,cb.nd,Uv.Gp,Uv.Kp,Uv.Np,Uv.Ip,Uv.Cp],OK=class extends Mi{dW(t){if(!t)return;sn(this.nW&&ko(this.nW),t&&ko(t))||(this.nW=t,this.wo(new Q(t)))}aXt(t){if(!t)return;const e=Gc(t,this.sa.aT);sn(this.ZV&&ko(this.ZV),e&&ko(e))||(this.Da.rqt(0),this.ZV=e,this.wo(new UB(e)),this.Da.eqt())}uXt(t){for(const e of this.rt.RI)if(e.KI===t)return e;for(const e of this.ht.RI)if(e.KI===t)return e}get Iut(){return this.Da}set Iut(t){const e=this.Da;e&&(e.pn(TQ.$Ht,this.oXt),e.pn(TQ.tWt,this.cXt),e.pn(LK,this.Os),e.pn(cb.Lf,this.GF),t.rqt(e.nqt()),e.H7(t.d7())),this.Da=t,this.TM.BI=t.eP(),this.kM.BI=t.FP(),this.Au.BI=t.MP(),this.V7.BI=t.d7(),e&&e.bn(),t.wn(TQ.$Ht,this.oXt),t.wn(TQ.tWt,this.cXt),t.wn(LK,this.Os),t.wn(cb.Lf,this.GF)}get Zh(){return this.io}get l7(){return this.d7()}d7(){return this.V7}f7(){return this.gl}eP(){return this.TM}nP(){return this.Da.nP().ws()}get lXt(){return this.dXt||this.ZV}set lXt(t){this.dXt=t}async On(t,e){var i;t&&await this.XWt(t,null!=(i=t.ads)?i:[],t.streamType,NaN,0,null!=e?e:0)}async fXt(t){var e;const i=null!=(e=this.dXt)?e:this.ZV;if(!i)return;var s;const n=this.dXt?null!=(s=this.dXt.ads)?s:[]:this.ott(),r=this.sa.cP(),h=this.sa.DP(),o=MK(r,h,i.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.t7();await this.XWt(i,n,o,r,a,u)}ott(){const t=new Eu;return this.V7.H7(t),t.ott()}rP(){return this.Da.rP()}oP(){return this.nW}get Yu(){return this.aP()}set Yu(t){this.uP(t)}aP(){return this.Da.aP()}t7(){return this.Da.t7()}uP(t,e){this._Xt||(this.lWt.zWt()||this._Xt||!this.ZV?this.Da.jc(t):this.On(this.ZV,t))}cP(){return this.Da.cP()}dP(){return this.Da.dP()}fP(){return this.$V}_P(){return this.Wl}gP(){return this.SM}yP(){return this.sa.pP}AP(){return this._W}bP(t){this._W=t,this.wo(new Wo(this.Yu,this.Pl)),this.lWt.bP(t)}kP(){return this.Da.kP()}EP(){return this.Da.EP()}$u(t){this.Da.$u(t)}PP(){return this.Da.PP().ws()}CP(){return Ds.vM}RP(t){}xP(){return this.Da.xP()}DP(){return this.Da.DP().ws()}NP(){return this.Da.NP()}BP(){return this.ZV}async _a(t){this.ZV=t,await this.On(t),this.dXt=void 0,this.Da.eqt()}MP(){return this.Au}OP(){return this.Da.OP()}VP(){return this.Da.VP()}FP(){return this.kM}HP(){return this.VA}WP(t){this.VA=t,this.wo(new Wo(this.Yu,this.Pl)),this.lWt.WP(t)}get XP(){return!1}set XP(t){}QP(){}GP(){return this.ia}KP(){}bl(){this.lWt.zWt()||this._Xt||!this.ZV?this.Da.bl():this.On(this.ZV)}Ml(){this.Da.Ml()}lr(){this.io=!0}cr(){this.nW=void 0,this.io=!1}be(){}ke(){}async XWt(t,e,i,s,n,r){this._Xt=!0,this.vXt(),this.Da.rqt(n);const h="live"===i||"dvr"===i,o=function(t,e,i){return{theoplayer_version:1,streamStart:t,isLive:e,sourceDescription:i}}(n,h,t),a={GWt:t,l7:e,Yu:w.max(0,r-n),ct:s,sY:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,QWt:o};try{await this.lWt.XWt(a)}catch(t){this.gXt(t)}finally{this._Xt=!1}}wXt(){this.mXt(this.TM),this.mXt(this.kM),this.pXt(this.Au)}mXt(t){for(const e of t.RI)this.yXt(e);t.wn(ie.nI,(t=>{this.yXt(t.Ht),this.AXt()}))}pXt(t){for(const e of t.RI)this.bXt(e);t.wn(ie.nI,(t=>{this.bXt(t.Ht),this.AXt()}))}yXt(t){t.wn(Gi.oqt,this.d_t),t.wn(Gi.aqt,this.TXt),t.wn(Gi.aqt,this.Pzt)}bXt(t){t.wn(Gi.hqt,this.SXt),t.wn(Gi.hqt,this.Pzt)}kXt(){const t=[];for(const e of this.rt.RI)e.Rt&&t.push(e.KI);for(const e of this.ht.RI)e.Rt&&t.push(e.KI);for(const e of this.nt.RI)e.Tk===Aa.Yn&&t.push(e.KI);this.Da._Wt(t)}EXt(t,e,i){this.PXt=t,this.IXt=e,this.CXt=i}RXt(t){var e,i;if(!t)return!1;return(null!=(i=null==(e=this.lWt.cWt())?void 0:e.version)?i:-1)>=2?t.map((t=>t.o)):[t[0].o]}xXt(t){this.DXt=t}JP(){}$P(){}iI(t){throw new v("Can't add a track while casting.")}async Al(){this.Da.Al(),this.vXt()}vXt(){this.OF=qb.Jl,this.xF=!1,this.BF=!1,this.$V=void 0,this.Wl=void 0}async bn(){this.vXt(),this.Bo(),this.Iut=this.NXt(),this.lWt.pn(Wi.$Ht,this.oXt),this.lWt.pn(Wi.xWt,this.BXt),this.lWt.pn(Wi.Bl,this.MXt),this.lWt.pn(Wi.RWt,this.LXt),this.lWt.pn(Wi.DWt,this.OXt),this.lWt.bn()}NXt(){return new GQ(this,this.Da.nqt(),this.Da.aP(),this.Da.cP(),this.Da.dP(),this.Da.kP(),this.Da.EP(),this.Da.VP(),this.Da.OP())}constructor(t,e){super(t,!0),this.io=!1,this.DXt=De,this.OF=qb.Jl,this.xF=!1,this.BF=!1,this._Xt=!1,this.dXt=void 0,this.$V=void 0,this.Wl=void 0,this.TM=new Ic,this.kM=new Ic,this.Au=new Qt,this.ia=new $e,this.SM=new aa,this.gl=new BK,this.PXt=void 0,this.IXt=void 0,this.CXt=void 0,this.MXt=t=>{var e,i;(Ee(t.Pl)&&!Uu(t.Pl,this.VA,1e-5)||Ee(t.tc)&&t.tc!==this._W)&&(this.VA=null!=(e=t.Pl)?e:this.VA,this._W=null!=(i=t.tc)?i:this._W,this.wo(new Wo(this.Yu,this.VA)))},this.LXt=()=>{const t=this.lWt.zWt();this.Iut=t?new IK(this,this.sa,this.lWt,t,this.Da):this.NXt()},this.cXt=t=>{this.dW(t.bt),this.aXt(t.iW)},this.OXt=t=>{const e=this.uXt(t.Jx);if(!e)return void 0;const i={targetQualityIds:t.BWt};e.lqt(i)},this.oXt=t=>{this.gXt(t.lt)},this.gXt=t=>{this.DXt&&this.DXt(t)},this.BXt=t=>{this.$V=t.lt,this.Wl=Ia(this.$V),this.wo(new _n(this.Wl))},this.TXt=t=>{if(!t.enabled)return;const e=this.rt.RI.some((e=>e.KI===t.trackId))?this.rt:this.ht;for(const i of e.RI)i.Rt&&i.KI!==t.trackId&&(i.Rt=!1)},this.SXt=t=>{if(t.mode===Aa.Yn)for(const e of this.nt.RI)e.Tk===Aa.Yn&&e.KI!==t.trackId&&YS(e.Lt,t.track.Lt)&&(e.Tk=Aa.Th)},this.Pzt=Mh((()=>{this.kXt()}),50),this.AXt=()=>{const t=[];var e;const i=null!=(e=bv(this.ht.RI,(t=>QK(t,this.PXt))))?e:bv(this.ht.RI,(t=>t.Rt));var s;i&&t.push(i.KI);const n=null!=(s=bv(this.nt.RI,(t=>QK(t,this.IXt))))?s:bv(this.nt.RI,(t=>t.Tk===Aa.Yn));var r;n&&t.push(n.KI);const h=null!=(r=bv(this.rt.RI,(t=>QK(t,this.CXt))))?r:bv(this.rt.RI,(t=>t.Rt));h&&t.push(h.KI),0!==t.length&&this.Da._Wt(t)},this.d_t=t=>{const e=this.RXt(t.targetQuality),i=t.track;this.lWt.MWt(i.KI,i.zJ,e)},this.GF=t=>{this.wo(t);const e=t.readyState;!this.xF&&this.OF===qb.Jl&&e>=qb.Qn&&(this.xF=!0,this.wo(new Xb(t.currentTime))),!this.BF&&this.OF<=qb.Qn&&e>=qb.Jf&&(this.BF=!0,this.wo(new Gb(t.currentTime))),this.OF<=qb.Jf&&e>=qb.Cf&&this.wo(new Tt(t.currentTime)),this.OF<=qb.Cf&&e===qb.Ql&&this.wo(new Tn(t.currentTime)),this.OF=e},this.VA=this.sa.Pl,this._W=this.sa.tc,this.lWt=e,this.lWt.wn(Wi.$Ht,this.oXt),this.lWt.wn(Wi.xWt,this.BXt),this.lWt.wn(Wi.Bl,this.MXt),this.lWt.wn(Wi.RWt,this.LXt),this.lWt.wn(Wi.DWt,this.OXt),this.V7=new Nu(this),this.nW=this.sa.bt,this.ZV=this.sa.BP(),this.Iut=new GQ(this,0,this.sa.t7(),this.sa.cP(),this.sa.$c,this.sa.Oc,this.sa.Hu,this.sa.UP,this.sa.LP),this.wXt()}};t();var FK=class extends Cs{ya(){return new UK(this.lt)}constructor(t){super("error"),this.lt=t}},UK=class extends o{constructor(t){super("error"),this.error=t}};t();var VK=class extends o{constructor(t){super("statechange"),this.state=t}};function HK(t,e){let i;return{get casting(){return t.iQ},get error(){return t.lt},get receiverName(){return t.FXt},get state(){return t.Iut},start(){t.Tn()},stop(){t.Al()},join(){t.UXt()},leave(){t.VXt()},set connectionCallback(t){null==e||e.HXt(t)},get connectionCallback(){return null==e?void 0:e.WXt()},get source(){return i||t.iW},set source(e){i=e,t.iW=e},addEventListener(e,i){const s=tc(e,ci);t.wn(s,i)},removeEventListener(e,i){const s=tc(e,ci);t.pn(s,i)}}}t();var WK=class extends S{get iQ(){return this.Iut===D.CONNECTING||this.Iut===D.CONNECTED}get lt(){return this.$V}get ba(){return this.Zu||(this.Zu=HK(this,this.qXt)),this.Zu}get FXt(){var t;return null==(t=this.qXt.zXt())?void 0:t.jWt()}get iW(){return this.sa?this.sa.lXt:this.dXt}set iW(t){this.dXt=t?Gc(t,this.XXt.aT):void 0,this.sa&&(this.sa.lXt=this.dXt,this.dXt&&this.sa.On(this.dXt))}get Iut(){return this.Da}set Iut(t){let e=t;this.GXt||e!==D.CONNECTING&&e!==D.CONNECTED||(e=D.AVAILABLE),this.Da!==e&&(this.Da=e,this.wo(new VK(this.Iut)))}async QXt(){if(!this.KXt)throw new v("Chromecast must be initialized before starting a session");await this.KXt,this.qXt.zXt()||await this.qXt.jXt()}async Tn(){this.GXt=!0;try{if(this.Iut=D.CONNECTING,await this.QXt(),await this.YXt(),this.sa){const t=this.XXt.BP(),e=this.qXt.ZXt(t);this.sa.lXt=e?Gc(e,this.XXt.aT):this.dXt,this.sa.fXt()}this.Iut=D.CONNECTED,await this.XXt.Al()}catch(t){this.JXt(!1).catch(De),this.Iut=D.AVAILABLE,Eh(t)||this.A2(t)}}async UXt(){this.GXt=!0;try{if(this.Iut=D.CONNECTING,await this.QXt(),await this.YXt(),this.sa){const t=this.XXt.BP(),e=this.qXt.$Xt(t);e&&(this.sa.lXt=Gc(e,this.XXt.aT))}this.Iut=D.CONNECTED,await this.XXt.Al()}catch(t){await this.JXt(!0).catch(De),this.Iut=D.AVAILABLE,Eh(t)||this.A2(t)}}async tGt(){this.qXt.zXt()&&await this.Tn()}async YXt(){null!=this.sa||(this.sa=this.eGt()),this.$V=void 0,this.XXt.Ml(),await this.lG.iGt(this.sa)}eGt(){const t=new OK(this.XXt,this.qXt.zXt());return t.xXt(this.A2),t}sGt(){this.sa&&(this.sa.bn(),this.sa=void 0)}async JXt(t){if(this.GXt=!1,!this.sa)return;const e=this.sa.Zh,i=this.sa.BP(),s=this.sa.t7();try{if(e){let e;e=t?this.qXt.nGt(i):this.qXt.rGt(i),null!=e||(e=i),await this.lG.hGt(e,e===i),this.XXt.uP(s),this.XXt.bl()}}finally{this.sGt()}}VXt(){this.iQ&&(this.qXt.oGt(!1),this.JXt(!0).catch(this.A2))}Al(){this.iQ&&(this.qXt.oGt(!0),this.JXt(!1).catch(this.A2))}bn(){this.kF.tf(),this.qXt.pn(zQ.$Wt,this.aGt),this.Bo(),this.sGt()}constructor(t,e,i,s){super(),this.$V=void 0,this.Zu=void 0,this.sa=void 0,this.Da=D.UNAVAILABLE,this.GXt=!1,this.kF=new Mr,this.uGt=()=>{this.qXt.wn(zQ.$Wt,this.aGt),this.Iut=this.qXt.cGt()},this.aGt=t=>{const e=t.Iut;this.Iut=e,e!==D.UNAVAILABLE&&e!==D.AVAILABLE||this.JXt(!1).catch(this.A2)},this.dXt=void 0,this.A2=t=>{Eh(t)||t instanceof Qs&&(this.$V=t,this.wo(new FK(t).ba))},this.lG=t,this.XXt=e,this.qXt=s,this.pl=i.chromecast,this.KXt=qe(this.qXt.yG(this.pl,this.kF.ap),this.kF),this.KXt.then(this.uGt).catch(this.A2)}};t();var qK=class extends S{get iQ(){return!1}get lt(){}get FXt(){}get iW(){}set iW(t){}get Iut(){return D.UNAVAILABLE}get ba(){return this.Zu||(this.Zu=HK(this)),this.Zu}UXt(){Gn.Yw("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}VXt(){Gn.Yw("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Tn(){Gn.Yw("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}Al(){Gn.Yw("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}tGt(){return Promise.resolve()}bn(){}};function zK(t){return{bt:t.bt,Yu:t.aP(),ct:t.cP(),$c:t.$c,lt:t.fP(),Rc:t._P(),tc:t.tc,Oc:t.Oc,Hu:t.Hu,Vc:t.Vc,Uc:t.Uc,LP:t.LP,UP:t.UP,Pl:t.Pl}}t(),t();var XK=class extends Mi{d7(){return this.V7}eP(){return this.TM}get vP(){return this.gP()}gP(){return this.SM}xa(){return this.bM}MP(){return this.Au}FP(){return this.kM}switchContexts(t){this.sa=t,this.TM.BI=t.ht,this.kM.BI=t.rt,this.Au.BI=t.nt,this.bM.BI=t.wH,this.SM.BI=t.vP,this.V7.BI=t.l7}lGt(t){this.sa!==t&&(this.hW(),this.switchContexts(t),this.rW())}EM(t){if(this.sa===t)return;let e;this.hW(),this.m7&&(e=zK(this));const i=this.oP(),s=this.GP(),n=this.QP();if(this.switchContexts(t),void 0!==e){$b(this,e,zK(this))}const r=this.oP();r!==i&&this.wo(new Q(r)),this.GP()!==s&&this.wo(new au),this.QP()!==n&&this.wo(new at),this.rW()}async bn(t){await super.bn(t),this.bM.bn(t),this.TM.bn(t),this.kM.bn(t),this.Au.bn(t),this.SM.bn(),await this.V7.bn(t)}constructor(t,e){super(t,e),this.TM=new Ic,this.kM=new Ic,this.Au=new Qt,this.SM=new _A,this.bM=new Ar(t.wH),this.TM.BI=t.ht,this.kM.BI=t.rt,this.Au.BI=t.nt,this.SM.BI=t.vP,this.V7=new Nu(this),this.V7.BI=t.l7}},GK=class extends XK{BP(){const t=super.BP();return!t&&this.dGt.iQ&&this.dGt.iW?this.dGt.iW:t}_a(t,e){return this.Jo.Xo((e=>(this.fGt=new Mr,this.fGt.lp(e),qe(super._a(t,this.fGt.ap),this.fGt))),e)}bl(){super.bl(),this.aT.cast.strategy!==gA.AUTO||this.dGt.iQ||this.dGt.tGt()}iGt(t){return this.Jo.Xo((e=>this._Gt(t,e)))}hGt(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),this.Jo.Xo((i=>this.vGt(t,e,i)))}_Gt(t,e){Bv(e),this.gGt.l7&&this.gGt.l7.H7(t.l7),this.wGt(),this.mGt=bv(this.gGt.ht.RI,(t=>t.Rt)),this._bt=bv(this.gGt.nt.RI,(t=>"showing"===t.Tk)),this.pGt=bv(this.gGt.rt.RI,(t=>t.Rt)),this.yGt=t,this.yGt.EXt(this.mGt,this._bt,this.pGt),this.EM(t),this.yGt.lr()}async vGt(t,e,i){Bv(i);const s=this.yGt;if(void 0!==s)try{if(t){await this.gGt.Al(),Bv(i);const s=Gc(t,this.gGt.aT);e&&(s.ads=void 0),this.fGt=new Mr,this.fGt.lp(i),await qe(this.gGt._a(s,this.fGt.ap),this.fGt)}e&&this.gGt.l7&&s.l7.H7(this.gGt.l7)}catch(t){wi(t)}finally{s.cr(),this.EM(this.gGt),this.mGt=bv(this.yGt.ht.RI,(t=>t.Rt)),this._bt=bv(this.yGt.nt.RI,(t=>"showing"===t.Tk)),this.pGt=bv(this.yGt.rt.RI,(t=>t.Rt)),this.gGt.ht.wn(ie.nI,this.AGt),this.gGt.nt.wn(ie.nI,this.bGt),this.gGt.rt.wn(ie.nI,this.TGt),this.gGt.wn(cb.xl,this.wGt),this.yGt===s&&(this.yGt=void 0)}}Al(){var t;return this.mGt=void 0,this._bt=void 0,this.pGt=void 0,this.wGt(),null==(t=this.fGt)||t.tf(),this.Jo.Xo((()=>super.Al()))}async bn(){var t;null==(t=this.fGt)||t.tf(),this.dGt.bn(),await this.hGt(),await this.Jo.bn(),await super.bn()}constructor(t,e){super(t),this.Jo=new jn,this.mGt=void 0,this._bt=void 0,this.pGt=void 0,this.AGt=t=>{const e=t.Ht;QK(this.mGt,e)&&(e.Rt=!0)},this.bGt=t=>{const e=t.Ht;QK(this._bt,e)&&(e.Tk=Aa.Yn)},this.TGt=t=>{const e=t.Ht;QK(this.pGt,e)&&(e.Rt=!0)},this.wGt=()=>{this.gGt.ht.pn(ie.nI,this.AGt),this.gGt.nt.pn(ie.nI,this.bGt),this.gGt.rt.pn(ie.nI,this.TGt)},this.gGt=t,this.aT.cast.strategy!==gA.DISABLED?this.dGt=new WK(this,t,this.aT.cast,e):this.dGt=new qK,this.G9.uQ(this.dGt)}};function QK(t,e){return void 0!==t&&void 0!==e&&(t.gs===e.gs&&e._h===t._h)}t();var KK=new class extends Re{HXt(t){this.SGt=t}WXt(){return this.SGt}zXt(){return this.kGt}cGt(){switch(this.EGt.getCastState()){case cast.framework.CastState.CONNECTED:return D.CONNECTED;case cast.framework.CastState.CONNECTING:return D.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return D.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return D.UNAVAILABLE}}async yG(t,e){await AG(e),this.EGt=cast.framework.CastContext.getInstance(),this.EGt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.cQ),this.EGt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async jXt(){try{const t=await this.EGt.requestSession();if(t)throw t}catch(t){throw new Qs(Ns(t))}}ZXt(t){var e;return null==(e=this.SGt)?void 0:e.onStart(t)}rGt(t){var e;return null==(e=this.SGt)?void 0:e.onStop(t)}$Xt(t){var e;return null==(e=this.SGt)?void 0:e.onJoin(t)}nGt(t){var e;return null==(e=this.SGt)?void 0:e.onLeave(t)}oGt(t){this.EGt.endCurrentSession(t)}constructor(...t){super(...t),this.kGt=void 0,this.SGt=void 0,this.cQ=()=>{const t=this.cGt();this.kGt=t===D.CONNECTED?new WQ(this.EGt.getCurrentSession()):void 0,this.wo(new XQ(t))}}},jK=new class{get ba(){return this.Zu||(this.Zu=function(t){return{initialize(e){const i=t.yG(wA(e));return i.catch(De),i},startSession(){const e=t.jXt();return e.catch(De),e},endSession(){t.PGt()}}}(this)),this.Zu}async yG(t){this.KXt||(this.KXt=this.IGt(t)),await this.KXt}async IGt(t){await this.qXt.yG(t)}async jXt(){if(!this.KXt)throw new v("Chromecast must be initialized before starting a session");await this.KXt,this.qXt.zXt()||await this.qXt.jXt()}CGt(){this.qXt.oGt(!1)}PGt(){this.qXt.oGt(!0)}constructor(t){this.KXt=void 0,this.Zu=void 0,this.qXt=t}}(KK),YK={get chromecast(){return jK.ba}};DB((t=>new GK(t,KK)),qt.b7),t(),t(),t(),t(),t(),t(),t();var ZK=class{RGt(t,e,i,s){t.RW.forEach((t=>{if(!this.xGt(t.DGt)){const n=t.NGt(e,i,s);n&&this.BGt(n)}}))}xGt(t){return this.MGt.get(t)}BGt(t){this.MGt.set(t.LGt,t),this.OGt.set(t.LGt,t.FGt),this.UGt._X(t.VGt)}W7(t){this.OGt.has(t.LGt)||(this.OGt.set(t.LGt,t),this.UGt._X(t.VGt))}HGt(t){return this.OGt.forEach(t)}WGt(t){return this.MGt.forEach(t)}qGt(t){let e=!1;return this.MGt.forEach((i=>{e=i.qGt(t)||e})),e}async bn(){const t=[];this.MGt.forEach((e=>t.push(e.bn()))),this.OGt.forEach((e=>t.push(e.bn()))),await Promise.all(t),this.MGt.clear(),this.OGt.clear()}constructor(t){this.UGt=t,this.MGt=sa(),this.OGt=sa()}};t();var sl=class t extends Cs{ya(){return new JK(this.KVt,this.ly,this.Ly,this.iW)}static zGt(e){return new t(bt.GENERAL,e.ly,e.YVt)}static XGt(e,i){return new t(e.KVt,e.message,e.YVt,i)}constructor(t,e,i,s){super("GGt"),this.KVt=t,this.ly=e,this.Ly=i,this.iW=s}},JK=class extends o{constructor(t,e,i,s){super("aderror"),this.problemType=t,this.message=e,this.errorCode=i,this.source=s}},$K=class extends Jt{get QGt(){return this.KGt}get N7(){let t=!1;return this.jGt((e=>{t=t||e.YGt})),t}get B7(){const t=[];return this.jGt((e=>{const i=e.B7;i.length&&t.push(...i)})),t}get L7(){let t=null;return this.jGt((e=>{null!=t||(t=e.L7)})),t}get O7(){const t=[];return this.jGt((e=>{t.push(...e.O7)})),t}get F7(){const t=[];return this.jGt((e=>{t.push(...e.F7)})),t}H7(t){this.jGt((e=>{e.H7(t)}))}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=XB(this)}W1(t,e,i){try{this.ZGt=i;const s=_o.Gg.DW(t);if(s.DGt===Ac.A7)return;const n=this.KGt.xGt(s.DGt);if(!n)throw new Ka(bt.ADBLOCK,void 0,"Ads could not be loaded.");e!==_c.D7&&this.P3||this.$Gt.JGt(n),s.W1(t,e,n,this.ZGt)}catch(e){0,this.wo(sl.XGt(e,t.sources))}}$R(){this.jGt((t=>{t.$R()}))}W7(t){this.KGt.W7(t)}U7(t,e){return this.$Gt.U7(t,e)}tQt(t){this.KGt.WGt((e=>{e.tQt(t)}))}qGt(t){return this.KGt.qGt(t)}jGt(t){return this.KGt.HGt(t)}KP(){this.KGt.WGt((t=>t.KP()))}async sr(){this.P3=!1;const t=[];this.KGt.WGt((e=>t.push(e.Al()))),await Promise.all(t)}async bn(){this.Bo(),await this.KGt.bn(),this.$Gt.pn(Uv.no,this.c9),this.pn("GGt",this.eQt)}constructor(t){super(),this.ZGt=!1,this.P3=!1,this.Zu=void 0,this.eQt=t=>{if(!this.ZGt)return;const e=new Fc(Ja.ADVERTISEMENT_ERROR,t.ly),i=new ke(X.AD_BLOCKER_DETECTED,t.ly+" Turn off your AdBlocker and try again.",e);this.$Gt.UH(i)},this.c9=()=>{this.P3=!0},this.$Gt=t,this.KGt=new ZK(this),this.wn("GGt",this.eQt),t.wn(Uv.no,this.c9)}};t(),t(),t();var vc=class extends oK{get l7(){return this.V7}get pqt(){return this.iQt}set pqt(t){this.iQt=t}get yqt(){return this.sQt}set yqt(t){this.sQt=t}set pPt(t){this.UHt=t}get pPt(){return this.UHt}get QWt(){return this.nQt}rQt(){this.hQt=!0}oQt(t){this.V7.push(t),this.hQt=!1}aQt(t){Ko(this.V7,t)}get Tl(){return this.hQt}constructor(t){super(),this.UHt=t,this.V7=[],this.iQt=-1,this.sQt=-1,this.nQt=void 0,this.hQt=!1}},tj=class extends vc{get MHt(){return this.uQt}get O7(){return this.cQt}Zn(t){void 0!==t.maxDuration&&(this.iQt=t.maxDuration),void 0!==t.customData&&(this.nQt=t.customData)}lQt(t){const e=this.V7.indexOf(t);return e>=0&&e<this.V7.length-1}oQt(t){super.oQt(t),this.cQt.push(t)}dQt(t){Ko(this.cQt,t)}aQt(t){super.aQt(t),Ko(this.cQt,t)}constructor(t,e){super(e.timeOffset),this.cQt=[],this.uQt=t,this.Zn(e)}};t(),t();var Ys=function(t){return t.oHt="linear",t.fQt="nonlinear",t.zS="unknown",t}({}),ej=function(t){return t.NONE="none",t.READY="ready",t}({}),ij=class extends hK{_Qt(t,e,i,s,n,r){this.Wb=t,this.dc=e,this.mc=i,this.nf=s,this.eUt=n,this.JUt=r,this.vQt="ready"}get gQt(){return this.vQt}get tUt(){return this.eUt}get ct(){return this.nf}M7(){var t;return null!=(t=this.Zu)?t:this.Zu=this.ya()}get Ci(){return this.mc}get o(){return this.Wb}get ZUt(){return this.JUt}get Ti(){return this.dc}get wQt(){return this.mQt}get AUt(){return this.bUt}get XFt(){return this.GFt}get xFt(){return this.GUt}get QWt(){return this.nQt}get pQt(){return this.yQt}Lqt(){}Vqt(){return""}Uqt(){return this.AQt}constructor(t,e){super(),this.mQt=e,this.Wb=void 0,this.JUt=void 0,this.dc=void 0,this.mc=void 0,this.nf=void 0,this.GUt=[],this.eUt=[],this.vQt="none",this.nQt=void 0,this.yQt=!1,this.q7=t}};function Rr(t){return{get adSystem(){return t.Lqt()},get readyState(){return t.gQt},get adBreak(){return t.q7.M7()},get duration(){return t.ct},get companions(){return t.tUt.map((t=>t.ba))},get resourceURI(){return t.Uqt()},get clickThrough(){return t.AUt},get width(){return t.Ti},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.wQt)},get height(){return t.Ci},get id(){return t.o},get skipOffset(){return t.ZUt},get integration(){return t.MHt},get creativeId(){return t.XFt},get universalAdIds(){return t.xFt},get customData(){return t.QWt},get isSlate(){return t.pQt}}}t();var sj=class{get dUt(){return this.fUt}get pUt(){return this.yUt}get bQt(){return this.TQt}get AUt(){return this.bUt}get Ci(){return this.mc}get MVt(){return this.AQt}get Ti(){return this.dc}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=function(t){return{get adSlotId(){return t.dUt},get altText(){return t.pUt},get contentHTML(){return t.bQt},get clickThrough(){return t.AUt},get height(){return t.Ci},get resourceURI(){return t.MVt},get width(){return t.Ti}}}(this)}SQt(t){if(t.AUt&&t.MVt)return;const e=function(t){try{return YG(t,"text/html")}catch(t){return}}(t.bQt);e&&(this.bUt=nj(e,"a","href"),this.AQt=nj(e,"img","src"))}constructor(t){var e;this.Zu=void 0,this.bUt=void 0,this.AQt=void 0,this.fUt=t.dUt,this.dc=t.Ti,this.mc=t.Ci,this.TQt=t.bQt,this.bUt=t.AUt,this.AQt=t.MVt,this.yUt=null!=(e=t.pUt)?e:"",this.SQt(t)}};function nj(t,e,i){const s=t.querySelector(e);return s&&s.getAttribute(i)||""}var rj=class extends ij{get MHt(){return this.uQt}get kQt(){return this.EQt}set kQt(t){this.EQt=t}ya(){return Rr(this)}Zn(t){t.id&&(this.Wb=t.id),void 0!==t.skipOffset&&(this.JUt=t.skipOffset),void 0!==t.width&&(this.dc=t.width),void 0!==t.height&&(this.mc=t.height),void 0!==t.duration&&(this.nf=t.duration),void 0!==t.readyState&&(this.vQt=function(t){return"ready"===t?ej.READY:ej.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.AQt=t.resourceURI),void 0!==t.clickThrough&&(this.bUt=t.clickThrough),void 0!==t.companions&&(this.eUt=[...t.companions].map(hj)),void 0!==t.creativeId&&(this.GFt=t.creativeId),void 0!==t.universalAdIds&&(this.GUt=t.universalAdIds),void 0!==t.customData&&(this.nQt=t.customData)}constructor(t,e,i){super(i,function(t){return"linear"===t?Ys.oHt:"nonlinear"===t?Ys.fQt:Ys.zS}(e.type)),this.EQt=0,this.uQt=t,this.Zn(e)}};function hj(t){const e={dUt:t.adSlotId,pUt:t.altText,bQt:t.contentHTML,yS:void 0,AUt:t.clickThrough,Ci:t.height,MVt:t.resourceURI,Ti:t.width};return new sj(e)}t();var ne=class extends Tu{ya(){return new oj(this.G7.M7(),this.PQt)}get PQt(){return this.IQt}constructor(t,e){super("CQt",t),this.IQt=e}},oj=class extends Ra{constructor(t,e){super("adskip",t),this.playedPercentage=e}};t();var aj=class extends Iu{ya(){return new uj(this.q7.M7())}constructor(t){super("RQt",t)}},uj=class extends yu{constructor(t){super("updateadbreak",t)}};t();var cj=class extends Iu{ya(){return new lj(this.q7.M7())}constructor(t){super("xQt",t)}},lj=class extends yu{constructor(t){super("adbreakchange",t)}};t();var cr=class extends Tu{ya(){return new dj(this.G7.M7(),this.currentTime)}constructor(t,e){super("DQt",t),this.currentTime=e}},dj=class extends Ra{constructor(t,e){super("adfirstquartile",t),this.currentTime=e}};t();var fr=class extends Tu{ya(){return new fj(this.G7.M7(),this.currentTime)}constructor(t,e){super("NQt",t),this.currentTime=e}},fj=class extends Ra{constructor(t,e){super("admidpoint",t),this.currentTime=e}};t();var gr=class extends Tu{ya(){return new _j(this.G7.M7(),this.currentTime)}constructor(t,e){super("BQt",t),this.currentTime=e}},_j=class extends Ra{constructor(t,e){super("adthirdquartile",t),this.ad=t,this.currentTime=e}},vj=class{get l7(){return this.V7}get Tqt(){return this.Kqt}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=function(t){return{get integration(){return t.MHt},get ads(){return t.l7.map((t=>t.M7()))},get adBreaks(){return t.Tqt.map((t=>t.M7()))},createAd:(e,i)=>t.MQt(e,i?t.LQt(i):void 0).M7(),updateAd(e,i){t.OQt(t.FQt(e),i)},updateAdProgress(e,i){const s=ht(Number(i),0,1);t.UQt(t.FQt(e),s)},beginAd(e){t.dQt(t.FQt(e))},endAd(e){t.VQt(t.FQt(e))},skipAd(e){t.mWt(t.FQt(e))},removeAd(e){t.aQt(t.FQt(e))},createAdBreak:e=>t.HQt(e).M7(),updateAdBreak(e,i){t.WQt(t.LQt(e),i)},removeAdBreak(e){t.qQt(t.LQt(e))},removeAllAds(){t.zQt()},error(e){t.XQt(e)},fatalError(e,i){const s=i?Number(i):void 0;t.GQt(e,s)}}}(this)}get nD(){return this.E2}set nD(t){this.E2=t}get YGt(){return this.QQt.some((t=>t.wQt===Ys.oHt))}get LGt(){return this.MHt}get B7(){return this.QQt}get L7(){var t;return null!=(t=this.Qqt)?t:null}get O7(){return fn(this.Kqt,(t=>t.O7))}get F7(){return this.Kqt.filter((t=>!t.Tl))}$R(){var t;if(0===this.QQt.length)return;const e=this.QQt[0];(null==(t=this.E2)?void 0:t.skipAd)?this.E2.skipAd(e.M7()):this.mWt(e)}H7(t){}MQt(t,e){var i;const s=null!=e?e:this.KQt({timeOffset:null!=(i=t.timeOffset)?i:0}),n=new rj(this.MHt,t,s);return s.oQt(n),this.V7.push(n),this.VGt.wo(new Mo(n)),n}OQt(t,e){t.Zn(e),this.VGt.wo(new vK(t))}UQt(t,e){if(!Qe(this.QQt,t))throw new v("Cannot update ad progress on a non-started ad");const i=t.kQt,s=w.max(i,e);t.kQt=s;const n=this.$Gt.aP();i<.25&&s>=.25&&this.VGt.wo(new cr(t,n)),i<.5&&s>=.5&&this.VGt.wo(new fr(t,n)),i<.75&&s>=.75&&this.VGt.wo(new gr(t,n))}dQt(t){Qe(this.QQt,t)||(this.QQt.push(t),t.q7.dQt(t),this.jQt(t.q7),this.VGt.wo(new Pe(t,this.$Gt.aP())))}mWt(t){if(!Qe(this.QQt,t))return;const e=t.q7.lQt(t);this.VGt.wo(new ne(t,t.kQt)),this.YQt(t,e)}VQt(t){if(!Qe(this.QQt,t))return;const e=t.q7.lQt(t);this.VGt.wo(new Ls(t,this.$Gt.aP())),this.YQt(t,e)}aQt(t){if(!Qe(this.V7,t))return;const e=t.q7.lQt(t);Ko(this.V7,t),t.q7.aQt(t),this.VGt.wo(new cj(t.q7)),this.YQt(t,e)}HQt(t){const e=new tj(this.MHt,t);return this.Kqt.push(e),this.VGt.wo(new Bo(e)),e}WQt(t,e){t.Zn(e),this.VGt.wo(new aj(t))}qQt(t){if(Qe(this.Kqt,t)){for(const e of t.l7.slice())this.aQt(e);Ko(this.Kqt,t),this.VGt.wo(new Do(t))}}zQt(){for(const t of this.Kqt.slice())this.qQt(t)}XQt(t){this.VGt.wo(new sl(bt.GENERAL,t.message))}GQt(t,e){const i=new ke(null!=e?e:X.AD_ERROR,t.message,t);this.$Gt.UH(i)}ZQt(t){return bv(this.Kqt,(e=>e.pPt===t))}KQt(t){var e;return null!=(e=this.ZQt(t.timeOffset))?e:this.HQt(t)}YQt(t,e){Ko(this.QQt,t);const i=t.q7;0!==this.QQt.length||this.Qqt!==i||e||(i.rQt(),this.jQt(void 0))}jQt(t){this.Qqt!==t&&(void 0!==this.Qqt&&this.VGt.wo(new Li(this.Qqt)),this.Qqt=t,void 0!==t&&this.VGt.wo(new ZB(t)))}FQt(t){const e=bv(this.V7,(e=>e.M7()===t));if(void 0===e)throw new v('Invalid ad for integration "'+this.MHt+'"');return e}LQt(t){const e=bv(this.Kqt,(e=>e.M7()===t));if(void 0===e)throw new v('Invalid ad break for integration "'+this.MHt+'"');return e}async _a(t,e){var i;if(Bv(e),null==(i=this.E2)?void 0:i.setSource){let e=await Promise.resolve(this.E2.setSource(t));return mP(e)&&(e=t),Gc(e,this.$Gt.aT)}return t}async JQt(){var t;(null==(t=this.E2)?void 0:t.resetSource)?await Promise.resolve(this.E2.resetSource()):this.zQt()}async bn(){var t;(null==(t=this.E2)?void 0:t.destroy)&&await Promise.resolve(this.E2.destroy()).catch(De),this.zQt(),this.jQt(void 0),this.E2=void 0,this.VGt.bn()}constructor(t,e){this.VGt=new Jt,this.V7=[],this.Kqt=[],this.QQt=[],this.MHt=t,this.$Gt=e}};t();var gj=class{destroy(){this.removeAdListeners()}get player(){return this.sa}set player(t){this.sa&&this.removeAdListeners(),this.sa=t,this.addAdListeners()}get inAdBreak(){return this.$Qt}addAdListeners(){var t,e;null==(t=this.sa.l7)||t.wn("j7",this.tKt),null==(e=this.sa.l7)||e.wn("K7",this.eKt)}removeAdListeners(){var t,e;null==(t=this.sa.l7)||t.pn("j7",this.tKt),null==(e=this.sa.l7)||e.pn("K7",this.eKt)}constructor(t){this.y3=void 0,this.$Qt=!1,this.tKt=t=>{1!==this.sa.Hu&&(this.y3=this.sa.Hu,this.sa.Hu=1),this.$Qt=!0},this.eKt=t=>{this.$Qt=!1,void 0!==this.y3&&(this.sa.Hu=this.y3,this.y3=void 0)},this.sa=t,this.addAdListeners()}},wj=class extends XK{d7(){return this.iKt}get sKt(){return this.nKt}KP(){this.gGt.KP(),this.iKt.KP()}bl(){void 0===this.$V?(void 0!==this.rKt&&this.hKt(this.rKt),super.bl()):this.wo(new _n(this.$V))}async _a(t,e){Bv(e);let i=t;if(i)for(const t of this.oKt)i=await t._a(i,e);if(await super._a(i,e),Bv(e),null==i?void 0:i.ads){const t=Boolean(i.blockContentIfAdError);this.iKt.tQt(i.playAdsAfterTime);for(const e of i.ads)this.iKt.W1(e,_c.D7,t)}}async Al(){this.$V=void 0,this.EW=void 0,await this.iKt.sr(),this.hGt(),await super.Al();for(const t of this.oKt)await t.JQt()}hKt(t){this.aKt=this.sa.Hu;const e=this.sa.Pl,i=this.sa.tc;t.WP(e),t.bP(i),this.nKt=t,this.rKt=void 0,this.EM(t)}JGt(t){void 0===this.nKt&&(this.rKt=t)}hGt(){this.rKt=void 0,void 0!==this.nKt&&(this.gGt.Hu=this.aKt,this.gGt.Pl=this.Pl,this.gGt.tc=this.tc,this.EM(this.gGt),this.nKt=void 0)}fP(){var t;return null!=(t=this.EW)?t:super.fP()}_P(){var t;return null!=(t=this.$V)?t:super._P()}UH(t){void 0===this._P()&&(this.$V=t,this.EW=Bc(t),this.wo(new _n(t)))}eI(t){return void 0===this.nKt&&this.iKt.qGt(t)}U7(t,e){try{const i=new vj(t,this);i.nD=e(i.ba),this.iKt.W7(i),this.oKt.push(i),t!==Kt.UPLYNK&&(this.uKt=new gj(this))}catch(e){this.iKt.wo(new sl(bt.GENERAL,'Error while constructing ad integration "'+t+'": '+e+'"'))}}$u(t){var e;(null==(e=this.uKt)?void 0:e.inAdBreak)||super.$u(t)}async bn(){var t;for(const t of this.oKt)await t.bn().catch(De);await this.iKt.bn(),this.hGt(),null==(t=this.uKt)||t.destroy(),this.uKt=void 0,await super.bn()}constructor(t,e){super(t),this.oKt=[],this.$V=void 0,this.EW=void 0,this.aKt=1,this.gGt=t,this.iKt=new $K(this),this.iKt.QGt.RGt(e,t,this,t.aT)}};DB((t=>new wj(t,_o.Gg)),qt.y7),t(),t(),t();var mj=0!==ds.vg?ds.vg:ds._v,pj=ds.uv&&mj<12,yj=class extends Mi{get Yu(){return this.aP()}set Yu(t){this.uP(t)}t7(){return this.sa.t7()}get ct(){return this.cP()}get vP(){return this.SM}get Cl(){return this.DP()}get qP(){return this.nH}get VGt(){return this.cKt}get ht(){return this.TM}get YGt(){return this.$Gt.sKt===this}nP(){return r.Ol().ws()}rP(){}hP(t){}EP(){return 1}$u(t){}PP(){return new r([0,this.Yu]).ws()}NP(){return!1}MP(){return this.Au}FP(){return this.kM}cs(){return this.GP().cs}GP(){return this.ia}Ca(){}async bn(){this.Bo(),this.TM.bn(),this.kM.bn(),this.Au.bn(),this.cKt.bn(),this.sa.pn(Uv.Rp,this.Os)}lKt(){pj&&this.dKt(),this.YGt||this.$Gt.hKt(this)}hGt(){this.YGt&&(pj&&this.fKt(),ds.Og&&this.je.querySelectorAll("video[src]").forEach((t=>{t.src=""})),Gn.Zs.pw&&this.sa.$P(),this.$Gt.hGt())}dKt(){this._Kt||(a.addEventListener("blur",this.vKt),a.addEventListener("focus",this.gKt),this._Kt=!0)}fKt(){a.removeEventListener("blur",this.vKt),a.removeEventListener("focus",this.gKt),this._Kt=!1}wKt(){requestAnimationFrame((()=>this.sa.ke()))}constructor(t,e){super(t,!0),this.$Gt=e,this._Kt=!1,this.kM=new mn,this.TM=new mn,this.Au=new du,this.SM=new aa,this.cKt=new Jt,this.ia=new $e,this.nH=new mt,this.vKt=()=>{this.sa.be()},this.gKt=()=>{this.wKt()},this.sa.wn(Uv.Rp,this.Os)}};t(),t();var Aj=0,bj="theoplayer-wrapper",Tj=class t{get mKt(){return this.pKt}get yKt(){return this.AKt}get bKt(){return 1===this.AKt.length&&CQ(this.AKt[0].sources.type)}get TKt(){return this.SKt}kKt(t){const e=this.EKt===t.timeOffset;return!this.PKt&&e}get IKt(){return this.CKt}get RKt(){return NQ(this.xKt)&&!this.PKt}get EKt(){return this.xKt}get gO(){return this.DKt}NKt(){if(j(this.DKt)){let t=this.EKt;if(void 0===t)return void(this.DKt=0);if("string"==typeof t&&NQ(t)){const e=this.sa.cP();j(e)||e===1/0||(t=DG(t)*e)}j(t)||(this.DKt=t)}}get BKt(){return this.MKt}set BKt(t){this.MKt=t}get LKt(){return this.OKt}set LKt(t){this.OKt=t,this.FKt=!1}get UKt(){return this.VKt}HKt(t){this.VKt.push(t)}WKt(){if(!this.PKt){let t,e,i=this.pKt===_c.D7&&void 0===this.qKt&&1===this.AKt.length;const s=this.AKt[0];if(!i&&1===this.AKt.length){const t=Gn.Ih(s.sources.src).searchParams.get("output");t&&t.toLowerCase().indexOf("vmap")>-1&&(i=!0,void 0!==this.qKt&&un("Do not set a timeOffset for VMAP ad sources. VMAP ads have their own offsets included."))}if(CQ(s.sources.type)||i)t=s.sources.src;else{if(j(this.sa.cP())&&"end"===this.zKt())return;e=this.XKt()}let n=this.sa.cP();(j(n)||n===1/0)&&(n=-3),this.PKt={GKt:this.sa.je.offsetWidth,QKt:this.sa.je.offsetHeight,KKt:this.sa.je.offsetWidth,jKt:this.sa.je.offsetHeight,YKt:this.Hl,ZKt:this._W,JKt:t,$Kt:e,tjt:s.omidAccessModeRules,ejt:n}}return this.PKt}XKt(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.AKt.map(((t,e)=>this.ijt(t.sources,e))).join("\n")+"</vmap:VMAP>"}ijt(t,e){const i=this.zKt(),s=t.src;return'<vmap:AdBreak timeOffset="'+i+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.KI+"-"+e+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+bj+"-"+this.KI+"-"+e+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}zKt(){if(0===this.EKt)return"start";if(this.EKt===1/0)return"end";const t=this.EKt;if("string"==typeof t&&NQ(t)){const e=DG(t)*this.sa.cP();return Va.DHt(e)}return Va.DHt(this.EKt||0)}sjt(t){this.AKt.push(t)}njt(t){const e=bj+"-"+this.KI+"-";for(const i of t)if(Kc(i,e)){const t=Number(i.slice(e.length));if(!j(t)&&t>=0&&t<this.AKt.length)return t}return-1}static rjt(t){if(void 0!==t)return-1===t?1/0:t}hjt(){this.CKt=!0}get vl(){return this.Hl}set vl(t){this.Hl=t}get tc(){return this._W}set tc(t){this._W=t}constructor(e,i,s,n){this.pKt=i,this.sa=s,this.SKt=n,this.DKt=NaN,this.MKt=!1,this.OKt=!1,this.CKt=!1,this.VKt=[],this.Hl=!1,this._W=!1,this.AKt=[],this.KI=++Aj,this.qKt=e.timeOffset,this.xKt=t.rjt(this.qKt),this.NKt(),this.AKt.push(e)}};t();var Sj=class{get ojt(){return this.ajt.ojt}get ujt(){return this.ajt.ujt}get O7(){return this.ajt.O7}get t(){return this.ajt.t}tQt(t){this.cjt=t}ljt(t){return!(this.ojt&&!this.ojt.IKt&&"nonlinear"!==this.ujt.wQt)||this.ojt.gO>t.gO&&this.ojt.gO!==t.gO}djt(t){if(t.length)return t.sort(((t,e)=>t.gO-e.gO))[0]}fjt(){if(this.O7.length)return this.djt(this._jt(this.t.aP()))}vjt(){if(!(void 0!==this.cjt&&this.cjt>=0))return this.O7.filter((t=>!t.BKt&&0===t.gO&&t!==this.ojt))[0]}_jt(t){if(!this.gjt&&(this.gjt=!this.O7.some((t=>j(t.gO))),!this.gjt))return[];const e=this.O7.filter((e=>!e.BKt&&(e.bKt||!j(e.gO)&&t<=e.gO)));return void 0===this.cjt?e:e.filter((t=>t.bKt||void 0===t.EKt||t.gO>this.cjt))}constructor(t){this.gjt=!1,this.ajt=t,this.cjt=void 0}},kj=function(t){return t[t.wjt=0]="wjt",t[t.mjt=1]="mjt",t[t.pjt=2]="pjt",t}({}),Ej=class{KP(){this.vo=!0,this.yjt&&this.Ajt()}bjt(t,e){this.Tjt(t,e);const i=bv(this.O7,(e=>e.kKt(t)));if(i)i.sjt(t);else{var s;const i=new Tj(t,e,this.sa,null==(s=t.replaceContent)||s);this.cQt.push(i),2===this.Sjt&&this.kjt.HQt(i.gO,i,i.EKt),this.Ejt(e,i)}}get ujt(){return this.Pjt}get O7(){return this.cQt}get t(){return this.sa}get fMt(){return Boolean(this.o_t)}get Sjt(){return this.Ijt}Cjt(){if(Ko(this.O7,this.ojt),this.ojt){for(const t of this.ojt.UKt)this.kjt.Rjt();this.ojt=void 0}}xjt(){for(const t of this.cQt)for(const e of t.UKt)this.kjt.Djt(e,!0);us(this.cQt)}async Njt(t){this.Cjt(),this.Bjt=!0,this.ojt=t,this.Mjt=t.gO,this.o_t=this.Ljt(t),await this.o_t,this.o_t=void 0}async Ljt(t){this.Ojt(t);const e=t.WKt();if(!e)return this.Bjt=!1,void(this.ojt=void 0);const i=this.Pjt.Fjt(e);t.BKt=!0;try{await i,t.mKt===_c.x7&&this.Pjt.Ujt()}catch(t){0,this.ojt=void 0,await this.Ajt()}}Ojt(t){this.vo?t.vl=!0:t.vl=this.$Gt.vl,t.tc=this.$Gt.tc}Vjt(){var t;return null!=(t=this.Hjt.vjt())?t:this.Hjt.fjt()}async Ajt(){if(this.ojt&&!this.ojt.IKt)return this.o_t;const t=this.Vjt();t&&await this.Njt(t)}get ojt(){return this.Wjt}set ojt(t){this.Wjt=t}get Bjt(){return this.qjt}set Bjt(t){this.qjt=t}sr(){this.Cjt(),us(this.cQt),this.Mjt=0,this.ojt=void 0,this.o_t=void 0,this.Bjt=!1}LKt(){this.Bjt=!1,this.ojt&&(this.ojt.LKt=!0)}async Ejt(t,e){t===_c.x7&&this.vo&&this.Hjt.ljt(e)&&!this.fMt&&"linear"!==this.Pjt.wQt&&(!this.ojt||this.ojt&&this.ojt.BKt)&&(await Promise.resolve(),await this.Njt(e))}hjt(){this.ojt&&this.ojt.hjt()}get zjt(){if(this.fMt||this.Bjt)return!1;if(this.ojt&&!this.ojt.IKt)return!1;return!!this.cQt.filter((t=>this.ojt!==t)).length&&Boolean(this.Vjt())}async Xjt(){if(!this.zjt)return void 0;const t=this.Vjt();t&&await this.Njt(t)}Tjt(t,e){const i=t.sources.type,s=e===_c.D7&&void 0===t.timeOffset,n=CQ(i)||s?1:2;n!==this.Ijt&&(this.Ijt=n,this.xjt(),this.Pjt.Aqt&&!this.fMt&&"linear"!==this.Pjt.wQt&&(this.Pjt.Aqt.Wu(),this.ojt=void 0,this.o_t=void 0),this.Mjt=0,this.yjt=!0)}tQt(t){this.Hjt.tQt(t)}bn(){this.sa.pn(Uv.Vf,this.Uf)}constructor(t,e,i,s,n){this.Ijt=0,this.o_t=void 0,this.qjt=!1,this.Uf=()=>{const t=this.cQt.filter((t=>t.RKt));for(const e of t){e.NKt();const t=e.EKt;this.kjt.Gjt(t,e.gO)}this.vo&&this.zjt&&this.Ajt()},this.cQt=[],this.Pjt=t,this.vo=!1,this.yjt=!1,this.sa=e,this.$Gt=i,this.ojt=void 0,this.Mjt=0,this.Hjt=new Sj(this),this.gl=s,this.kjt=n,this.sa.wn(Uv.Vf,this.Uf)}};t(),t();var Ii=function(t){return t.Qjt="contentResumeRequested",t.Kjt="contentPauseRequested",t.jjt="click",t.Vf="durationChange",t.Yjt="expandedChanged",t.Zjt="start",t.Jjt="impression",t.$jt="pause",t.tYt="resume",t.eYt="adProgress",t.iYt="adBuffering",t.sYt="firstQuartile",t.gVt="midpoint",t.nYt="thirdQuartile",t.wVt="complete",t.rYt="userClose",t.hYt="linearChanged",t.oYt="loaded",t.aYt="adCanPlay",t.uYt="adMetadata",t.cYt="adBreakReady",t.lYt="interaction",t.dYt="allAdsCompleted",t.fYt="skip",t._Yt="skippableStateChanged",t.vYt="log",t.gYt="viewableImpression",t.wYt="volumeChange",t.mYt="mute",t}({});t();var Pj=function(t){return t.pYt="adError",t}({});t();var Ij=function(t){return t[t.yYt=-1]="yYt",t[t.AYt=-1]="AYt",t[t.bYt=-1]="bYt",t[t.TYt=101]="TYt",t[t.SYt=102]="SYt",t[t.kYt=200]="kYt",t[t.EYt=201]="EYt",t[t.PYt=202]="PYt",t[t.IYt=300]="IYt",t[t.CYt=301]="CYt",t[t.RYt=302]="RYt",t[t.xYt=303]="xYt",t[t.DYt=400]="DYt",t[t.NYt=402]="NYt",t[t.BYt=403]="BYt",t[t.MYt=405]="MYt",t[t.LYt=500]="LYt",t[t.OYt=501]="OYt",t[t.FYt=-1]="FYt",t[t.UYt=503]="UYt",t[t.VYt=602]="VYt",t[t.HYt=900]="HYt",t[t.WYt=901]="WYt",t[t.qYt=1005]="qYt",t[t.zYt=1007]="zYt",t[t.XYt=1009]="XYt",t[t.GYt=1010]="GYt",t[t.QYt=1011]="QYt",t[t.KYt=1012]="KYt",t[t.jYt=1013]="jYt",t[t.YYt=1020]="YYt",t[t.ZYt=1021]="ZYt",t[t.JYt=1101]="JYt",t[t.$Yt=1204]="$Yt",t[t.tZt=1205]="tZt",t[t.eZt=1300]="eZt",t[t.iZt=-1]="iZt",t[t.sZt=-1]="sZt",t[t.nZt=-1]="nZt",t[t.rZt=-1]="rZt",t}({}),Cj=function(t){return t.hZt="adLoadError",t.oZt="adPlayError",t}({});function Rj(t,e){if(t===Ii.eYt){const t=e;return{aZt:t.adBreakDuration,uZt:t.adPosition,Yu:t.currentTime,ct:t.duration,cZt:t.totalAds}}return e}function xj(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return Cj.hZt;case google.ima.AdError.Type.AD_PLAY:return Cj.oZt}}function Dj(t){return nh(t)&&sh(t.getVastErrorCode)}function Nj(t){const e=t.getInnerError(),i=e&&Dj(e)?Nj(e):void 0;return{ly:t.getMessage(),YVt:t.getErrorCode(),lZt:t.getVastErrorCode(),Vm:xj(t.getType()),dZt:i}}function Bj(t){if(Ee(t))return t}t(),t();var Mj=class extends Re{fZt(t){this.Pjt.wo(t)}_Zt(t){this.bqt=t,this.bqt.wn(Pj.pYt,this.vZt),this.bqt.wn(Ii.Kjt,this.gZt),this.bqt.wn(Ii.Qjt,this.wZt),this.bqt.wn(Ii.dYt,this.mZt),this.bqt.wn(Ii.Zjt,this.pZt),this.bqt.wn(Ii.wVt,this.yZt),this.bqt.wn(Ii.fYt,this.AZt),this.bqt.wn(Ii.rYt,this.bZt),this.bqt.wn(Ii.jjt,this.TZt),this.bqt.wn(Ii.aYt,this.SZt),this.bqt.wn(Ii.$jt,(()=>{this.Pjt.Oc||(this.Pjt.kZt(!0),this.Pjt.wo(new ac(this.Pjt.Yu))),this.EZt(!0)})),this.bqt.wn(Ii.tYt,(()=>{this.Pjt.Oc&&(this.Pjt.kZt(!1),this.Pjt.wo(new ah(this.Pjt.Yu)))})),this.bqt.wn(Ii.mYt,(()=>{const e=t.HP();e>=0&&this.PZt(e)})),this.bqt.wn(Ii.wYt,(()=>{const e=t.HP();e>=0&&this.PZt(e)})),this.bqt.wn(Ii.uYt,(t=>{this.CZt.IZt(t.type)})),this.bqt.wn(Ii.Vf,(t=>{t.G7&&this.RZt(t.G7.ct)})),this.bqt.wn(Ii.vYt,(async t=>{const e=t.xZt.adError,i=Dj(e)?Nj(e):void 0;i&&(this.DZt(i)?await this.NZt(t):this.BZt(i)?await this.MZt(i):this.LZt(i)&&this.OZt(i))})),this.bqt.wn(Ii.oYt,(t=>{if(t.G7&&(this.Pjt.LKt(),this.CZt.FZt(t.G7),this.UZt=0,t.G7.VZt)){var e;const t=this.Pjt.Vc,i=qb.Jl;this.Pjt.h0(i);const s=this.Pjt.Yu,n=this.Pjt.Vc;n!==t&&this.fZt(new zb(s,n)),null==(e=this.bqt)||e.WP(this.Pjt.HZt()),this.fZt(new Xb(s,i))}})),this.bqt.wn([Ii.iYt,Ii.Jjt,Ii.sYt,Ii.gVt,Ii.nYt],(t=>{t.G7&&this.CZt.WZt(t.G7,t.type,this.Pjt.Yu)})),this.bqt.wn(Ii.sYt,this.qZt),this.bqt.wn(Ii.eYt,this.zZt)}async switchToPlayerIfNoNextAd(){if(this.bqt){const t=this.bqt.XZt();t&&this.GZt(t)||(this.Pjt.zjt()?await this.Pjt.Xjt():(this.Pjt.QZt(),this.sa.Oc&&!this.sa.$c&&this.sa.bl()))}else if(this.Pjt.zjt())await this.Pjt.Xjt();else{const t=this.Pjt.Oc;this.Pjt.QZt(),t||this.sa.bl()}}GZt(t){const e=t.KZt,i=null==e?void 0:e.cZt;return(null==e?void 0:e.uZt)!==i}tm(){this.Pjt.jZt&&(ll(this.Pjt.jZt),this.Pjt.jZt=null)}LZt(t){return t.Vm===Cj.hZt}BZt(t){return t.Vm===Cj.oZt}DZt(t){return t.YVt===Ij.XYt}async MZt(t){var e;this.OZt(t);const i=[Ij.DYt,Ij.WYt,Ij.ZYt,Ij.tZt];var s;this.Pjt.stt||Qe(i,t.YVt)||Qe(i,null==(e=t.dZt)?void 0:e.YVt)||(this.Pjt.YZt.Bjt=!1,null==(s=this.Pjt.YZt.ojt)||s.hjt(),await this.switchToPlayerIfNoNextAd())}OZt(t){this.Pjt.XQt(t)}async ZZt(){this.CZt.Rjt(),this.Pjt.hjt(),"nonlinear"===this.Pjt.wQt&&(this.CZt.JZt(-1,!1),this.Pjt.$Zt(void 0)),"nonlinear"!==this.Pjt.wQt&&"none"!==this.Pjt.wQt||this.Pjt.zjt()&&await this.Pjt.Xjt(),this.Pjt.tJt(),this.Pjt.YGt?this.Pjt.hGt():this.eJt()&&this.sa.wo(new Zu(this.sa.aP()))}eJt(){return this.Pjt.iJt&&!this.Pjt.sJt&&this.sa.$c}setCountdownTimer(){this.tm(),this.Pjt.jZt=cl((()=>this.EZt()),250)}async NZt(t){void 0!==t.G7&&(this.Pjt.YZt.Bjt=!1,this.Pjt.hjt(),this.Pjt.zjt()?await this.Pjt.Xjt():this.Pjt.kZt(!0))}RZt(t){this.Pjt.ct!==t&&t>=0&&(this.Pjt.F$(t),this.fZt(new de(this.Pjt.ct)))}PZt(t){this.Pjt.HZt()!==t&&(0===t?this.Pjt.nJt(t,!0,!1):this.Pjt.nJt(t,!1,!1))}async rJt(){this.Pjt.hJt&&void 0!==this.sa.fP()&&(this.oJt=new Mr,await qe(this.sa._a(this.sa.BP(),this.oJt.ap),this.oJt),this.aJt&&this.sa.uP(this.aJt),this.aJt=void 0)}EZt(t){if(this.bqt){const t=this.bqt.uJt();t>this.Pjt.ct&&this.RZt(w.round(t))}const e=this.Pjt.Yu;(t||!this.Pjt.Oc&&e!==this.Pjt.cJt)&&(this.Pjt.wo(new Ph(e,void 0)),this.Pjt.cJt=e)}sr(){this.oJt&&(this.oJt.tf(),this.oJt=void 0),this.lJt=!1,this.UZt=0}bn(){this.sr(),this.Bo()}constructor(t,e,i){super(),this.Pjt=t,this.sa=e,this.CZt=i,this.lJt=!1,this.oJt=void 0,this.aJt=void 0,this.UZt=0,this.qZt=t=>{if(!t.G7||!t.G7.KZt)return;const e=t.G7.KZt;this.CZt.WQt(e.pPt,e.cZt,e.pqt)},this.zZt=t=>{var e,i,s;if(this.UZt>=5)return;this.UZt++;const n=t.xZt;if(!function(t){return nh(t)&&void 0!==t.aZt&&void 0!==t.cZt}(n))return;const r=null==(s=this.bqt)||null==(i=s.XZt())||null==(e=i.KZt)?void 0:e.pPt;void 0!==r&&this.CZt.WQt(r,n.cZt,n.aZt)},this.vZt=async t=>{t.xZt.dJt&&await this.MZt(t.xZt.dJt)},this.mZt=async()=>{this.lJt=!0,this.Pjt.hjt(),await this.wZt()},this.pZt=t=>{if(!t.G7)return;const e=t.G7;this.Pjt.$Zt(e),this.Pjt.be(),this.Pjt.fJt(),this.Pjt._Jt=!0,this.CZt.vJt(e);const i=e.ct;if(this.RZt(i),e.VZt){const t=this.Pjt.Yu,e=this.Pjt.Vc;this.Pjt.h0(qb.Cf),this.fZt(new Gb(t,e)),this.fZt(new Tt(t,e)),this.fZt(new Tn(t,e)),this.Pjt.Oc||this.fZt(new $n(this.Pjt.Yu)),this.setCountdownTimer(),this.EZt(!0)}else this.Pjt.hGt(),this.sa.be(),this.Pjt.Oc||this.sa.bl()},this.yZt=t=>{var e;if(!t.G7)return;const i=t.G7;if(this.tm(),this.CZt.JZt(this.Pjt.ct,i.VZt),this.Pjt.Vc!==qb.Jl){const t=qb.Jl;this.Pjt.h0(t);const e=this.Pjt.Yu;this.fZt(new zb(e,t))}this.RZt(NaN),this.Pjt._Jt=!1,null==(e=this.bqt)||e.WP(this.Pjt.HZt())},this.AZt=t=>{t.G7&&(this.yZt(t),this.CZt.AZt(t.G7,this.Pjt.Yu,this.Pjt.ct))},this.bZt=t=>{t.G7&&(this.CZt.JZt(-1,t.G7.VZt),this.Pjt.hjt(),!t.G7.VZt&&this.Pjt.zjt()&&this.Pjt.Xjt())},this.TZt=t=>{t.G7&&(t.G7.VZt?this.Pjt.Ml():this.sa.Ml())},this.SZt=()=>{var t;(this.Pjt._Jt=!0,this.Pjt.gJt)&&(null==(t=this.bqt)||t.Ml(),this.Pjt.gJt=!1)},this.gZt=t=>{var e;if(!t.G7)return;this.Pjt.hJt&&(this.aJt=this.sa.aP(),this.sa.JP(),this.sa.XP=!0),this.Pjt.wJt=!0;const i=t.G7;this.CZt.tKt(i);const s=i.ct;this.Pjt.$Zt(i),this.RZt(s),this.Pjt.kZt(!1),this.Pjt.be(),this.Pjt.lKt(),this.Pjt.hJt||this.sa.ke(),this.sa.Ml(),this.Pjt.mJt(i);0===(null==(e=i.KZt)?void 0:e.pPt)||this.Pjt.wo(new zt(this.Pjt.Yu))},this.wZt=async t=>{const e=null==t?void 0:t.G7;this.Pjt.wJt=!1,"linear"===this.Pjt.wQt&&this.CZt.eKt(),e&&e.ct>=0&&this.RZt(e.ct),this.sa.cP()===1/0&&this.Pjt.pJt(),this.Pjt._Jt=!1,this.lJt&&await this.ZZt(),this.Pjt.kZt(!0);try{await this.rJt()}catch(t){return void(Eh(t)||this.wo(new zs(t)))}if(this.Pjt.hGt(),this.Pjt.ke(),this.sa.$c||this.sa.bl(),e&&this.Pjt.$Zt(e),this.Pjt.iJt){if(this.Pjt.hJt){var i;const t=this.sa.QP(),e=null==(i=this.sa.bt)?void 0:i.src;t&&e&&(t.src=e)}this.Pjt.sJt=!0}this.sa.XP=!1,this.Pjt.zjt()&&await this.Pjt.Xjt()}}};t(),t();var Lj=class extends vc{get MHt(){return Ac.Wqt}constructor(t,e,i){super(t),this.yJt=e,this.AJt=i}};t(),t(),t();var Oj=class extends ij{ya(){return function(t,e){return Xe(t,{get adSystem(){return e.Lqt()},get apiFramework(){return e.bJt},get bitrate(){return e.TJt},get contentType(){return e.yS},get creativeId(){return e.XFt},get description(){return e.cD},get mediaUrl(){return e.tVt},get title(){return e.cH},get traffickingParameters(){return e.SJt},get traffickingParametersString(){return e.kJt},get wrapperAdIds(){return e.EJt},get wrapperAdSystems(){return e.PJt},get wrapperCreativeIds(){return e.IJt},get universalAdIds(){return e.xFt}})}(Rr(this),this)}CJt(t){this.RJt=t,this._Qt(t.UUt,t.xJt,t.DJt,t.ct,function(t){return t.CFt.map((t=>new sj(t)))}(t),t.NJt),this.mQt=t.VZt?Ys.oHt:Ys.fQt}get MHt(){return Ac.Wqt}Lqt(){return this.RJt?$r(this.RJt.yFt):void 0}get bJt(){return this.RJt?$r(this.RJt.cUt):void 0}get TJt(){return this.RJt?this.RJt.BJt:0}get yS(){return this.RJt?$r(this.RJt.yS):void 0}get XFt(){return this.RJt?$r(this.RJt.XFt):void 0}get MJt(){return this.RJt?$r(this.RJt.MJt):void 0}get cD(){var t;return null==(t=this.RJt)?void 0:t.cD}get tVt(){var t;const e=null==(t=this.RJt)?void 0:t.tVt;return Ee(e)?e:this.eVt}set tVt(t){this.eVt=t}get cH(){var t;return null==(t=this.RJt)?void 0:t.cH}get SJt(){return this.RJt?$r(this.RJt.SJt):void 0}get kJt(){return this.RJt?$r(this.RJt.kJt):void 0}get EJt(){var t,e;return null!=(e=null==(t=this.RJt)?void 0:t.EJt)?e:[]}get PJt(){var t,e;return null!=(e=null==(t=this.RJt)?void 0:t.PJt)?e:[]}get IJt(){var t,e;return null!=(e=null==(t=this.RJt)?void 0:t.IJt)?e:[]}get xFt(){var t,e;return null!=(e=null==(t=this.RJt)?void 0:t.xFt.map((t=>({adIdRegistry:t.LJt,adIdValue:t.OJt}))))?e:[]}constructor(t){super(t,Ys.zS),this.RJt=void 0,this.eVt=void 0}};function $r(t){return null===t?void 0:t}t(),t();var Fj=class{get VGt(){return this.CZt.VGt}get LGt(){return this.FJt}get YGt(){return this.CZt.YGt}get L7(){var t;return null!=(t=this.CZt.L7)?t:null}get B7(){const t=this.CZt.UJt;return t?[t]:[]}get O7(){return this.CZt.O7}get F7(){return this.CZt.F7}H7(t){this.CZt.H7(t)}$R(){this.CZt.$R()}bn(){return Promise.resolve()}constructor(t,e){this.CZt=t,this.FJt=e}},Uj=class{get VJt(){return this.HJt}get VGt(){return this.cKt}get YGt(){return this.WJt}get UJt(){return this.Oqt}get L7(){return this.Qqt}get O7(){return fn(this.Kqt,(t=>{if(t.Tl)return[];const e=t.l7;if(t===this.Qqt&&void 0!==this.Oqt){const t=e.indexOf(this.Oqt);if(t>=0)return e.slice(t+1)}return e}))}get F7(){return this.Kqt.filter((t=>!t.Tl))}constructor(t,e){this.cKt=t,this.Kqt=[],this.WJt=!1,this.HJt=new Fj(this,e)}};t();var Vj=class extends Tu{ya(){return new Hj(this.G7.M7())}constructor(t){super("qJt",t)}},Hj=class extends Ra{constructor(t){super("adimpression",t)}};t();var Wj=class extends Cs{ya(){return new qj(this.G7.M7())}constructor(t){super("zJt"),this.G7=t}},qj=class extends o{constructor(t){super("adbuffering"),this.ad=t}};t();var zj=class extends Cs{ya(){return new Xj}constructor(){super("XJt")}},Xj=class extends o{constructor(){super("admetadata")}},Gj=class t extends Uj{GJt(t,e){for(let i=0;i<t;i++){const t=new Oj(e);e.oQt(t),this.VGt.wo(new Mo(t))}}HQt(t,e,i){let s=t;s===1/0&&(s=-1);const n=new Lj(s,i,e);this.Kqt.push(n),e.HKt(n),this.VGt.wo(new Bo(n))}Gjt(t,e){for(const i of this.Kqt)j(i.pPt)&&i.yJt===t&&(i.pPt=e,this.VGt.wo(new aj(i)))}Djt(t,e){void 0===e&&(e=!1),e&&Ko(this.Kqt,t),this.VGt.wo(new Do(t))}Rjt(){if(this.L7){this.Djt(this.L7,!0);const t=Boolean(this.Oqt&&this.Oqt.wQt===Ys.oHt);this.QJt(void 0,t)}}OQt(t,e){const i=e.KZt;if(!i)return;const s=i.uZt-1,n=t.l7[s];return n.CJt(e),this.VGt.wo(new vK(n)),n.q7.pqt=i.pqt,n}get YGt(){return this.KJt.YGt}jJt(t){if(!Qe(this.YJt,t)){if(t){if(this.Oqt===t)return;this.Oqt=t;for(const e of this.ZJt)this.IZt(e,t,this.KJt.Yu)}else{if(!this.Oqt)return;const t=new Ls(this.Oqt,this.Oqt.q7.pPt);this.YJt.push(this.Oqt),this.Oqt=void 0,this.cKt.wo(t)}us(this.ZJt)}}QJt(t,e){if(t){var i;if((null==(i=this.L7)?void 0:i.pPt)===t.pPt)return;this.Qqt=t,e&&this.VGt.wo(new ZB(this.Qqt))}else{if(!this.Qqt)return;const t=new Li(this.Qqt);this.Qqt=void 0,us(this.YJt),e&&this.cKt.wo(t)}}JJt(t){return this.Kqt.filter((e=>Uu(e.pPt,t,.01)))[0]}static $Jt(t,e){if(e.KZt)return t.l7[e.KZt.uZt-1]}tKt(t){if(!t.KZt)return;const e=t.KZt,i=this.JJt(e.pPt);i&&(us(this.ZJt),this.QJt(i,t.VZt))}eKt(){this.L7&&this.VGt.wo(new Li(this.L7)),us(this.ZJt),this.Rjt()}vJt(e){if(!this.Qqt&&e.KZt){const t=this.JJt(e.KZt.pPt);this.QJt(t,e.VZt)}if(this.Qqt){const i=t.$Jt(this.Qqt,e);if(!i)return;this.OQt(this.Qqt,e);const s=e.tVt;Ee(s)&&!Ee(i.tVt)&&(i.tVt=s,this.VGt.wo(new vK(i))),this.jJt(i),this.VGt.wo(new Pe(this.Oqt,i.q7.pPt))}else 0}JZt(t,e){if(this.jJt(void 0),!e&&this.L7){const t=this.L7;this.QJt(void 0,!1),this.Djt(t)}}FZt(t){const e=t.KZt;if(!e)return;const i=this.JJt(e.pPt);if(!i)return;this.WQt(e.pPt,e.cZt,e.pqt);const s=this.OQt(i,t);s&&this.VGt.wo(new wK(s))}WQt(t,e,i){const s=this.JJt(t);if(!s)return;const n=s.l7.length;if(e>n){const t=e-n;this.GJt(t,s),s.pqt=i,this.VGt.wo(new aj(s))}}AZt(e,i,s){if(!this.Qqt)return;const n=t.$Jt(this.Qqt,e);if(n){const t=i/s;this.VGt.wo(new ne(n,t))}}WZt(e,i,s){if(!this.Qqt)return;let n=this.Oqt;if(!n){const s=t.$Jt(this.Qqt,e);if(!s||Qe(this.YJt,s))return void this.ZJt.push(i);n=s,this.OQt(this.Qqt,e),this.jJt(n)}this.IZt(i,n,s)}IZt(t,e,i){t===Ii.uYt?this.VGt.wo(new zj):t===Ii.Jjt&&e?this.VGt.wo(new Vj(e)):t===Ii.iYt&&e?this.VGt.wo(new Wj(e)):t===Ii.sYt&&e&&i?this.VGt.wo(new cr(e,i)):t===Ii.gVt&&e&&i?this.VGt.wo(new fr(e,i)):t===Ii.nYt&&e&&i&&this.VGt.wo(new gr(e,i))}$R(){this.KJt.$R()}H7(t){this.KJt.H7(t)}sr(){const t=Boolean(this.Oqt&&this.Oqt.wQt===Ys.oHt);this.jJt(void 0),this.QJt(void 0,t);for(const t of this.Kqt)this.Djt(t);us(this.Kqt),us(this.ZJt),us(this.YJt)}bn(){this.sr()}constructor(t,e){super(t,Ac.Wqt),this.KJt=e,this.ZJt=[],this.YJt=[]}};function Qj(t){const e=a.google.ima.settings;t.ads&&t.ads.vpaidMode&&a.google.ima.settings.setVpaidMode(function(t){const e=a.google.ima.ImaSdkSettings.VpaidMode;switch(t){case Bn.ENABLED:return e.ENABLED;case Bn.INSECURE:return e.INSECURE;case Bn.DISABLED:default:return e.DISABLED}}(t.ads.vpaidMode)),e.setPlayerVersion("9.0.0"),e.setPlayerType("THEOplayer"),e.setAutoPlayAdBreaks(!0),e.setDisableCustomPlaybackForIOS10Plus(!Kj(t));const i=function(t){var e,i,s;const n=null==(i=t.ads)||null==(e=i.googleIma)?void 0:e.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Sc(r))return r;return}(t);i&&e.setLocale(i)}function Kj(t){return ds.uv&&t.allowNativeFullscreen}t();var jj=class t extends yj{get FGt(){return this.kjt.VJt}get t$t(){return this.kjt}get YZt(){return this.ajt}get hJt(){return Kj(this.pQ)}e$t(t,e,i){e===_c.D7&&void 0!==i&&(this.ZGt=i),this.ajt.bjt(t,e)}static get LGt(){return Ac.Wqt}get LGt(){return t.LGt}get i$t(){return this.pQ.ads.preload===kb.MIDROLL_AND_POSTROLL}H7(t){const e=this.s$t();for(const i of e)NG(i.sources,i.timeOffset)||t.W1(i,_c.x7,!1)}s$t(){const t=[],{B7:e,O7:i}=this.FGt,s=[];for(const n of e.concat(i)){const e=n.q7.AJt;if(Qe(s,e.KI))continue;const i=e.njt(n.EJt);i>=0?t.push(...e.yKt.slice(i)):t.push(...e.yKt),s.push(e.KI)}for(const e of this.ajt.O7)e.BKt||t.push(...e.yKt);return Th(t)}set wQt(t){this.mQt=t}get wQt(){return this.mQt}get Aqt(){return this.bqt}set Aqt(t){this.bqt=t,this.n$t=!1}aP(){if(!this.Aqt)return 0;const t=this.Aqt.uJt();return j(this.ct)||t<0?0:this.ct-t}uP(t,e){}cP(){return this.nf||NaN}F$(t){this.nf=t}AP(){return this.sa.tc}bP(t){this.nJt(this.Pl,t,!0)}kP(){return this.if}kZt(t){this.if=t}get _Jt(){return this.r$t}set _Jt(t){this.r$t=t}get stt(){return this.ZGt}get iJt(){return this.h$t}get gJt(){return this.o$t}set gJt(t){this.o$t=t}get sJt(){return this.a$t}set sJt(t){this.a$t=t}OP(){var t,e,i;return null!=(i=null==(e=this.Aqt)||null==(t=e.XZt())?void 0:t.DJt)?i:0}VP(){var t,e,i;return null!=(i=null==(e=this.Aqt)||null==(t=e.XZt())?void 0:t.xJt)?i:0}sP(){return[]}tQt(t){this.cjt=t,this.ajt.tQt(t)}Ujt(){!this.n$t&&this.Aqt&&(this.Aqt.Tn(),this.n$t=!0)}$Zt(t){this.wQt=t?t.VZt?"linear":"nonlinear":"none"}DP(){return r.Ol().ws()}HP(){return this.sa.Pl}WP(t){this.nJt(t,this.tc,!0)}HZt(){return this.sa.tc?0:this.sa.Pl}nJt(t,e,i){const s=this.sa.Pl!==t||this.sa.tc!==e;s&&(this.sa.Pl=t,this.sa.tc=e),this.Aqt&&i&&this.Aqt.WP(this.HZt()),s&&this.wo(new Wo(this.Yu,this.Pl))}dP(){return!1}fP(){if(this.u$t&&this.ZGt)return this.u$t}_P(){if(this.c$t&&this.ZGt)return this.c$t}xP(){return this.rf}h0(t){this.rf=t,this.wo(new xr(this.Yu,t))}get wJt(){return this.l$t}set wJt(t){this.l$t=t}KP(){this.sa.pn(Uv.no,this.d$t),this.vo||(this.vo=!0,this.ajt.KP(),this.fJt())}async bl(){if(this.f$t)return;this._$t.tf(),this._$t=new Mr;const t=this.Oc;this.kZt(!1),this.wo(new ah(this.Yu)),this.v$t()||(this.hJt||this.sa.ke(),this.wo(new zt(this.Yu))),this._Jt||(this.gJt=!1);const e=Boolean(this.Aqt);this.f$t=this.ajt.Ajt();try{await this.f$t}finally{this.f$t=void 0}try{Bv(this._$t.ap)}catch(t){return}if(this.vo||this.d$t(),!this.u$t||!this.ZGt)if(this.Aqt){if(t)if(e)try{Bv(this._$t.ap),this.Aqt.g$t(),this.wo(new $n(this.Yu))}catch(t){return}else this.Ujt()}else this.ZGt||(this.hGt(),this.$Gt.bl())}Ml(){var t;this.Oc||(this.kZt(!0),this.wo(new ac(this.Yu))),this._$t.tf(),this._Jt?null==(t=this.Aqt)||t.Ml():this.gJt=!0}$R(){var t;null==(t=this.Aqt)||t.$R()}tJt(){this.Aqt&&(this.m$t.w$t(),this.Aqt.Al(),this.Aqt.Wu(),this.Aqt=void 0,this.wQt="none",this.n$t=!1)}async Al(){var t;this.cJt=0,this.ajt.sr(),this._$t.tf(),this.kZt(!0),this.h$t=!1,this.a$t=!1,this._Jt=!1,this.kjt.sr(),this.tJt(),this.QZt(),null==(t=this.p$t)||t.sr(),this.gJt=!1,this.m$t.Wu()}be(){this.y$t.be(),this.hJt&&this.sa.be()}ke(){this.y$t.ke()}A$t(){return Boolean(this.Aqt)&&Qe(this.Aqt.b$t(),-1)&&!this.h$t}LKt(){this.ajt.LKt()}zjt(){return this.ajt.zjt}hjt(){this.ajt.hjt()}Xjt(){return this.ajt.Xjt()}qGt(t){if(this.A$t()){if(t.type===Uv.Ff&&this.sa.$c)return!0;if(t.type===Uv.Df)return this.h$t=!0,this.m$t.w$t(),!0}return!1}v$t(){return Boolean(this.Aqt&&this.Aqt.XZt())}async Fjt(t){try{this.tJt();const e=this.T$t();this.y$t.yG(),this.Aqt=await this.m$t.Fjt(t,this.p$t,e),this.S$t(this.Aqt)}catch(t){this.k$t.MZt(t)}}S$t(t){if(t.WP(this.HZt()),this.ajt.Sjt===kj.mjt){const e=t.b$t();if(e.length)for(const t of e)this.kjt.HQt(t,this.ajt.ojt);else this.kjt.HQt(this.ajt.ojt.gO,this.ajt.ojt)}this.k$t.sr(),this.k$t._Zt(t)}QP(){if(this.bqt&&this.hJt&&this.v$t())return this.sa.QP()}GP(){return this.hJt&&this.YGt?this.sa.ja:super.GP()}T$t(){const t=!!(this.ajt.Sjt===kj.mjt)&&this.i$t;let e,i;void 0!==this.pQ.ads.googleIma.uiElements?e=this.pQ.ads.googleIma.uiElements:this.pQ.ads.showCountdown||(e=[]),void 0!==this.pQ.ads.allowedMimeTypes&&(i=this.pQ.ads.allowedMimeTypes);return{E$t:i,P$t:e,I$t:t,TJt:this.pQ.ads.googleIma.bitrate,C$t:void 0,R$t:this.cjt}}fJt(){if(this.bqt){const t=this.T$t();this.bqt.x$t(t)}}XQt(t){this.u$t=new Fc(Ja.ADVERTISEMENT_ERROR,t.ly),this.c$t=new ke(X.AD_ERROR,"There was a problem playing ads.",this.u$t),this.VGt.wo(sl.zGt(t))}QZt(){this.YGt&&(this.sa.be(),this.hGt(),this.ke())}pJt(){var t;if(this.sa.aP()===1/0||0===this.sa.DP().length)return;(null==(t=this.ajt.ojt)?void 0:t.TKt)&&-1!==this.D$t&&(this.sa.uP(this.sa.aP()+this.D$t),this.D$t=-1)}mJt(t){var e,i;this.D$t=null!=(i=null==(e=t.KZt)?void 0:e.pqt)?i:-1}hGt(){super.hGt(),this.sa.be(),this.hJt&&!this.sa.$c&&this.sa.bl()}wKt(){this.hJt||super.wKt()}async bn(){this.k$t.pn(Yo.la,this.N$t),await super.bn(),this.tJt(),this.m$t.pn("B$t",this.M$t),this.m$t.Wu(),this.y$t.Wu(),this.ajt.bn(),this.k$t.bn()}constructor(t,e,i,s,n,r,h){super(t,e),this.vo=!1,this.ZGt=!1,this.u$t=void 0,this.c$t=void 0,this.D$t=-1,this.mQt="none",this.l$t=!1,this.n$t=!1,this._$t=new Mr,this.r$t=!1,this.o$t=!1,this.M$t=t=>{this.VGt.wo(t)},this.N$t=t=>{this.u$t=new Fc(Ja.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.c$t=Ia(this.u$t)},this.cJt=NaN,this.d$t=()=>{this.vo||this.KP()},this.pQ=i,this.if=!0,this.nf=NaN,this.rf=qb.Jl,this.h$t=!1,this.a$t=!1,this.kjt=new Gj(this.VGt,this),this.k$t=new Mj(this,this.sa,this.kjt),this.k$t.wn(Yo.la,this.N$t),this.sa.wn(Uv.no,this.d$t),this.ajt=new Ej(this,this.sa,this.$Gt,s,this.kjt),this.p$t=h,this.m$t=r,this.y$t=n,this.ke(),this.m$t.wn("B$t",this.M$t)}};t();var Nr=class{registerWebImaAdPlayerConstructor(t){this.L$t=t}createAdPlayer(t,e,i){return function(){const t=Boolean(a.google&&a.google.ima);if(t){return!(1===g.keys(a.google.ima).length&&a.google.ima.dai)}return!1}()&&this.L$t?this.L$t(t,e,i):void 0}};Nr.Gg=new Nr;_o.Gg.BW(new class{get DGt(){return jj.LGt}NW(t){return t&&t.integration===Kt.GOOGLE_IMA}NGt(t,e,i){return Nr.Gg.createAdPlayer(t,e,i)}W1(t,e,i,s){i.e$t(t,e,s)}MW(t){const e=RQ(t.sources);if(!e)return;const i={integration:Kt.GOOGLE_IMA,sources:e,omidAccessModeRules:Bj(t.omidAccessModeRules)},s=DQ(t.timeOffset);return void 0!==s&&(i.timeOffset=s),i}}),t(),t(),t(),t();var Yj=class extends Cs{ya(){return new Zj}constructor(){super("Gqt")}},Zj=class extends o{constructor(){super("adloaded")}},Er=-1,Jj=class{get Tqt(){return this.Kqt}get O$t(){return this.F$t}get xrt(){return this.Uw}get U$t(){return this.xKt}get V$t(){return this.H$t}get gO(){if(j(this.W$t)){const t=Va.BHt(this.xKt,this.Pqt.t.cP());void 0===t||j(t)||(this.W$t=t)}return this.W$t}q$t(){return this.Uw<this.Kqt.length}wqt(){let t;return this.Uw<this.Kqt.length&&(t=this.Kqt[this.Uw],this.Uw++),t}z$t(t){t.cHt=this,this.Kqt.push(t)}async X$t(t){let e=!1;for(const i of this.Kqt)try{await i.On(),e=!0}catch(e){0,Ko(this.Kqt,i);const s=i.ett.sources,n="string"==typeof s?s:s.src;t.wo(sl.XGt(e,n))}return this.H$t=!0,e}xqt(){this.Rqt=!0}Cqt(){return this.Rqt}G$t(){return this.Kqt.some((t=>ee(t).some((t=>t.PFt))))}constructor(t,e){this.Kqt=[],this.Rqt=!1,this.xKt=t,this.Uw=0,this.Pqt=e,this.W$t=NaN,this.H$t=!1,this.F$t=new uK(this,this.Pqt)}},$j=class t extends S{get Q$t(){let t=0;for(const e of this.K$t)e.Cqt()||(t+=1);return t}j$t(){this.Z$t.Y$t()}Tn(){this.To(),this.J$t.wn("Z7",this.Z$t.$$t)}Pn(){this.Do(),this.J$t.pn("Z7",this.Z$t.$$t),this.C$=this.hL,this.Z$t.sr();for(const t of this.K$t)t.xqt();us(this.K$t)}To(){this.t0t||(this.sa.wn(Uv.Xu,this.e0t),this.t0t=!0)}Do(){this.t0t&&(this.sa.pn(Uv.Xu,this.e0t),this.t0t=!1)}get O7(){return this.K$t}i0t(){return this.s0t(new Ph(Er,void 0))}n0t(t){return this.r0t(t,0,0).length>0}h0t(t,e){let i,s=0;for(const n of this.K$t){if(n.Cqt())continue;const r=n.gO;r>=t&&r<=e&&r>=s&&!j(r)&&(i=n,s=i.gO)}return i}o0t(t){return this.s0t(new Ph(t,void 0))}a0t(){if(!this.u0t&&void 0!==this.cjt){this.u0t=!this.K$t.some((t=>j(t.gO)));for(const t of this.K$t)t.gO!==Er&&t.gO<=this.cjt&&!t.Cqt()&&t.xqt()}}c0t(t){for(const e of t)e.xqt();this.nKt.l0t(t),0===this.Q$t&&this.Do()}r0t(t,e,i){return this.K$t.filter((s=>{if(s.Cqt())return!1;const n=s.gO;return this.d0t(n,t)||this.f0t(n,t,e,i)}))}d0t(t,e){switch(e){case 0:return 0===t;case Er:return t===Er;default:return!1}}f0t(t,e,i,s){if(t<0)return!1;const n=t-e;return-1!==n&&n<=i&&n>=-s}_0t(e){if(e&&e.length>0){for(const i of e){const e=t.rjt(i.pPt);let s=this.Gdt(i);-1===s&&(this.u0t=void 0===this.cjt,this.K$t.push(new Jj(e,this.v0t)),s=this.K$t.length-1);this.K$t[s].z$t(i)}this.To()}}static rjt(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}Gdt(e){const i=t.rjt(e.pPt);return su(this.K$t,(e=>i===t.rjt(e.U$t)))}g0t(t){Ko(this.K$t,t)}tQt(t){this.cjt=t,this.u0t=void 0===t}constructor(t,e,i,s){super(),this.u0t=!1,this.e0t=t=>Ov(this.s0t(t)),this.s0t=async t=>{this.a0t();const e=t.currentTime,i=t.currentTime!==Er?this.h0t(this.C$,t.currentTime):this.r0t(t.currentTime,0,0)[0];let s,n;const r=this.sa.cP()-10;if(n=this.n0t(Er)&&w.ceil(e)===w.ceil(r)?this.r0t(Er,10,0).filter((t=>!t.V$t)):this.r0t(e,10,0).filter((t=>!t.V$t)),n.length){const t=(await Promise.all(n.map((t=>t.X$t(this.J$t))))).some((t=>!0===t));t&&this.wo(new Yj),(!t||!this.Z$t.w0t||n[0].gO<this.Z$t.w0t.gO)&&(s=n[0])}i&&(i!==this.Z$t.w0t&&(s=i),this.c0t([i])),s&&(this.Z$t.$$t(),this.Z$t.w0t=s,await this.Z$t.Y$t()),j(this.sa.cP())||(this.C$=t.currentTime)},this.sa=t,this.nKt=e,this.v0t=new aK(this.nKt,this.sa),this.cjt=void 0,this.u0t=!1,t.cP()!==1/0?this.hL=0:this.hL=t.aP(),this.C$=this.hL,this.K$t=[],this.J$t=i,this.Z$t=s,this.t0t=!1}};t(),t();var tY=class extends S{get m0t(){return this.$zt}get VGt(){return this.cKt}p0t(){this.y0t(),this.A0t(),this.$V=void 0}b0t(t){this.T0t=this.T0t.concat(t)}S0t(t){this.k0t=this.k0t.concat(t)}A0t(){this.T0t=[]}y0t(){this.k0t=[]}E0t(t){for(const e of this.T0t)e.xVt===t&&ae(e.eventURL)}be(){this.m0t.style.display=""}ke(){this.m0t.style.display="none"}bn(){this.Bo(),this.cKt.Bo(),Es(this.$zt)}constructor(t,e){super(),this.k0t=[],this.T0t=[],this.$V=void 0,this.cKt=new S,this.P0t=t=>{t.stopPropagation(),this.I0t()},this.I0t=()=>{for(const t of this.k0t)for(const e of t.kUt)ae(e.uri)},this.$zt=h.createElement("div"),this.$zt.style.display="none",this.C0t=t,this.R0t=e}};function eY(t,e){let i=e;if(!function(t){return"ui"in t}(t))return i;const s=t.ui.language;let n;if(Sc(s)){const e=t.ui.languages;if(!e)return i;n=e[s]}else n=s;return n&&n[e]&&(i=n[e]),i}t(),t();var iY={[Ot.uC]:1,[Ot.cC]:2,[Ot.lC]:2};function sY(t,e){const i=e?e.map((t=>t.toLowerCase())):e;return ln(t.filter((t=>{const e=t.type.toLowerCase();return!!di(i)&&-1!==i.indexOf(e)&&fQ(e)})),((t,e)=>iY[t.type]-iY[e.type])).map(nY)}function nY(t){return tb({src:t.contentURL,type:t.type,isAdvertisement:!0})}function rY(t,e){return RL(hY(t),hY(e))}function hY(t){return{Ci:t.height,Ti:t.width}}function oY(t,e,i,s){const n=function(t,e,i,s){let n,r=1/0;const h=t.filter((t=>!fQ(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(w.abs(t.width/e-1)+w.abs(t.height/i-1))/2;s<r&&(r=s,n=t)}return n||h.sort(rY)[0]}}(t.KUt,e.width,e.height,i),r=sY(t.KUt,i);if(n){const t=nY(n);t&&r.push(t)}var h;r.length>0&&(t.tVt=null==(h=r[0].src)?void 0:h.trim());return Gc({sources:r},s)}var aY=class extends tY{get x0t(){return this.D0t}get Yu(){return this.N0t.Yu}get ct(){let t=this.N0t.ct;return j(t)&&this.qUt&&(t=this.qUt.ct||0),t}get $c(){return this.N0t.$c}get tc(){return this.N0t.tc}set tc(t){this.N0t.tc=t,t?this.E0t(Pu.nVt):this.E0t(Pu.rVt)}get Oc(){return this.N0t.Oc}get Vc(){return this.N0t.Vc}get Pl(){return this.N0t.Pl}set Pl(t){this.N0t.Pl=t}get LP(){return this.N0t.LP}get UP(){return this.N0t.UP}get B0t(){return this.M0t}bl(){this.N0t.Oc&&(this.N0t.bl(),this.wo(new ah(this.Yu)),this.D0t&&this.E0t(Pu.hVt),this.D0t=!0)}Ml(){this.N0t.Oc||(this.N0t.Ml(),this.wo(new ac(this.Yu)),this.E0t(Pu.Ff))}async Al(){var t;null==(t=this.LT)||t.tf(),this.LT=void 0,this.ke(),this.D0t=!1,this.L0t=!0,this.O0t(),this.F0t(),await this.U0t()}V0t(t){void 0===t&&(t=!0),this.D0t=!1,t&&this.E0t(Pu.wVt),this.ke(),this.R0t()}H0t(){var t;const e=null==(t=this.nKt.Ta)?void 0:t.mi,i=new PK(this.l3,e);return this.m0t.appendChild(i.je),i.wn("$R",this.W0t),i}q0t(){this.qUt&&this.qUt.FUt.AUt&&(this.eXt=new bK(this.m0t),this.eXt.lzt=this.qUt.FUt.AUt,this.eXt.wn("clickstart",this.z0t),this.eXt.wn("click",this.I0t))}X0t(t,e){for(const i of this.T0t)if(i.xVt===Pu.zf){const s=hQ(i.Fu,e);void 0!==s&&this.C$<s&&s<=t&&ae(i.eventURL)}}async G0t(){if(!this.qUt||!this.Q0t)return;const t=oY(this.qUt,this.Q0t,this.pl.ads.allowedMimeTypes,this.pl);if(!t.sources.length)return await this.N0t.sr(),this.C0t(""),void this.qUt.jFt();this.LT=new Mr,this.L0t=!0,await qe(this.N0t._a(t,this.LT.ap),this.LT),this.N0t.be(),this.qUt.jFt(),this.q0t()}async K0t(t,e,i){this.M0t=t,this.qUt=t.PFt,this.N0t.wn(Uv.Xu,this.j0t),this.N0t.wn(Uv.Vf,this.Y0t),this.N0t.wn(Uv.Bl,this.Z0t),this.N0t.wn(lb,this.Os),this.qUt.BFt&&0!==this.qUt.BFt.length&&this.b0t(this.qUt.BFt),this.qUt.FUt&&this.S0t(this.qUt.FUt),this.$V=e,this.Q0t=i,0!==this.qUt.KUt.length&&(this.N0t.wn(Yo.la,this.J0t),await this.G0t(),this.N0t.wn(Uv.Df,this.$0t),this.N0t.wn(Uv.Xu,this.t1t),this.N0t.wn(cb.nd,this.e1t),this.N0t.wn(Uv.Qp,this.Os))}mWt(){this.x0t&&this.i1t&&this.W0t()}get i1t(){return this.qUt&&-1!==this.qUt.ZUt&&this.N0t.Yu>=this.qUt.ZUt}s1t(){this.E0t(Pu.syt),this.M0t&&this.VGt.wo(new Pe(this.M0t,this.Yu))}async U0t(){this.N0t.pn(Yo.la,this.J0t),this.N0t.pn(Uv.Df,this.$0t),this.N0t.pn(Uv.Xu,this.t1t),this.N0t.pn(cb.nd,this.Os),this.N0t.pn(cb.nd,this.e1t),this.N0t.pn(Uv.Qp,this.Os),this.N0t.pn(Uv.Xu,this.j0t),this.N0t.pn(Uv.Vf,this.Y0t),this.N0t.pn(Uv.Bl,this.Z0t),this.N0t.pn(lb,this.Os),this.M0t&&(this.M0t.xqt(),this.VGt.wo(new Ls(this.M0t,this.Yu))),this.n1t(),this.p0t(),this.O0t(),this.F0t(),this.M0t=void 0,this.qUt=void 0,this.Q0t=void 0,await this.N0t.sr(),this.N0t.ke(),this.m0t.style.cursor="",this.r1t=0,this.C$=-1,this.h1t&&(this.o1t.U0t(),this.h1t=!1)}n1t(){this.eXt&&(this.eXt.Wu(),this.eXt=void 0)}F0t(){this.a1t&&(Es(this.a1t),this.a1t=void 0)}O0t(){this.nXt&&(this.nXt.bn(),this.nXt=void 0)}u1t(){this.h1t=!0}c1t(){var t;this.a1t||(this.a1t=h.createElement("div"),this.a1t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.m0t.appendChild(this.a1t));const e=null==(t=this.M0t)?void 0:t.q7;if(!e)return;const i=e.l7.filter(_K);let s=eY(this.pl,"The content will play in")+" "+w.round(e.yqt)+" "+eY(this.pl,"seconds");if(i.length>1){const t=i.filter((t=>t.Cqt())).length;s+=". "+eY(this.pl,"Ad")+" "+(t+1)+"/"+i.length}ui(this.a1t,s)}constructor(t,e,i,s,n,r,h){super(t,e),this.o1t=i,this.pl=s,this.nKt=n,this.l3=r,this.N0t=h,this.D0t=!1,this.r1t=0,this.C$=-1,this.LT=new Mr,this.L0t=!0,this.$0t=()=>{this.V0t()},this.e1t=()=>{this.LT=void 0,this.D0t||(this.s1t(),this.D0t=!0),this.L0t&&(this.L0t=!1,this.nKt.j$t()),this.m0t.style.display="block",this.N0t.pn(cb.nd,this.e1t),this.D0t=!0},this.t1t=()=>{const t=this.Yu,e=this.ct,i=t/e;(0===this.r1t&&i>=.25?(this.E0t(Pu._Vt),this.r1t=1):1===this.r1t&&i>=.5?(this.E0t(Pu.gVt),this.r1t=2):2===this.r1t&&i>=.75&&(this.E0t(Pu.vVt),this.r1t=3),this.X0t(t,e),this.c1t(),this.C$=t,this.qUt)&&(-1!==this.qUt.ZUt&&this.qUt.ZUt<this.qUt.ct&&(null!=this.nXt||(this.nXt=this.H0t()),this.Yu<this.qUt.ZUt?this.nXt.yzt(this.qUt.ZUt-this.Yu):this.nXt.bzt()))},this.J0t=()=>{var t,e;this.LT=void 0,this.N0t.pn(Yo.la,this.J0t),this.L0t=!0,null==(t=this.$V)||t.QVt(M.HVt),this.D0t=!1,this.N0t.ke();const i=(null==(e=this.N0t.bt)?void 0:e.src)||"";this.C0t(i)},this.j0t=()=>{this.Os(new Ph(this.Yu,void 0))},this.Y0t=()=>{this.Os(new de(this.ct))},this.Z0t=()=>{this.Os(new Wo(this.Yu,this.Pl))},this.z0t=()=>{this.nKt.Ml()},this.W0t=()=>{this.M0t&&(this.E0t(Pu.aVt),this.VGt.wo(new ne(this.M0t,this.Yu/this.ct)),this.V0t(!1))},this.m0t.className="theoplayer-ad-linear",this.m0t.style.zIndex="10",Gl(this.m0t),this.N0t.ke(),this.h1t=!1}};t(),t();var uY=class t extends Re{get je(){return this.Hs}Tzt(){this.je.addEventListener("mouseup",this.Szt),this.je.addEventListener("touchend",this.Szt),this.je.addEventListener("mousedown",this.l1t)}Azt(){this.je.removeEventListener("mouseup",this.Szt),this.je.removeEventListener("touchend",this.Szt),this.je.removeEventListener("mousedown",this.l1t)}static dr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}bn(){this.Azt(),Es(this.Hs)}constructor(){super(),this.Szt=t=>{this.wo(new o("$R")),this.l1t(t)},this.l1t=t=>{t.stopPropagation()},this.Hs=t.dr(),this.Tzt()}},cY=class extends tY{get d1t(){return this.f1t}get _1t(){return this.v1t}p0t(){super.p0t(),this.m0t&&Xi(this.m0t)}async K0t(t,e,i){this.Fqt&&this.U0t(),this.f1t=t,this.Fqt=t.IFt,0!==this.Fqt.BFt.length&&this.b0t(this.Fqt.BFt),this.$V=e,0!==this.Fqt.DFt.length&&(this.S0t(this.Fqt.DFt[0].WFt),this.m0t.addEventListener("error",this.g1t),this.m0t.addEventListener("load",this.w1t),await this.G0t(),this.m1t())}mWt(){var t;if(void 0!==this.p1t)return;const e=null==(t=this.Fqt)?void 0:t.DFt[0];e&&e.q7&&-1!==e.q7.ZUt&&(this.E0t(Pu.aVt),this.VGt.wo(new ne(this.f1t,0)),this.y1t())}s1t(){void 0!==this.f1t&&this.VGt.wo(new Pe(this.f1t,this.nKt.Yu))}Al(){this.U0t(),this.f1t=void 0,this.Fqt=void 0}U0t(){this.A1t(),void 0!==this.f1t&&(this.f1t.xqt(),this.VGt.wo(new Ls(this.f1t,this.nKt.Yu))),this.p0t(),this.b1t(),void 0!==this.p1t&&(c(this.p1t),this.p1t=void 0)}A1t(){this.m0t.removeEventListener("load",this.w1t),this.m0t.removeEventListener("error",this.g1t)}async G0t(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const e=this.Fqt.DFt[0],i=h.createElement("a");if(e.WFt.AUt&&(i.href=e.WFt.AUt,i.target="gzt",i.setAttribute("rel","noopener")),e.FFt){const t=e.FFt,s=h.createElement("iframe");s.src=t.MVt,i.appendChild(s)}else if(e.LFt){const t=e.LFt,s=h.createElement("img");s.src=t.MVt,i.appendChild(s)}else if(e.VFt){const t=e.VFt,s=h.createElement("iframe");s.src=t.MVt,i.appendChild(s)}e.jFt(),i.addEventListener("mousedown",this.P0t),i.addEventListener("touchend",this.P0t),this.m0t.firstChild&&(Xi(this.m0t),this.U0t()),t.appendChild(i),this.m0t.appendChild(t),this.be()}m1t(){var t;if(!this.Fqt)return;const e=null==(t=this.Fqt.DFt[0].q7)?void 0:t.ZUt;void 0!==e&&-1!==e&&(this.p1t=a.setTimeout(this.T1t,1e3*e))}b1t(){this.v1t&&(this.v1t.pn("$R",this.S1t),this.v1t.bn()),this.v1t=void 0}get k1t(){return this.nKt.E1t()}constructor(t,e,i){super(t,e),this.w1t=()=>{this.A1t(),this.E0t(Pu.bVt),this.R0t()},this.g1t=t=>{var e,i;this.A1t(),null==(e=this.$V)||e.QVt(M.qVt);const s=null==(i=this.Fqt)?void 0:i.DFt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.FFt)?n:null==s?void 0:s.LFt)?r:null==s?void 0:s.VFt;var o;this.C0t(null!=(o=null==h?void 0:h.MVt)?o:"")},this.y1t=()=>{this.ke(),Xi(this.m0t),this.R0t(),this.f1t=void 0,this.Fqt=void 0},this.T1t=()=>{this.v1t||(this.p1t=void 0,this.v1t=new uY,this.m0t.children[0].appendChild(this.v1t.je),this.v1t.wn("$R",this.S1t))},this.S1t=()=>{this.E0t(Pu.aVt),this.mWt()},this.m0t.className="theoplayer-ad-nonlinear",this.m0t.style.position="absolute",this.m0t.style.width="100%",this.m0t.style.bottom="3em",this.m0t.style.zIndex="10",this.m0t.style.textAlign="center",this.nKt=i}};t();var lY=class{static async P1t(t,e,i){let s=[],n=t.shift();for(;n;){try{const t=await(new wQ).sHt(n,e);s=s.concat(t)}catch(t){0;const e=sl.XGt(t,n.sources.src);i.wo(e)}n=t.shift()}return s}};t(),t(),t();var dY=class extends Cs{ya(){return new fY}constructor(){super("tnt")}},fY=class extends o{constructor(){super("statechange")}};t();var ph=function(t){return t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted",t}({});t(),t();var _Y=class{get I1t(){return this.Cy}get U(){return this.Cy.length}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}DI(t){return this.Cy[t]}OM(t){this.Cy.push(t),this.Zu&&this.Zu.push(t.ba),this.C1t(t)}R1t(t){for(const e of t)this.OM(e)}x1t(t,e){e>=0&&e<=this.Cy.length&&(this.Cy.splice(e,0,t),this.Zu&&this.Zu.splice(e,0,t.ba),this.C1t(t))}FM(t){return Qe(this.Cy,t)}sc(t){this.D1t(this.Cy.indexOf(t))}D1t(t){if(!(t>=0&&t<this.Cy.length))return;const e=this.Cy[t];Xt(this.Cy,t),this.Zu&&Xt(this.Zu,t),this.N1t(e)}By(){const t=this.Cy.slice();us(this.Cy),this.Zu&&us(this.Zu);for(const e of t)this.N1t(e)}constructor(){this.Cy=[],this.Zu=void 0}},vY=class extends _Y{ya(){return function(t){const e=function(t){const e=t.I1t.map((t=>t.ba));return e.item=e=>{const i=0|e,s=t.DI(i);return s&&s.ba||void 0},e}(t),i=new jo(t,e);return e.addEventListener=(t,e)=>{i.wn(t,e)},e.removeEventListener=(t,e)=>{i.pn(t,e)},e}(this)}wn(t,e){this.B1t.wn(t,e)}wp(t){this.B1t.wp(t)}Bo(){this.B1t.Bo()}wo(t){this.B1t.wo(t)}pn(t,e){this.B1t.pn(t,e)}Ap(t){this.B1t.Ap(t)}bp(t){this.B1t.bp(t)}Tp(t,e){return this.B1t.Tp(t,e)}constructor(...t){super(...t),this.B1t=new S,this.Os=t=>{this.wo(t)}}};t();var gY=class extends o{constructor(t){super("addtask"),this.task=t}},wY=class extends Cs{ya(){return new gY(this.M1t.ba)}constructor(t){super("L1t"),this.M1t=t}};t();var mY=class extends o{constructor(t){super("removetask"),this.task=t}},pY=class extends Cs{ya(){return new mY(this.task.ba)}constructor(t){super("O1t"),this.task=t}},yY=class extends vY{C1t(t){this.wo(new wY(t))}N1t(t){this.wo(new pY(t))}constructor(){super()}},AY=class extends Re{async KP(){await this.F1t(),this.unt("initialised")}async F1t(){try{await this.U1t()}catch(t){0}}async U1t(){const t=await this.lyt.het();for(const e of t){const t=this.H1t.V1t(e.id,e.sourceDescription,e.parameters,this.W1t);this.q1t(t),this.OT.OM(t),await t.z1t}}get MS(){return this.ant}unt(t){this.ant=t,this.wo(new dY)}get X1t(){return this.OT}V1t(t,e,i){void 0===i&&(i="persistent");const s=this.H1t.G1t(t,e,i);return this.Q1t(s,i),this.OT.OM(s),this.q1t(s),s}async Q1t(t,e){try{await this.K1t(t,e)}catch(t){throw v("Unable to persist task - "+t)}}async K1t(t,e){await this.lyt.iet({key:t.o,id:t.o,sourceDescription:t.iW,parameters:t._T},e)}q1t(t){t.wn("tnt",(()=>{t.MS===ph.EVICTED&&this.OT.sc(t)}))}constructor(t,e,i){super(),this.ant="uninitialised",this.OT=new yY,this.H1t=e,this.W1t=i,this.lyt=t,this.KP()}};t(),t(),t(),t();var he=class{get MB(){return this.j1t}get Y1t(){return this.Z1t}get J1t(){return this.$1t.MB}get t2t(){let t=0,e=0;return this.LM.forEach((i=>{t+=i.timeRanges.MB,e+=i.totalQualityDurationToCache})),0===e?0:w.min(1,t/e)}get $1t(){return this.e2t}fL(t){return!!sn(this.LM,t.LM)&&(!!vd(this.Z1t,t.Z1t)&&(!!vd(this.MB,t.MB)&&(!!vd(this.J1t,t.J1t)&&this.$1t.IB(t.$1t))))}constructor(t,e,i){if(this.Z1t=t,this.LM=e,this.j1t=i,0===this.LM.size)this.e2t=r.Ol();else{let t=new r([-1/0,1/0]);this.LM.forEach((e=>{t=t.Cn(e.timeRanges)})),this.e2t=t}}};he.QUALITY_TIME_RANGES_NULL_OBJECT=sa(),he.CACHE_PROGRESSION_NULL_OBJECT=new he(0,he.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),he.i2t=he.CACHE_PROGRESSION_NULL_OBJECT,t(),t(),t(),t();var bY=class extends o{constructor(){super("progress")}},TY=class extends Cs{ya(){return new bY}constructor(){super("kQt")}};t(),t();var SY=class extends Pa{get name(){return"s2t"}constructor(t,e){super(t,e)}};t(),t(),t();var kY=function(t){return t[t.uC=0]="uC",t[t.cC=1]="cC",t}({});async function EY(t,e,i){const s=[];for(const n of t.A_t)s.push(PY(n,e,i));return{n2t:await Promise.all(s)}}async function PY(t,e,i){const s=[];for(const n of t.nut)IY(n)||s.push(xY(n,e,i));return{Z:await Promise.all(s),Vm:t.Vm}}function IY(t){return t.Nnt.every(RY)}var CY=1;function RY(t){return t.Ivt!==CY&&Boolean(t.Ivt)}async function xY(t,e,i){const s=[];for(const e of t.Nnt)RY(e)||s.push(DY(e,i));const n=await Promise.all(s),r=t.Let[0],h=t.xV,o=h?function(t,e){const i=[],s=function(t){return t?H(t,"avc")?Pt.VIDEO_H264:H(t,"hev")||H(t,"hvc")||H(t,"hvt")||H(t,"lhv")||H(t,"lhe")||H(t,"lht")?Pt.VIDEO_H265:H(t,"mp4")?Pt.VIDEO_MP4:H(t,"mpeg2")?Pt.VIDEO_MPEG2:H(t,"mpeg")?Pt.VIDEO_MPEG:Pt.VIDEO_UNKNOWN:Pt.VIDEO_UNKNOWN}(t);for(const t of e){const e=t.H2.split(":").pop(),n=t.W2;i.push({mimeType:s,uuid:e,data:n})}const n=kY.uC,r=Ae;return{type:n,schemeType:r,schemeDatas:i}}(r,h):void 0,a=TH(t,e,!0);return{YI:n,gs:t.C5,Vm:t.Vm,oH:o,$ft:a}}async function DY(t,e){const i={stack:[],error:void 0,hasError:!1};try{const r=oe(i,new Mr,!1),h=await async function(t,e,i){const s=[],n=t.Iit;t.eat&&s.push({YM:0,ct:0,r2t:t.eat});const r=n.Zgt();let h=r;for(;h;){if(t.Ght(h)){const n=await t.Kht(h,e,i);for(let e=0;e<n.U;e++)s.push(NY(n.Yht(e),t))}else s.push(NY(h,t));h=n.Jht(h)}const o=n.ewt(),a=o.ZM-r.YM;return{ct:a,wet:s}}(t,e,r.ap),o={o:BY(t),aB:h,PV:t.PV,Ew:t.Ew,Ci:t.Ci,Vm:t.Vm,Ti:t.Ti};switch(t.Vm){case Be.lS:break;case Be.wl:var s,n;o.Qat=null!=(n=null==(s=t.Qat)?void 0:s.SL())?n:NaN;break;case Be.hk:o.audioSamplingRate=t.Svt}return o}catch(t){i.error=t,i.hasError=!0}finally{se(i)}}function NY(t,e){return{YM:t.YM,ct:t.ct,r2t:e.eot(t)}}function BY(t){return t.Vht.Tn+"-"+(""+t.o)}function MY(t,e){const i=function(t){const e=function(t){const e=sa();for(const i of t){let t=e.get(i.USt);t||(t={Vm:i.Vm,Kx:[]},e.set(i.USt,t)),t.Kx.push(i)}return e}(t),i=C();return e.forEach((t=>{for(const e of t.Kx){let s=i.get(t.Vm);s||(s=sa(),i.set(t.Vm,s));let n=s.get(e.l);n||(n=[],s.set(e.l,n)),n.push(e)}})),i}(t);return function(t,e){const i=C();return t.forEach(((t,s)=>{const n=sa();t.forEach(((t,i)=>{const r=[];for(const i of t){const t=LY(i,s,e);r.push(t)}n.set(i,r)})),i.set(s,n)})),i}(i,e)}function LY(t,e,i){const s=t.USt,n={ZSt:t,Ekt:[]};for(const t of i)nz(e,s,t)&&n.Ekt.push(t);return n}async function OY(t,e){const i=await e.Jpt([t],{});return Cq(i.WS,{},i.tyt)}async function FY(t,e){return QW(t)?async function(t,e){const i=MY(t.Kx,t.TPt),s=await async function(t,e){const i=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await HY(n,s,e);i.push(r)}return i}(i,e),n=await async function(t,e){const i=[];for(const o of t){var s,n;const t=await XY(o.Igt,e);var r,h;t.PV=o.PV,t.Ew=o.Let?VY(o.Let):"",t.Ci=null!=(r=null==(s=o.Akt)?void 0:s.Ci)?r:0,t.Ti=null!=(h=null==(n=o.Akt)?void 0:n.Ti)?h:0,i.push(t)}return{Vm:Be.zS,Z:[{gs:AO,Vm:Be.zS,YI:i}]}}(t.TPt,e);return s.push(n),{ct:UY(s),h2t:[t.Igt],D_t:[{n2t:s}]}}(t,e):function(t){const e=GY(t);return{ct:e.ct,h2t:[t.Igt],D_t:[{n2t:[{Vm:Be.zS,Z:[{Vm:Be.zS,gs:AO,YI:[{o:t.Igt,aB:e,PV:0,Ew:"",Ci:0,Vm:Be.zS,Ti:0}]}]}]}]}}(t)}function UY(t){let e=-1/0;for(const i of t)for(const t of i.Z)e=w.max(e,...t.YI.map((t=>t.aB.ct)));return e}function VY(t){return[t.wkt,t.mkt,t.WEt].filter(Ee).join(",")}async function HY(t,e,i){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,e]=t.value,n=await WY(e,i);s.push(n)}return{Vm:qY(e),Z:s}}async function WY(t,e){const i=[],s=t[0].ZSt;for(const s of t){const t=await zY(s,e);i.push(t)}return{gs:s.gs||AO,Vm:qY(s.Vm),YI:i}}function qY(t){switch(t){case ri.hk:return Be.hk;case ri.wl:return Be.wl;case ri.aF:case ri.kEt:return Be.lS;default:return Be.zS}}function zY(t,e){const i=function(t){const e=t.ZSt.Igt,i=t.Ekt.map((t=>t.Igt));return e||(i.length?i[0]:void 0)}(t);return XY(i,e)}async function XY(t,e){let i={ct:0,wet:[]};if(t){const s=await OY(t,e);KW(s)&&(i=GY(s))}return{o:t||"default",o2t:t,aB:i,PV:0,Ew:"",Ci:0,Vm:Be.zS,Ti:0}}function GY(t){const e=[];let i,s=0;for(const n of t.wet){const t=s;!n.PPt||void 0!==i&&ZW(n.PPt.Igt,i)||(e.push(QY(n.PPt,t)),i=n.PPt.Igt),e.push(KY(n,t)),s+=n.ct}return{ct:s,wet:e}}function QY(t,e){return{YM:e,ct:0,r2t:jY(t.Igt)}}function KY(t,e){return{YM:e,ct:t.ct,r2t:jY(t.Igt)}}function jY(t){return{qS:t.yE,Knt:t.nmt?[t.nmt.Tn,t.nmt.Tn+t.nmt.U]:void 0,Ak:!1}}t(),t();var YY=class{async a2t(t){if(!t.src)throw new v("Invalid typed source");const e=t.type;if(Ib(e))return await this.u2t(t);if(wc(e))return await this.c2t(t);throw new v("Unexpected source type")}async u2t(t){try{const e=await OY(t.src,this.$pt);return await FY(e,this.$pt)}catch(t){throw new v("Unable to fetch HLS manifest")}}async c2t(t){try{const e=new zV({iC:Gn.Ih(t.src),Dpt:t.liveOffset,Opt:t.timeServer,Ak:t.useCredentials},this.l2t,er.Ik,this.$pt,t.dash);return await e.q,await async function(t,e,i){const s=[];for(const n of t.D_t)s.push(EY(n,e,i));const n=await Promise.all(s);return{ct:t.ggt.tvt(),h2t:[t.Tpt],D_t:n}}(e.Mr.Zot,t.contentProtection,this.tot)}catch(t){throw new v("Unable to fetch DASH manifest")}}constructor(t,e,i){this.$pt=t,this.tot=e,this.l2t=i}};t();var ZY=class{d2t(){const t=new ue;return this.f2t.push(t),this._2t(),t.Pf}async v2t(t,e){try{await t}finally{this.g2t-=1,this._2t(),0===this.f2t.length&&0===this.g2t&&e.Xf(!0)}}_2t(){if(this.f2t.length>0&&this.g2t<this.w2t){this.f2t.shift().Xf(),this.g2t+=1}}constructor(t){this.f2t=[],this.g2t=0,this.w2t=t}};var JY=class extends Re{get z1t(){return this.KP()}async KP(){const t=new YY(this.$pt,this.tot,this.l2t);this.m2t=await t.a2t(this.p2t);const e=function(t,e){if(Sc(t)){if(H(t,"%"))return _(t)/100*e;throw new v("Unexpected - Invalid string supplied as amount to cache.")}return e<t?e:t}(this.dyt._T.amount,this.m2t.ct);let i;this.j1t=e;const s=Ui(this.m2t.h2t[0]),n=(await this.vet.met.aet(s,"manifestURL")).filter((t=>Qe(t.references,this.dyt.o))),h=[],o=this.dyt._T.bandwidth;for(const t of this.m2t.D_t)for(const e of t.n2t)for(const t of tZ(e,this.dyt._T.preferredTrackSelection))for(const e of iZ(t.YI,o))h.push(e);this.y2t=w.ceil(h.map((t=>t.PV*function(t,e){let i=0;for(const s of t.aB.wet.map((t=>t.ct)))if(i+=s,i>=e)return i;return i}(t,e)/8)).reduce(((t,e)=>t+e),0));const a=sa();if(n&&0!==n.length){const t=n.reduce(((t,e)=>t+e.byteSize),0);for(const t of n){const e=t.qualityId,i=new r(t.startsAndEnds);if(a.has(e))a.get(e).timeRanges=a.get(e).timeRanges.Xl(i).yB(5e-4);else{const t=bv(h,(t=>t.o===e));var u;const s=w.min(this.j1t,null!=(u=null==t?void 0:t.aB.ct)?u:1/0);a.set(e,{timeRanges:i,totalQualityDurationToCache:s})}}i=new he(t,a,this.j1t)}else{for(const t of h)a.set(t.o,{timeRanges:r.Ol(),totalQualityDurationToCache:w.min(t.aB.ct,this.j1t)});i=new he(0,a,this.j1t)}this.A2t=i}get b2t(){return this.y2t}get A2t(){return this.T2t}set A2t(t){this.T2t.fL(t)||(this.T2t=t,t.fL(he.i2t)||this.wo(new TY))}async pi(t){await this.vo,await this.S2t(this.m2t,t)}async S2t(t,e){if(!t.h2t)throw new v("Unexpected - manifest is missing locations");await this.k2t();const i=[];for(const s of t.D_t)i.push(this.E2t(s,t.h2t[0],e));return Xu(i)}async k2t(){const t=await this.P2t.het();for(const e of t){const t=await this.vet.pet.xy(e.key);if(t)await $Y(t,this.dyt.o,this.vet.pet,this.W1t);else try{await this.vet.pet.iet(e,this.W1t)}catch(t){throw new SY("Unable to store manifest with url: "+e.locationURL,t)}}await this.P2t.cet()}E2t(t,e,i){const s=[];for(const n of t.n2t){const t=tZ(n,this.dyt._T.preferredTrackSelection);for(const n of t)s.push(this.I2t(n,e,i))}return Xu(s)}async I2t(t,e,i){const s=this.dyt._T.bandwidth,n=iZ(t.YI,s);t.Vm===Be.wl&&t.$ft&&t.$ft.vU.widevine&&"persistent"===t.$ft.vU.widevine.licenseType&&(await this.C2t(t.$ft),Bv(i));const r=[];for(const t of n)r.push(this.R2t(t,e,i));return Xu(r)}async R2t(t,e,i){Bv(i);const s=t.aB.wet[0].YM+this.j1t,n=[];let r=!1;for(const h of t.aB.wet){if(h.YM>=s||this.stopIfFailed(r))break;await this.x2t(i),await this.D2t.d2t(),n.push(this.D2t.v2t(this.N2t(h,t,e),this.B2t).catch((t=>(r=!0,Promise.reject(t)))))}return Xu(n)}async x2t(t){if(null==t?void 0:t.$m)throw await this.B2t.Pf,new ti}async M2t(){return await this.vo.catch(De),this.m2t}C2t(t){return Promise.resolve()}L2t(){return Gn.Yw("License renewal unsupported in this SDK."),Promise.resolve()}async N2t(t,e,i){const s=this.vet.met,n=yM(t.r2t.qS,t.r2t.Knt),r=await s.xy(n);if(r)await $Y(r,this.dyt.o,s,this.W1t),this.O2t(r,!1);else try{const s=await this.F2t(t.r2t),{segmentMetadataEntry:n,segmentEntry:r}=this.U2t(t,e,i,s);await this.vet._et((async t=>{await t.met.iet(n,this.W1t),await t.wet.iet(r,this.W1t)})),this.O2t(n,!0)}catch(e){throw new SY("Unable to store segment with url: "+t.r2t.qS,e)}}async F2t(t){const e=await this.sht.Wnt(t,{Ynt:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,wk:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.nht(e)}async nht(t){return{buffer:await t.mS()}}U2t(t,e,i,s){const n=yM(t.r2t.qS,t.r2t.Knt),h=t.YM,o=t.ct,a=this.V2t(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ui(i),qualityId:e.o,byteSize:a,startsAndEnds:new r([h,h+o]).uB,references:[this.dyt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ui(i),data:s,references:[this.dyt.o]}}}V2t(t){return t.buffer.byteLength}O2t(t,e){const i=t.qualityId,s=this.T2t,n=s.LM;n.get(i).timeRanges=n.get(i).timeRanges.Xl(new r(t.startsAndEnds)).yB(5e-4),this.A2t=new he(e?s.Y1t+t.byteSize:s.Y1t,n,this.j1t)}stopIfFailed(t){return!1}constructor(t,e,i,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.B2t=new ue,this.T2t=he.i2t,this.dyt=t,this.vet=e,this.$pt=i,this.P2t=s,this.sht=n,this.tot=r,this.l2t=o,this.W1t=h,this.y2t=-1;const a=this.dyt.iW.sources[0];this.p2t=a,this.vo=this.KP(),this.D2t=new ZY(this.dyt._T.parallelTasksThreshold)}};async function $Y(t,e,i,s){Qe(t.references,e)||(t.references.push(e),await i.iet(t,s))}function tZ(t,e){switch(t.Vm){case Be.hk:return eZ(t.Z,e.audioTrackSelection);case Be.lS:return eZ(t.Z,e.textTrackSelection);default:return eZ(t.Z,[])}}function eZ(t,e){if(0===e.length)return t.length?[t[0]]:[];const i=[];for(const s of t)e.indexOf(s.gs)>-1&&i.push(s);return i}function iZ(t,e){if(!t.length)return[];const i=[...t].sort(xL),s=i.filter((t=>t.PV<=e));return s.length>0?[s.pop()]:[i.shift()]}var sZ=class{async H2t(){await this.vet._et((async t=>{await this.W2t(t),await this.q2t(t),await this.z2t(t),await this.X2t(t)}))}async W2t(t){const e=t.yet,i=this.dyt.o;await e.sc(i)}async q2t(t){const e=t.met,i=t.wet,s=this.dyt.iW.sources[0];if(!kc(s))return;const n=Ui(s.src),r=(await e.aet(n,"manifestURL")).filter((t=>Qe(t.references,this.dyt.o)));for(const t of r)Ko(t.references,this.dyt.o),0===t.references.length?(await e.sc(t.key),await i.sc(t.key)):await e.iet(t)}async z2t(t){const e=t.pet,i=this.G2t(),s=(await e.Ktt(i)).filter((t=>Qe(t.references,this.dyt.o)));for(const t of s)Ko(t.references,this.dyt.o),0===t.references.length?await e.sc(t.key):await e.iet(t)}G2t(){if(!this.m2t)return[];const t=this.dyt.iW.sources[0];if(!kc(t))return[];const e=Ui(t.src),i=function(t){if(!t)return[];const e=[];for(const i of t.D_t)for(const t of i.n2t)for(const i of t.Z)for(const t of i.YI)t.o2t&&e.push(t.o2t);return function(t){return t.reduce(((t,e)=>(t.indexOf(e)<0&&t.push(e),t)),[])}(e)}(this.m2t).map((t=>({src:t}))).map((t=>Ui(t.src)));return[e,...i]}async X2t(t){const e=t.Aet,i=(await e.het()).filter((t=>Qe(t.references,this.dyt.o)));for(const t of i)Ko(t.references,this.dyt.o),0===t.references.length?(await e.sc(t.key),this.Q2t(t)):await e.iet(t)}Q2t(t){}constructor(t,e,i){this.dyt=t,this.vet=e,this.m2t=i}},nZ=new class{Z8(t,e,i){return new sZ(t,e,i)}};t(),t();var rZ=class{get ba(){return this.Zu||(this.Zu=function(t){return{renew(e){t.K2t(e)}}}(this)),this.Zu}K2t(t){this.j2t(t)}async j2t(t){try{await this.Y2t.L2t(t)}catch(t){0,this.jk.unt(ph.ERROR)}}constructor(t,e){this.jk=t,this.Y2t=e}},hZ=class extends S{get z1t(){return this.Y2t.z1t}get ba(){return this.Zu||(this.Zu=function(t){let e,i={get id(){return t.o},get status(){return t.MS},get source(){return t.iW},get parameters(){return t._T},get duration(){return t.ct},get cached(){return t.Z2t.ws()},get secondsCached(){return t.J2t},get percentageCached(){return t.$2t},get bytes(){return t.t3t},get bytesCached(){return t.e3t},get license(){return t.qq.ba},start(){t.Tn()},pause(){t.Ml()},remove(){t.sc()},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new oC(t,["kQt","tnt"],i),i}(this)),this.Zu}get o(){return this.Wb}get qq(){return this.i3t}get MS(){return this.ant}unt(t){this.ant!==t&&(this.ant=t,this.wo(new dY))}get iW(){return this.ZV}get _T(){return this.s3t}get ct(){return this.Y2t.A2t.MB}get Z2t(){return this.Y2t.A2t.$1t}get J2t(){return this.Y2t.A2t.J1t}get $2t(){return this.Y2t.A2t.t2t}get t3t(){return this.Y2t.b2t}get e3t(){return this.Y2t.A2t.Y1t}Tn(){this.ant===ph.EVICTED||this.ant===ph.DONE||this.n3t()}async n3t(){try{this.unt(ph.LOADING);const t=new Mr;this.r3t=t,await this.Y2t.pi(t.ap),this.unt(ph.DONE)}catch(t){Eh(t)?this.unt(ph.IDLE):this.unt(ph.ERROR)}finally{this.r3t.Wu()}}Ml(){this.r3t.tf()}sc(){this.MS===ph.LOADING?(this.wn("tnt",this.evictOnLoading),this.Ml()):this.h3t()}async h3t(){try{const t=await this.Y2t.M2t();await nZ.Z8(this,this.vet,t).H2t(),this.Y2t.A2t=he.i2t,this.unt(ph.EVICTED)}catch(t){0,this.unt(ph.ERROR)}}constructor(t,e,i,s,n,r){super(),this.r3t=new Mr,this.evictOnLoading=()=>{this.pn("tnt",this.evictOnLoading),this.h3t()},this.Wb=t,this.ZV=e,this.s3t=i,this.vet=s,this.Y2t=n.Z8(this,this.vet,r),this.i3t=new rZ(this,this.Y2t),this.ant=1===this.Y2t.A2t.t2t?ph.DONE:ph.IDLE,this.Y2t.wn("kQt",(t=>{this.Os(t),1===this.$2t&&this.unt(ph.DONE)}));const h=new Date,o=this.s3t.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u((()=>this.h3t()),o)}};var oZ=class{G1t(t,e,i){const s=iu();return this.V1t(s,t,e,i)}V1t(t,e,i,s){return new hZ(t,e,i,this.vet,this.o3t,s)}constructor(t,e){this.vet=t,this.o3t=e}};t();var aZ=30,uZ=5;function cZ(t){if(!t)throw new v("Unexpected - The cache parameters are undefined");const e=function(t){if(Sc(t)&&!H(t,"%"))return k(t);return t}(t.amount);!function(t){if(function(t){return Sc(t)&&H(t,"%")}(t)){const e=_(t);if(j(e)||e<0||e>100)throw new v("The amount as percentage must be between 0 and 100 percent.")}if(!Sc(t)&&j(t))throw new v("The amount must be a number or a string")}(e);const i=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+aZ),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||tt(t)&&t>new Date}(t))throw new v("Invalid expiration date for the cache parameters")}(i);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(j(t)||t<0)throw new v("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return uZ;if(j(t))throw new v("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:e,expirationDate:i,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var lZ=class{set w0t(t){this.a3t=t,this.u3t=0,this.c3t=0,this.l3t=void 0}get w0t(){return this.a3t}Vjt(){if(!this.a3t)return;const t=this.a3t.Tqt;for(;this.u3t<t.length;){const e=t[this.u3t];for(void 0===this.l3t&&(this.l3t=ee(e),this.c3t=0);this.c3t<this.l3t.length;){const t=this.l3t[this.c3t];if(this.c3t++,void 0!==t.PFt)return t.PFt}this.u3t++,this.l3t=void 0}}sr(){for(this.w0t=void 0,this.LT.tf(),this.LT=new Mr;this.d3t.length;)this.$$t()}f3t(t){return new AY(this.vet.yet,t,"temporary")}async nMt(t){const e=sY(t.KUt,this.pQ.ads.allowedMimeTypes);if(!e.length)return;const i=await XE.Gg.eW(e,Gc({sources:e}));if(!i.t.qH())return;this.Y2t||(this.Y2t=new this.o3t(this.TF));const s=this.vet,n=new oZ(s,this.Y2t),r=this.f3t(n).V1t(Gc({sources:i.iW}),cZ({amount:10,bandwidth:Ke.Gg.gV()||this.yW.bG}),"temporary");this.d3t.push(r);const h=this.Y2t.Z8(r,s,"temporary");this.LT.tf(),this.LT=new Mr,qe(h.pi(this.LT.ap),this.LT).then(De),this._3t(h,t)}constructor(t,e,i,s){this.d3t=[],this.u3t=0,this.c3t=0,this.Y$t=async()=>{const t=this.Vjt();t&&await this.nMt(t)},this.$$t=()=>{const t=this.d3t.shift();null==t||t.sc()},this._3t=async(t,e)=>{let i=!1;for(;!i;)await t.Tp("kQt"),i=1===t.A2t.t2t;e.ct<5&&this.Y$t()},this.pQ=t,this.TF=e,this.LT=new Mr,this.o3t=i,this.yW=s,this.vet=new kM}};t(),t();var dZ={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new r([0,0]).uB,references:[]},fZ={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},_Z=class t extends UL{async yot(t,e,i,s){try{return await super.yot(t,e,i,s)}catch(t){ta(t)}const n=await this.v3t.yot(t,e,i,s);return await this.g3t(t,e,n),n}async g3t(e,i,s){if(void 0===this.w3t)return;const n=this.vet.met,r=yM(e,i),h=await n.xy(r);if(h)await $Y(h,this.w3t,n,this.W1t);else try{const e={buffer:s},{segmentMetadataEntry:i,segmentEntry:n}=t.U2t(r,e,this.w3t);await this.vet._et((async t=>{await t.met.iet(i,this.W1t),await t.wet.iet(n,this.W1t)}))}catch(t){throw new SY("Unable to store segment with url: "+e,t)}}static U2t(t,e,i){return{segmentMetadataEntry:yh({},dZ,{key:t,segmentURLsegmentByteRange:t,references:[i]}),segmentEntry:yh({},fZ,{key:t,segmentURLsegmentByteRange:t,data:e,references:[i]})}}constructor(t,e,i,s,n){super(t),this.v3t=new FL(e),this.vet=i,this.w3t=s,this.W1t=n}};var vZ=class{Z8(t,e,i){void 0===i&&(i="persistent");const s=t.iW.sources[0];if(xb(s))throw new v("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new KM(this.TF,Ec.zS),h=new nH(this.TF,n),o=new AM(e.pet,e.met,e.wet,e.Aet),a=function(t,e,i,s,n){return new _Z(e,t,i,s,n)}(this.TF,o,e,t.o,i),u=new gs,c=new uH(aH(h,o),u,t);return this.m3t(t,e,c,u,r,a,i)}constructor(t){this.TF=t}},gZ=class extends vZ{m3t(t,e,i,s,n,r,h){return new JY(t,e,i,s,n,r,h,CM())}},wZ=gZ,mZ=class t extends yj{get FGt(){return this}static get LGt(){return Ac.Hqt}get LGt(){return t.LGt}e$t(t,e,i){e===_c.x7&&this.P3?Ov(this.Fjt([t])):this.p3t.push(t)}aP(){return this.y3t.x0t?this.y3t.Yu:this.t7()}uP(t,e){}cP(){return this.y3t.ct}dP(){return this.y3t.$c}fP(){}_P(){}AP(){return this.y3t.tc}bP(t){this.tc!==t&&(this.y3t.tc=t,this.wo(new Wo(this.Yu,this.Pl)))}kP(){return this.y3t.Oc}xP(){return this.y3t.Vc}DP(){return r.Ol().ws()}OP(){return this.y3t.LP}VP(){return this.y3t.UP}HP(){return this.y3t.Pl}WP(t){this.Pl!==t&&(this.y3t.Pl=t,this.wo(new Wo(this.Yu,this.Pl)))}async bl(){if(this.A3t)return;this.wo(new ah(this.Yu)),this.b3t(),this.p3t.length&&(this.A3t=this.Fjt(this.p3t),await this.A3t,this.A3t=void 0),await this.T3t.o0t(this.sa.aP());const t=this.S3t;4!==t&&1!==t&&5!==t||(!this.Qqt&&this.k3t.length?this.E3t():this.Qqt?(this.P3t=!0,this.y3t.bl()):(this.hGt(),this.sa.bl()),this.S3t=3)}Ml(){3===this.S3t&&(this.y3t.Ml(),this.S3t=4)}j$t(){this.T3t.j$t()}Tn(){this.S3t=1,this.T3t.Tn()}async Al(){this.T3t&&(this.T3t.Pn(),this.I3t(!1),this.o1t.Al(),this.S3t=5,this.Qqt&&(this.T3t.g0t(this.Qqt.cHt),this.Qqt=void 0)),this.P3=!1,this.P3t=!1,us(this.k3t),this.YGt&&(this.hGt(),this.sa.be()),us(this.p3t),await this.y3t.Al(),await this.N0t.sr()}$R(){this.y3t.mWt(),this.o1t.mWt()}KP(){this.N0t.KP(),this.b3t()}qGt(t){return!(t.type!==Uv.Df||!this.T3t||!this.T3t.n0t(-1))&&(this.T3t.i0t().then(De),!0)}be(){void 0!==this.y3t.B0t&&(this.N0t.be(),this.y3t.be()),void 0!==this.o1t.d1t&&this.o1t.be()}ke(){this.N0t.ke(),this.y3t.ke(),this.o1t.ke()}async Fjt(t){const e=await lY.P1t(t,this.TF,this.VGt);if(!e.length){const t="Ads could not be loaded.";return this.VGt.wo(sl.XGt(new Ka(bt.ADBLOCK,oh.FILE_NOT_FOUND),t)),void(this.P3&&!this.Qqt&&0===this.k3t.length&&this.C3t())}this.T3t._0t(e),this.VGt.wo(new eM),this.YGt||this.sa.Oc||this.T3t.o0t(this.sa.aP()),0!==this.S3t&&5!==this.S3t||this.Tn()}l0t(t){this.k3t.push(...t);for(const e of t)this.P3&&!this.YGt&&this.E3t()}async E3t(){if(2!==this.S3t&&!this.R3t){0,this.R3t=!0,this.S3t=2;const t=this.Qqt;this.x3t(),this.Qqt?(await this.Qqt.cHt.X$t(this.VGt),this.D3t()||(this.R3t=!1),this.VGt.wo(new cj(this.N3t(this.Qqt))),await this.B3t()):((null==t?void 0:t.cHt.G$t())&&this.VGt.wo(new Li(this.N3t(t))),this.R3t=!1,this.S3t=1,this.C3t())}}C3t(){this.hGt(),this.sa.be(),this.sa.$c?this.sa.wo(new Zu(this.sa.aP())):this.sa.bl()}x3t(){let t;if(this.Qqt&&this.D3t())t=this.Qqt.cHt;else{if(0===this.k3t.length)return;t=this.k3t.shift()}if(!t)return;const e=t.wqt();e?this.Qqt=e:(this.Qqt&&(this.T3t.g0t(this.Qqt.cHt),this.Qqt=void 0),this.Qqt=void 0)}async B3t(){const t=this.Qqt?function(t){var e,i;const s=null==(i=t.OHt)||null==(e=i.lFt)?void 0:e.dFt();return void 0===s?void 0:new rK(s)}(this.Qqt):void 0;if(t){if(!this.Qqt)return;this.M3t=t,this.L3t(this.Qqt.BFt),this.O3t(Pu.CVt);const e=this.M3t.wqt();this.Qqt.cHt.G$t()&&(this.o1t.U0t(),1===this.Qqt.cHt.xrt&&this.VGt.wo(new ZB(this.N3t(this.Qqt)))),await this.K0t(e)}else this.S3t=1,this.R3t=!1,this.Qqt=void 0,this.E3t()}async K0t(t){if(t){var e;let s=Ee(t.PFt),n=Ee(t.RFt);var i;const r=null!=(i=null==(e=t.CFt)?void 0:e.tUt)?i:[],h=r.length>0,o=this.Qqt,a=this.N3t(o);if(t.PFt){if(t.PFt.q7=o,void 0!==o.ett.skipOffset){const e=Va.BHt(o.ett.skipOffset,t.PFt.ct);void 0!==e&&e<t.PFt.ct&&(t.PFt.ZUt=e)}const e=a.Sqt(t.PFt,r,t.xFt,o.ett);this.o1t.U0t(),this.lKt(),await this.y3t.K0t(e,t.lt,{width:this.sa.je.offsetWidth,height:this.sa.je.offsetHeight}),s=!0}if(t.RFt){const e=t.RFt.DFt[0];if(e.q7=o,void 0!==o.ett.skipOffset){const t=Va.BHt(o.ett.skipOffset,this.sa.cP());t&&(e.q7.ZUt=t)}const i=s?[]:r,h=a.kqt(e,i,t.RFt,t.xFt,o.ett);s&&this.y3t.u1t(),await this.o1t.K0t(h,t.lt,{width:this.sa.je.offsetWidth,height:this.sa.je.offsetHeight}),n=!0}if(s){this.S3t=3,this.y3t.be();const t=0===a.pPt;this.P3t=t,this.N0t.Ml(),this.y3t.bl(),this.sa.Ml(),this.sa.ke(),this.lKt(),this.y3t.s1t()}n&&(this.S3t=3,this.o1t.be(),this.o1t.s1t()),(s||n||h)&&this.F3t(t.SFt),s||n||await this.U3t(),!s&&n&&(this.D3t()||this.k3t.length>0?this.E3t():(this.C3t(),this.Qqt=o))}else null===t?await this.U3t():this.I3t(!0)}U3t(){const t=this.M3t;return this.K0t(t&&t.wqt())}I3t(t){this.O3t(Pu.RVt),this.V3t(),this.S3t=1;const e=void 0!==this.Qqt&&this.Qqt.cHt.q$t();if(this.R3t=!1,e)t&&(this.S3t=1,this.E3t());else{if(!this.YGt)return;this.sa.be(),!this.sa.$c&&t&&this.sa.bl(),this.hGt()}}hGt(){this.H3t(),super.hGt()}H3t(){if(this.sa.$c&&(this.S3t=5),this.Qqt){const t=this.Qqt.cHt;t.G$t()&&this.VGt.wo(new Li(this.N3t(this.Qqt))),this.T3t.g0t(t),this.Qqt=void 0}}L3t(t){this.W3t=this.W3t.concat(t)}V3t(){this.W3t=[]}q3t(t){this.sa.je.appendChild(t)}O3t(t){for(const e of this.W3t)e.xVt===t&&ae(e.eventURL)}F3t(t){this.y3t.E0t(Pu.bVt);for(const e of t)ae(e)}get L7(){return this.Qqt?this.N3t(this.Qqt):null}get B7(){return this.Qqt?[this.y3t.B0t,this.o1t.d1t].filter(Ee):[]}get O7(){const t=this.k3t.concat(this.T3t.O7.filter((t=>!t.Cqt())));return fn(t,(t=>t.O$t.l7.filter((t=>!t.Cqt()))))}get F7(){return this.T3t.O7.map((t=>t.O$t))}H7(t){const e=this.s$t();for(const i of e)NG(i.sources,i.timeOffset)||t.W1(i,_c.x7,!1)}s$t(){const t=[];for(const e of this.B7.concat(this.O7))t.push(e.ett);const e=this.k3t.concat(this.T3t.O7.filter((t=>!t.Cqt())));for(const i of e)for(const e of i.Tqt)e.q||t.push(e.ett);return t.push(...this.p3t),Th(t)}D3t(){return!!this.Qqt&&ee(this.Qqt).some((t=>t.PFt))}N3t(t){return t.cHt.O$t}E1t(){return this.z3t}QP(){return this.N0t.QP()}sP(){return this.N0t.sP()}tQt(t){this.T3t.tQt(t)}async bn(){await super.bn(),this.sa.pn(Uv.no,this.b3t),this.VGt.wX(this.y3t.VGt),this.VGt.wX(this.o1t.VGt),this.VGt.wX(this.T3t),this.y3t.bn(),this.o1t.bn(),await this.N0t.bn()}constructor(t,e,i,s,n,r){super(t,e),this.k3t=[],this.S3t=0,this.W3t=[],this.R3t=!1,this.P3=!1,this.P3t=!0,this.p3t=[],this.X3t=t=>{t.type===Uv.no&&this.P3t?this.P3t=!1:this.wo(t)},this.b3t=()=>{this.P3=!0},this.G3t=async()=>(this.S3t=1,await this.y3t.U0t(),this.K0t(this.M3t.wqt())),this.Q3t=async t=>{const e=new Ka(bt.PLAYBACK,oh.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.VGt.wo(sl.XGt(e,t)),await this.y3t.U0t(),this.K0t(this.M3t.wqt())},this.K3t=()=>(this.o1t.U0t(),this.K0t(this.M3t.wqt())),this.j3t=t=>{const e=new Ka(bt.PLAYBACK,oh.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.VGt.wo(sl.XGt(e,t)),this.o1t.U0t(),this.K0t(this.M3t.wqt())},this.TF=r,this.N0t=i,this.o1t=new cY(this.j3t,this.K3t,this),this.y3t=new aY(this.Q3t,this.G3t,this.o1t,s,this,t.c3,i),this.q3t(this.o1t.m0t),this.q3t(this.y3t.m0t);const h=new lZ(s,r,gZ,n);this.T3t=new $j(this.sa,this,this.VGt,h),this.y3t.wp(this.X3t),this.o1t.wp(this.Os),this.VGt._X(this.y3t.VGt),this.VGt._X(this.o1t.VGt),this.VGt._X(this.T3t),this.z3t=new aK(this,this.sa),this.c3.wn(to.gn,this.Os),this.sa.wn(Uv.no,this.b3t)}};_o.Gg.BW(new class{get DGt(){return mZ.LGt}NW(t){return t&&("string"!=typeof t.integration||t.integration===Kt.DEFAULT||t.integration===Kt.CSAI||t.integration===Kt.THEO)}NGt(t,e,i){const s=new ZE(t.je,i,t.td,t.z9,t.qP,t.K9,t.Du);return new mZ(t,e,s,i,t.z9,t.td)}W1(t,e,i,s){i.e$t(t,e,s)}MW(t){const e=RQ(t.sources);if(!e)return;const i={integration:Kt.CSAI,sources:e};"vast"===i.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===i.sources.type&&void 0!==t.timeOffset&&un("Do not set timeOffset for VMAP ad sources. VMAP ads have their own offsets included.");const s=DQ(t.timeOffset);void 0!==s&&(i.timeOffset=s);const n=DQ(t.skipOffset);return void 0!==n&&(i.skipOffset=n),i}}),t(),t();var pZ=class{yG(){var t;this.c2||(null==(t=this.y$t)||t.initialize(),this.c2=!0)}get m0t(){return this.$zt}get Y3t(){return this.Z3t.offsetHeight}get J3t(){return this.Z3t.offsetWidth}get $3t(){return this.y$t}t4t(t){"linear"===t?this.$zt.style.marginTop="0px":"nonlinear"===t&&(this.$zt.style.marginTop="-45px")}be(){this.$zt.style.opacity="1",this.$zt.style.pointerEvents=""}ke(){this.$zt.style.opacity="0",this.$zt.style.pointerEvents="none"}Wu(){var t;null==(t=this.y$t)||t.destroy(),this.y$t=void 0}constructor(t,e){this.y$t=void 0,this.c2=!1,this.p8=t;const i=h.createElement("div");i.className="theoplayer-ima-wrapper",Gl(i),i.style.zIndex="10",ds.Ks&&function(t,e){t.addEventListener(e,ql)}(i,"mousedown"),e.appendChild(i);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Z3t=s,i.appendChild(s),this.$zt=i,this.y$t=new google.ima.AdDisplayContainer(this.Z3t,this.p8)}};t(),t(),t();var yZ=class{get UUt(){return this.e4t.getAdId()}get KZt(){const t=this.e4t.getAdPodInfo();if(void 0!==t)try{return{uZt:t.getAdPosition(),pqt:t.getMaxDuration(),i4t:t.getPodIndex(),pPt:t.getTimeOffset(),cZt:t.getTotalAds(),s4t:t.getIsBumper()}}catch(t){return}}get yFt(){return this.e4t.getAdSystem()}get n4t(){return this.e4t.getAdvertiserName()}get cUt(){var t;return null!=(t=this.e4t.getApiFramework())?t:void 0}get CFt(){return this.eUt.map((t=>({dUt:t.getAdSlotId(),yS:t.getContentType(),bQt:t.getContent(),Ci:t.getHeight(),Ti:t.getWidth()})))}get yS(){var t;return null!=(t=this.e4t.getContentType())?t:void 0}get XFt(){return this.e4t.getCreativeId()}get MJt(){return this.e4t.getCreativeAdId()}get r4t(){return this.e4t.getDealId()}get cD(){return this.e4t.getDescription()}get ct(){return this.e4t.getDuration()}get Ti(){return this.e4t.getWidth()}get Ci(){return this.e4t.getHeight()}get tVt(){var t;return null!=(t=this.e4t.getMediaUrl())?t:void 0}get h4t(){return this.e4t.getMinSuggestedDuration()}get NJt(){return this.e4t.getSkipTimeOffset()}get o4t(){return this.e4t.getSurveyUrl()}get cH(){return this.e4t.getTitle()}get SJt(){return this.e4t.getTraffickingParameters()}get kJt(){return this.e4t.getTraffickingParametersString()}get xFt(){return this.e4t.getUniversalAdIds().map((t=>({LJt:t.getAdIdRegistry(),OJt:t.getAdIdValue()})))}get P$t(){return this.e4t.getUiElements()}get BJt(){return this.e4t.getVastMediaBitrate()}get DJt(){return this.e4t.getVastMediaHeight()}get xJt(){return this.e4t.getVastMediaWidth()}get EJt(){return this.e4t.getWrapperAdIds()}get PJt(){return this.e4t.getWrapperAdSystems()}get IJt(){return this.e4t.getWrapperCreativeIds()}get VZt(){return this.e4t.isLinear()}constructor(t){this.e4t=t;const e=new google.ima.CompanionAdSelectionSettings;e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.eUt=t.getCompanionAds(0,0,e)}};function AZ(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var bZ=class extends Re{WP(t){var e;null==(e=this.bqt)||e.setVolume(t)}HP(){return this.bqt.getVolume()}uJt(){return this.bqt.getRemainingTime()}Wu(){us(this.V7),this.l3.pn(to.gn,this.a4t),this.bqt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.u4t),this.bqt.removeEventListener(AZ(),this.forwardAdEventListener),this.bqt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.bqt.destroy()}Tn(){this.bqt.start()}g$t(){this.bqt.resume()}Ml(){this.bqt.pause()}$R(){this.bqt.skip()}Al(){this.bqt.stop()}XZt(){const t=this.bqt.getCurrentAd();if(t)return this.c4t(t)}b$t(){return this.bqt.getCuePoints()}c4t(t){let e=bv(this.V7,(e=>e.e4t===t));return e||(e=new yZ(t),this.V7.push(e)),e}x$t(t){this.bqt.updateAdsRenderingSettings(EZ(t))}constructor(t,e,i){super(),this.V7=[],this.u4t=t=>{t.getAd().isLinear()?this.y$t.t4t("linear"):this.y$t.t4t("nonlinear")},this.a4t=()=>{this.bqt.resize(this.y$t.J3t,this.y$t.Y3t,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const e=t.getAd(),i=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Ii.Qjt,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Ii.Kjt,[google.ima.AdEvent.Type.CLICK]:Ii.jjt,[google.ima.AdEvent.Type.DURATION_CHANGE]:Ii.Vf,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Ii.Yjt,[google.ima.AdEvent.Type.STARTED]:Ii.Zjt,[google.ima.AdEvent.Type.IMPRESSION]:Ii.Jjt,[google.ima.AdEvent.Type.PAUSED]:Ii.$jt,[google.ima.AdEvent.Type.RESUMED]:Ii.tYt,[google.ima.AdEvent.Type.AD_PROGRESS]:Ii.eYt,[google.ima.AdEvent.Type.AD_BUFFERING]:Ii.iYt,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Ii.sYt,[google.ima.AdEvent.Type.MIDPOINT]:Ii.gVt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Ii.nYt,[google.ima.AdEvent.Type.COMPLETE]:Ii.wVt,[google.ima.AdEvent.Type.USER_CLOSE]:Ii.rYt,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Ii.hYt,[google.ima.AdEvent.Type.LOADED]:Ii.oYt,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Ii.aYt,[google.ima.AdEvent.Type.AD_METADATA]:Ii.uYt,[google.ima.AdEvent.Type.AD_BREAK_READY]:Ii.cYt,[google.ima.AdEvent.Type.INTERACTION]:Ii.lYt,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Ii.dYt,[google.ima.AdEvent.Type.SKIPPED]:Ii.fYt,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Ii._Yt,[google.ima.AdEvent.Type.LOG]:Ii.vYt,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Ii.gYt,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Ii.wYt,[google.ima.AdEvent.Type.VOLUME_MUTED]:Ii.mYt}[t]}(t.type),s={type:i,date:new Date,G7:e?this.c4t(e):void 0,xZt:Rj(i,t.getAdData())};this.wo(s)},this.forwardAdErrorEventListener=t=>{this.wo({date:new Date,G7:void 0,type:Pj.pYt,xZt:{dJt:Nj(t.getError())}})},this.bqt=t,this.y$t=e,this.l3=i,this.l3.wn(to.gn,this.a4t),this.bqt.init(this.y$t.J3t,this.y$t.Y3t,google.ima.ViewMode.NORMAL),this.bqt.addEventListener(google.ima.AdEvent.Type.LOADED,this.u4t),this.bqt.addEventListener(AZ(),this.forwardAdEventListener),this.bqt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};t();var TZ=class extends Cs{get l4t(){return this.d4t}get m0t(){return this.$zt}ya(){return new SZ(this.d4t)}constructor(t,e){super("B$t"),this.d4t=t,this.$zt=e}},SZ=class extends o{get adsManager(){return this.d4t}constructor(t){super("adsmanagerloaded"),this.d4t=t}},kZ=class extends Re{w$t(){var t;null==(t=this.m$t)||t.contentComplete()}async Fjt(t,e,i){if(this.f4t)throw new v("Only one ImaAdsRequest can be made at a time.");if(!this._4t.$3t)throw new v("AdDisplayContainer is not initialized.");this.m$t=new google.ima.AdsLoader(this._4t.$3t),this.m$t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.m$t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.f4t=new ue,this.v4t=e,this.g4t=i;const s=new google.ima.AdsRequest;return t.JKt?s.adTagUrl=t.JKt:t.$Kt&&(s.adsResponse=t.$Kt),s.linearAdSlotWidth=t.GKt,s.linearAdSlotHeight=t.QKt,s.nonLinearAdSlotWidth=t.KKt,s.nonLinearAdSlotHeight=t.jKt,s.contentDuration=t.ejt,s.setAdWillAutoPlay(t.YKt),s.setAdWillPlayMuted(t.ZKt),t.tjt&&(s.omidAccessModeRules=t.tjt),this.m$t.requestAds(s),this.f4t.Pf}Wu(){var t;void 0!==this.m$t&&(this.m$t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.m$t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.m$t.destroy(),this.m$t=void 0),null==(t=this.f4t)||t.My("AdsLoader destroyed"),this.f4t=void 0}constructor(t,e){super(),this.onAdsManagerLoadedListener=t=>{if(this.v4t&&this.g4t&&this.f4t){var e;const i=EZ(this.g4t),s=this.v4t,n=t.getAdsManager({get currentTime(){return s.Yu},get duration(){return s.ct}},i),r=new bZ(n,this._4t,this.l3);this.wo(new TZ(n,this._4t.m0t)),null==(e=this.f4t)||e.Xf(r),this.f4t=void 0}},this.onAdsManagerErrorListener=t=>{var e;const i={ly:t.getError().getMessage(),lZt:t.getError().getVastErrorCode(),YVt:t.getError().getErrorCode(),Vm:xj(t.getError().getType()),dZt:void 0};null==(e=this.f4t)||e.My(i),this.f4t=void 0},this.l3=e,this._4t=t}};function EZ(t){const e=new google.ima.AdsRenderingSettings;return e.enablePreloading=t.I$t,t.P$t&&(e.uiElements=t.P$t),e.mimeTypes=t.E$t,void 0!==t.R$t&&(e.playAdsAfterTime=t.R$t),void 0!==t.C$t&&(e.loadVideoTimeout=t.C$t),void 0!==t.TJt&&(e.bitrate=t.TJt),void 0!==t.R$t&&(e.playAdsAfterTime=t.R$t),e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e}t();var PZ=class extends Re{get Yu(){return this.sa.Uc?this.w4t:this.sa.aP()}get ct(){return this.sa.cP()}get tc(){return this.sa.tc}get Pl(){return this.sa.Pl}sr(){this.w4t=0}constructor(t){super(),this.sa=t,this.w4t=this.sa.aP(),this.sa.wn(Uv.Xu,(()=>{this.sa.Uc||(this.w4t=this.sa.aP()),this.wo(new Ph(this.Yu,void 0))}))}};Nr.Gg.registerWebImaAdPlayerConstructor((function(t,e,i){Qj(i);const s=Kj(i)?t.QP():void 0,n=new pZ(s,t.je),r=new kZ(n,t.c3),h=new PZ(t);return new jj(t,e,i,t.X9,n,r,h)})),t(),t(),t(),t(),t();var IZ=class extends Re{get ba(){return this.Zu||(this.Zu=function(t){return{get casting(){return t.iQ},get state(){return t.Iut},start(){t.YP()},stop(){t.ZP()},addEventListener(e,i){const s=tc(e,ci);t.wn(s,i)},removeEventListener(e,i){const s=tc(e,ci);t.pn(s,i)}}}(this)),this.Zu}constructor(...t){super(...t),this.Zu=void 0}},CZ=class extends IZ{get iQ(){return this.Iut===D.CONNECTED}get Iut(){return this.Da}m4t(){this.p4t(),this.Wft.wn(Uv.oo,this.y4t),this.Na(D.AVAILABLE)}p4t(){this.sa&&this.sa.pn(Uv.Sp,this.handleAirplayChangedEvent),this.A4t?this.sa=this.lG:this.sa=this.b4t,this.sa.wn(Uv.Sp,this.handleAirplayChangedEvent)}get A4t(){return this.lG.jP()}async T4t(){if(this.sa){if(this.A4t){if(!this.sa.Oc){const t=new Promise((t=>u(t,800))),e=this.sa.Tp(Uv.Ff,this.S4t.ap);await Promise.race([e,t])}this.sa.bl()}else{this.k4t=this.lG.Yu,this.E4t=this.lG.Ku,this.b4t.wn(Uv.Xu,this.handleAirplayPlayerTimeUpdate),this.P4t=this.lG.BI,this.lG.BI=this.b4t,this.P4t.Ml(),this.P4t.ke(),this.b4t.be(),this.b4t.tc=this.P4t.tc,this.b4t.Hu=this.P4t.Hu,this.b4t.Pl=this.P4t.Pl;const t=this.b4t.Tp(Uv.If);this.b4t.Yu=this.P4t.Yu,await t,this.b4t.bl(),this.b4t.tc=this.P4t.tc,this.b4t.Hu=this.P4t.Hu,this.b4t.Pl=this.P4t.Pl}this.Na(D.CONNECTED)}}I4t(){if(this.P4t){this.b4t.pn(Uv.Xu,this.handleAirplayPlayerTimeUpdate),this.P4t.tc=this.b4t.tc,this.P4t.Hu=this.b4t.Hu,this.P4t.Pl=this.b4t.Pl;ds.fg&&!ds.uv&&this.lG.ct===1/0?this.E4t?this.P4t.Ku=this.E4t:this.P4t.Yu=1/0:this.P4t.Yu=this.k4t,this.E4t=void 0,this.k4t=void 0,this.P4t.be(),this.b4t.ke(),this.b4t.Oc||this.P4t.bl(),this.lG.BI=this.P4t,this.b4t.sr(),this.P4t=void 0}else this.sa&&(this.sa.Yu=this.sa.Yu+1e-4);this.Na(D.AVAILABLE)}preloadPlayer(t){if(Bv(t),this.sa.Vc<qb.Qn){const e=this.sa.Tp(cb.xl,t);return this.sa.IP=Ds.lF,e}return Promise.resolve()}Na(t){t!==this.Da&&(this.Da=t,this.wo(new VK(this.Da)))}YP(){let t;this.Wft.KP(),this.S4t.tf(),this.S4t=new Mr,t=this.A4t?this.C4t(this.S4t.ap):this.R4t(this.S4t.ap),Ov(qe(t,this.S4t))}async C4t(t){await this.preloadPlayer(t),this.lG.YP()}async R4t(t){try{await this.b4t.sr();const e=this.lG.BP();if(void 0===e)throw new v("Not possible to start Airplay without a source");await this.b4t._a(e,t);const i=this.b4t.Tp(cb.nd,t);this.b4t.bl(),await async function(t,e){const i={stack:[],error:void 0,hasError:!1};try{const s=oe(i,new Mr,!1);return await Promise.race([t,Rt(e,s.ap).then((()=>{throw new v("Timeout")}))])}catch(t){i.error=t,i.hasError=!0}finally{se(i)}}(i,3e3),this.b4t.Ml(),Bv(t),this.b4t.YP()}catch(t){if(Eh(t))return;0}}ZP(){this.sa.ZP()}bn(){var t;this.Bo(),this.Wft.pn(Uv.oo,this.y4t),this.S4t.tf(),this.lG.MM(this.b4t),null==(t=this.b4t)||t.bn()}constructor(t,e,i){super(),this.Da=D.UNAVAILABLE,this.S4t=new Mr,this.y4t=()=>{var t;const e=null==(t=this.lG.BP())?void 0:t.sources.filter(jc);(null==e?void 0:e.some(LE))?this.Na(D.AVAILABLE):this.Na(D.UNAVAILABLE)},this.handleAirplayChangedEvent=()=>{this.sa&&this.sa.wP?this.T4t():this.Iut===D.CONNECTED&&this.I4t()},this.handleAirplayPlayerTimeUpdate=t=>{this.k4t=t.currentTime,this.E4t=this.lG.Ku},this.Wft=t,this.lG=e,this.b4t=i,this.b4t.ke(),e.BM(i),this.m4t()}};t();var RZ=class extends IZ{get iQ(){return!1}get Iut(){return D.UNAVAILABLE}YP(){}ZP(){}};t();var xZ=class extends S{$P(){this.x4t.$P()}iI(t){throw new v("Can't add a track while using AirPlay.")}get ht(){return this.x4t.ht}get Sl(){return this.x4t.Sl}get bt(){return this.nW}get Yu(){return this.x4t.Yu}set Yu(t){this.uP(t)}uP(t,e){this.x4t.uP(t,e)}get Ku(){return this.x4t.Ku}get ct(){return this.x4t.ct}get je(){return this.Hs}get $c(){return this.x4t.$c}get lt(){return this.x4t.lt}get Rc(){return this.x4t.Rc}get vP(){return this.x4t.vP}get wP(){return this.x4t.wP}get XP(){return this.x4t.XP}get qP(){return this.x4t.qP}get pP(){return this.x4t.pP}get tc(){return this.x4t.tc}set tc(t){this.x4t.tc=t}get TP(){return this.x4t.TP}get Oc(){return this.x4t.Oc}get Hu(){return this.x4t.Hu}set Hu(t){this.x4t.Hu=t}get Tl(){return this.x4t.Tl}get IP(){return this.x4t.IP}set IP(t){this.x4t.IP=t}get Vc(){return this.x4t.Vc}get Cl(){return this.x4t.Cl}get Uc(){return this.x4t.Uc}jP(){return this.x4t.jP()}YP(){this.x4t.YP()}ZP(){this.x4t.ZP()}get nt(){return this.x4t.nt}get LP(){return this.x4t.LP}get UP(){return this.x4t.UP}get rt(){return this.x4t.rt}get Pl(){return this.x4t.Pl}set Pl(t){this.x4t.Pl=t}bl(){Ov(this.x4t.bl())}Ml(){this.x4t.Ml()}async Al(){}BP(){return this.ZV}async _a(t,e){let i;if(Bv(e),this.ZV=t,Tc(t.sources))i=tb({src:""});else{const e=t.sources.filter(jc);for(const t of e)if(LE(t)){i=t;break}}if(!i)throw new v("Unsupported source.");await this.x4t._a(i,t,e),this.dW(i)}dW(t){this.nW!==t&&(this.nW=t,this.wo(new Q(t)))}QP(){return this.x4t.QP()}sP(){return[]}KP(){this.D4t.mW()}lr(t){Jb(this,t)}cr(){}tI(t){return!1}JP(){this.x4t.JP()}async sr(){this.nW=void 0,this.ZV=void 0,await this.x4t.sr()}be(){this.x4t.be()}ke(){this.x4t.ke()}GP(){return this.x4t.GP()}xa(){return this.x4t.xa()}async bn(){this.Bo(),this.D4t.bn(),await this.x4t.bn(),this.TM.bn(),this.kM.bn(),this.Au.bn()}constructor(t,e,i,s,n,r,h){super(),this.nW=void 0,this.ZV=void 0,this.TM=new Ic,this.kM=new Ic,this.Au=new Qt,this.Hs=t,this.D4t=new Un(r,h,1,[Be.wl]),this.D4t.SW(t),this.x4t=new ME(t,this.D4t,e,i,s,n),this.x4t.wp(this.Os),this.TM.BI=this.x4t.ht,this.kM.BI=this.x4t.rt,this.Au.BI=this.x4t.nt}},DZ=class extends Mi{async bn(){this.N4t.bn(),await super.bn()}constructor(t){super(t);const e=new xZ(this.Sa.je,this.td,this.aT,this.z9,this.qP,this.K9,this.Du);this.N4t=new CZ(this,this.Sa,e),this.G9.oQ(this.N4t),this.wn(Uv.Rp,(()=>{this.N4t.p4t()}))}};DB((t=>Gn.Zs.hw?new DZ(t):(t.G9.oQ(new RZ),t)),qt.b7),t(),t();var NZ=class extends S{get ba(){return this.Zu||(this.Zu=function(t){let e,i={get status(){return t.MS},get tasks(){return t.X1t},get network(){return t.Y9.ba},createTask:(e,i)=>t.B4t(e,i),addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new jo(t,i),i}(this)),this.Zu}get MS(){return this.M4t.MS}get X1t(){return this.M4t.X1t.ba}get Y9(){return this.Z9}B4t(t,e,i){let s,n;if(void 0===i&&(i="persistent"),!t)throw new v("Unexpected - The source description is undefined");if(s=Gc(t),n=cZ(e),mP(s))throw new v("Invalid source description");return this.M4t.V1t(s,n).ba}constructor(t,e){super(),this.M4t=t,this.Z9=e,this.M4t.wn("tnt",this.Os)}};var BZ=function(){const t=new GI(Gn.td,!1),e=gi.Gg,i=new wZ(t),s=new oZ(e,i),n=new KI(t),r=new AY(e.yet,s,"persistent");return new NZ(r,n)}().ba;t(),t(),t(),t(),t(),t(),t();var MZ=Promise;function LZ(t,e){if("function"==typeof t.getAll){return OZ(void 0===e?t.getAll():t.getAll(e))}return function(t){let e=new ue,i=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(i.push(s.value),s.continue()):e.Xf(i),De()},t.onerror=()=>{e.My(t.error),De()},e.Pf}(void 0===e?t.openCursor():t.openCursor(e))}function OZ(t){return new Promise(((e,i)=>{t.onsuccess=()=>{e(t.result),De()},t.onerror=()=>{i(t.error),De()}}))}var FZ=class{tf(){if(this.Zh)try{this._et.abort(),this.Zh=!1}catch(t){}}constructor(t){this._et=t,this.Zh=!0,this.Pf=new Promise(((t,e)=>{this._et.oncomplete=()=>{this.Zh=!1,t(),De()},this._et.onerror=()=>{this.Zh&&(this.Zh=!1,e(this._et.error||new v("Transaction error")),De())},this._et.onabort=()=>{this.Zh=!1,e(new v("Transaction aborted")),De()}}))}};async function UZ(t,e,i){const s=new FZ(t);try{const[t]=await Promise.all([e(i),s.Pf]);return t}catch(t){if(!s.Zh)throw new SY("IDBTransaction committed prematurely",t);throw t}finally{s.tf()}}var VZ=class{get l(){return this.jk.l}eet(t){return Promise.resolve("persistent"===t)}iet(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(Ti(e));return OZ(this.L4t(B.Tet).put(t))}async net(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(Ti(e));for(const i of t)await this.iet(i,e)}async Ry(t){return Boolean(await this.xy(t))}xy(t){return OZ(this.L4t(B.bet).get(t))}ret(t,e){return OZ(this.L4t(B.bet).index(e).get(t))}async Ktt(t){const e=[];for(let i of t){const t=await this.xy(i);t&&e.push(t)}return e}het(){return LZ(this.L4t(B.bet))}oet(t){return LZ(this.L4t(B.bet),t)}aet(t,e){return LZ(this.L4t(B.bet).index(e),t)}sc(t){return OZ(this.L4t(B.Tet).delete(t))}async uet(t){for(const e of t)await this.sc(e)}cet(){return OZ(this.L4t(B.Tet).clear())}L4t(t){if(!this.O4t)throw new v("Lock was released");if(!function(t,e){return t===B.bet&&e===B.bet||e===B.Tet}(t,this.O4t.mode))throw new v("Incompatible transaction mode: "+this.O4t.mode+", expected "+t);return this.O4t.objectStore(this.l)}F4t(){this.jk.U4t(this),this.O4t=void 0}constructor(t,e){this.jk=t,this.O4t=e}};var HZ=class{eet(t){return Promise.resolve("persistent"===t)}iet(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(Ti(e)):this._et(B.Tet,(e=>e.iet(t)))}net(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(Ti(e)):this._et(B.Tet,(e=>e.net(t)))}Ry(t){return this._et(B.bet,(e=>e.Ry(t)))}xy(t){return this._et(B.bet,(e=>e.xy(t)))}ret(t,e){return this._et(B.bet,(i=>i.ret(t,e)))}Ktt(t){return this._et(B.bet,(e=>e.Ktt(t)))}het(){return this._et(B.bet,(t=>t.het()))}oet(t){return this._et(B.bet,(e=>e.oet(t)))}aet(t,e){return this._et(B.bet,(i=>i.aet(t,e)))}sc(t){return this._et(B.Tet,(e=>e.sc(t)))}uet(t){return this._et(B.Tet,(e=>e.uet(t)))}cet(){return this._et(B.Tet,(t=>t.cet()))}xTt(t){return this.V4t(),this.mTt=new VZ(this,t),this.mTt}V4t(){if(void 0!==this.mTt)throw new v("Already locked")}U4t(t){if(this.mTt!==t)throw new v("Incorrect lock");this.mTt=void 0}Xo(t){return this.Jo.Xo(t)}_et(t,e){return this.Xo((()=>this.H4t(t,e)))}async H4t(t,e){this.V4t();const i=this.W4t.transaction(this.l,t),s=this.xTt(i);try{return await UZ(i,e,s)}finally{s.F4t()}}q4t(t){this.V4t();const e=this.W4t.transaction(this.l,t);return this.xTt(e)}static z4t(t,e){let i;const s=new Promise((t=>{i=t})),n=t.reduce(((t,e)=>t.then((()=>{let t;const i=new Promise((e=>{t=e}));return e.Xo((()=>(t(),s))).catch(De),i}))),Promise.resolve());return i(n.then(e)),s}constructor(t,e){this.mTt=void 0,this.Jo=new jn,this.W4t=t,this.l=e}};t(),t(),t(),t(),t();var WZ={bx:17,X4t:async t=>{const{transaction:e,database:i}=t,s=e.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)i.deleteObjectStore(s[t]);i.createObjectStore(QZ,{keyPath:"id"}),i.createObjectStore(KZ,{keyPath:"key"}),i.createObjectStore(jZ,{keyPath:"key"});i.createObjectStore(YZ,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");i.createObjectStore(ZZ,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},qZ=class{async G4t(t){for(const e of this.Q4t)this.K4t<e.bx&&await e.X4t(t)}constructor(t){this.K4t=t}},zZ=class extends qZ{get Q4t(){return[WZ]}},XZ=new class{j4t(t){this.Y4t=t}Z8(t){return this.Y4t(t)}constructor(){this.Y4t=t=>new zZ(t)}},GZ=18,QZ="cachingTask",KZ="licences",jZ="manifest",YZ="segment",ZZ="segmentMetadata";async function JZ(){!function(){if("undefined"==typeof indexedDB)throw new v("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",GZ);return t.addEventListener("upgradeneeded",$Z),await OZ(t)}async function $Z(t){const e=t.oldVersion<=GZ?t.oldVersion:-1,i=t.target,s=i.result,n=i.transaction,r=XZ.Z8(e),h={database:s,transaction:n};await UZ(n,(t=>r.G4t(t)),h)}var tJ=class{static get Gg(){return this.Met||(this.Met=JZ()),this.Met}};tJ.Met=void 0,t();var eJ=class{_et(t){return t(this)}F4t(){this.met.F4t(),this.wet.F4t(),this.pet.F4t(),this.yet.F4t(),this.Aet.F4t()}constructor(t,e){this.met=t.met.xTt(e),this.wet=t.wet.xTt(e),this.pet=t.pet.xTt(e),this.yet=t.yet.xTt(e),this.Aet=t.Aet.xTt(e)}};gi.Pa(class t{static async Z8(){const e=await tJ.Gg;return new t(e)}_et(t){const e=this.allCollections;return HZ.z4t(e,(()=>this.H4t(e,t)))}async H4t(t,e){const i=t.map((t=>t.l)),s=this.W4t.transaction(i,B.Tet),n=new eJ(this,s);try{return await UZ(s,e,n)}finally{n.F4t()}}get allCollections(){return[this.wet,this.met,this.pet,this.yet,this.Aet]}constructor(t){this.W4t=t,this.met=new HZ(t,ZZ),this.wet=new HZ(t,YZ),this.pet=new HZ(t,jZ),this.yet=new HZ(t,QZ),this.Aet=new HZ(t,KZ)}}.Z8),t(),t(),t();var iJ=class{Z4t(t){const e=this.lG.sP(),i=t.createGain();for(const s of e){t.createMediaElementSource(s).connect(i)}return i}get ba(){return this.Zu||(this.Zu=this.ya()),this.Zu}ya(){const t=this;return{createAudioSourceNode:e=>t.Z4t(e)}}constructor(t){this.Zu=void 0,this.lG=t}};RB((function(t){return class extends t{ya(){const t=this.J4t.ba;return Xe(super.ya(),{get audio(){return t}})}constructor(t,e){super(t,e),this.J4t=new iJ(this.Sa)}}}),qt.p7),t(),t(),t(),t();var Oa=function(t){return t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error",t}({});t();var sJ=class extends ij{ya(){return Rr(this)}get MHt(){return Ac.zqt}get YM(){return this.hL}get BFt(){return this.mUt}constructor(t,e,i,s){super(t,e),this.mUt=s,this.hL=i}};t();var nJ=class extends vc{get IPt(){return this.$4t}get MHt(){return Ac.zqt}constructor(t,e,i){if(super(e),this.iQt=t,this.sQt=t,i){const t=new Date(i);Di(t)&&(this.$4t=t)}}},rJ=class{FI(){this.sa.wn(cb.nd,this.qf),this.sa.wn(Uv.Ff,this.Bf),this.sa.wn(Uv.no,this.Nf),this.sa.wn(Uv.$f,this.Xe),this.sa.wn(Uv.Df,this.Ch),this.sa.wn(Uv.Xu,this.Tnt),this.sa.wn(Uv.Bl,this.MXt),this.sa.wn(LI.MODE_CHANGE,this.t6t)}LI(){this.sa.pn(cb.nd,this.qf),this.sa.pn(Uv.Ff,this.Bf),this.sa.pn(Uv.no,this.Nf),this.sa.pn(Uv.$f,this.Xe),this.sa.pn(Uv.Df,this.Ch),this.sa.pn(Uv.Xu,this.Tnt),this.sa.pn(Uv.Bl,this.MXt),this.sa.pn(LI.MODE_CHANGE,this.t6t)}get e6t(){return this.i6t}get B7(){const t=this.e6t;if(!t)return[];const e=[],i=this.s6t();for(const s of t.l7)i>=s.YM&&this.n6t<=s.YM+s.ct&&e.push(s);return e}s6t(){return this.sa.aP()-this.r6t}h6t(){if(this.o6t)return;if(this.sa.cP()!==1/0)return void(0===this.a6t.length&&(this.o6t=this.u6t()));const t=()=>{var t;null==(t=this.c6t)||t.Wu(),this.c6t=void 0,this.o6t=void 0};this.c6t=new Mr,this.o6t=this.l6t(this.c6t.ap).catch(this.A2).then(t,t)}async d6t(){const t=w.min(1e3*2**this.f6t,3e4);try{var e;await Rt(t,null==(e=this.c6t)?void 0:e.ap),this.f6t++}catch(t){if(Eh(t))return void(this.f6t=0)}this.h6t()}async l6t(t){for(;Bv(t),!this.sa.Oc;){const e=Gn.Qg()-this._6t;if(e>1e4)await this.u6t(t),this._6t=Gn.Qg(),this.f6t=0;else{const i=1e4-e;await Rt(i,t)}}}v6t(t){const e=t.IPt;if(e&&this.sa.Ku&&0===this.r6t&&!this.g6t&&0!==w.floor(this.sa.DP().start(0))){const i=(this.sa.Ku.getTime()-e.getTime())/1e3,s=this.sa.aP()-t.pPt;this.r6t=s-i}}async u6t(t){try{const e=await this.sa.td.FS({qS:this.w6t}),i=await e.vS(t);if(0===i.avails.length)return void(0!==this.a6t.length&&(this.a6t=[]));if(i.avails.length===this.a6t.length&&i.avails[0].startTimeInSeconds===this.a6t[0].pPt)return void this.v6t(this.a6t[0]);const s=[];for(const t of i.avails){const e=new nJ(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const i of t.ads){const t=new sJ(e,Ys.oHt,i.startTimeInSeconds,i.trackingEvents);t._Qt(i.adId,i.width,i.height,i.durationInSeconds,[],i.skipoffset),e.oQt(t)}s.push(e),this.v6t(e)}this.a6t=ln(s,((t,e)=>t.pPt-e.pPt))}catch(t){throw ta(t),new v("Failed to poll MediaTailor tracking events")}}m6t(){var t;null==(t=this.c6t)||t.tf(),this.c6t=void 0,this.o6t=void 0,this._6t=-1/0}p6t(){if(0===this.a6t.length)return;const t=this.a6t[this.a6t.length-1],e=this.s6t();if(t.pPt+t.pqt<this.n6t){var i;this.i6t&&(null==(i=this.sa.l7)||i.wo(new Li(this.i6t)),this.i6t=void 0)}else{for(const t of this.a6t){const i=t.pPt;if(!(i+t.pqt<this.n6t)&&(i<=e&&i+t.pqt>this.n6t)){var s;if(this.e6t===t)return;return this.i6t=t,void(null==(s=this.sa.l7)||s.wo(new ZB(this.i6t)))}}var n;if(this.i6t)null==(n=this.sa.l7)||n.wo(new Li(this.i6t)),this.i6t=void 0}}y6t(){const t=this.B7;if(0===t.length)return;let e=[];for(const i of t){const t=i.BFt.filter((t=>Qe(this.A6t,t.eventType)));e=e.concat(t)}for(const t of e)this.b6t(t.startTimeInSeconds)&&(t.eventType===Oa.COMPLETE&&this.T6t(Oa.ENGAGED_VIEW),this.S6t(t))}k6t(t,e){return e.BFt.filter((e=>ys(e.eventType,t)))[0]}T6t(t){const e=this.B7;if(0===e.length)return;const i=this.k6t(t,e[0]);i&&this.S6t(i)}S6t(t){this.E6t(t.eventType);for(const e of t.beaconUrls){const t={vk:Na.GET,qS:e,AS:"",OS:Gs.uS};0,Ov(this.P6t(t))}}E6t(t){let e;const i=this.B7;switch(t){case Oa.START:e=new Pe(i[i.length-1],this.sa.aP());break;case Oa.COMPLETE:e=new Ls(i[0],this.sa.aP());break;case Oa.FIRST_QUARTILE:e=new cr(i[0],this.sa.aP());break;case Oa.MID_POINT:e=new fr(i[0],this.sa.aP());break;case Oa.THIRD_QUARTILE:e=new gr(i[0],this.sa.aP())}var s;void 0!==e&&(null==(s=this.sa.l7)||s.wo(e))}async P6t(t){const e=await this.sa.td.FS(t);e.MS}b6t(t){const e=this.s6t();return t>=this.n6t&&t<e}bn(){this.LI(),this.m6t(),this.n6t=-1}constructor(t,e,i){this._6t=-1/0,this.i6t=void 0,this.r6t=0,this.a6t=[],this.I6t=!1,this.sX=!1,this.n6t=-1,this.c6t=void 0,this.o6t=void 0,this.f6t=0,this.qf=()=>{this.h6t()},this.Nf=()=>{this.T6t(Oa.RESUME)},this.Bf=()=>{this.m6t(),this.T6t(Oa.PAUSE)},this.Xe=()=>{this.m6t(),this.n6t=-1},this.Ch=()=>{this.m6t()},this.Tnt=()=>{-1===this.n6t&&(this.n6t=this.s6t()),this.p6t(),this.y6t(),this.n6t=this.s6t()},this.MXt=()=>{if(this.I6t!==this.sa.tc){this.I6t=this.sa.tc;const t=this.I6t?Oa.MUTE:Oa.UNMUTE;this.T6t(t)}},this.t6t=()=>{if(this.sX!==this.sa.cs()){this.sX=this.sa.cs();const t=this.sX?Oa.FULL_SCREEN:Oa.EXIT_FULL_SCREEN;this.T6t(t)}},this.A2=t=>{Eh(t)||(this.T6t(Oa.ERROR),Ov(this.d6t()))},this.A6t=[Oa.START,Oa.FIRST_QUARTILE,Oa.MID_POINT,Oa.THIRD_QUARTILE,Oa.COMPLETE,Oa.IMPRESSION,Oa.CREATIVE_VIEW],this.sa=t,this.w6t=e,this.g6t=i,this.FI()}};RB((function(t){return class extends t{_a(t){return this.C6t&&(this.C6t.bn(),this.C6t=void 0,this.Lbt()),super._a(t)}async ctt(t,e){if(!t||!function(t){return t.sources.some((t=>t.integration===bb.MEDIATAILOR))}(t))return super.ctt(t,e);try{const i=await this.R6t(t,e);this.x6t=new gj(this),await super.ctt(i,e)}catch(t){this.UH(new ke(X.MANIFEST_LOAD_ERROR,t.message,t))}}$u(t){var e;(null==(e=this.x6t)?void 0:e.inAdBreak)||super.$u(t)}uP(t,e){var i;(null==(i=this.C6t)?void 0:i.e6t)||super.uP(t,e)}fP(){var t;return null!=(t=this.$V)?t:super.fP()}_P(){var t;return null!=(t=this.Wl)?t:super._P()}UH(t){this.$V=Bc(t),this.Wl=t,this.wo(new _n(t))}Lbt(){this.$V=void 0,this.Wl=void 0}async R6t(t,e){let i=[];for(const s of t.sources){if(!Db(s)){i.push(s);continue}const t=s;if(!t.src){i.push(s);continue}const n=await this.D6t(t,e);Bv(e);const r=yh({},t,{integration:void 0,src:n});i.push(r)}const s=pr(t);return s.sources=i,s}async D6t(t,e){const i=t.src||"",s=i.match(/.+?(?=\/v1\/)/);if(!s)throw new v("Could not find MediaTailor session initialization url");const n=s[0],r=H(i,"?ads."),h=r?{qS:i,OS:Gs.uS}:{qS:i,vk:Na.POST,AS:JSON.stringify({adParams:t.adParams}),OS:Gs.uS},o=await vt((()=>this.N6t(h,e)),e);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,e=Eb(a);this.C6t=new rJ(this,t,e)}}catch(t){throw new v("Something went wrong parsing the MediaTailor session initialization response")}return a}async N6t(t,e){try{const i=await this.td.FS(t);return await i.vS(e)}catch(t){throw ta(t),new v("Failed to initialize MediaTailor session manifest")}}bn(){var t;this.C6t&&(this.C6t.bn(),this.C6t=void 0),this.Lbt(),null==(t=this.x6t)||t.destroy(),this.x6t=void 0,super.bn()}constructor(t,e){super(t,e),this.C6t=void 0,this.$V=void 0,this.Wl=void 0,this.x6t=void 0}}}),qt.T7),t(),t(),t(),t(),t();var ai=function(t){return t[t.B6t=0]="B6t",t[t.nd=1]="nd",t[t.$jt=2]="$jt",t[t.M6t=3]="M6t",t[t.L6t=4]="L6t",t[t.O6t=5]="O6t",t[t.la=6]="la",t}({});t();var hJ=class extends Re{get QI(){}get Rt(){return this.We}set Rt(t){this.qM(t)}get ba(){var t;return null!=(t=this.Zu)?t:this.Zu=Ji(this)}get o(){return String(this.F6t.componentTag)||"hbbtvaudiotrack"}get Lt(){return this.E0}get _h(){return this.ec}get gs(){return""}get Tk(){return this.Rt?"enabled":"disabled"}set Tk(t){this.qM("enabled"===t)}get YI(){return this.LM}get ZI(){}set ZI(t){}get KI(){return this.HM}qM(t){this.We=t,t?this.V6t.U6t(this.F6t):this.V6t.H6t(this.F6t)}constructor(t,e,i,s,n=!1){super(),this.HM=xs(),this.LM=new Zh,this.F6t=t,this.ec=e,this.E0=i,this.We=n,this.V6t=s}};t(),t(),t();var oJ=function(t){return t.Mm="urn:dvb:casystemid:19219",t.Lm="urn:dvb:casystemid:19156",t}({}),aJ=function(t){return t.Mm="application/vnd.ms-playready.initiator+xml",t.Lm="application/widevine+xml",t}({});function uJ(t,e,i){switch(t){case"urn:dvb:casystemid:19219":return function(t){return'<?xml version="1.0" encoding="utf-8"?><PlayReadyInitiator xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/"><LicenseServerUriOverride><LA_URL>'+(null!=t?t:"")+"</LA_URL></LicenseServerUriOverride></PlayReadyInitiator>"}(e);case"urn:dvb:casystemid:19156":if(!i)throw new v("Content URL is needed for Widevine license request");return function(t,e){return'<?xml version="1.0" encoding="utf-8"?><WidevineCredentialsInfo xmlns="http://www.smarttv-alliance.org/DRM/widevine/2012/protocols/"><ContentURL>'+ZG(null!=e?e:"")+"</ContentURL><DeviceID></DeviceID><StreamID></StreamID><ClientIP></ClientIP><DRMServerURL>"+ZG(null!=t?t:"")+"</DRMServerURL><DRMAckServerURL></DRMAckServerURL><DRMHeartBeatURL></DRMHeartBeatURL><DRMHeartBeatPeriod></DRMHeartBeatPeriod><UserData></UserData><Portal></Portal><StoreFront></StoreFront><BandwidthCheckURL></BandwidthCheckURL><BandwidthCheckInterval></BandwidthCheckInterval></WidevineCredentialsInfo>"}(e,i);default:throw new v("DRM key system is not supported")}}var cJ=class extends cu{W6t(t){this.q6t(),this.wW=t}async z6t(t){if(!t.oH.length)return void this.q6t();if(!this.wW)throw new v("The OIPF DRM agent has to be attached to the DOM");let e;this.X6t||(this.X6t=h.createElement("object"),this.X6t.type="application/oipfDrmAgent",this.wW.appendChild(this.X6t),this.X6t.onDRMMessageResult=this.G6t,this.X6t.onDRMRightsError=this.Q6t,this.K6t=h.createElement("object"),this.K6t.type="application/oipfCapabilities",this.wW.appendChild(this.K6t));for(const i of t.oH){let s,n,r;if(i.rT===U)s=oJ.Mm,n=aJ.Mm,r=uJ(oJ.Mm,i.LV);else{if(i.rT!==tv)continue;s=oJ.Lm,n=aJ.Lm,r=uJ(oJ.Lm,i.LV,t.iC)}try{return await this.F8(n,r,s),void this.wo(new vu)}catch(t){e=t}}e&&this.wo(new Jc(e))}Wu(){return this.j6t=void 0,this.wW=void 0,super.Wu()}F8(t,e,i){var s,n;return this.j6t=new ue,this.Y6t=null==(n=this.X6t)||null==(s=n.sendDRMMessage)?void 0:s.call(n,t,e,i),this.Y6t||null==this.j6t.My||this.j6t.My.call(this.j6t,new ga(X.CONTENT_PROTECTION_INTERNAL_ERROR,"No DRM message returned by OIPF DRM agent")),this.j6t.Pf}Z6t(t){switch(t){case 5:return X.CONTENT_PROTECTION_NOT_SUPPORTED;case 2:case 1:case 3:case 4:case 6:return X.CONTENT_PROTECTION_INTERNAL_ERROR;default:return X.CONTENT_PROTECTION_ERROR}}J6t(t){switch(t){case 2:return"The DRM agent was unable to complete the request";case 3:return"The specified MIME type is unknown for the specified DRM system";case 4:return"User consent is needed for that action";case 5:return"The specified DRM System is unknown";case 6:return"The license message has the wrong format";default:return"Unspecified error occurred"}}$6t(t){return 0===t?X.CONTENT_PROTECTION_LICENSE_ERROR:1===t?X.CONTENT_PROTECTION_LICENSE_INVALID:X.CONTENT_PROTECTION_ERROR}t5t(t){switch(t){case 0:return"No license, consumption of the content is blocked";case 1:return"Invalid license, consumption of the content is blocked";case 2:return"Valid license, consumption of the content is unblocked";default:return"Unknown error occurred"}}q6t(){this.X6t&&(Es(this.X6t),this.X6t=void 0),this.K6t&&(Es(this.K6t),this.K6t=void 0)}async q2(t,e,i){}constructor(...t){super(...t),this.X6t=void 0,this.K6t=void 0,this.wW=void 0,this.Y6t=void 0,this.j6t=void 0,this.G6t=(t,e,i)=>{var s,n,r,h;if(0===i)return void(null==(h=this.j6t)||null==(r=h.Xf)||r.call(h,t));const o=this.Z6t(i),a=this.J6t(i),u=new ga(o,a);null==(n=this.j6t)||null==(s=n.My)||s.call(n,u)},this.Q6t=(t,e,i,s)=>{const n=this.$6t(t),r=this.t5t(t),h=new ga(n,r);this.wo(new Jc(h))}}};t();var lJ=class{get Cl(){return r.OB(0,this.rM.ct)}get IP(){return Ds.sW}set IP(t){}get aT(){return this.pl}nK(t){return!1}hK(t){return MZ.resolve(void 0)}async z6t(t){await this.oK.z6t(this.pl)}Wu(){return MZ.resolve(void 0)}constructor(t,e,i){this.pl=t,this.rM=e,this.oK=i}},dJ=class extends Re{get Sl(){return r.Ol()}get Ku(){}get sH(){}get c3(){return this.l3}get Cl(){var t,e;return null!=(e=null==(t=this.iH)?void 0:t.Cl)?e:r.Ol()}get Uc(){return this.sf}get Hc(){return!1}get wP(){return!1}get cM(){return yh({},xC)}get lt(){return this.$V}get u0(){return!1}get ja(){return this.ia}get e6(){return!0}get Lc(){return!1}get XP(){return!0}set XP(t){}get Du(){return this.Ic}get nt(){return this.e4}get T3(){return this.lW}get wH(){return this.Ko}s6(t){this.oK.W6t(t),this.k8.s6(t)}EK(t){for(const e of t)if(e.Vm===A.IF)return e}async On(t){if(this.iH)throw new v("Already loaded a media source");if(t.Vm===A.IF)return this.iH=new lJ(t,this,this.oK),await this.iH.z6t(t),this.iH;throw new v("Unsupported media source configuration for HbbTV")}async e5t(t){await this.i5t()}async bl(){await this.i5t()}YV(t){}async sr(){this.iH=void 0,this.s5t=void 0}async Wu(){await this.sr(),this.Au.bn(),this.e4.bn(),this.k8.bn(),this.E8.bn(),this.oK.pn(Po,this.Os),await this.oK.Wu()}be(){this.lW=!0,this.k8.be()}ke(){this.lW=!1,this.k8.ke()}fH(){return!1}vH(t,e,i,s,n){throw new v("Adding native sideloaded text tracks is not supported on HbbTV")}J4(){}t6(){}yl(){}yP(){return{PM:0,IM:0,CM:0}}JP(){}mH(t){throw new v("Adding custom text tracks is not supported on HbbTV")}QP(){}iI(t,e,i,s,n,r,h,o,a){const u=new ru(t,e,i,s,n,r,h,a,o);return this.Au.tt(u),this.i4.tt(u),u}pH(){for(const t of this.Au.RI.slice())t.bn();this.Au.sr()}EF(t){this.Au.it(t),this.i4.it(t)}n5t(){const t=h.getElementsByTagName("object");for(let e=0;e<t.length;e++){const i=t.item(e);if("video/broadcast"===i.type){const t=i;return t.onPlayStateChange=this.r5t,0===t.playState&&(null==t.bindToCurrentChannel||t.bindToCurrentChannel.call(t)),t}}}i5t(){var t,e;if(!this.h5t||3===this.h5t.playState||0===this.h5t.playState)return Promise.resolve("");if(null==(t=this.s5t)?void 0:t.Pf)return null==(e=this.s5t)?void 0:e.Pf;this.s5t=new ue;try{null==this.h5t.stop||this.h5t.stop.call(this.h5t)}catch(t){Gn.Zw("Unable to stop broadcast for HbbTV",t),this.s5t.My(new v("Unable to stop broadcast for HbbTV"))}return this.s5t.Pf}constructor(t,e){super(),this.l3=t,this.Ic=e,this.ia=new $e,this.Ko=new gh,this.Au=new du,this.iH=void 0,this.sf=!1,this.$V=void 0,this.OF=qb.Jl,this.lW=!0,this.s5t=void 0,this.r5t=()=>{var t,e,i,s;(null==(t=this.h5t)?void 0:t.playState)&&((null==(e=this.s5t)?void 0:e.Pf)||2!==this.h5t.playState||this.i5t().catch(De),3===this.h5t.playState&&(null==(s=this.s5t)||null==(i=s.Xf)||i.call(s,String(this.h5t.playState)),this.s5t=void 0))},this.oK=new cJ(this),this.oK.wn(Po,this.Os),this.e4=new je([this.Au]),this.i4=new Co(this),this.k8=new hi,this.E8=new Ei(this.k8.je,this.c3,this.nt,this.Du,this.ja,this.wH),this.h5t=this.n5t(),this.i5t().catch(De)}},fJ=class extends dJ{get tH(){}get ht(){return this.TM}get rt(){return this.kM}get Hu(){return this.vW}set Hu(t){this.vW=t,this.Oc||this.o5t.play(t)}get tc(){return this.o5t.muted}set tc(t){this.o5t.muted=t}get Pl(){var t,e;return(null!=(e=null!=(t=this.o5t.volume)?t:null==this.o5t.getVolume?void 0:this.o5t.getVolume.call(this.o5t))?e:100)/100}set Pl(t){null==this.o5t.setVolume||this.o5t.setVolume.call(this.o5t,100*t)}get Yu(){return this.o5t.playPosition?this.o5t.playPosition/1e3:0}get ct(){return!this.o5t.playTime||this.o5t.playTime<0?1/0:this.o5t.playTime/1e3}get $c(){return this.o5t.playState===ai.O6t}get Ci(){return this.o5t.offsetHeight*Gn.Zs.nw}get Ti(){return this.o5t.offsetWidth*Gn.Zs.nw}get Oc(){return this.o5t.playState===ai.$jt}get Tl(){return r.Ol()}get Vc(){return this.rf}get LP(){return 0}get UP(){return 0}s6(t){super.s6(t),t.appendChild(this.o5t)}async On(t){if(t.Vm===A.IF){const e=await super.On(t);return await this.e5t(t),this.o5t.onPlayStateChange=this.a5t,e}throw new v("Unsupported media source configuration for HbbTV")}async e5t(t){this.o5t.type=kt(t.iC),this.o5t.data=t.iC,await super.e5t(t)}async bl(){await super.bl(),this.o5t.play(this.vW),this.wo(new ah(this.Yu))}Ml(){this.o5t.play(0),this.wo(new ac(this.Yu))}jc(t,e,i){this.o5t.seek(1e3*t),this.sf=!0,this.wo(new lc(this.Yu))}async sr(){void 0!==this.iH&&this.o5t.stop(),this.u5t&&(Gn.tm(this.u5t),this.u5t=void 0),await super.sr(),Xi(this.o5t),this.o5t.data&&this.o5t.removeAttribute("data"),this.TM.sr(),this.kM.sr()}async Wu(){await super.Wu(),Es(this.o5t)}be(){super.be(),this.o5t.style.display="block"}ke(){super.ke(),this.o5t.style.display="none"}U6t(t){const e=this.c5t(t);if(!e)throw new v("Selected track does not exist on HbbTV");null==this.o5t.selectComponent||this.o5t.selectComponent.call(this.o5t,e)}H6t(t){const e=this.c5t(t);if(!e)throw new v("Selected track does not exist on HbbTV");null==this.o5t.unselectComponent||this.o5t.unselectComponent.call(this.o5t,e)}c5t(t){var e;const i=null!=(e=null==this.o5t.getComponents?void 0:this.o5t.getComponents.call(this.o5t,t.type))?e:this.l5t();return this.d5t(i,t)}f5t(t){var e;const i=null!=(e=null==this.o5t.getCurrentActiveComponents?void 0:this.o5t.getCurrentActiveComponents.call(this.o5t,1))?e:this.l5t();this.TM.sr();for(let e=0;e<t.length;e++){const s=t.item(e);this.TM.tt(new hJ(s,s.language,this.TM.U?gW.qSt:gW.zSt,this,this._5t(i,s)))}}v5t(t){var e;const i=null!=(e=null==this.o5t.getCurrentActiveComponents?void 0:this.o5t.getCurrentActiveComponents.call(this.o5t,0))?e:this.l5t();this.kM.sr();for(let e=0;e<t.length;e++){const s=t.item(e);this.kM.tt(new hJ(s,String(s.aspectRatio),this.kM.U?wW.qSt:wW.zSt,this,this._5t(i,s)))}}l5t(){return{length:0,item:t=>{}}}_5t(t,e){return void 0!==this.d5t(t,e)}d5t(t,e){for(let i=0;i<t.length;i++){const s=t.item(i);if(this.g5t(s,e))return s}}g5t(t,e){return t.pid===e.pid&&t.componentTag===e.componentTag&&t.type===e.type&&t.encoding===e.encoding&&t.encrypted===e.encrypted}w5t(t){switch(t){case 0:return Ja.SRC_NOT_SUPPORTED;case 1:case 5:case 6:return Ja.NETWORK;default:return Ja.DECODE}}constructor(t,e,i){super(e,i),this.o5t=t,this.vW=1,this.TM=new mn,this.kM=new mn,this.rf=qb.Jl,this.m5t=void 0,this.u5t=void 0,this.a5t=()=>{if(!this.o5t.playState)return;this.OF=this.rf,this.p5t=this.y5t,this.y5t=this.o5t.playState;const t=this.ct;switch(t!==this.m5t&&(this.wo(new de(t)),this.m5t=t),this.u5t&&this.y5t!==ai.nd&&(Gn.tm(this.u5t),this.u5t=void 0),this.y5t){case ai.M6t:this.rf=qb.Jl;break;case ai.L6t:if(this.p5t===ai.M6t){var e;const t=null!=(e=null==this.o5t.getComponents?void 0:this.o5t.getComponents.call(this.o5t,1))?e:this.l5t();var i;const s=null!=(i=null==this.o5t.getComponents?void 0:this.o5t.getComponents.call(this.o5t,0))?i:this.l5t();if(0===t.length&&0===s.length)break;this.f5t(t),this.v5t(s)}this.rf=qb.Qn;break;case ai.nd:this.sf&&(this.sf=!1,this.wo(new qo(this.Yu))),this.wo(new $n(this.Yu)),this.rf=qb.Cf,this.u5t=Gn.$w(this.A5t,250);break;case ai.la:this.rf=qb.Jl,this.wo(new ku(new Fc(this.w5t(this.o5t.error))));break;case ai.O6t:this.wo(new Zu(this.Yu));case ai.$jt:case ai.B6t:}this.rf!==this.OF&&this.wo(new xr(this.Yu,this.rf))},this.A5t=()=>{this.wo(new Ph(this.Yu,void 0))}}};t();var _J=class extends dJ{get tH(){return this.QT}get ht(){return this.TM}get rt(){return this.kM}get Hu(){return this.QT.playbackRate}set Hu(t){this.QT.playbackRate=t}get tc(){return this.QT.muted}set tc(t){this.QT.muted=t}get Pl(){return this.QT.volume}set Pl(t){this.QT.volume=t}get Yu(){return this.QT.currentTime}get ct(){return this.QT.duration}get $c(){return this.QT.ended}get Ci(){return this.QT.offsetHeight*Gn.Zs.nw}get Ti(){return this.QT.offsetWidth*Gn.Zs.nw}get Oc(){return this.QT.paused}get Tl(){return r.Sn(this.QT.played)}get Vc(){return this.g3.Vc}get LP(){return this.QT.videoHeight}get UP(){return this.QT.videoWidth}s6(t){super.s6(t),t.appendChild(this.QT)}async On(t){if(t.Vm===A.IF){const e=await super.On(t);return await this.e5t(t),e}throw new v("Unsupported media source configuration for HbbTV")}async e5t(t){switch(t.uH){case ja.oC:case ja.aC:this.QT.setAttribute("crossorigin",t.uH);break;case ja.dk:default:this.QT.removeAttribute("crossorigin")}void 0!==t.IP?this.QT.preload=t.IP:this.QT.preload=Ds.EV,void 0!==t.cH?this.QT.title=t.cH:Qr(this.QT);const e=this.Hu;this.QT.src=t.iC,this.Hu=e,await super.e5t(t)}async bl(){await super.bl(),await this.QT.play()}Ml(){this.QT.pause()}jc(t,e,i){e&&this.QT.fastSeek?this.QT.fastSeek(t):this.QT.currentTime=t,this.sf=!0,this.wo(new lc(this.Yu))}async sr(){await super.sr(),Xi(this.QT),this.QT.src&&this.QT.removeAttribute("src"),this.TM.sr(),this.kM.sr()}async Wu(){await super.Wu(),this.df.Wu(),this.g3.Wu(),this.C4(),this.bH(),Es(this.QT)}be(){super.be(),this.QT.style.display="block",this.QT.style.height="100%",this.QT.style.width="100%"}ke(){super.ke(),this.QT.style.display="none"}E4(){this.tH.addEventListener("play",this.zF),this.tH.addEventListener("pause",this.XF),this.tH.addEventListener("timeupdate",this.PH),this.tH.addEventListener("progress",this.b5t),this.tH.addEventListener("loadstart",this.As),this.tH.addEventListener("ended",this.T5t),this.tH.addEventListener("ratechange",this.S5t),this.tH.addEventListener("volumechange",this.OLt),this.tH.addEventListener("durationchange",this.BLt),this.tH.addEventListener("loadedmetadata",this.k5t),this.tH.addEventListener("emptied",this.E5t),this.tH.addEventListener("seeked",this.P5t),this.tH.addEventListener("seeking",this.I5t),this.tH.addEventListener("error",this.C5t),_v()&&this.tH.addEventListener("encrypted",this.Z2)}C4(){this.tH.removeEventListener("play",this.zF),this.tH.removeEventListener("pause",this.XF),this.tH.removeEventListener("timeupdate",this.PH),this.tH.removeEventListener("progress",this.b5t),this.tH.removeEventListener("loadstart",this.As),this.tH.removeEventListener("ended",this.T5t),this.tH.removeEventListener("ratechange",this.S5t),this.tH.removeEventListener("volumechange",this.OLt),this.tH.removeEventListener("durationchange",this.BLt),this.tH.removeEventListener("loadedmetadata",this.k5t),this.tH.removeEventListener("emptied",this.E5t),this.tH.removeEventListener("seeked",this.P5t),this.tH.removeEventListener("seeking",this.I5t),this.tH.removeEventListener("error",this.C5t),this.tH.removeEventListener("encrypted",this.Z2)}UH(t){this.$V=t,this.wo(new ku(this.$V))}DH(){const t=this.QT.audioTracks,e=this.QT.videoTracks;t&&(t.addEventListener("addtrack",this.R5t),t.addEventListener("removetrack",this.x5t),t.addEventListener("change",this.D5t)),e&&(e.addEventListener("addtrack",this.N5t),e.addEventListener("removetrack",this.B5t),e.addEventListener("change",this.M5t))}bH(){const t=this.QT.audioTracks,e=this.QT.videoTracks;t&&(t.removeEventListener("addtrack",this.R5t),t.removeEventListener("removetrack",this.x5t),t.removeEventListener("change",this.D5t)),e&&(e.removeEventListener("addtrack",this.N5t),e.removeEventListener("removetrack",this.B5t),e.removeEventListener("change",this.M5t))}hh(t){for(let e=0;e<t.U;e++){t.DI(e).zM()}}constructor(t,e,i){super(e,i),this.QT=t,this.TM=new mn,this.kM=new mn,this.L5t=void 0,this.zF=()=>{this.wo(new ah(this.Yu))},this.XF=()=>{this.wo(new ac(this.Yu))},this.PH=()=>{const t=this.Yu,e=this.Uc,i=void 0!==this.L5t,s=i&&this.L5t!==t;(e||!i||s)&&(this.wo(new Ph(t,void 0)),this.L5t=t)},this.b5t=()=>{this.wo(new xu(this.Yu))},this.As=()=>{this.wo(new ji)},this.T5t=()=>{this.wo(new Zu(this.Yu))},this.S5t=()=>{this.wo(new Sr(this.Yu,this.Hu))},this.OLt=()=>{this.wo(new Wo(this.Yu,this.Pl))},this.BLt=()=>{this.wo(new de(this.ct))},this.k5t=()=>{},this.E5t=()=>{},this.P5t=()=>{this.sf&&(this.sf=!1),this.wo(new qo(this.Yu))},this.I5t=()=>{this.wo(new lc(this.Yu))},this.GF=t=>{this.OF!==t.readyState&&(this.OF=t.readyState,this.wo(t))},this.qF=()=>{this.wo(new $n(this.Yu))},this.C5t=()=>{if(null!==this.QT.error){const e=this.QT.error;var t;this.UH(new Fc(null!=(t=e.code)?t:Ja.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.Z2=t=>{this.wo(new ct(t.initDataType,t.initData||new ArrayBuffer(0)))},this.N5t=t=>{const e=this.QT.videoTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];FE(this.kM,i)||this.kM.tt(new vT(i))}},this.B5t=t=>{const e=[],i=this.QT.videoTracks;if(i){for(const t of this.kM.RI)UE(i,t.WM)||e.push(t);for(const t of e)this.kM.it(t)}},this.M5t=t=>{this.hh(this.kM)},this.R5t=t=>{const e=this.QT.audioTracks;if(e)for(let t=0;t<e.length;t++){const i=e[t];FE(this.TM,i)||this.TM.tt(new Ki(i))}},this.x5t=t=>{const e=[],i=this.QT.audioTracks;if(i){for(const t of this.TM.RI)UE(i,t.WM)||e.push(t);for(const t of e)this.TM.it(t)}},this.D5t=t=>{this.hh(this.TM)},this.g3=new pD(this),this.g3.wn(cb.Lf,this.GF),this.g3.t3(new So(this)),this.df=new $R(this),this.df.wn(cb.nd,this.qF),this.E4(),this.DH()}},vJ=[Uv.no,Uv.Ff,cb.nd,Uv.$f,Uv.If,Uv.Df,Uv.Vf,Uv.Cp,Uv.Ip,Uv.Xu,Uv.zf,Uv.Rf,Uv.qu,Uv.Bl,Uv.Qp,Uv.Lp,Uv.Bp],gJ=class extends Re{get ht(){return this.rM.ht}get Sl(){return this.rM.Sl.ws()}get dM(){}get Ku(){return this.rM.Ku}set Ku(t){t&&this.rM.YV(t)}get bt(){return this.ZV}get Yu(){return this.rM.Yu}set Yu(t){this.rM.jc(t)}get rH(){return this.hH}get ct(){return this.rM.ct}get $c(){return this.rM.$c}get Rc(){return this.Wl}get lt(){return this.$V}get vP(){}get wP(){return!1}get XP(){return this.rM.XP}set XP(t){this.rM.XP=t}get qP(){return this.AW}get pP(){return yh({},{PM:0,IM:0,CM:0,RM:0,xM:0,DM:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.rM.yP())}get tc(){return this.rM.tc}set tc(t){this.rM.tc=t}get TP(){return!0}get Oc(){return this.rM.Oc}get Hu(){return this.rM.Hu}set Hu(t){this.rM.Hu=t}get Tl(){return this.rM.Tl.ws()}get IP(){return this.eH}set IP(t){this.eH=t,this.iH&&(this.iH.IP=t)}get Vc(){return this.rM.Vc}get Cl(){return this.rM.Cl.ws()}get Uc(){return this.rM.Uc}get sH(){return this.rM.sH}get nt(){return this.Au}get LP(){return this.rM.LP}get rt(){return this.rM.rt}get UP(){return this.rM.UP}get Pl(){return this.rM.Pl}set Pl(t){this.rM.Pl=t}iI(t){return this.rM.mH(t)}jP(){return!1}GP(){return this.rM.ja}QP(){}ke(){this.rM.ke()}JP(){this.rM.JP()}Ml(){this.rM.Ml()}async bl(){await this.rM.bl()}$P(){throw new v("Recreate media source is not supported on HbbTV")}uP(t,e){this.rM.jc(t)}async _a(t,e,i){var s;Bv(i),this.ZV=t;const n={Vm:A.IF,iC:t.src,yS:t.type,oH:this.aH(t),IP:this.eH,uH:t.crossOrigin,cH:null==(s=e.metadata)?void 0:s.title};this.iH=await this.rM.On(n),e.textTracks&&this.dH(e.textTracks),dk(this.nt)}be(){this.rM.be()}YP(){}ZP(){}xa(){return this.rM.wH}async sr(){this.ZV=void 0,this.$V=void 0,this.Wl=void 0,this.iH=void 0,await this.gH.sr(),this.rM.pH(),await this.rM.sr()}async bn(){await this.sr(),this.yH.bn(),this.rM.pn(vJ,this.Os),this.rM.pn(Yo.la,this.ll),await this.rM.Wu(),this.mn.bn(),this.Au.bn(),await this.gH.bn()}UH(t,e){this.$V||(this.$V=e,this.Wl=t,this.wo(new _n(t)))}dH(t){for(const e of t)void 0!==e.src&&this.gH.yF(e)}aH(t){if(!t.contentProtection)return[];const e=[];return t.contentProtection.widevine&&e.push({rT:tv,LV:t.contentProtection.widevine.licenseAcquisitionURL,xH:[]}),t.contentProtection.playready&&e.push({rT:U,LV:t.contentProtection.playready.licenseAcquisitionURL,xH:[]}),this.O5t(e,t.contentProtection.preferredKeySystems)}O5t(t,e){if(void 0===e||0===e.length)return t;const i=t=>{const i=e.indexOf(t.rT.zm);return i>=0?i:e.length};return ln(t,((t,e)=>i(t)-i(e)))}constructor(t,e,i,s){super(),this.iH=void 0,this.hH=new hh,this.ZV=void 0,this.$V=void 0,this.Wl=void 0,this.eH=Ds.sW,this.ll=t=>{const e=t.lt,i=e.code,s=new ke(rT(i),"Something went wrong during HbbTV playback.",e),n=Bc(s);this.UH(s,n)},this.mn=new RI(t),this.mn.kn(),this.rM=Jl()?new _J(h.createElement(Be.wl),this.mn,s):new fJ(h.createElement("object"),this.mn,s),this.rM.s6(t),this.rM.wn(vJ,this.Os),this.rM.wn(Yo.la,this.ll),this.yH=new Ir(this.rM,!0),this.yH.wn(lb,this.Os),this.gH=new kn(this.rM,e),this.Au=new je([this.rM.nt,this.gH.Z]),this.AW=i}};WE(new class{kC(t,e,i,s,n,r,h,o){return new gJ(t,i,r,h)}HH(t,e){var i;return!(!ds.Wv||t.type!==Ot.dC&&!wc(t.type)&&!Ib(t.type))&&!(Jl()&&!(null==(i=t.contentProtection)?void 0:i.useOipfDrmAgent)&&(!t.contentProtection||_v()))}async WH(t){return!!await $A(t,!0)}qH(){return!1}constructor(){this.zH=hu.wV}});export{n as a,Jo as b,t as c,ds as d,Ee as e,di as f,nh as g,Es as h,Ol as i,Vl as j,mh as k,Hl as l,Wl as m,Gl as n,Qr as o,Ql as p,Gn as q,De as r,Zi as s,ht as t,Ed as u,Pd as v,yh as w,ln as x,L as y,G as z,bv as A,Ko as B,Qe as C,us as D,Bv as E,Zn as F,Ov as G,Re as H,o as I,Uv as J,ue as K,X as L,qa as M,lp as N,Ph as O,Jy as P,Xe as Q,sn as R,ba as S,Be as T,nT as U,Fi as V,Aa as W,Yo as X,ns as Y,YS as Z,ZS as _,cb as $,xr as aa,qb as ba,Xb as ca,Gb as da,zt as ea,Tt as fa,Tn as ga,$n as ha,Ir as ia,_n as ja,BB as ka,Ic as la,Qt as ma,r as na,Cb as oa,Rb as pa,Bb as qa,zb as ra,ac as sa,ah as ta,de as ua,Sr as va,Zu as wa,lc as xa,qo as ya,Wo as za,Ge as Aa,Kb as Ba,Yb as Ca,tT as Da,Un as Ea,qE as Fa,si as Ga,D as Ha,pP as Ia,Ce as Ja,qP as Ka,KP as La,fI as Ma,Oo as Na,to as Oa,EI as Pa,RI as Qa,Jn as Ra,wu as Sa,DI as Ta,LI as Ua,Ye as Va,OI as Wa,aC as Xa,bC as Ya,TC as Za,IC as _a,xu as $a,ji as ab,JR as bb,zD as cb,XD as db,GD as eb,KD as fb,jD as gb,YD as hb,TN as ib,SN as jb,ui as kb,SB as lb,kB as mb,OB as nb,UB as ob,hM as pb,oM as qb,aM as rb,uM as sb,fM as tb,_M as ub,vM as vb,AO as wb,bO as xb,zs as yb,Ac as zb,MK as Ab,YK as Bb,BZ as Cb};